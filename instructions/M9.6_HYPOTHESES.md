# M9.6 Hypotheses

**Sprint:** M9.6 Enterprise Controls  
**Created:** 2026-01-03  

---

## Hypotheses Table

| # | Hypothesis | Confidence | Failure Mode | Mitigation | Post-Impl Outcome |
|---|------------|------------|--------------|------------|-------------------|
| H1 | Policy resolution between org-default and branch-override may produce inconsistent results if both exist | 80% | Bookings accepted/rejected inconsistently | Deterministic resolution: branch-specific wins, else org-default | |
| H2 | Timezone conversion bugs in operating hours may allow/reject bookings at wrong times | 70% | Off-by-one hour errors at DST boundaries | Store times in branch timezone; convert on comparison | |
| H3 | Capacity rule off-by-one may cause overbooking or false rejections | 60% | Extra party squeezed in; or blocked when 1 slot available | Use `>=` for limit checks; E2E boundary tests | |
| H4 | Blackout range overlap with operating hours may cause confusion | 50% | Blackout created during closed hours (no impact) | Validate blackout within operating hours | |
| H5 | Replay endpoint may allow cross-tenant event injection | 90% | Malicious L5 replays other org's webhook | Strict orgId validation on replay target | |
| H6 | Circuit breaker may disable endpoints incorrectly (false positive) | 40% | Transient network issue triggers permanent disable | Use `disabledUntil` with auto-reset; not permanent disable | |
| H7 | Circuit breaker threshold too low may cause frequent disruptions | 50% | Normal 5xx spikes trigger breaker | Configurable threshold (default 5) | |
| H8 | SLA metrics may return incorrect counts due to timezone misalignment | 60% | Off-by-day aggregation | Aggregate in branch timezone | |
| H9 | Blackout overlap detection may have edge cases (abutting ranges) | 40% | Two adjacent blackouts treated as overlap | Use exclusive end bounds | |
| H10 | ICS timezone param injection could cause malformed output | 30% | Invalid TZID in calendar | Validate against IANA timezone list | |

---

## Hypothesis Status Legend

- **Pre-Implementation**: Hypothesis formed, mitigation planned
- **Post-Implementation**: Outcome documented after code complete

---

## Post-Implementation Outcomes

*(To be filled after implementation)*
