# T1.23 E2E Failure Taxonomy

_Generated: 2026-01-02_

## Summary

| Status | Count |
|--------|-------|
| **PASS** | 29 |
| **FAIL** | 28 |
| **TIMED_OUT** | 0 ✅ |
| **KILLED** | 0 ✅ |

## ✅ Stabilization Goal Achieved

**TIMED_OUT = 0, KILLED = 0**

All test files complete within their 120s per-file timeout. No tests are killed by the deadline enforcer. The E2E infrastructure is now deterministic.

## Passing Files (29)

| File | Duration |
|------|----------|
| test/e2e/auth.e2e-spec.ts | 4s |
| test/b3-multi-tenant.e2e-spec.ts | 4s |
| test/e2e/badge-revocation.e2e-spec.ts | 3s |
| test/e27-costing.e2e-spec.ts | 3s |
| test/m2-shifts-scheduling.e2e-spec.ts | 3s |
| test/m7-service-providers.e2e-spec.ts | 3s |
| test/e22-franchise.e2e-spec.ts | 3s |
| test/blackbox/billing.blackbox.e2e-spec.ts | 3s |
| test/smoke/minimal-boot.e2e-spec.ts | 3s |
| test/e2e/inventory.slice.e2e-spec.ts | 2s |
| test/e2e/reservations.slice.e2e-spec.ts | 2s |
| test/e2e/auth.slice.e2e-spec.ts | 2s |
| test/e2e/billing.slice.e2e-spec.ts | 2s |
| test/e2e/kds.slice.e2e-spec.ts | 2s |
| test/e2e/devportal.slice.e2e-spec.ts | 2s |
| test/e2e/purchasing.slice.e2e-spec.ts | 2s |
| test/e2e/orders.slice.e2e-spec.ts | 2s |
| test/e2e/payments.slice.e2e-spec.ts | 2s |
| test/e2e/franchise.slice.e2e-spec.ts | 2s |
| test/e2e/inventory-kpis.e2e-spec.ts | 2s |
| test/e2e/pos-imports-bisect.e2e-spec.ts | 2s |
| test/e2e/pos-isolation.e2e-spec.ts | 2s |
| test/e2e/webhook.replay.slice.e2e-spec.ts | 2s |
| test/e2e/metrics.e2e-spec.ts | 2s |
| test/e2e/forecast.slice.e2e-spec.ts | 2s |
| test/e2e/docs.e2e-spec.ts | 2s |
| test/e2e/sse.smoke.e2e-spec.ts | 2s |
| test/e2e/events-isolation.e2e-spec.ts | 1s |
| test/e2e/minimal-harness.e2e-spec.ts | 1s |

## Failing Files (28) — Non-Timeout Failures

These files fail fast (all under 5 seconds) due to:
- Missing routes/endpoints (404)
- Auth/permission issues
- Schema/validation mismatches
- Business logic errors

**These are NOT infrastructure issues** — they are legitimate test failures that require code/test fixes in future sprints.

| File | Duration | Category |
|------|----------|----------|
| test/e23-roles-access.e2e-spec.ts | 5s | Auth/RBAC |
| test/e2e/workforce.e2e-spec.ts | 4s | Business logic |
| test/e2e/inventory.e2e-spec.ts | 4s | Business logic |
| test/e2e/pos.e2e-spec.ts | 4s | Business logic |
| test/e2e/bookings.e2e-spec.ts | 4s | Business logic |
| test/e2e/reports.e2e-spec.ts | 4s | Missing routes |
| test/e24-subscriptions.e2e-spec.ts | 4s | Business logic |
| test/e2e/accounting.e2e-spec.ts | 4s | Schema mismatch |
| test/sse-security.e2e-spec.ts | 4s | Test setup |
| test/m1-kds-enterprise.e2e-spec.ts | 3s | Test setup |
| test/e26-kpis.e2e-spec.ts | 3s | Business logic |
| test/a3-pos.e2e-spec.ts | 3s | Precondition |
| test/e37-promotions.e2e-spec.ts | 3s | Business logic |
| test/smoke/di.e2e-spec.ts | 3s | DI issues |
| test/plan-rate-limit.e2e-spec.ts | 3s | Business logic |
| test/e23-platform-access.e2e-spec.ts | 3s | Auth/RBAC |
| test/e2e/franchise-rankings-cache.e2e-spec.ts | 3s | Cache logic |
| test/billing-simple.e2e-spec.ts | 3s | Business logic |
| test/e2e/franchise-budgets-cache.e2e-spec.ts | 3s | Cache logic |
| test/b2-apikey.e2e-spec.ts | 3s | Auth |
| test/webhook-security.e2e-spec.ts | 3s | Security |
| test/e2e/billing.e2e-spec.ts | 3s | Business logic |
| test/e2e/franchise-cache-invalidation.e2e-spec.ts | 3s | Cache logic |
| test/msr-card.e2e-spec.ts | 3s | Business logic |
| test/e2e/app-bisect.e2e-spec.ts | 3s | Diagnostic |
| test/auth.e2e-spec.ts | 3s | Auth |
| test/e2e/transfer.invalidation.slice.e2e-spec.ts | 2s | Cache logic |
| test/e2e/devportal.prod.slice.e2e-spec.ts | 1s | Environment |

## Why Failures Are Acceptable

1. **No timeouts** — All files complete within 120s
2. **No kills** — No files need to be force-terminated
3. **Fast failures** — All failing files complete in ≤5 seconds
4. **Deterministic** — Same failures every run
5. **Categorizable** — Failures are business logic/test issues, not infrastructure

## Next Steps

The 28 failing files should be addressed in future sprints:
1. Fix missing route tests (update endpoints or skip tests)
2. Update tests for schema changes
3. Fix precondition errors (ensure seeded data matches expectations)
4. Update auth/RBAC tests for current permission model
