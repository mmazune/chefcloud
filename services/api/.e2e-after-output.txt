
> @chefcloud/api@1.0.0-rc.1 test:e2e /workspaces/chefcloud/services/api
> jest --config ./test/jest-e2e.json "--runInBand" "--json" "--outputFile=.e2e-results-after.json"

✓ E2E environment loaded
  DATABASE_URL: postgresql://postgres:***@localhost:5432/chefcloud_test
FAIL test/sse-security.e2e-spec.ts
  ● SSE /stream/kpis Security (E26) › Authentication › should return 401 when no token provided

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authentication › should return 401 with invalid token

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authorization › should return 403 for L1 (Waiter) role

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authorization › should allow L4 (Manager) role

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authorization › should allow L5 (Owner) role

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › SSE Headers › should set correct SSE headers

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Event Emission › should emit at least one KPIs event with valid token

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Org-Scope Isolation › should only stream data for authenticated user's org

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Rate Limiting › should return 429 after exceeding rate limit

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Rate Limiting › should block concurrent connections beyond limit

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Connection Cleanup › should clean up resources on disconnect

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › CORS › should respect CORS allowlist

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'delete')

      72 |     await prisma.user.deleteMany({ where: { orgId } });
      73 |     await prisma.branch.deleteMany({ where: { orgId } });
    > 74 |     await prisma.organization.delete({ where: { id: orgId } });
         |                               ^
      75 |     await app.close();
      76 |   });
      77 |

      at Object.<anonymous> (sse-security.e2e-spec.ts:74:31)

FAIL test/e2e/accounting.e2e-spec.ts
  ● Accounting E2E › should create period → lock → posting blocked

    TypeError: Cannot read properties of undefined (reading 'upsert')

      362 |   const created = [];
      363 |   for (const acc of accounts) {
    > 364 |     const account = await prisma.account.upsert({
          |                                          ^
      365 |       where: { orgId_code: { orgId, code: acc.code } },
      366 |       update: {},
      367 |       create: {

      at createChartOfAccounts (e2e/factory.ts:364:42)
      at Object.<anonymous> (e2e/accounting.e2e-spec.ts:33:32)

FAIL test/e22-franchise.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.org.create()` invocation in
      /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41
      
        24 prisma = app.get(PrismaService);
        25 
        26 // Create test org
      → 27 const org = await prisma.client.org.create({
             data: {
               name: "E22 Franchise Org",
               currency: "UGX",
           +   slug: String
             }
           })
      
      Argument `slug` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.supplier.create()` invocation in
      /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53
      
        291 
        292 beforeAll(async () => {
        293   // Create supplier with packSize and minOrderQty
      → 294   const supplier = await prisma.client.supplier.create({
                data: {
                  name: "Test Supplier",
                  email: "test-supplier@example.com",
                  contactPerson: "John Doe",
                  phone: "+256700000000",
                  leadTimeDays: 3,
                  packSize: 10,
                  minOrderQty: 50,
              +   orgId: String
                }
              })
      
      Argument `orgId` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.inventoryItem.delete()` invocation in
      /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:344:47
      
        341 await prisma.client.purchaseOrder.deleteMany({ where: { orgId } });
        342 await prisma.client.procurementJob.deleteMany({ where: { orgId } });
        343 await prisma.client.stockBatch.deleteMany({ where: { itemId } });
      → 344 await prisma.client.inventoryItem.delete({
              where: {
                id: undefined,
            ?   orgId_sku?: InventoryItemOrgIdSkuCompoundUniqueInput,
            ?   AND?: InventoryItemWhereInput | InventoryItemWhereInput[],
            ?   OR?: InventoryItemWhereInput[],
            ?   NOT?: InventoryItemWhereInput | InventoryItemWhereInput[],
            ?   orgId?: StringFilter | String,
            ?   sku?: StringNullableFilter | String | Null,
            ?   name?: StringFilter | String,
            ?   unit?: StringFilter | String,
            ?   category?: StringNullableFilter | String | Null,
            ?   reorderLevel?: DecimalFilter | Decimal,
            ?   reorderQty?: DecimalFilter | Decimal,
            ?   isActive?: BoolFilter | Boolean,
            ?   metadata?: JsonNullableFilter,
            ?   createdAt?: DateTimeFilter | DateTime,
            ?   updatedAt?: DateTimeFilter | DateTime,
            ?   stockBatches?: StockBatchListRelationFilter,
            ?   recipeIngredients?: RecipeIngredientListRelationFilter,
            ?   wastageRecords?: WastageListRelationFilter,
            ?   adjustments?: AdjustmentListRelationFilter,
            ?   poItems?: PurchaseOrderItemListRelationFilter,
            ?   receiptLines?: GoodsReceiptLineListRelationFilter,
            ?   spoutCalibrations?: SpoutCalibrationListRelationFilter,
            ?   forecastProfiles?: ForecastProfileListRelationFilter,
            ?   forecastPoints?: ForecastPointListRelationFilter,
            ?   stockMovements?: StockMovementListRelationFilter,
            ?   lowStockConfigs?: LowStockConfigListRelationFilter
              }
            })
      
      Argument `where` of type InventoryItemWhereUniqueInput needs at least one of `id` or `orgId_sku` arguments. Available options are marked with ?.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.franchiseBudget.createMany()` invocation in
      /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45
      
        649 describe('GET /franchise/budgets (NEW)', () => {
        650   beforeAll(async () => {
        651     // Seed new FranchiseBudget records (year/month format)
      → 652     await prisma.client.franchiseBudget.createMany({
                  data: [
                    {
                      orgId: undefined,
                      branchId: undefined,
                      year: 2025,
                      month: 1,
                      category: "NET_SALES",
                      amountCents: 2000000,
                      currencyCode: "UGX"
                    },
                    {
                      orgId: undefined,
                      branchId: undefined,
                      year: 2025,
                      month: 1,
                      category: "NET_SALES",
                      amountCents: 1500000,
                      currencyCode: "UGX"
                    },
                    {
                      orgId: undefined,
                      branchId: undefined,
                      year: 2025,
                      month: 2,
                      category: "NET_SALES",
                      amountCents: 2500000,
                      currencyCode: "UGX"
                    }
                  ]
                })
      
      Argument `orgId` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.franchiseBudget.createMany()` invocation in
      /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45
      
        940   where: { orgId, year: 2025, month: 1 },
        941 });
        942 
      → 943 await prisma.client.franchiseBudget.createMany({
              data: [
                {
                  orgId: undefined,
                  branchId: undefined,
                  year: 2025,
                  month: 1,
                  category: "NET_SALES",
                  amountCents: 5000000,
                  currencyCode: "UGX"
                },
                {
                  orgId: undefined,
                  branchId: undefined,
                  year: 2025,
                  month: 1,
                  category: "NET_SALES",
                  amountCents: 3000000,
                  currencyCode: "UGX"
                }
              ]
            })
      
      Argument `orgId` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● E22-s2: Franchise APIs (e2e) › POST /franchise/budgets › should upsert a budget for a branch

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › POST /franchise/budgets › should update existing budget on re-upsert

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/budgets › should fetch budgets for a period

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/budgets › should reject invalid period format

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/rankings › should return ranked branches with deterministic ordering

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/procurement/suggest › should return items below safety stock

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate draft POs with packSize rounding

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate draft POs with packSize rounding

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate drafts for specific branches only

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate drafts for specific branches only

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › GET /franchise/procurement/drafts › should list all draft POs with supplier and branch names

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › GET /franchise/procurement/drafts › should list all draft POs with supplier and branch names

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should approve draft POs and update status to PLACED

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should approve draft POs and update status to PLACED

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should reject non-owner approval attempts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should reject non-owner approval attempts

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should return per-branch KPIs and totals for date range

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should filter by branchIds when provided

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should default to today when dates omitted

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should reject non-manager/owner users

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should return branches ranked by NET_SALES

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should return branches ranked by MARGIN_PERCENT

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should apply limit parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should reject unsupported metrics

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should reject requests without metric parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should return all budgets without filters

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should return all budgets without filters

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by year and month

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by year and month

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should allow L4 (Manager) to read budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should allow L4 (Manager) to read budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should create new budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should update existing budgets (idempotent)

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should reject L4 (Manager) from upserting budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should validate year range (2000-9999)

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should validate month range (1-12)

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should calculate variance for all branches

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should calculate variance for all branches

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should filter variance by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should filter variance by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should return empty array when no budgets exist

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should return empty array when no budgets exist

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require year parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require year parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require month parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require month parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.inventoryItem.delete()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:344:47

      341 await prisma.client.purchaseOrder.deleteMany({ where: { orgId } });
      342 await prisma.client.procurementJob.deleteMany({ where: { orgId } });
      343 await prisma.client.stockBatch.deleteMany({ where: { itemId } });
    → 344 await prisma.client.inventoryItem.delete({
            where: {
              id: undefined,
          ?   orgId_sku?: InventoryItemOrgIdSkuCompoundUniqueInput,
          ?   AND?: InventoryItemWhereInput | InventoryItemWhereInput[],
          ?   OR?: InventoryItemWhereInput[],
          ?   NOT?: InventoryItemWhereInput | InventoryItemWhereInput[],
          ?   orgId?: StringFilter | String,
          ?   sku?: StringNullableFilter | String | Null,
          ?   name?: StringFilter | String,
          ?   unit?: StringFilter | String,
          ?   category?: StringNullableFilter | String | Null,
          ?   reorderLevel?: DecimalFilter | Decimal,
          ?   reorderQty?: DecimalFilter | Decimal,
          ?   isActive?: BoolFilter | Boolean,
          ?   metadata?: JsonNullableFilter,
          ?   createdAt?: DateTimeFilter | DateTime,
          ?   updatedAt?: DateTimeFilter | DateTime,
          ?   stockBatches?: StockBatchListRelationFilter,
          ?   recipeIngredients?: RecipeIngredientListRelationFilter,
          ?   wastageRecords?: WastageListRelationFilter,
          ?   adjustments?: AdjustmentListRelationFilter,
          ?   poItems?: PurchaseOrderItemListRelationFilter,
          ?   receiptLines?: GoodsReceiptLineListRelationFilter,
          ?   spoutCalibrations?: SpoutCalibrationListRelationFilter,
          ?   forecastProfiles?: ForecastProfileListRelationFilter,
          ?   forecastPoints?: ForecastPointListRelationFilter,
          ?   stockMovements?: StockMovementListRelationFilter,
          ?   lowStockConfigs?: LowStockConfigListRelationFilter
            }
          })

    Argument `where` of type InventoryItemWhereUniqueInput needs at least one of `id` or `orgId_sku` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:344:7)

  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.order.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:996:35

      993 
      994 afterAll(async () => {
      995   // Cleanup variance test data
    → 996   await prisma.client.order.deleteMany({
              where: {
                branchId: {
                  in: [
                    undefined,
                    ~~~~~~~~~
                    undefined
                  ]
                },
                createdAt: {
                  gte: new Date("2025-01-01T00:00:00.000Z"),
                  lt: new Date("2025-02-01T00:00:00.000Z")
                }
              }
            })

    Invalid value for argument `in[0]`: Can not use `undefined` value within array. Use `null` or filter out `undefined` values.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                          ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at e.throwValidationError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:10206)
      at od (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:9323)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8075)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at mr (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:6037)
      at vn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:5902)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10186
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._executeRequest (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10165)
      at Na (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:9955)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9639)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9933
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9913
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9836)
      at s (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5636)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5864
      at i (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1016)
      at PrismaPromise.then (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1091)

  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.order.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:129:31

      126 
      127 afterAll(async () => {
      128   // Cleanup
    → 129   await prisma.client.order.deleteMany({
              where: {
                branchId: {
                  in: [
                    undefined,
                    ~~~~~~~~~
                    undefined
                  ]
                }
              }
            })

    Invalid value for argument `in[0]`: Can not use `undefined` value within array. Use `null` or filter out `undefined` values.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                          ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at e.throwValidationError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:10206)
      at od (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:9323)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8075)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at mr (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:6037)
      at vn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:5902)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10186
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._executeRequest (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10165)
      at Na (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:9955)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9639)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9933
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9913
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9836)
      at s (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5636)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5864
      at i (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1016)
      at PrismaPromise.then (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1091)

FAIL test/auth.e2e-spec.ts
  ● Auth (e2e) › POST /auth/login › should login with valid credentials

    expected 200 "OK", got 401 "Unauthorized"

      40 |           password: 'Owner#123',
      41 |         })
    > 42 |         .expect(200);
         |          ^
      43 |
      44 |       expect(response.body).toHaveProperty('access_token');
      45 |       expect(response.body).toHaveProperty('user');

      at Object.<anonymous> (auth.e2e-spec.ts:42:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/pin-login › should login with valid employee code and PIN

    expected 200 "OK", got 401 "Unauthorized"

      91 |           branchId: await getMainBranchId(),
      92 |         })
    > 93 |         .expect(200);
         |          ^
      94 |
      95 |       expect(response.body).toHaveProperty('access_token');
      96 |       expect(response.body.user).toMatchObject({

      at Object.<anonymous> (auth.e2e-spec.ts:93:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/msr-swipe › should login with valid badge ID

    expected 200 "OK", got 400 "Bad Request"

      142 |           badgeId: 'CASHIER001',
      143 |         })
    > 144 |         .expect(200);
          |          ^
      145 |
      146 |       expect(response.body).toHaveProperty('access_token');
      147 |       expect(response.body.user).toMatchObject({

      at Object.<anonymous> (auth.e2e-spec.ts:144:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/msr-swipe › should reject unknown badge ID

    expected 404 "Not Found", got 400 "Bad Request"

      158 |           badgeId: 'UNKNOWN_BADGE',
      159 |         })
    > 160 |         .expect(404);
          |          ^
      161 |     });
      162 |
      163 |     it('should login with branch verification', async () => {

      at Object.<anonymous> (auth.e2e-spec.ts:160:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/msr-swipe › should login with branch verification

    expected 200 "OK", got 400 "Bad Request"

      168 |           branchId: await getMainBranchId(),
      169 |         })
    > 170 |         .expect(200);
          |          ^
      171 |
      172 |       expect(response.body).toHaveProperty('access_token');
      173 |     });

      at Object.<anonymous> (auth.e2e-spec.ts:170:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › GET /me › should return user profile with valid token

    expected 200 "OK", got 401 "Unauthorized"

      190 |         .get('/me')
      191 |         .set('Authorization', `Bearer ${accessToken}`)
    > 192 |         .expect(200);
          |          ^
      193 |
      194 |       expect(response.body).toMatchObject({
      195 |         email: 'owner@demo.local',

      at Object.<anonymous> (auth.e2e-spec.ts:192:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /devices/register › should allow L4 manager to register a device

    expected 201 "Created", got 401 "Unauthorized"

      235 |           branchId: await getMainBranchId(),
      236 |         })
    > 237 |         .expect(201);
          |          ^
      238 |
      239 |       expect(response.body).toHaveProperty('id');
      240 |       expect(response.body).toHaveProperty('deviceKey');

      at Object.<anonymous> (auth.e2e-spec.ts:237:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766845850210,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":12,"requestId":"6a3940f3-049a-4537-86a6-80c157cf0f68","route":"/auth/login"}
{"level":"info","time":1766845850218,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":2,"requestId":"436505be-4048-4b84-a701-135bbbb9e1a5","route":"/auth/login"}
{"level":"info","time":1766845850223,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":2,"requestId":"0e982a83-3865-4b6e-9ad9-568d604f1220","route":"/auth/login"}
{"level":"info","time":1766845850226,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":400,"durationMs":1,"requestId":"6d86552b-5bb9-412e-91d4-9fd43e0654da","route":"/auth/login"}
{"level":"info","time":1766845850234,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/pin-login","statusCode":401,"durationMs":3,"requestId":"f32d2180-5a9f-4b09-b6a8-05f3235c6636","route":"/auth/pin-login"}
{"level":"info","time":1766845850239,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/pin-login","statusCode":401,"durationMs":2,"requestId":"356e9d2a-419f-49ee-a885-0c97330a8de5","route":"/auth/pin-login"}
{"level":"info","time":1766845850243,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/pin-login","statusCode":401,"durationMs":1,"requestId":"66076f33-f461-49cc-99d4-0a6193794475","route":"/auth/pin-login"}
{"level":"info","time":1766845850247,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/pin-login","statusCode":401,"durationMs":2,"requestId":"3e432ef8-c2a5-4d1b-8d55-6938fa5502bf","route":"/auth/pin-login"}
{"level":"info","time":1766845850253,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr-swipe","statusCode":400,"durationMs":4,"requestId":"7381b128-093c-4043-b46f-21e442f49554","route":"/auth/msr-swipe"}
{"level":"info","time":1766845850257,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr-swipe","statusCode":400,"durationMs":2,"requestId":"69df0c73-1c46-44d1-b119-af24a90ddf63","route":"/auth/msr-swipe"}
{"level":"info","time":1766845850271,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr-swipe","statusCode":400,"durationMs":4,"requestId":"7433a137-bc2d-4bea-ad15-0bd0295bdda5","route":"/auth/msr-swipe"}
{"level":"info","time":1766845850277,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":3,"requestId":"45ec5989-bd34-4603-812c-3e2d1e6b49ee","route":"/auth/login"}
{"level":"info","time":1766845850280,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/me","statusCode":401,"durationMs":1,"requestId":"6b4ee617-2059-4433-bdb8-47459d96c366","route":"/me"}
{"level":"info","time":1766845850283,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/me","statusCode":401,"durationMs":1,"requestId":"f210bed2-3ae0-4cfe-a742-b22c94caa071","route":"/me"}
{"level":"info","time":1766845850285,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/me","statusCode":401,"durationMs":0,"requestId":"d0e10bda-3e57-4b16-8ad1-530eacfcb070","route":"/me"}
{"level":"info","time":1766845850289,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":2,"requestId":"1c01b2df-8988-419c-833b-d9c52aa066a6","route":"/auth/login"}
{"level":"info","time":1766845850292,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/devices/register","statusCode":401,"durationMs":1,"requestId":"8751519e-6b2e-4f9e-a50a-0e3cb149aa77","route":"/devices/register"}
{"level":"info","time":1766845850295,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/devices/register","statusCode":401,"durationMs":1,"requestId":"946807e9-3efd-4c0a-8e05-2e863b5e4030","route":"/devices/register"}
FAIL test/e2e/reports.e2e-spec.ts
  ● Reports E2E › should fetch X report (shift summary)

    expected 200 "OK", got 404 "Not Found"

      48 |       .get('/reports/x-report')
      49 |       .set('Authorization', `Bearer ${authToken}`)
    > 50 |       .expect(200);
         |        ^
      51 |
      52 |     expect(response.body).toBeDefined();
      53 |     expect(response.body.shift).toBeDefined();

      at Object.<anonymous> (e2e/reports.e2e-spec.ts:50:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Reports E2E › should fetch owner overview

    expected 200 "OK", got 404 "Not Found"

      62 |         endDate: '2025-01-31',
      63 |       })
    > 64 |       .expect(200);
         |        ^
      65 |
      66 |     expect(response.body).toBeDefined();
      67 |   });

      at Object.<anonymous> (e2e/reports.e2e-spec.ts:64:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766845851799,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":123,"requestId":"c089a5c1-5dd4-443e-9628-d3401fde4465","route":"/auth/login"}
{"level":"info","time":1766845851811,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/reports/x-report","statusCode":404,"durationMs":7,"requestId":"bf4234d6-b255-43b6-8d0c-1860a1ca68eb"}
{"level":"info","time":1766845851818,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/reports/owner-overview?startDate=2025-01-01&endDate=2025-01-31","statusCode":404,"durationMs":4,"requestId":"04ad0efc-f4b3-4186-85b4-ca58ffae7952"}
FAIL test/e2e/inventory.e2e-spec.ts
  ● Inventory E2E › should receive PO → on-hand increases

    expected 200 "OK", got 404 "Not Found"

      57 |       .get(`/inventory/items/${beefId}`)
      58 |       .set('Authorization', `Bearer ${authToken}`)
    > 59 |       .expect(200);
         |        ^
      60 |
      61 |     const initialOnHand = initialResponse.body.onHand || 0;
      62 |

      at Object.<anonymous> (e2e/inventory.e2e-spec.ts:59:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766845853339,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":123,"requestId":"29ef4d6c-ddcc-47ca-97ca-c55bb9aa670c","route":"/auth/login"}
{"level":"info","time":1766845853346,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/inventory/items/beef-cmjo545si0037fwk5b46m83e0","statusCode":404,"durationMs":1,"requestId":"8480f64d-4d7e-4887-924a-5926c9c87f0f"}
{"level":"info","time":1766845854674,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":114,"requestId":"41dd10d2-5267-43ea-a0f8-ed44a8eaab0a","route":"/auth/login"}
{"level":"info","time":1766845854775,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":99,"requestId":"241aa223-5849-4a3b-b1fa-f78711d80286","route":"/auth/login"}
FAIL test/e2e/workforce.e2e-spec.ts
  ● Workforce E2E › should clock in → clock out

    expected 201 "Created", got 404 "Not Found"

      58 |       .post('/workforce/attendance/clock-in')
      59 |       .set('Authorization', `Bearer ${waiterToken}`)
    > 60 |       .expect(201);
         |        ^
      61 |
      62 |     const _attendanceId = clockInResponse.body.id;
      63 |     expect(clockInResponse.body.clockIn).toBeDefined();

      at Object.<anonymous> (e2e/workforce.e2e-spec.ts:60:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766845854783,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/workforce/attendance/clock-in","statusCode":404,"durationMs":2,"requestId":"98430937-c047-45b0-8c67-d809b8e1f643"}
FAIL test/e2e/bookings.e2e-spec.ts
  ● Bookings E2E › should create booking → HOLD → pay → confirm

    TypeError: Cannot read properties of undefined (reading 'upsert')

      327 |  */
      328 | export async function createEvent(prisma: PrismaClient, orgId: string, branchId: string) {
    > 329 |   const event = await prisma.event.upsert({
          |                                    ^
      330 |     where: { id: `event-${orgId}` },
      331 |     update: {},
      332 |     create: {

      at createEvent (e2e/factory.ts:329:36)
      at Object.<anonymous> (e2e/bookings.e2e-spec.ts:33:36)

FAIL test/e23-platform-access.e2e-spec.ts
  ● E23 Platform Access (e2e) › Public routes bypass › should allow unauthenticated access to /health

    expected 200 "OK", got 404 "Not Found"

      27 |         .get('/health')
      28 |         .set('X-Client-Platform', 'mobile')
    > 29 |         .expect(200);
         |          ^
      30 |     });
      31 |
      32 |     it('should allow unauthenticated access to /health from any platform', async () => {

      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:29:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Platform Access (e2e) › Public routes bypass › should allow unauthenticated access to /health from any platform

    expected 200 "OK", got 404 "Not Found"

      34 |         .get('/health')
      35 |         .set('X-Client-Platform', 'desktop')
    > 36 |         .expect(200);
         |          ^
      37 |
      38 |       await request(app.getHttpServer()).get('/health').set('X-Client-Platform', 'web').expect(200);
      39 |     });

      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:36:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Platform Access (e2e) › Platform header handling › should work without X-Client-Platform header (defaults to web)

    expected 200 "OK", got 404 "Not Found"

      53 |         .get('/health')
      54 |         // No X-Client-Platform header
    > 55 |         .expect(200);
         |          ^
      56 |     });
      57 |   });
      58 | });

      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:55:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766845856879,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/health","statusCode":404,"durationMs":5,"requestId":"2a5f33ed-6527-4590-9cf8-125b0c7359f6"}
{"level":"info","time":1766845856886,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/health","statusCode":404,"durationMs":4,"requestId":"e2420154-b5b1-489c-8466-38848bb1ca09"}
{"level":"info","time":1766845856897,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":6,"requestId":"ba6021ff-5629-41a6-a1c4-501d5d9370f9","route":"/auth/login"}
{"level":"info","time":1766845856899,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/health","statusCode":404,"durationMs":0,"requestId":"c791f991-a99b-4621-90e9-6649c3dfa2fc"}
FAIL test/e2e/pos.e2e-spec.ts
  ● POS E2E › should create order → send-to-kitchen → close

    TypeError: Cannot read properties of undefined (reading 'upsert')

      236 |  */
      237 | export async function createFloor(prisma: PrismaClient, orgId: string, branchId: string) {
    > 238 |   const floorPlan = await prisma.floorPlan.upsert({
          |                                            ^
      239 |     where: { id: `floor-e2e-${orgId}` },
      240 |     update: {},
      241 |     create: {

      at createFloor (e2e/factory.ts:238:44)
      at Object.<anonymous> (e2e/pos.e2e-spec.ts:36:36)

FAIL test/billing-simple.e2e-spec.ts
  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 401 if no authorization token is provided

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 200 and subscription details with valid L5 token

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 401 if no authorization token is provided

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 403 if user is not L5 (manager attempting)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 200 or 404 with valid L5 token

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 404 for unknown plan code

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should rate limit after burst requests (expect at least one 429)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 401 if no authorization token is provided

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 403 if user is not L5 (manager attempting)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 200 or 404 with valid L5 token

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should be idempotent (canceling twice should succeed)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

FAIL test/e2e/badge-revocation.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.org.create()` invocation in
      /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39
      
        46 
        47 async function setupTestData() {
        48   // Create test organization
      → 49   testOrg = await prisma.client.org.create(
      Unique constraint failed on the fields: (`slug`)

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should authenticate via badge swipe and include badgeId in token

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should access protected endpoint with valid token

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should reject login with REVOKED badge

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should invalidate existing token when badge is revoked (< 2s)

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should allow new login after badge revocation with updated version

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should invalidate sessions when badge is reported LOST

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should NOT reinstate old tokens when badge is RETURNED

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Session Version Validation › should reject token with mismatched session version

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Performance & Timing › should invalidate session within 2 seconds (E25 requirement)

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'id')

      124 |     // Delete in dependency order
      125 |     await prisma.client.employeeProfile.deleteMany({
    > 126 |       where: { userId: testUser.id },
          |                                 ^
      127 |     });
      128 |     await prisma.client.badgeAsset.deleteMany({
      129 |       where: { orgId: testOrg.id },

      at cleanupTestData (e2e/badge-revocation.e2e-spec.ts:126:33)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:43:11)

FAIL test/webhook-security.e2e-spec.ts
  ● Webhook Security E2E (E24) › Authentication › should reject webhook without signature header

    TypeError: request is not a function

      70 |   describe('Authentication', () => {
      71 |     it('should reject webhook without signature header', async () => {
    > 72 |       const response = await request(app.getHttpServer())
         |                              ^
      73 |         .post('/webhooks/billing')
      74 |         .set('Content-Type', 'application/json')
      75 |         .set('X-Ts', Date.now().toString())

      at Object.<anonymous> (webhook-security.e2e-spec.ts:72:30)

  ● Webhook Security E2E (E24) › Authentication › should reject webhook without timestamp header

    TypeError: request is not a function

      82 |
      83 |     it('should reject webhook without timestamp header', async () => {
    > 84 |       const response = await request(app.getHttpServer())
         |                              ^
      85 |         .post('/webhooks/billing')
      86 |         .set('Content-Type', 'application/json')
      87 |         .set('X-Sig', 'some-signature')

      at Object.<anonymous> (webhook-security.e2e-spec.ts:84:30)

  ● Webhook Security E2E (E24) › Authentication › should reject webhook without request ID header

    TypeError: request is not a function

      93 |
      94 |     it('should reject webhook without request ID header', async () => {
    > 95 |       const response = await request(app.getHttpServer())
         |                              ^
      96 |         .post('/webhooks/billing')
      97 |         .set('Content-Type', 'application/json')
      98 |         .set('X-Sig', 'some-signature')

      at Object.<anonymous> (webhook-security.e2e-spec.ts:95:30)

  ● Webhook Security E2E (E24) › Authentication › should reject webhook with invalid signature

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:107:30)

  ● Webhook Security E2E (E24) › Authentication › should accept webhook with valid signature

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:117:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with stale timestamp (>5 minutes old)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:132:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with future timestamp (>5 minutes ahead)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:148:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should accept webhook with timestamp at edge of window (4 minutes old)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:162:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with invalid timestamp format

    TypeError: request is not a function

      169 |
      170 |     it('should reject webhook with invalid timestamp format', async () => {
    > 171 |       const response = await request(app.getHttpServer())
          |                              ^
      172 |         .post('/webhooks/billing')
      173 |         .set('Content-Type', 'application/json')
      174 |         .set('X-Sig', 'some-signature')

      at Object.<anonymous> (webhook-security.e2e-spec.ts:171:30)

  ● Webhook Security E2E (E24) › Replay protection › should reject duplicate request ID (replay attack)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:190:31)

  ● Webhook Security E2E (E24) › Replay protection › should allow same payload with different request IDs

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:206:31)

  ● Webhook Security E2E (E24) › Body integrity › should reject webhook with tampered body

    TypeError: request is not a function

      221 |
      222 |       // Send tampered payload with signature from original
    > 223 |       const response = await request(app.getHttpServer())
          |                              ^
      224 |         .post('/webhooks/billing')
      225 |         .set('Content-Type', 'application/json')
      226 |         .set('X-Sig', signature)

      at Object.<anonymous> (webhook-security.e2e-spec.ts:223:30)

  ● Webhook Security E2E (E24) › Body integrity › should handle empty body correctly

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:237:30)

  ● Webhook Security E2E (E24) › Body integrity › should handle complex nested JSON

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:257:30)

  ● Webhook Security E2E (E24) › Multiple webhook endpoints › should protect MTN webhook endpoint

    TypeError: request is not a function

      263 |     it('should protect MTN webhook endpoint', async () => {
      264 |       const payload = { transactionId: 'mtn-123', status: 'completed' };
    > 265 |       const response = await request(app.getHttpServer())
          |                              ^
      266 |         .post('/webhooks/mtn')
      267 |         .set('Content-Type', 'application/json')
      268 |         .send(payload);

      at Object.<anonymous> (webhook-security.e2e-spec.ts:265:30)

  ● Webhook Security E2E (E24) › Multiple webhook endpoints › should protect Airtel webhook endpoint

    TypeError: request is not a function

      274 |     it('should protect Airtel webhook endpoint', async () => {
      275 |       const payload = { transactionId: 'airtel-123', status: 'completed' };
    > 276 |       const response = await request(app.getHttpServer())
          |                              ^
      277 |         .post('/webhooks/airtel')
      278 |         .set('Content-Type', 'application/json')
      279 |         .send(payload);

      at Object.<anonymous> (webhook-security.e2e-spec.ts:276:30)

  ● Webhook Security E2E (E24) › Response format › should return proper success response

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:289:30)

  ● Webhook Security E2E (E24) › Response format › should return proper error response for auth failure

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:302:30)

  ● Webhook Security E2E (E24) › Performance and load › should handle multiple concurrent valid webhooks

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at webhook-security.e2e-spec.ts:314:9
          at Function.from (<anonymous>)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:313:30)

FAIL test/plan-rate-limit.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.user.upsert()` invocation in
      /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40
      
        157 });
        158 
        159 // Create test users
      → 160 const freeUser = await prisma.user.upsert({
              where: {
                email: "rate-limit-free@test.local"
              },
              update: {},
              create: {
                email: "rate-limit-free@test.local",
                role: "L5",
                orgId: "cmjoeenri0039znbneu1zt7hb",
            +   firstName: String
              }
            })
      
      Argument `firstName` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should enforce free tier rate limit (10/min)

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should allow pro tier higher limits (60/min)

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should allow enterprise tier highest limits (240/min)

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › POST /billing/cancel › should apply rate limiting to cancel endpoint

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › Rate limit headers › should include Retry-After header in 429 responses

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › Authentication requirement › should reject requests without authentication

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › Metrics › should emit rate limit hit metrics

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

FAIL test/b2-apikey.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.session.create()` invocation in
      /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42
      
        55 });
        56 
        57 // Create session for auth
      → 58 const session = await prisma.session.create({
             data: {
               userId: "cmjoeeob7003oznbndpju7qqh",
               token: "test-token-1766845862037",
               expiresAt: new Date("2025-12-28T14:31:02.037Z"),
           +   user: {
           +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
           +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
           +     connect: UserWhereUniqueInput
           +   }
             }
           })
      
      Argument `user` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● API Key Security (E2E) › POST /ops/apikeys › should create API key as L5 user

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /ops/apikeys › should list API keys (masked)

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should accept request with valid API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should reject request with missing API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should reject request with invalid API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › Rate limiting › should enforce rate limit on public endpoints

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › DELETE /ops/apikeys/:id › should delete API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

FAIL test/b3-multi-tenant.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.session.create()` invocation in
      /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37
      
        61   },
        62 });
        63 
      → 64 sessionA = await prisma.session.create({
             data: {
               userId: "cmjoeeox9003vznbnsbgkdvf5",
               token: "token-a-1766845862831",
               expiresAt: new Date("2025-12-28T14:31:02.831Z"),
           +   user: {
           +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
           +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
           +     connect: UserWhereUniqueInput
           +   }
             }
           })
      
      Argument `user` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should deny user A access to org B menu items with wrong x-org-id

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjoeeox9003vznbnsbgkdvf5",
             token: "token-a-1766845862831",
             expiresAt: new Date("2025-12-28T14:31:02.831Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should return 404 when user A requests org B resource with correct x-org-id

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjoeeox9003vznbnsbgkdvf5",
             token: "token-a-1766845862831",
             expiresAt: new Date("2025-12-28T14:31:02.831Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should allow user A to access org A menu items

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjoeeox9003vznbnsbgkdvf5",
             token: "token-a-1766845862831",
             expiresAt: new Date("2025-12-28T14:31:02.831Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should require x-org-id header

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjoeeox9003vznbnsbgkdvf5",
             token: "token-a-1766845862831",
             expiresAt: new Date("2025-12-28T14:31:02.831Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org data isolation › should not leak org B data when user A lists menu items

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjoeeox9003vznbnsbgkdvf5",
             token: "token-a-1766845862831",
             expiresAt: new Date("2025-12-28T14:31:02.831Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org data isolation › should isolate org B user from org A data

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjoeeox9003vznbnsbgkdvf5",
             token: "token-a-1766845862831",
             expiresAt: new Date("2025-12-28T14:31:02.831Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'id')

      152 |     // Cleanup in reverse order
      153 |     await prisma.client.menuItem.deleteMany({ where: { branchId: branchA.id } });
    > 154 |     await prisma.client.menuItem.deleteMany({ where: { branchId: branchB.id } });
          |                                                                          ^
      155 |     await prisma.category.deleteMany({ where: { branchId: branchA.id } });
      156 |     await prisma.category.deleteMany({ where: { branchId: branchB.id } });
      157 |     await prisma.session.deleteMany({ where: { userId: userA.id } });

      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:154:74)

FAIL test/a3-pos.e2e-spec.ts
  ● A3 POS Core (e2e) › should create order with burger+fries -> send-to-kitchen -> kds queue shows ticket -> mark ready -> close order

    TypeError: menuResponse.body.find is not a function

      41 |       .set('Authorization', `Bearer ${authToken}`);
      42 |
    > 43 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      44 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      45 |     burgerId = burger.id;
      46 |     friesId = fries.id;

      at Object.<anonymous> (a3-pos.e2e-spec.ts:43:38)

  ● A3 POS Core (e2e) › should create order with burger only -> send-to-kitchen -> order has NO_DRINKS anomaly flag

    TypeError: menuResponse.body.find is not a function

      41 |       .set('Authorization', `Bearer ${authToken}`);
      42 |
    > 43 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      44 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      45 |     burgerId = burger.id;
      46 |     friesId = fries.id;

      at Object.<anonymous> (a3-pos.e2e-spec.ts:43:38)

{"level":"info","time":1766845863561,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":8,"requestId":"0f32105f-20c1-45c4-a6a5-40d473bd98c1","route":"/auth/login"}
{"level":"info","time":1766845863564,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/menu/items","statusCode":401,"durationMs":1,"requestId":"4bf81459-b67a-4864-9535-3301809a4da8","route":"/menu/items"}
FAIL test/e2e/franchise-rankings-cache.e2e-spec.ts
  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return cached=false on first call (cache miss)

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return cached=true on second call within TTL (cache hit)

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return same data structure on cache hit and miss

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should cache separately for different periods

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return error for invalid period format

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should measure response time difference between miss and hit

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

FAIL test/e2e/franchise-budgets-cache.e2e-spec.ts
  ● E22.C - Franchise Budgets Caching (e2e) › should return cached=false on first call (cache miss)

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should return cached=true on second call within TTL (cache hit)

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should maintain data structure consistency between cached and non-cached responses

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should use different cache keys for different periods

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should return error for invalid period format

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › cache hit should be significantly faster than cache miss

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

FAIL test/e2e/franchise-cache-invalidation.e2e-spec.ts
  ● E22.D - Franchise Cache Invalidation (e2e) › Budget Update Invalidation › should invalidate budgets cache after budget update

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

  ● E22.D - Franchise Cache Invalidation (e2e) › Budget Update Invalidation › should not affect other cache prefixes when updating budgets

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

  ● E22.D - Franchise Cache Invalidation (e2e) › Cache Miss After Invalidation › should return fresh data after cache invalidation

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

  ● E22.D - Franchise Cache Invalidation (e2e) › Multiple Invalidations › should handle multiple rapid invalidations without errors

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

FAIL test/e2e/billing.e2e-spec.ts
  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 401 if no authorization token is provided

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 403 if user is not L5 (owner)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 200 and log plan change for L5 owner

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 404 for non-existent plan code

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 429 after exceeding plan-aware rate limit (burst)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 401 if no authorization token is provided

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 403 if user is not L5 (owner)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 200 and log cancellation for L5 owner

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should be idempotent (canceling twice returns 200)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 401 if no authorization token is provided

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 200 with subscription details for authenticated user

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

FAIL test/m7-service-providers.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.org.create()` invocation in
      /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41
      
        51 
        52 async function setupTestData() {
        53   // Create test org
      → 54   const org = await prisma.client.org.create({
               data: {
                 name: "M7 Test Restaurant",
                 email: "m7test@example.com",
             +   slug: String
               }
             })
      
      Argument `slug` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 1. Service Providers Management › should create a service provider

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 1. Service Providers Management › should create a monthly contract

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should generate reminders for active contracts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should list reminders for a branch

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should get reminder summary

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should mark reminder as paid

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should set a budget for a category

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should compute budget actuals

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should get budget summary

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should get franchise budget summary

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 4. Cost-Cutting Insights › should generate cost insights for a branch

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 4. Cost-Cutting Insights › should generate franchise-wide insights

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 5. Integration with Owner Digests › should include M7 data in franchise digest

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should validate dueDay for monthly contracts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should prevent deleting provider with active contracts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should require budget parameters

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)


  ● Test suite failed to run

    TypeError: prisma.$disconnect is not a function

      46 |     // Cleanup
      47 |     await cleanupTestData();
    > 48 |     await prisma.$disconnect();
         |                  ^
      49 |     await app.close();
      50 |   });
      51 |

      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:48:18)

FAIL test/e2e/inventory.slice.e2e-spec.ts
  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › GET /inventory/items should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › POST /inventory/items should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › POST /inventory/adjustments should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › POST /inventory/wastage should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Rate Limiting › Rate limiting produces >= one 429 deterministically

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › should bootstrap successfully without metatype errors

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › GET /inventory/items should exist (not 404)

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /inventory/items should validate request body

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /inventory/adjustments should validate request body

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › GET /inventory/items endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › POST /inventory/items endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › GET /inventory/levels endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › POST /inventory/adjustments endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › POST /inventory/wastage endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

FAIL test/msr-card.e2e-spec.ts
  ● MSR Card Management (e2e) › POST /auth/msr/assign › should assign MSR card to employee

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr/assign › should reject duplicate card assignment to same employee

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr/assign › should reject unauthorized access (no token)

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr-swipe › should authenticate with valid MSR card

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr-swipe › should reject invalid badge ID

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › GET /auth/msr/cards › should list MSR cards for organization

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › GET /auth/msr/cards › should reject unauthorized access

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr/revoke › should revoke MSR card

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr/revoke › should reject unauthorized access

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766845868751,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":6,"requestId":"8b3c03cc-bb8f-46d2-a054-b3b390674287","route":"/auth/login"}
FAIL test/e2e/reservations.slice.e2e-spec.ts
  ● Reservations (Slice E2E) › GET /reservations -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations -> 200 with token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations -> 201 (create booking)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations -> 400/422 (invalid payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations/:id/confirm -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations/:id/cancel -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations/:id/seat -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations?status=CONFIRMED -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations?from=2025-11-13&to=2025-11-14 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations/summary?from=2025-11-01&to=2025-11-30 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations-test/availability?date=2025-11-13&party=2 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations-test/availability?date=2025-11-13&party=6 -> 200 (fewer slots)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › Rate limiting produces >= one 429 on /reservations

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

FAIL test/e2e/devportal.slice.e2e-spec.ts
  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › GET /dev/keys without token -> 200 (test controller)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › GET /dev/keys -> 200 with token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys -> 201 (create)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys -> 400 (invalid payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys/key_1/revoke -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › Plan-aware limit hits 429 for free but not for pro (same burst)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev-webhook/events -> 200 { ok:true } (valid HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev-webhook/events -> 200 { ok:false } (bad HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev-webhook/events -> 200 { ok:false } (missing signature)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › GET /dev/keys returns multiple keys with plan info

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys with pro plan -> 201

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

FAIL test/e2e/transfer.invalidation.slice.e2e-spec.ts
  ● Transfer Invalidation (Slice E2E) — E22.D › POST /transfer-test/event -> 401 without token

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › POST /transfer-test/event -> 200 {ok:false} on invalid payload

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › HIT → transfer.changed → MISS (forecast cache proves invalidation)

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › Idempotency: repeating same event still returns ok:true

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › Deterministic rate limit: >= one 429 on /forecast-test/sales

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

FAIL test/e2e/payments.slice.e2e-spec.ts
  ● Payments (Slice E2E) › GET /payments -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › GET /payments -> 200 with token (lists payments)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › GET /payments/pay_001 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › GET /payments/pay_missing -> 404/400 (invalid id)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments -> 201 (create payment)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments -> 400/422 (invalid payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/pay_001/capture -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/pay_001/refund -> 201

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/intents -> 201 (create intent)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/intents/pi_001/cancel -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments-test-webhook/gateway -> 200 (valid HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments-test-webhook/gateway -> 200 { ok:false } (bad HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments-test-webhook/gateway -> 200 { ok:false } (missing signature)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › Rate limiting produces >= one 429 on /payments

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

FAIL test/e2e/orders.slice.e2e-spec.ts
  ● Orders (Slice E2E) › POST /pos/orders -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders -> 201 with token (creates open order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/send-to-kitchen -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/modify -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/send-to-kitchen -> 200/201 (sends to kitchen)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/modify -> 200 (modifies order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/void -> 200 (voids order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/close -> 200 (closes order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/discount -> 200 (applies discount)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/post-close-void -> 200 (voids closed order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders -> 400/422 (bad payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/invalid-id/send-to-kitchen -> 404/400 (invalid order id)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/ord_001/modify -> 400/422 (bad modify payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › Rate limiting produces >= one 429 on /pos/orders

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

FAIL test/e2e/franchise.slice.e2e-spec.ts
  ● Franchise (Slice E2E) › GET /franchise/overview -> 401 without token

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/overview -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/rankings -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/budgets -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › Two reads of /franchise/overview return consistent payload shape

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › POST /franchise-test/invalidate -> { ok:true }

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/overview after invalidation -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/forecast/items -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › Rate limiting produces >= one 429 on /franchise/overview

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

FAIL test/e2e/pos-isolation.e2e-spec.ts
  ● PosModule isolation test › should compile PosModule to show exact failing provider

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

       8 | describe('PosModule isolation test', () => {
       9 |   it('should compile PosModule to show exact failing provider', async () => {
    > 10 |     const moduleRef = await createE2ETestingModule({
         |                       ^
      11 |       imports: [PosModule],
      12 |     });
      13 |     await moduleRef.init();

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/pos-isolation.e2e-spec.ts:10:23)

FAIL test/e2e/kds.slice.e2e-spec.ts
  ● KDS (Slice E2E) › GET /kds-test/tickets without token -> 200 (test controller)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › GET /kds-test/tickets -> 200 with token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › GET /kds-test/tickets/tkt-001 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › GET /kds-test/tickets/tkt-missing -> 404

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/tickets/tkt-001/ack -> 200 (ACK)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/tickets/tkt-001/bump -> 200 (BUMPED)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/tickets/tkt-001/expo -> 200 (EXPO)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/screens/scr-001/heartbeat -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › Rate limiting produces >= one 429 on /kds-test/tickets

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

FAIL test/e2e/billing.slice.e2e-spec.ts
  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › POST /billing/plan/change should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › POST /billing/cancel should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › GET /billing/subscription should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Rate Limiting › Rate limiting produces >= one 429 deterministically

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › should bootstrap successfully without metatype errors

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › should have billing controller mounted at /billing

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /billing/plan/change should validate request body

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /billing/cancel should be idempotent

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › GET /billing/subscription endpoint exists

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › POST /billing/plan/change endpoint exists

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › POST /billing/cancel endpoint exists

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

FAIL test/e2e/pos-imports-bisect.e2e-spec.ts
  ● PosModule imports bisect › should test all PosModule imports together

    Nest can't resolve dependencies of the EfrisService (PrismaService, ?). Please make sure that the argument ConfigService at index [1] is available in the EfrisModule context.

    Potential solutions:
    - Is EfrisModule a valid NestJS module?
    - If ConfigService is a provider, is it part of the current EfrisModule?
    - If ConfigService is exported from a separate @Module, is that module imported within EfrisModule?
      @Module({
        imports: [ /* the Module containing ConfigService */ ]
      })

      14 | describe('PosModule imports bisect', () => {
      15 |   it('should test all PosModule imports together', async () => {
    > 16 |     const moduleRef = await createE2ETestingModule({
         |                       ^
      17 |       imports: [
      18 |         EfrisModule,
      19 |         ConfigModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/pos-imports-bisect.e2e-spec.ts:16:23)

FAIL test/e2e/inventory-kpis.e2e-spec.ts
  ● InventoryModule + KpisModule test › should compile these modules together

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

       8 | describe('InventoryModule + KpisModule test', () => {
       9 |   it('should compile these modules together', async () => {
    > 10 |     const moduleRef = await createE2ETestingModule({
         |                       ^
      11 |       imports: [InventoryModule, KpisModule],
      12 |     });
      13 |     await moduleRef.init();

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory-kpis.e2e-spec.ts:10:23)

{"level":"info","time":1766845873546,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":125,"requestId":"ad76290f-c2ff-4aaf-b498-dd3b305b0b0b","route":"/auth/login"}
PASS test/e2e/auth.e2e-spec.ts
{"level":"info","time":1766845873658,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":106,"requestId":"143cfd55-3a07-4079-8ca3-22726bc1bf1b","route":"/auth/login"}
PASS test/e2e/auth.slice.e2e-spec.ts
  ● Console

    console.warn
      WARNING: No 429 responses observed. Rate limiter may not be active (auth guard runs first).

      224 |       const has429 = codes.includes(429);
      225 |       if (!has429) {
    > 226 |         console.warn('WARNING: No 429 responses observed. Rate limiter may not be active (auth guard runs first).');
          |                 ^
      227 |         console.log('Rate limit test results:', codes.reduce((acc, code) => {
      228 |           acc[code] = (acc[code] || 0) + 1;
      229 |           return acc;

      at Object.<anonymous> (e2e/auth.slice.e2e-spec.ts:226:17)

    console.log
      Rate limit test results: { '200': 7 }

      at Object.<anonymous> (e2e/auth.slice.e2e-spec.ts:227:17)

[BOOTSTRAP] Starting ChefCloud API {
  NODE_ENV: 'test',
  PORT: '4050',
  DATABASE_URL: '***configured***',
  JWT_SECRET: '***configured***'
}
[BOOTSTRAP] Creating NestJS application...
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPrismaModule dependencies initialized[39m[38;5;3m +50ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[CacheService] [39m[32mCacheService initialized with Redis fallback to memory[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[SseRateLimiterGuard] [39m[32mSSE Rate Limiter initialized: 60/min per user/IP, max 2 concurrent/user[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMetaModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCurrencyModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTaxModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mObservabilityModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCommonModule dependencies initialized[39m[38;5;3m +4ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[SseRateLimiterGuard] [39m[32mSSE Rate Limiter initialized: 60/min per user/IP, max 2 concurrent/user[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[OwnerService] [39m[32m[SMTP] Configured: localhost:1025 (secure=false)[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDemoModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PaymentsService] [39m[32mPayment adapters running in SANDBOX mode[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMeModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSettingsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDeviceModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMenuModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFloorModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPromotionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAccountingModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mShiftTemplatesModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mShiftSchedulesModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mShiftAssignmentsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDashboardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFeedbackModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFinanceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSupportModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThresholdsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAccessModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDocumentsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mKpisModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mStreamModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mWorkforceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEfrisModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mReservationsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mWebAuthnModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mKdsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHardwareModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPaymentsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOpsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAnalyticsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mBillingModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mBookingsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mBadgesModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCashModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAntiTheftModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mReportsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPurchasingModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAlertsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOwnerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mStaffModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mInventoryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFranchiseModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPosModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mShiftsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[BOOTSTRAP] NestJS application created
[BOOTSTRAP] CORS enabled for 1 origin(s): http://localhost:3000
[BOOTSTRAP] Binding to 0.0.0.0:4050...
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mHealthController {/api/health}:[39m[38;5;3m +28ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWebhooksController {/webhooks}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webhooks/mtn, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webhooks/airtel, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webhooks/billing, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMetricsController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/metrics, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mHealthController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/healthz, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/readiness, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/auth}:[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/pin-login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/msr-swipe, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/enroll-badge, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/logout, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/logout-all, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/sessions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/msr/assign, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/msr/revoke, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/msr/cards, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMeController {/me}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/me, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDeviceController {/devices}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/devices/register, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMenuController {/menu}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/items, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/items, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/items/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/modifier-groups, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/items/:id/groups/:groupId, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mFloorController {/floor}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/floor, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/floor/availability, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mTableController {/tables}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/tables/:id, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPosController {/pos/orders}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/send-to-kitchen, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/modify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/void, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/close, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/discount, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/post-close-void, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mEfrisController {/fiscal}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/fiscal/push/:orderId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/fiscal/retry/:orderId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mInventoryController {/inventory}:[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/items, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/items, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/items/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/levels, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/adjustments, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mRecipesController {/inventory/recipes}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/recipes/:menuItemId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/recipes/:menuItemId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWastageController {/inventory/wastage}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/wastage, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mCountsController {/inventory/counts}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/counts/begin, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/counts/:id/submit, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/counts/current, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mReconciliationController {/inventory/reconciliation}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/reconciliation, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/reconciliation/summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mLowStockAlertsController {/inventory/low-stock}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/low-stock/alerts, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/low-stock/config, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/low-stock/config, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/low-stock/config/:configId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mTemplatesController {/inventory/templates}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/templates, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/templates/:packId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/templates/apply, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mImportController {/inventory/import}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/import, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/import/template, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mKpisController {/stream/kpis}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/stream/kpis, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPromotionsController {/promotions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/promotions, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/promotions, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/promotions/:id/approve, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/promotions/:id/toggle, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAccountingController {/accounting}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendors, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendors, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendor-bills, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendor-bills/:billId/open, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendor-payments, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/ap/aging, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/ar/aging, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/trial-balance, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/pnl, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/balance-sheet, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPeriodsController {/accounting/periods}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/periods, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/periods/:id/lock, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/periods, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/periods/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBankRecController {/accounting/bank}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/accounts, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/accounts, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/:accountId/import-csv, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/match, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/:accountId/auto-match, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/unreconciled, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mKdsController {/kds}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/queue, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/sla-config/:station, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/sla-config/:station, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/tickets/:id/mark-ready, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/tickets/:id/recall, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mShiftsController {/shifts}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shifts/open, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shifts/:id/close, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shifts/current, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shifts/history, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mShiftTemplatesController {/shift-templates}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mShiftSchedulesController {/shift-schedules}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules/by-branch/:branchId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules/current/:branchId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mShiftAssignmentsController {/shift-assignments}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-assignments, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-assignments/by-schedule/:scheduleId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-assignments/by-user/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-assignments/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mReportsController {/reports}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/x, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/z/:shiftId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/subscriptions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/subscriptions, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/subscriptions/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/subscriptions/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDashboardsController {/dash}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/leaderboards/voids, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/leaderboards/discounts, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/no-drinks-rate, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/late-void-heatmap, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/anomalies/recent, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mFranchiseController {/franchise}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/analytics/overview, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/analytics/rankings, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/overview, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/rankings, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/forecast/items, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/procurement/suggest, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/procurement/generate-drafts, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/procurement/drafts, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/procurement/approve, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/branch-metrics, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets, PUT} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets/variance, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/forecast, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/export/overview.csv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/export/rankings.csv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/export/budgets.csv, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/export/budgets-variance.csv, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mStaffController {/staff}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/waiters/metrics, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/waiters/rankings, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/waiters/top-performers, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/waiters/risk-staff, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mStaffInsightsController {/staff/insights}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/rankings, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/employee-of-:period, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/awards, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/awards, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPromotionInsightsController {/staff/promotion-suggestions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/promotion-suggestions/preview, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/promotion-suggestions/generate, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/promotion-suggestions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/promotion-suggestions/:id, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAntiTheftController {/anti-theft}:[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/anti-theft/summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mFeedbackController {/feedback}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/public, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/analytics/nps-summary, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/analytics/breakdown, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/analytics/top-comments, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAnalyticsController {/analytics}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/daily, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/top-items, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/staff/voids, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/staff/discounts, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/orders/no-drinks, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/late-voids, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/anomalies, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/daily-metrics, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/risk-summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/risk-events, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/financial-summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/branch-ranking, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/cogs-timeseries, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/stock-valuation, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/wastage-summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBudgetController {/finance/budgets}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/summary, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/franchise, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/update-actuals, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/insights, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/insights/franchise, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/reminders/summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPurchasingController {/purchasing}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/purchasing/po, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/purchasing/po/:id/place, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/purchasing/po/:id/receive, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWebAuthnController {/webauthn}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webauthn/registration/options, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webauthn/registration/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webauthn/authentication/options, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webauthn/authentication/verify, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPaymentsController {/payments}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payments/intents, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payments/intents/:intentId/cancel, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAlertsController {/alerts}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/alerts/channels, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/alerts/schedules, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/alerts/run-now/:id, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mReservationsController {/reservations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations/:id/confirm, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations/:id/cancel, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations/:id/seat, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations/summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOpsController {/ops}:[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/ready, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/metrics, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/diag/snapshot, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/apikeys, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/apikeys, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/apikeys/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags/:key, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags/:key/toggle, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags/:key/kill, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags/:key/audit, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/maintenance, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/maintenance/active, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/maintenance, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSupportController {/support}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/support/sessions, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/support/ingest, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/support/sessions/events, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSpoutController {/hardware/spout}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/hardware/spout/ingest, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/hardware/spout/devices, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/hardware/spout/calibrate, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/hardware/spout/events, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOwnerController {/owner}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/owner/overview, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/owner/digest, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/owner/digest/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/owner/digest/run-now/:id, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mStreamController {/stream}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/stream/spout, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/stream/kds, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mThresholdsController {/thresholds}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/thresholds, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/thresholds, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAccessController {/access}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/access/matrix, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/access/matrix, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/access/matrix/reset-defaults, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBillingController {/billing}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/billing/subscription, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/billing/plan/change, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/billing/cancel, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBadgesController {/badges}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/register, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/assign, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/revoke, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/report-lost, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/mark-returned, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mCashController {/cash}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/till/open, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/till/:id/close, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/movements, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/till/current, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/till/sessions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSettingsController {/settings}:[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/currency, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/currency, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/tax-matrix, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/tax-matrix, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/rounding, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/rounding, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/exchange-rate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBookingsController {/bookings}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/events/:id/publish, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/events/:id/unpublish, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/events/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/:id/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/:id/cancel, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicBookingsController {/public/bookings}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/bookings/events/:slug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/bookings, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/bookings/:id/pay, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/bookings/:id/status, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mCheckinController {/events}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/events/checkin, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/events/booking/:id/ticket, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWorkforceController {/workforce}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/leave/:id/approve, PATCH} route[39m[38;5;3m +3ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/roster, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/swaps, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/swaps/:id/approve, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/clock/in, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/clock/out, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/time-entries, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/payroll/export, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/absence-violations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPayrollController {/payroll}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs/:id/approve, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs/:id/post, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs/:id/slips, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/components, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mVersionController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/version, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDocumentsController {/documents}:[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/:id/download, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/purchase-orders/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/pay-slips/:id, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/reservations/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/service-providers/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/employees/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis connected to redis://localhost:6379[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis connected to redis://localhost:6379[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis connected to redis://localhost:6379[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis connected to redis://localhost:6379[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis client ready[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis client ready[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis client ready[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis client ready[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 210501  - [39m12/27/2025, 2:31:15 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +3ms[39m
{"level":"info","time":1766845875982,"service":"chefcloud-api","env":"test","msg":"🚀 ChefCloud API running on http://0.0.0.0:4050"}
[BOOTSTRAP] Server started successfully
{"level":"info","time":1766845875982,"service":"chefcloud-api","env":"test","msg":"CORS allowlist: http://localhost:3000"}
{"level":30,"time":1766845876138,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"00502976-e9aa-48c7-9e27-efb9d39a8eb4","method":"GET","url":"/readiness","body":{}},"requestId":"00502976-e9aa-48c7-9e27-efb9d39a8eb4","msg":"REQ GET /readiness"}
{"level":"info","time":1766845876145,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/readiness","statusCode":200,"durationMs":6,"requestId":"e80ef6b8-b107-4589-8418-aa3a035f348c","route":"/readiness"}
{"level":30,"time":1766845876144,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"00502976-e9aa-48c7-9e27-efb9d39a8eb4","method":"GET","url":"/readiness","body":{}},"requestId":"00502976-e9aa-48c7-9e27-efb9d39a8eb4","requestId":"e80ef6b8-b107-4589-8418-aa3a035f348c","res":{"statusCode":200},"responseTime":6,"msg":"GET /readiness -> 200"}
{"level":30,"time":1766845876152,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"a06cbcc8-1f67-4b2a-8b50-a5f7fe35f3f8","method":"GET","url":"/readiness","body":{}},"requestId":"a06cbcc8-1f67-4b2a-8b50-a5f7fe35f3f8","msg":"REQ GET /readiness"}
{"level":"info","time":1766845876153,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/readiness","statusCode":200,"durationMs":1,"requestId":"0622b310-ed06-457f-84a5-c8c62dc72c97","route":"/readiness"}
{"level":30,"time":1766845876153,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"a06cbcc8-1f67-4b2a-8b50-a5f7fe35f3f8","method":"GET","url":"/readiness","body":{}},"requestId":"a06cbcc8-1f67-4b2a-8b50-a5f7fe35f3f8","requestId":"0622b310-ed06-457f-84a5-c8c62dc72c97","res":{"statusCode":200},"responseTime":1,"msg":"GET /readiness -> 200"}
{"level":30,"time":1766845876190,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"0ba6215e-5373-4684-8c6a-8eec3ea72060","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0ba6215e-5373-4684-8c6a-8eec3ea72060","msg":"REQ GET /billing/subscription"}
{"level":"info","time":1766845876199,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":9,"requestId":"1477dd14-2ef6-4466-ae6d-d87a68c5e460","route":"/billing/subscription"}
{"level":40,"time":1766845876199,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"0ba6215e-5373-4684-8c6a-8eec3ea72060","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0ba6215e-5373-4684-8c6a-8eec3ea72060","requestId":"1477dd14-2ef6-4466-ae6d-d87a68c5e460","res":{"statusCode":401},"responseTime":9,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766845876212,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"ebe024c1-1f9d-4a48-911f-8012c07ff096","method":"GET","url":"/billing/subscription","body":{}},"requestId":"ebe024c1-1f9d-4a48-911f-8012c07ff096","msg":"REQ GET /billing/subscription"}
{"level":"info","time":1766845876219,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":6,"requestId":"e55d1b77-2b8c-4378-a990-f52d5244d186","route":"/billing/subscription"}
{"level":40,"time":1766845876219,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"ebe024c1-1f9d-4a48-911f-8012c07ff096","method":"GET","url":"/billing/subscription","body":{}},"requestId":"ebe024c1-1f9d-4a48-911f-8012c07ff096","requestId":"e55d1b77-2b8c-4378-a990-f52d5244d186","res":{"statusCode":401},"responseTime":7,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766845876220,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"20128e58-2db0-4e91-8150-431a21a0ae6d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"20128e58-2db0-4e91-8150-431a21a0ae6d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876221,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"20128e58-2db0-4e91-8150-431a21a0ae6d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"20128e58-2db0-4e91-8150-431a21a0ae6d","requestId":"8a58106a-b8c6-4884-9498-d0faccab5568","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766845876222,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"2a10d7cd-edb4-4605-ac4b-6a0d74752bff","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2a10d7cd-edb4-4605-ac4b-6a0d74752bff","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876223,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"2a10d7cd-edb4-4605-ac4b-6a0d74752bff","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2a10d7cd-edb4-4605-ac4b-6a0d74752bff","requestId":"2afa7957-c65b-46a2-9e05-8a47c9f453d8","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766845876223,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"dc7a7ef4-18c4-4e2b-a081-6c4d4c15aaa4","method":"GET","url":"/billing/subscription","body":{}},"requestId":"dc7a7ef4-18c4-4e2b-a081-6c4d4c15aaa4","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876224,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"dc7a7ef4-18c4-4e2b-a081-6c4d4c15aaa4","method":"GET","url":"/billing/subscription","body":{}},"requestId":"dc7a7ef4-18c4-4e2b-a081-6c4d4c15aaa4","requestId":"2224da35-122e-4a68-9c12-1eba56b7d56d","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766845876225,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"29468a26-f2df-4419-807d-e3dbc2627891","method":"GET","url":"/billing/subscription","body":{}},"requestId":"29468a26-f2df-4419-807d-e3dbc2627891","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876226,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"29468a26-f2df-4419-807d-e3dbc2627891","method":"GET","url":"/billing/subscription","body":{}},"requestId":"29468a26-f2df-4419-807d-e3dbc2627891","requestId":"719cf701-b654-48c3-8ee9-8ac5ad9c1a99","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766845876226,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"0b136fc3-093c-4efd-ad33-31226ebb0e6f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0b136fc3-093c-4efd-ad33-31226ebb0e6f","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876228,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"0b136fc3-093c-4efd-ad33-31226ebb0e6f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0b136fc3-093c-4efd-ad33-31226ebb0e6f","requestId":"35b62a6a-ffeb-45ab-9a1d-ad4bf4b49a46","res":{"statusCode":401},"responseTime":2,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766845876228,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"0dd31045-99e9-4a87-b3da-a5f7fdb357d3","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0dd31045-99e9-4a87-b3da-a5f7fdb357d3","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876229,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"0dd31045-99e9-4a87-b3da-a5f7fdb357d3","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0dd31045-99e9-4a87-b3da-a5f7fdb357d3","requestId":"c75ea769-e517-4d59-bb31-33dd9c8bf1e6","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766845876230,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"b3853a5d-f9e0-4bf1-b4c9-4daa87cea66f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b3853a5d-f9e0-4bf1-b4c9-4daa87cea66f","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876231,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"b3853a5d-f9e0-4bf1-b4c9-4daa87cea66f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b3853a5d-f9e0-4bf1-b4c9-4daa87cea66f","requestId":"51daae54-b24c-46d7-85b9-c51944e35606","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766845876232,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"d6d7e46b-6151-4051-9821-cf8e3c339e22","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d6d7e46b-6151-4051-9821-cf8e3c339e22","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876233,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"d6d7e46b-6151-4051-9821-cf8e3c339e22","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d6d7e46b-6151-4051-9821-cf8e3c339e22","requestId":"76c123b6-fcc5-432d-976f-b013ae4da93f","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766845876233,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"841f2573-1bca-4842-8fd1-d6913f5263e3","method":"GET","url":"/billing/subscription","body":{}},"requestId":"841f2573-1bca-4842-8fd1-d6913f5263e3","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876234,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"841f2573-1bca-4842-8fd1-d6913f5263e3","method":"GET","url":"/billing/subscription","body":{}},"requestId":"841f2573-1bca-4842-8fd1-d6913f5263e3","requestId":"897c1947-1348-474c-a9f1-ae7798d37c9b","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876235,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"5af5bf0a-841f-49c4-bd0d-faf7c232d47b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5af5bf0a-841f-49c4-bd0d-faf7c232d47b","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876236,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"5af5bf0a-841f-49c4-bd0d-faf7c232d47b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5af5bf0a-841f-49c4-bd0d-faf7c232d47b","requestId":"fd724889-1461-4966-961f-c74a0d3bccb5","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876236,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"712ebfaa-2a03-4caf-8f24-2698a6b29020","method":"GET","url":"/billing/subscription","body":{}},"requestId":"712ebfaa-2a03-4caf-8f24-2698a6b29020","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876237,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"712ebfaa-2a03-4caf-8f24-2698a6b29020","method":"GET","url":"/billing/subscription","body":{}},"requestId":"712ebfaa-2a03-4caf-8f24-2698a6b29020","requestId":"e31df401-c9ec-493e-b1b8-f66eaa0eebeb","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876238,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"5153131f-30a1-4c70-95ed-697fe4f962f1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5153131f-30a1-4c70-95ed-697fe4f962f1","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876239,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"5153131f-30a1-4c70-95ed-697fe4f962f1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5153131f-30a1-4c70-95ed-697fe4f962f1","requestId":"c730f88e-2ba2-4449-a259-e95d12896718","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876239,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"eb4547b7-73d1-466c-8f1e-88225c1985bd","method":"GET","url":"/billing/subscription","body":{}},"requestId":"eb4547b7-73d1-466c-8f1e-88225c1985bd","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876240,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"eb4547b7-73d1-466c-8f1e-88225c1985bd","method":"GET","url":"/billing/subscription","body":{}},"requestId":"eb4547b7-73d1-466c-8f1e-88225c1985bd","requestId":"f37a4999-4000-4be9-88fc-b186ce5df494","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876241,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"7feed721-fffe-46dd-aead-b52a7119e858","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7feed721-fffe-46dd-aead-b52a7119e858","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876241,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"7feed721-fffe-46dd-aead-b52a7119e858","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7feed721-fffe-46dd-aead-b52a7119e858","requestId":"cf05c129-17f9-433b-b20c-e2d071d4cb7a","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876242,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"48fdecf2-7ec6-475e-aad2-baccc1883d71","method":"GET","url":"/billing/subscription","body":{}},"requestId":"48fdecf2-7ec6-475e-aad2-baccc1883d71","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876243,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"48fdecf2-7ec6-475e-aad2-baccc1883d71","method":"GET","url":"/billing/subscription","body":{}},"requestId":"48fdecf2-7ec6-475e-aad2-baccc1883d71","requestId":"b43e47e7-b9ce-484a-8785-099c8901aaa3","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876243,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"d9c69ba8-59c5-46b8-a141-cab23c8c2c3c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d9c69ba8-59c5-46b8-a141-cab23c8c2c3c","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876244,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"d9c69ba8-59c5-46b8-a141-cab23c8c2c3c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d9c69ba8-59c5-46b8-a141-cab23c8c2c3c","requestId":"910b0da0-78f6-4b02-bb1b-c21afe830687","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876244,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"48f8f38a-cad2-43e2-a90b-b24c24e2b5f0","method":"GET","url":"/billing/subscription","body":{}},"requestId":"48f8f38a-cad2-43e2-a90b-b24c24e2b5f0","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876245,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"48f8f38a-cad2-43e2-a90b-b24c24e2b5f0","method":"GET","url":"/billing/subscription","body":{}},"requestId":"48f8f38a-cad2-43e2-a90b-b24c24e2b5f0","requestId":"35d24337-d6c7-49a4-93b6-33756e8e41a9","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876246,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"9b0ef072-b29d-46fb-b7a2-74042faf66cd","method":"GET","url":"/billing/subscription","body":{}},"requestId":"9b0ef072-b29d-46fb-b7a2-74042faf66cd","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876247,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"9b0ef072-b29d-46fb-b7a2-74042faf66cd","method":"GET","url":"/billing/subscription","body":{}},"requestId":"9b0ef072-b29d-46fb-b7a2-74042faf66cd","requestId":"c3cf25a9-64b4-48f6-b852-45b12a0868ee","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876252,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"c3cf4a21-d23b-4cc1-8b1c-30a0db9716f2","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c3cf4a21-d23b-4cc1-8b1c-30a0db9716f2","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876253,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"c3cf4a21-d23b-4cc1-8b1c-30a0db9716f2","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c3cf4a21-d23b-4cc1-8b1c-30a0db9716f2","requestId":"1e2951b5-23a1-4bc7-b0e1-7a2149d70875","res":{"statusCode":429},"responseTime":6,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876254,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"099cd9cf-24a9-4f91-b0a0-fff653beba24","method":"GET","url":"/billing/subscription","body":{}},"requestId":"099cd9cf-24a9-4f91-b0a0-fff653beba24","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876255,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"099cd9cf-24a9-4f91-b0a0-fff653beba24","method":"GET","url":"/billing/subscription","body":{}},"requestId":"099cd9cf-24a9-4f91-b0a0-fff653beba24","requestId":"4b953fb8-c607-4388-946b-0e398242be6b","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876256,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"b62528ce-0bee-4096-bf84-cdb6f883ece6","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b62528ce-0bee-4096-bf84-cdb6f883ece6","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876257,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"b62528ce-0bee-4096-bf84-cdb6f883ece6","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b62528ce-0bee-4096-bf84-cdb6f883ece6","requestId":"0ab75514-5533-40d7-af0c-fdc3d44c783a","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876257,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"f4a3a91c-470d-4189-973b-bbb071217a24","method":"GET","url":"/billing/subscription","body":{}},"requestId":"f4a3a91c-470d-4189-973b-bbb071217a24","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876260,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"f4a3a91c-470d-4189-973b-bbb071217a24","method":"GET","url":"/billing/subscription","body":{}},"requestId":"f4a3a91c-470d-4189-973b-bbb071217a24","requestId":"0ba2ee24-a50e-4df4-979d-90712a3291d8","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876261,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"867d1692-8cab-4ca4-a545-e9f955c55e41","method":"GET","url":"/billing/subscription","body":{}},"requestId":"867d1692-8cab-4ca4-a545-e9f955c55e41","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876261,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"867d1692-8cab-4ca4-a545-e9f955c55e41","method":"GET","url":"/billing/subscription","body":{}},"requestId":"867d1692-8cab-4ca4-a545-e9f955c55e41","requestId":"bd08b57d-b046-4c95-ad02-a5c74a68d3c5","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876262,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"945051de-d688-4e11-ad20-e56d6793302a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"945051de-d688-4e11-ad20-e56d6793302a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876263,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"945051de-d688-4e11-ad20-e56d6793302a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"945051de-d688-4e11-ad20-e56d6793302a","requestId":"0e1c4704-f3d7-49e6-906e-47935a817be5","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876221,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"8a58106a-b8c6-4884-9498-d0faccab5568","route":"/billing/subscription"}
{"level":"info","time":1766845876223,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"2afa7957-c65b-46a2-9e05-8a47c9f453d8","route":"/billing/subscription"}
{"level":"info","time":1766845876224,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"2224da35-122e-4a68-9c12-1eba56b7d56d","route":"/billing/subscription"}
{"level":"info","time":1766845876226,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"719cf701-b654-48c3-8ee9-8ac5ad9c1a99","route":"/billing/subscription"}
{"level":"info","time":1766845876228,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":2,"requestId":"35b62a6a-ffeb-45ab-9a1d-ad4bf4b49a46","route":"/billing/subscription"}
{"level":"info","time":1766845876229,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"c75ea769-e517-4d59-bb31-33dd9c8bf1e6","route":"/billing/subscription"}
{"level":"info","time":1766845876231,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"51daae54-b24c-46d7-85b9-c51944e35606","route":"/billing/subscription"}
{"level":"info","time":1766845876233,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"76c123b6-fcc5-432d-976f-b013ae4da93f","route":"/billing/subscription"}
{"level":"info","time":1766845876234,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"897c1947-1348-474c-a9f1-ae7798d37c9b","route":"/billing/subscription"}
{"level":"info","time":1766845876236,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"fd724889-1461-4966-961f-c74a0d3bccb5","route":"/billing/subscription"}
{"level":"info","time":1766845876237,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"e31df401-c9ec-493e-b1b8-f66eaa0eebeb","route":"/billing/subscription"}
{"level":"info","time":1766845876239,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"c730f88e-2ba2-4449-a259-e95d12896718","route":"/billing/subscription"}
{"level":"info","time":1766845876240,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"f37a4999-4000-4be9-88fc-b186ce5df494","route":"/billing/subscription"}
{"level":"info","time":1766845876242,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"cf05c129-17f9-433b-b20c-e2d071d4cb7a","route":"/billing/subscription"}
{"level":"info","time":1766845876243,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"b43e47e7-b9ce-484a-8785-099c8901aaa3","route":"/billing/subscription"}
{"level":"info","time":1766845876244,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"910b0da0-78f6-4b02-bb1b-c21afe830687","route":"/billing/subscription"}
{"level":"info","time":1766845876245,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"35d24337-d6c7-49a4-93b6-33756e8e41a9","route":"/billing/subscription"}
{"level":"info","time":1766845876247,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"c3cf25a9-64b4-48f6-b852-45b12a0868ee","route":"/billing/subscription"}
{"level":"info","time":1766845876253,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"1e2951b5-23a1-4bc7-b0e1-7a2149d70875","route":"/billing/subscription"}
{"level":"info","time":1766845876255,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"4b953fb8-c607-4388-946b-0e398242be6b","route":"/billing/subscription"}
{"level":"info","time":1766845876257,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"0ab75514-5533-40d7-af0c-fdc3d44c783a","route":"/billing/subscription"}
{"level":"info","time":1766845876260,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":3,"requestId":"0ba2ee24-a50e-4df4-979d-90712a3291d8","route":"/billing/subscription"}
{"level":"info","time":1766845876262,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"bd08b57d-b046-4c95-ad02-a5c74a68d3c5","route":"/billing/subscription"}
{"level":"info","time":1766845876263,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"0e1c4704-f3d7-49e6-906e-47935a817be5","route":"/billing/subscription"}
{"level":"info","time":1766845876264,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"6c7b6068-0b33-4e04-bb62-88bc0d9a45f5","route":"/billing/subscription"}
{"level":"info","time":1766845876265,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"4e3e6e7e-0a99-43bb-9d25-d078987d7556","route":"/billing/subscription"}
{"level":"info","time":1766845876266,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"f6dca525-3e66-4f07-90c4-2d4144e7bbac","route":"/billing/subscription"}
{"level":"info","time":1766845876267,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"7d57d00e-ecc0-4575-9c54-e451aa802d8e","route":"/billing/subscription"}
{"level":"info","time":1766845876268,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"7026addb-9256-4361-9420-f5a0c1be3fd6","route":"/billing/subscription"}
{"level":"info","time":1766845876269,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"05224c5b-dafd-42a2-ada5-dcf374ea33b9","route":"/billing/subscription"}
{"level":"info","time":1766845876270,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"92122f52-624a-4947-8980-6db787f012cf","route":"/billing/subscription"}
{"level":"info","time":1766845876271,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"b86b8be1-c163-4a9e-939c-2427521ea620","route":"/billing/subscription"}
{"level":"info","time":1766845876273,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"98dfe64e-5d00-4855-a1c9-49c3f3d9de70","route":"/billing/subscription"}
{"level":"info","time":1766845876274,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"f2145595-2889-45fc-9ddf-6f1d3c075be5","route":"/billing/subscription"}
{"level":"info","time":1766845876275,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"666b6055-8147-4671-8c36-b9a8ef8a8895","route":"/billing/subscription"}
{"level":"info","time":1766845876276,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"f92cfe5f-aaab-4848-8234-2b52e5fed902","route":"/billing/subscription"}
{"level":"info","time":1766845876277,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"d654a61d-f1cf-49fc-835f-385b6c4871a9","route":"/billing/subscription"}
{"level":"info","time":1766845876278,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"e98430bf-bbb5-49a4-8a6f-bf443261a550","route":"/billing/subscription"}
{"level":30,"time":1766845876263,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"89207c08-08a2-4533-8242-b93af597b3ba","method":"GET","url":"/billing/subscription","body":{}},"requestId":"89207c08-08a2-4533-8242-b93af597b3ba","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876264,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"89207c08-08a2-4533-8242-b93af597b3ba","method":"GET","url":"/billing/subscription","body":{}},"requestId":"89207c08-08a2-4533-8242-b93af597b3ba","requestId":"6c7b6068-0b33-4e04-bb62-88bc0d9a45f5","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876264,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"64cca616-edd6-43ee-9de2-d133ebed4c5b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"64cca616-edd6-43ee-9de2-d133ebed4c5b","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876265,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"64cca616-edd6-43ee-9de2-d133ebed4c5b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"64cca616-edd6-43ee-9de2-d133ebed4c5b","requestId":"4e3e6e7e-0a99-43bb-9d25-d078987d7556","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876265,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"b42e9766-6732-45f9-bd99-764de5d2efa1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b42e9766-6732-45f9-bd99-764de5d2efa1","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876266,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"b42e9766-6732-45f9-bd99-764de5d2efa1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b42e9766-6732-45f9-bd99-764de5d2efa1","requestId":"f6dca525-3e66-4f07-90c4-2d4144e7bbac","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876266,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"be213112-0db6-414a-adcb-dbe9f46c4777","method":"GET","url":"/billing/subscription","body":{}},"requestId":"be213112-0db6-414a-adcb-dbe9f46c4777","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876267,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"be213112-0db6-414a-adcb-dbe9f46c4777","method":"GET","url":"/billing/subscription","body":{}},"requestId":"be213112-0db6-414a-adcb-dbe9f46c4777","requestId":"7d57d00e-ecc0-4575-9c54-e451aa802d8e","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876267,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"89f6eb87-45f4-4140-978f-ba759b7f2a8d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"89f6eb87-45f4-4140-978f-ba759b7f2a8d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876268,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"89f6eb87-45f4-4140-978f-ba759b7f2a8d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"89f6eb87-45f4-4140-978f-ba759b7f2a8d","requestId":"7026addb-9256-4361-9420-f5a0c1be3fd6","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876268,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"415dc057-2b2f-4897-b1df-a338b1dff327","method":"GET","url":"/billing/subscription","body":{}},"requestId":"415dc057-2b2f-4897-b1df-a338b1dff327","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876269,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"415dc057-2b2f-4897-b1df-a338b1dff327","method":"GET","url":"/billing/subscription","body":{}},"requestId":"415dc057-2b2f-4897-b1df-a338b1dff327","requestId":"05224c5b-dafd-42a2-ada5-dcf374ea33b9","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876270,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"0b43854f-f0fd-439a-8634-fcd5b7d96d1f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0b43854f-f0fd-439a-8634-fcd5b7d96d1f","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876270,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"0b43854f-f0fd-439a-8634-fcd5b7d96d1f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0b43854f-f0fd-439a-8634-fcd5b7d96d1f","requestId":"92122f52-624a-4947-8980-6db787f012cf","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876271,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"9c84bd63-1d2f-4fa4-86e0-a2abcee95533","method":"GET","url":"/billing/subscription","body":{}},"requestId":"9c84bd63-1d2f-4fa4-86e0-a2abcee95533","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876271,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"9c84bd63-1d2f-4fa4-86e0-a2abcee95533","method":"GET","url":"/billing/subscription","body":{}},"requestId":"9c84bd63-1d2f-4fa4-86e0-a2abcee95533","requestId":"b86b8be1-c163-4a9e-939c-2427521ea620","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876272,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"668e97d9-f2f3-47c0-b924-da76b46e94e1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"668e97d9-f2f3-47c0-b924-da76b46e94e1","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876272,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"668e97d9-f2f3-47c0-b924-da76b46e94e1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"668e97d9-f2f3-47c0-b924-da76b46e94e1","requestId":"98dfe64e-5d00-4855-a1c9-49c3f3d9de70","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876273,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"fb64e2d6-378a-47fd-8435-f4bc537b499e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"fb64e2d6-378a-47fd-8435-f4bc537b499e","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876274,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"fb64e2d6-378a-47fd-8435-f4bc537b499e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"fb64e2d6-378a-47fd-8435-f4bc537b499e","requestId":"f2145595-2889-45fc-9ddf-6f1d3c075be5","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876274,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"292fce8a-7a84-45ef-8b56-cd259b7e39c4","method":"GET","url":"/billing/subscription","body":{}},"requestId":"292fce8a-7a84-45ef-8b56-cd259b7e39c4","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876275,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"292fce8a-7a84-45ef-8b56-cd259b7e39c4","method":"GET","url":"/billing/subscription","body":{}},"requestId":"292fce8a-7a84-45ef-8b56-cd259b7e39c4","requestId":"666b6055-8147-4671-8c36-b9a8ef8a8895","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876275,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"8efbf8f1-6702-498f-a9d5-85a7ff88742e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"8efbf8f1-6702-498f-a9d5-85a7ff88742e","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876276,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"8efbf8f1-6702-498f-a9d5-85a7ff88742e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"8efbf8f1-6702-498f-a9d5-85a7ff88742e","requestId":"f92cfe5f-aaab-4848-8234-2b52e5fed902","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876276,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"56934cec-de66-4698-a3a4-3e99d1059b97","method":"GET","url":"/billing/subscription","body":{}},"requestId":"56934cec-de66-4698-a3a4-3e99d1059b97","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876277,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"56934cec-de66-4698-a3a4-3e99d1059b97","method":"GET","url":"/billing/subscription","body":{}},"requestId":"56934cec-de66-4698-a3a4-3e99d1059b97","requestId":"d654a61d-f1cf-49fc-835f-385b6c4871a9","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876277,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"b1b77ba2-6d96-49b2-92f3-ed05eb0fc2f6","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b1b77ba2-6d96-49b2-92f3-ed05eb0fc2f6","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876278,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"b1b77ba2-6d96-49b2-92f3-ed05eb0fc2f6","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b1b77ba2-6d96-49b2-92f3-ed05eb0fc2f6","requestId":"e98430bf-bbb5-49a4-8a6f-bf443261a550","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876279,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"39b0c513-8792-41b3-a499-84426eac8ba4","method":"GET","url":"/billing/subscription","body":{}},"requestId":"39b0c513-8792-41b3-a499-84426eac8ba4","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876280,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"39b0c513-8792-41b3-a499-84426eac8ba4","method":"GET","url":"/billing/subscription","body":{}},"requestId":"39b0c513-8792-41b3-a499-84426eac8ba4","requestId":"0388bb11-56f7-457d-98ac-8604c5adaa8c","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876280,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"0388bb11-56f7-457d-98ac-8604c5adaa8c","route":"/billing/subscription"}
{"level":30,"time":1766845876281,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"5f7866be-6241-42a5-9db2-06313269937f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5f7866be-6241-42a5-9db2-06313269937f","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876281,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"5f7866be-6241-42a5-9db2-06313269937f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5f7866be-6241-42a5-9db2-06313269937f","requestId":"bbd0627b-e445-4341-aa76-0b78af40ac19","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876281,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"bbd0627b-e445-4341-aa76-0b78af40ac19","route":"/billing/subscription"}
{"level":30,"time":1766845876283,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"579280ba-1fab-4b91-ae63-8a6faeebfdfc","method":"GET","url":"/billing/subscription","body":{}},"requestId":"579280ba-1fab-4b91-ae63-8a6faeebfdfc","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876283,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"579280ba-1fab-4b91-ae63-8a6faeebfdfc","method":"GET","url":"/billing/subscription","body":{}},"requestId":"579280ba-1fab-4b91-ae63-8a6faeebfdfc","requestId":"361aa2d9-4f2e-450e-915b-9283efc43713","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876283,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"361aa2d9-4f2e-450e-915b-9283efc43713","route":"/billing/subscription"}
{"level":30,"time":1766845876284,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"513842bf-833e-44bc-b9cd-943fc5b4eedb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"513842bf-833e-44bc-b9cd-943fc5b4eedb","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876285,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"513842bf-833e-44bc-b9cd-943fc5b4eedb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"513842bf-833e-44bc-b9cd-943fc5b4eedb","requestId":"034a74f3-79c7-4247-b343-0f1353fb9ec3","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876285,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"034a74f3-79c7-4247-b343-0f1353fb9ec3","route":"/billing/subscription"}
{"level":30,"time":1766845876286,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"847e372e-0ff1-4545-88a2-21ea128bb8b8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"847e372e-0ff1-4545-88a2-21ea128bb8b8","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876286,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"847e372e-0ff1-4545-88a2-21ea128bb8b8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"847e372e-0ff1-4545-88a2-21ea128bb8b8","requestId":"ec535bd7-0052-4067-87ae-b9129b9ed90e","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876287,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"ec535bd7-0052-4067-87ae-b9129b9ed90e","route":"/billing/subscription"}
{"level":30,"time":1766845876288,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"81e42611-f746-4eaa-b519-2db2e461de16","method":"GET","url":"/billing/subscription","body":{}},"requestId":"81e42611-f746-4eaa-b519-2db2e461de16","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876288,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"81e42611-f746-4eaa-b519-2db2e461de16","method":"GET","url":"/billing/subscription","body":{}},"requestId":"81e42611-f746-4eaa-b519-2db2e461de16","requestId":"e45589f0-6353-4522-b209-a061f38d38fd","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876288,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"e45589f0-6353-4522-b209-a061f38d38fd","route":"/billing/subscription"}
{"level":30,"time":1766845876289,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"c8803790-022d-466d-a54a-98cc8e18b482","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c8803790-022d-466d-a54a-98cc8e18b482","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876290,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"c8803790-022d-466d-a54a-98cc8e18b482","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c8803790-022d-466d-a54a-98cc8e18b482","requestId":"907363d0-0b1a-4cf4-874f-bbee64d69837","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876290,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"907363d0-0b1a-4cf4-874f-bbee64d69837","route":"/billing/subscription"}
{"level":30,"time":1766845876291,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"5ffa07ea-4f70-4e6d-8007-40ac19c80669","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5ffa07ea-4f70-4e6d-8007-40ac19c80669","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876291,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"5ffa07ea-4f70-4e6d-8007-40ac19c80669","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5ffa07ea-4f70-4e6d-8007-40ac19c80669","requestId":"4b24cade-c790-4287-945b-efd6c0bb3492","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876292,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"4b24cade-c790-4287-945b-efd6c0bb3492","route":"/billing/subscription"}
{"level":30,"time":1766845876292,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"96479f3f-2ff6-4705-a63f-89e3d004d708","method":"GET","url":"/billing/subscription","body":{}},"requestId":"96479f3f-2ff6-4705-a63f-89e3d004d708","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876293,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"96479f3f-2ff6-4705-a63f-89e3d004d708","method":"GET","url":"/billing/subscription","body":{}},"requestId":"96479f3f-2ff6-4705-a63f-89e3d004d708","requestId":"56a6a2d3-0209-4cfa-9fc1-6690eecf12c9","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876293,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"56a6a2d3-0209-4cfa-9fc1-6690eecf12c9","route":"/billing/subscription"}
{"level":30,"time":1766845876293,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"7885678b-2660-4596-84a3-3c6e6cd684a5","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7885678b-2660-4596-84a3-3c6e6cd684a5","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876294,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"7885678b-2660-4596-84a3-3c6e6cd684a5","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7885678b-2660-4596-84a3-3c6e6cd684a5","requestId":"21c55f86-8172-47cc-a178-5a883d12c72a","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876294,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"21c55f86-8172-47cc-a178-5a883d12c72a","route":"/billing/subscription"}
{"level":30,"time":1766845876295,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"2ea0c3e4-ed6a-419c-ac1e-544bc1e2bd3b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2ea0c3e4-ed6a-419c-ac1e-544bc1e2bd3b","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876295,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"2ea0c3e4-ed6a-419c-ac1e-544bc1e2bd3b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2ea0c3e4-ed6a-419c-ac1e-544bc1e2bd3b","requestId":"921b936e-fc43-44bc-a6f9-19ef976576cb","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876295,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"921b936e-fc43-44bc-a6f9-19ef976576cb","route":"/billing/subscription"}
{"level":30,"time":1766845876296,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"9a46c227-ade1-407c-be7d-340bf6911487","method":"GET","url":"/billing/subscription","body":{}},"requestId":"9a46c227-ade1-407c-be7d-340bf6911487","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876297,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"9a46c227-ade1-407c-be7d-340bf6911487","method":"GET","url":"/billing/subscription","body":{}},"requestId":"9a46c227-ade1-407c-be7d-340bf6911487","requestId":"33baccb1-9a4c-45f3-92cb-8cae83e83ed1","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876297,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"33baccb1-9a4c-45f3-92cb-8cae83e83ed1","route":"/billing/subscription"}
{"level":30,"time":1766845876297,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"222ca9ed-1906-4744-8c0b-cfa0a5218ee1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"222ca9ed-1906-4744-8c0b-cfa0a5218ee1","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876298,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"222ca9ed-1906-4744-8c0b-cfa0a5218ee1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"222ca9ed-1906-4744-8c0b-cfa0a5218ee1","requestId":"1e422cb7-6d6c-4763-b97b-f695ff621fd7","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876298,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"1e422cb7-6d6c-4763-b97b-f695ff621fd7","route":"/billing/subscription"}
{"level":30,"time":1766845876299,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"537059e1-8e0b-41c2-a618-fc4a2846ec96","method":"GET","url":"/billing/subscription","body":{}},"requestId":"537059e1-8e0b-41c2-a618-fc4a2846ec96","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876299,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"537059e1-8e0b-41c2-a618-fc4a2846ec96","method":"GET","url":"/billing/subscription","body":{}},"requestId":"537059e1-8e0b-41c2-a618-fc4a2846ec96","requestId":"60054f46-dd07-40e4-96a9-1883f58b202f","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876299,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"60054f46-dd07-40e4-96a9-1883f58b202f","route":"/billing/subscription"}
{"level":30,"time":1766845876300,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"7e26e5dc-e9f0-4763-aa46-69acb1f9b3ff","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7e26e5dc-e9f0-4763-aa46-69acb1f9b3ff","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876301,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"7e26e5dc-e9f0-4763-aa46-69acb1f9b3ff","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7e26e5dc-e9f0-4763-aa46-69acb1f9b3ff","requestId":"5d35e5d2-d271-4908-b411-0d0d64913541","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876301,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"5d35e5d2-d271-4908-b411-0d0d64913541","route":"/billing/subscription"}
{"level":30,"time":1766845876301,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"b798fdc9-b62e-4f5e-8cdb-535e5b56fe72","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b798fdc9-b62e-4f5e-8cdb-535e5b56fe72","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876302,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"b798fdc9-b62e-4f5e-8cdb-535e5b56fe72","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b798fdc9-b62e-4f5e-8cdb-535e5b56fe72","requestId":"44132c9a-286a-4b1c-a39c-9dbd6594df21","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876302,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"44132c9a-286a-4b1c-a39c-9dbd6594df21","route":"/billing/subscription"}
{"level":30,"time":1766845876302,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"02b16d0d-fbff-420d-bb8e-bd9c31c7fd15","method":"GET","url":"/billing/subscription","body":{}},"requestId":"02b16d0d-fbff-420d-bb8e-bd9c31c7fd15","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876303,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"02b16d0d-fbff-420d-bb8e-bd9c31c7fd15","method":"GET","url":"/billing/subscription","body":{}},"requestId":"02b16d0d-fbff-420d-bb8e-bd9c31c7fd15","requestId":"faa18eb8-857e-4ef4-8003-b8651eddc20e","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876303,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"faa18eb8-857e-4ef4-8003-b8651eddc20e","route":"/billing/subscription"}
{"level":30,"time":1766845876303,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"51fa137e-a334-4e06-a09e-1a917719d9c0","method":"GET","url":"/billing/subscription","body":{}},"requestId":"51fa137e-a334-4e06-a09e-1a917719d9c0","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876304,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"51fa137e-a334-4e06-a09e-1a917719d9c0","method":"GET","url":"/billing/subscription","body":{}},"requestId":"51fa137e-a334-4e06-a09e-1a917719d9c0","requestId":"3d07b9ed-bdfe-41cf-8f35-faa0137541b7","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876304,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"3d07b9ed-bdfe-41cf-8f35-faa0137541b7","route":"/billing/subscription"}
{"level":30,"time":1766845876305,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"d8e70157-9615-4733-a7ff-766a30d42f99","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d8e70157-9615-4733-a7ff-766a30d42f99","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876305,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"d8e70157-9615-4733-a7ff-766a30d42f99","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d8e70157-9615-4733-a7ff-766a30d42f99","requestId":"6964ccc8-3d3f-4d82-93a4-d73964b1c920","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876305,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"6964ccc8-3d3f-4d82-93a4-d73964b1c920","route":"/billing/subscription"}
{"level":30,"time":1766845876306,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"0cc70439-8e1c-4f04-a1af-6bd3f86a3f89","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0cc70439-8e1c-4f04-a1af-6bd3f86a3f89","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876307,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"0cc70439-8e1c-4f04-a1af-6bd3f86a3f89","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0cc70439-8e1c-4f04-a1af-6bd3f86a3f89","requestId":"35800ee1-2dec-4bfb-aae2-39163d575fe6","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876307,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"35800ee1-2dec-4bfb-aae2-39163d575fe6","route":"/billing/subscription"}
{"level":30,"time":1766845876310,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"53a39859-ef4a-4080-b3bf-505e02bc7c8a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"53a39859-ef4a-4080-b3bf-505e02bc7c8a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876311,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"53a39859-ef4a-4080-b3bf-505e02bc7c8a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"53a39859-ef4a-4080-b3bf-505e02bc7c8a","requestId":"2969be42-3d39-4c80-9aff-91337a2ff079","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876311,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"2969be42-3d39-4c80-9aff-91337a2ff079","route":"/billing/subscription"}
{"level":30,"time":1766845876313,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"93b34a00-7ba1-4d3b-9d1b-16f8e4e697f7","method":"GET","url":"/billing/subscription","body":{}},"requestId":"93b34a00-7ba1-4d3b-9d1b-16f8e4e697f7","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876314,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"93b34a00-7ba1-4d3b-9d1b-16f8e4e697f7","method":"GET","url":"/billing/subscription","body":{}},"requestId":"93b34a00-7ba1-4d3b-9d1b-16f8e4e697f7","requestId":"4a2c440a-72eb-491a-8f72-2572ce6a1d1f","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876314,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"4a2c440a-72eb-491a-8f72-2572ce6a1d1f","route":"/billing/subscription"}
{"level":30,"time":1766845876314,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"450c2829-e898-4658-91db-31e5def6e3d6","method":"GET","url":"/billing/subscription","body":{}},"requestId":"450c2829-e898-4658-91db-31e5def6e3d6","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876315,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"450c2829-e898-4658-91db-31e5def6e3d6","method":"GET","url":"/billing/subscription","body":{}},"requestId":"450c2829-e898-4658-91db-31e5def6e3d6","requestId":"5fa851f6-d5d8-4979-a1bf-1a906ff7706a","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876315,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"5fa851f6-d5d8-4979-a1bf-1a906ff7706a","route":"/billing/subscription"}
{"level":30,"time":1766845876316,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"bc459451-a30b-4e41-ae80-296598a4fa2f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"bc459451-a30b-4e41-ae80-296598a4fa2f","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876316,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"bc459451-a30b-4e41-ae80-296598a4fa2f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"bc459451-a30b-4e41-ae80-296598a4fa2f","requestId":"a0966142-262b-41de-a0dd-f108ea0b3c6d","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876316,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"a0966142-262b-41de-a0dd-f108ea0b3c6d","route":"/billing/subscription"}
{"level":30,"time":1766845876317,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"cdc9c4e5-01f7-4ac9-ba96-235579b7d20d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"cdc9c4e5-01f7-4ac9-ba96-235579b7d20d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876317,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"cdc9c4e5-01f7-4ac9-ba96-235579b7d20d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"cdc9c4e5-01f7-4ac9-ba96-235579b7d20d","requestId":"ca22eeb5-3459-41a0-9929-def9d403b05b","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876318,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"ca22eeb5-3459-41a0-9929-def9d403b05b","route":"/billing/subscription"}
{"level":"info","time":1766845876319,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"88a730bf-423a-4036-be2a-cc18b3517960","route":"/billing/subscription"}
{"level":30,"time":1766845876318,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"69108e6a-faaf-4803-9cc0-88ceb1ed7525","method":"GET","url":"/billing/subscription","body":{}},"requestId":"69108e6a-faaf-4803-9cc0-88ceb1ed7525","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876319,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"69108e6a-faaf-4803-9cc0-88ceb1ed7525","method":"GET","url":"/billing/subscription","body":{}},"requestId":"69108e6a-faaf-4803-9cc0-88ceb1ed7525","requestId":"88a730bf-423a-4036-be2a-cc18b3517960","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876320,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"b8ad345d-ed1f-41d0-8f1b-581ab52d853b","route":"/billing/subscription"}
{"level":30,"time":1766845876320,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"fa572a49-8711-4c05-a067-bcfcd037b4e9","method":"GET","url":"/billing/subscription","body":{}},"requestId":"fa572a49-8711-4c05-a067-bcfcd037b4e9","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876320,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"fa572a49-8711-4c05-a067-bcfcd037b4e9","method":"GET","url":"/billing/subscription","body":{}},"requestId":"fa572a49-8711-4c05-a067-bcfcd037b4e9","requestId":"b8ad345d-ed1f-41d0-8f1b-581ab52d853b","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876322,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"04ebb670-11eb-48fb-b6fd-4e9a41dab0fd","route":"/billing/subscription"}
{"level":30,"time":1766845876321,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"260f6e71-54c9-49b2-ba55-02c7228ec3c1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"260f6e71-54c9-49b2-ba55-02c7228ec3c1","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876322,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"260f6e71-54c9-49b2-ba55-02c7228ec3c1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"260f6e71-54c9-49b2-ba55-02c7228ec3c1","requestId":"04ebb670-11eb-48fb-b6fd-4e9a41dab0fd","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876323,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"63746545-636f-4a7d-9d4d-93f973fb0a06","route":"/billing/subscription"}
{"level":30,"time":1766845876322,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"08afeeb7-d095-4399-8c20-d84c5d0ee377","method":"GET","url":"/billing/subscription","body":{}},"requestId":"08afeeb7-d095-4399-8c20-d84c5d0ee377","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876323,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"08afeeb7-d095-4399-8c20-d84c5d0ee377","method":"GET","url":"/billing/subscription","body":{}},"requestId":"08afeeb7-d095-4399-8c20-d84c5d0ee377","requestId":"63746545-636f-4a7d-9d4d-93f973fb0a06","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876324,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"d4f26cdd-c068-4dbf-bd78-6eab59145c6e","route":"/billing/subscription"}
{"level":30,"time":1766845876323,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"64fb4965-6333-4f1a-8b27-0aa00a8226b7","method":"GET","url":"/billing/subscription","body":{}},"requestId":"64fb4965-6333-4f1a-8b27-0aa00a8226b7","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876324,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"64fb4965-6333-4f1a-8b27-0aa00a8226b7","method":"GET","url":"/billing/subscription","body":{}},"requestId":"64fb4965-6333-4f1a-8b27-0aa00a8226b7","requestId":"d4f26cdd-c068-4dbf-bd78-6eab59145c6e","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876325,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"45e9b29a-4cc7-47aa-810c-63caea57d03b","route":"/billing/subscription"}
{"level":30,"time":1766845876325,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"31822a18-6550-4a48-b9f4-46468528be63","method":"GET","url":"/billing/subscription","body":{}},"requestId":"31822a18-6550-4a48-b9f4-46468528be63","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876325,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"31822a18-6550-4a48-b9f4-46468528be63","method":"GET","url":"/billing/subscription","body":{}},"requestId":"31822a18-6550-4a48-b9f4-46468528be63","requestId":"45e9b29a-4cc7-47aa-810c-63caea57d03b","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876327,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"8762a8f1-6241-44a9-890e-6cbc8de55efe","route":"/billing/subscription"}
{"level":30,"time":1766845876326,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"8e8aef0a-90fb-4806-8c94-a23d4c963154","method":"GET","url":"/billing/subscription","body":{}},"requestId":"8e8aef0a-90fb-4806-8c94-a23d4c963154","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876326,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"8e8aef0a-90fb-4806-8c94-a23d4c963154","method":"GET","url":"/billing/subscription","body":{}},"requestId":"8e8aef0a-90fb-4806-8c94-a23d4c963154","requestId":"8762a8f1-6241-44a9-890e-6cbc8de55efe","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876328,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"49492f9c-dc9a-400e-a925-0729e9718930","route":"/billing/subscription"}
{"level":30,"time":1766845876327,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"1949b71e-50bd-4cd7-9339-24033266a89d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1949b71e-50bd-4cd7-9339-24033266a89d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876328,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"1949b71e-50bd-4cd7-9339-24033266a89d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1949b71e-50bd-4cd7-9339-24033266a89d","requestId":"49492f9c-dc9a-400e-a925-0729e9718930","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876329,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"c535af5e-72d4-4304-90b6-56d912c132b0","route":"/billing/subscription"}
{"level":30,"time":1766845876328,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"db3c1dec-a990-4c11-bb21-cbf6cebdce57","method":"GET","url":"/billing/subscription","body":{}},"requestId":"db3c1dec-a990-4c11-bb21-cbf6cebdce57","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876329,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"db3c1dec-a990-4c11-bb21-cbf6cebdce57","method":"GET","url":"/billing/subscription","body":{}},"requestId":"db3c1dec-a990-4c11-bb21-cbf6cebdce57","requestId":"c535af5e-72d4-4304-90b6-56d912c132b0","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766845876330,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"972bade2-b76c-4f56-a488-ccd6a696b14d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"972bade2-b76c-4f56-a488-ccd6a696b14d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876330,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"972bade2-b76c-4f56-a488-ccd6a696b14d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"972bade2-b76c-4f56-a488-ccd6a696b14d","requestId":"00da1ce0-6942-4140-bb17-212b538e0873","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876330,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"00da1ce0-6942-4140-bb17-212b538e0873","route":"/billing/subscription"}
{"level":30,"time":1766845876331,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"92140f81-7606-4ec9-8179-4a116c28d55d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"92140f81-7606-4ec9-8179-4a116c28d55d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876332,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"92140f81-7606-4ec9-8179-4a116c28d55d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"92140f81-7606-4ec9-8179-4a116c28d55d","requestId":"27ac0fa6-8415-4cbd-af62-cd1255997336","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876332,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"27ac0fa6-8415-4cbd-af62-cd1255997336","route":"/billing/subscription"}
{"level":30,"time":1766845876332,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"6ff91784-912d-482b-b977-7b401d0e29e6","method":"GET","url":"/billing/subscription","body":{}},"requestId":"6ff91784-912d-482b-b977-7b401d0e29e6","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876333,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"6ff91784-912d-482b-b977-7b401d0e29e6","method":"GET","url":"/billing/subscription","body":{}},"requestId":"6ff91784-912d-482b-b977-7b401d0e29e6","requestId":"02d94af7-6c13-4073-b8e5-02aac80b268c","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876333,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"02d94af7-6c13-4073-b8e5-02aac80b268c","route":"/billing/subscription"}
{"level":30,"time":1766845876334,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"6f3d9064-a6f0-4c6c-8efb-80705af58cf9","method":"GET","url":"/billing/subscription","body":{}},"requestId":"6f3d9064-a6f0-4c6c-8efb-80705af58cf9","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876334,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"6f3d9064-a6f0-4c6c-8efb-80705af58cf9","method":"GET","url":"/billing/subscription","body":{}},"requestId":"6f3d9064-a6f0-4c6c-8efb-80705af58cf9","requestId":"87978890-7ef8-40b5-bbbc-5b416a8f0e1d","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876334,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"87978890-7ef8-40b5-bbbc-5b416a8f0e1d","route":"/billing/subscription"}
{"level":30,"time":1766845876335,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"843e1b2c-ebf9-4e2e-afdd-13bb32a43bcc","method":"GET","url":"/billing/subscription","body":{}},"requestId":"843e1b2c-ebf9-4e2e-afdd-13bb32a43bcc","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766845876336,"pid":210501,"hostname":"codespaces-242710","req":{"requestId":"843e1b2c-ebf9-4e2e-afdd-13bb32a43bcc","method":"GET","url":"/billing/subscription","body":{}},"requestId":"843e1b2c-ebf9-4e2e-afdd-13bb32a43bcc","requestId":"33102c52-7d94-4f41-8154-8b70caae4978","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766845876336,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"33102c52-7d94-4f41-8154-8b70caae4978","route":"/billing/subscription"}
PASS test/blackbox/billing.blackbox.e2e-spec.ts
PASS test/smoke/di.e2e-spec.ts
PASS test/smoke/minimal-boot.e2e-spec.ts
  ● Console

    console.log
      Starting module compilation...

      at Object.<anonymous> (smoke/minimal-boot.e2e-spec.ts:16:13)

    console.log
      Module compiled in 101ms

      at Object.<anonymous> (smoke/minimal-boot.e2e-spec.ts:27:15)

    console.log
      App initialized in 195ms total

      at Object.<anonymous> (smoke/minimal-boot.e2e-spec.ts:32:15)

PASS test/e2e/forecast.slice.e2e-spec.ts
PASS test/e2e/purchasing.slice.e2e-spec.ts
  ● Console

    console.log
      Rate limit test results: { '401': 20 }

      at Object.<anonymous> (e2e/purchasing.slice.e2e-spec.ts:102:15)

    console.warn
      WARNING: No 429 responses observed. Rate limiter may not be active (auth guard runs first).

      104 |       // Verify we actually got some 429s (not just 401s)
      105 |       if (!has429) {
    > 106 |         console.warn('WARNING: No 429 responses observed. Rate limiter may not be active (auth guard runs first).');
          |                 ^
      107 |       }
      108 |     });
      109 |   });

      at Object.<anonymous> (e2e/purchasing.slice.e2e-spec.ts:106:17)

PASS test/e2e/webhook.replay.slice.e2e-spec.ts
PASS test/e2e/sse.smoke.e2e-spec.ts
PASS test/e2e/docs.e2e-spec.ts
PASS test/e2e/metrics.e2e-spec.ts
PASS test/e2e/minimal-harness.e2e-spec.ts
  ● Console

    console.log
      [HARNESS] Starting minimal module compilation...

      at Object.<anonymous> (e2e/minimal-harness.e2e-spec.ts:31:13)

    console.log
      [HARNESS] Module compiled in 4ms

      at Object.<anonymous> (e2e/minimal-harness.e2e-spec.ts:38:13)

    console.log
      [HARNESS] App initialized in 46ms total

      at Object.<anonymous> (e2e/minimal-harness.e2e-spec.ts:43:13)

    console.log
      [HARNESS] App closed successfully

      at Object.<anonymous> (e2e/minimal-harness.e2e-spec.ts:48:13)

PASS test/e2e/events-isolation.e2e-spec.ts
  ● Console

    console.log
      EventsModule: [class EventsModule]

      at Object.<anonymous> (e2e/events-isolation.e2e-spec.ts:10:13)

    console.log
      EventsModule is constructor: true

      at Object.<anonymous> (e2e/events-isolation.e2e-spec.ts:11:13)

FAIL test/e2e/devportal.prod.slice.e2e-spec.ts
  ● Test suite failed to run

    Cannot find module '../../src/dev-portal/ports/devportal.port' from 'e2e/devportal.prod.slice.e2e-spec.ts'

      15 | import { SuperDevGuard } from '../../src/dev-portal.disabled/guards/super-dev.guard'; // Fixed: was dev-portal (now disabled)
      16 | import { signBody } from '../payments/webhook.hmac';
    > 17 | import { DevPortalKeyRepo } from '../../src/dev-portal/ports/devportal.port';
         | ^
      18 | import { TestBypassAuthGuard } from '../devportal/auth-override.guard';
      19 | import { cleanup } from '../helpers/cleanup';
      20 |

      at Resolver._throwModNotFoundError (../../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (e2e/devportal.prod.slice.e2e-spec.ts:17:1)

FAIL test/e2e/app-bisect.e2e-spec.ts
  ● Test suite failed to run

    AppModule.imports not accessible; in AppModule, add: public static __imports = [ ...imports ]

      11 |
      12 | if (!appModuleImports || !Array.isArray(appModuleImports)) {
    > 13 |   throw new Error('AppModule.imports not accessible; in AppModule, add: public static __imports = [ ...imports ]');
         |         ^
      14 | }
      15 |
      16 | async function tryImports(imports: any[]) {

      at Object.<anonymous> (e2e/app-bisect.e2e-spec.ts:13:9)

FAIL test/m2-shifts-scheduling.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.org.create()` invocation in
      /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41
      
        33 prisma = app.get<PrismaService>(PrismaService);
        34 
        35 // Create test org, branch, and users
      → 36 const org = await prisma.client.org.create({
             data: {
               name: "M2 Test Org",
               currencyCode: "UGX",
           +   slug: String
             }
           })
      
      Argument `slug` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.shiftTemplate.update()` invocation in
      /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34
      
        215 describe('Shift Schedules', () => {
        216   beforeAll(async () => {
        217     // Reactivate template for schedule tests
      → 218     await prisma.shiftTemplate.update({
                  where: {
                    id: undefined,
                ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
                ?   OR?: ShiftTemplateWhereInput[],
                ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
                ?   orgId?: StringFilter | String,
                ?   name?: StringFilter | String,
                ?   startTime?: StringFilter | String,
                ?   endTime?: StringFilter | String,
                ?   description?: StringNullableFilter | String | Null,
                ?   isActive?: BoolFilter | Boolean,
                ?   createdAt?: DateTimeFilter | DateTime,
                ?   updatedAt?: DateTimeFilter | DateTime,
                ?   org?: OrgRelationFilter | OrgWhereInput,
                ?   schedules?: ShiftScheduleListRelationFilter
                  },
                  data: {
                    isActive: true
                  }
                })
      
      Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.shift.create()` invocation in
      /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47
      
        431 
        432 beforeAll(async () => {
        433   // Open a shift
      → 434   const shift = await prisma.client.shift.create({
                data: {
                  branchId: undefined,
                  openedById: undefined,
                  openingFloat: 100,
              +   orgId: String
                }
              })
      
      Argument `orgId` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.org.delete()` invocation in
      /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:96:35
      
        93 
        94 afterAll(async () => {
        95   // Cleanup
      → 96   await prisma.client.org.delete({
               where: {
                 id: undefined,
             ?   slug?: String,
             ?   AND?: OrgWhereInput | OrgWhereInput[],
             ?   OR?: OrgWhereInput[],
             ?   NOT?: OrgWhereInput | OrgWhereInput[],
             ?   name?: StringFilter | String,
             ?   createdAt?: DateTimeFilter | DateTime,
             ?   updatedAt?: DateTimeFilter | DateTime,
             ?   branches?: BranchListRelationFilter,
             ?   users?: UserListRelationFilter,
             ?   settings?: OrgSettingsNullableRelationFilter | OrgSettingsWhereInput | Null,
             ?   devices?: DeviceListRelationFilter,
             ?   floorPlans?: FloorPlanListRelationFilter,
             ?   taxCategories?: TaxCategoryListRelationFilter,
             ?   modifierGroups?: ModifierGroupListRelationFilter,
             ?   anomalyEvents?: AnomalyEventListRelationFilter,
             ?   alertChannels?: AlertChannelListRelationFilter,
             ?   scheduledAlerts?: ScheduledAlertListRelationFilter,
             ?   reservations?: ReservationListRelationFilter,
             ?   supportSessions?: SupportSessionListRelationFilter,
             ?   spoutDevices?: SpoutDeviceListRelationFilter,
             ?   spoutEvents?: SpoutEventListRelationFilter,
             ?   ownerDigests?: OwnerDigestListRelationFilter,
             ?   apiKeys?: ApiKeyListRelationFilter,
             ?   subscription?: OrgSubscriptionNullableRelationFilter | OrgSubscriptionWhereInput | Null,
             ?   branchBudgets?: BranchBudgetListRelationFilter,
             ?   forecastProfiles?: ForecastProfileListRelationFilter,
             ?   forecastPoints?: ForecastPointListRelationFilter,
             ?   franchiseRanks?: FranchiseRankListRelationFilter,
             ?   franchiseBudgets?: FranchiseBudgetListRelationFilter,
             ?   badgeAssets?: BadgeAssetListRelationFilter,
             ?   kdsSlaConfigs?: KdsSlaConfigListRelationFilter,
             ?   shiftTemplates?: ShiftTemplateListRelationFilter,
             ?   reportSubscriptions?: ReportSubscriptionListRelationFilter,
             ?   serviceProviders?: ServiceProviderListRelationFilter,
             ?   serviceReminders?: ServicePayableReminderListRelationFilter,
             ?   opsBudgets?: OpsBudgetListRelationFilter,
             ?   costInsights?: CostInsightListRelationFilter,
             ?   sessions?: SessionListRelationFilter,
             ?   documents?: DocumentListRelationFilter,
             ?   staffAwards?: StaffAwardListRelationFilter,
             ?   Feedback?: FeedbackListRelationFilter,
             ?   promotionSuggestions?: PromotionSuggestionListRelationFilter
               }
             })
      
      Argument `where` of type OrgWhereUniqueInput needs at least one of `id` or `slug` arguments. Available options are marked with ?.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - creates a lunch shift template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - creates a dinner shift template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - rejects invalid time format

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - rejects end time before start time

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › GET /shift-templates - lists all templates

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › GET /shift-templates/:id - gets template by ID

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › PATCH /shift-templates/:id - updates template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › DELETE /shift-templates/:id - soft deletes template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - creates a schedule from template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - creates a schedule from template

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - rejects overlapping schedule

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - rejects overlapping schedule

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/by-branch/:branchId - lists schedules

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/by-branch/:branchId - lists schedules

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/:id - gets schedule details

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/:id - gets schedule details

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - assigns staff to schedule

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - assigns manager on duty

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - rejects duplicate assignment

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › GET /shift-assignments/by-schedule/:scheduleId - lists assignments

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › GET /shift-assignments/by-user/:userId - lists user assignments

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Current Shift API › GET /shift-schedules/current/:branchId - returns empty when no active shift

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Current Shift API › GET /shift-schedules/current/:branchId - returns current shift with staff

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - blocks close when stock count out of tolerance

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - blocks close when stock count out of tolerance

    PrismaClientValidationError: 
    Invalid `prisma.client.shift.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47

      431 
      432 beforeAll(async () => {
      433   // Open a shift
    → 434   const shift = await prisma.client.shift.create({
              data: {
                branchId: undefined,
                openedById: undefined,
                openingFloat: 100,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - rejects override from L3 staff

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - rejects override from L3 staff

    PrismaClientValidationError: 
    Invalid `prisma.client.shift.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47

      431 
      432 beforeAll(async () => {
      433   // Open a shift
    → 434   const shift = await prisma.client.shift.create({
              data: {
                branchId: undefined,
                openedById: undefined,
                openingFloat: 100,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - allows manager override

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - allows manager override

    PrismaClientValidationError: 
    Invalid `prisma.client.shift.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47

      431 
      432 beforeAll(async () => {
      433   // Open a shift
    → 434   const shift = await prisma.client.shift.create({
              data: {
                branchId: undefined,
                openedById: undefined,
                openingFloat: 100,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.org.delete()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:96:35

      93 
      94 afterAll(async () => {
      95   // Cleanup
    → 96   await prisma.client.org.delete({
             where: {
               id: undefined,
           ?   slug?: String,
           ?   AND?: OrgWhereInput | OrgWhereInput[],
           ?   OR?: OrgWhereInput[],
           ?   NOT?: OrgWhereInput | OrgWhereInput[],
           ?   name?: StringFilter | String,
           ?   createdAt?: DateTimeFilter | DateTime,
           ?   updatedAt?: DateTimeFilter | DateTime,
           ?   branches?: BranchListRelationFilter,
           ?   users?: UserListRelationFilter,
           ?   settings?: OrgSettingsNullableRelationFilter | OrgSettingsWhereInput | Null,
           ?   devices?: DeviceListRelationFilter,
           ?   floorPlans?: FloorPlanListRelationFilter,
           ?   taxCategories?: TaxCategoryListRelationFilter,
           ?   modifierGroups?: ModifierGroupListRelationFilter,
           ?   anomalyEvents?: AnomalyEventListRelationFilter,
           ?   alertChannels?: AlertChannelListRelationFilter,
           ?   scheduledAlerts?: ScheduledAlertListRelationFilter,
           ?   reservations?: ReservationListRelationFilter,
           ?   supportSessions?: SupportSessionListRelationFilter,
           ?   spoutDevices?: SpoutDeviceListRelationFilter,
           ?   spoutEvents?: SpoutEventListRelationFilter,
           ?   ownerDigests?: OwnerDigestListRelationFilter,
           ?   apiKeys?: ApiKeyListRelationFilter,
           ?   subscription?: OrgSubscriptionNullableRelationFilter | OrgSubscriptionWhereInput | Null,
           ?   branchBudgets?: BranchBudgetListRelationFilter,
           ?   forecastProfiles?: ForecastProfileListRelationFilter,
           ?   forecastPoints?: ForecastPointListRelationFilter,
           ?   franchiseRanks?: FranchiseRankListRelationFilter,
           ?   franchiseBudgets?: FranchiseBudgetListRelationFilter,
           ?   badgeAssets?: BadgeAssetListRelationFilter,
           ?   kdsSlaConfigs?: KdsSlaConfigListRelationFilter,
           ?   shiftTemplates?: ShiftTemplateListRelationFilter,
           ?   reportSubscriptions?: ReportSubscriptionListRelationFilter,
           ?   serviceProviders?: ServiceProviderListRelationFilter,
           ?   serviceReminders?: ServicePayableReminderListRelationFilter,
           ?   opsBudgets?: OpsBudgetListRelationFilter,
           ?   costInsights?: CostInsightListRelationFilter,
           ?   sessions?: SessionListRelationFilter,
           ?   documents?: DocumentListRelationFilter,
           ?   staffAwards?: StaffAwardListRelationFilter,
           ?   Feedback?: FeedbackListRelationFilter,
           ?   promotionSuggestions?: PromotionSuggestionListRelationFilter
             }
           })

    Argument `where` of type OrgWhereUniqueInput needs at least one of `id` or `slug` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:96:5)

FAIL test/m1-kds-enterprise.e2e-spec.ts
  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should return tickets with waiterName, slaState, and proper ordering

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should filter tickets by station correctly

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should support "since" parameter for incremental sync

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

  ● M1 KDS Enterprise (e2e) › SLA Configuration › should get default SLA config for a station

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

  ● M1 KDS Enterprise (e2e) › SLA Configuration › should update SLA config (Manager/Owner only)

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

  ● M1 KDS Enterprise (e2e) › SLA Configuration › should reject SLA config update from waiter (L1)

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

  ● M1 KDS Enterprise (e2e) › KDS Resilience › should handle marking ticket ready and checking all-ready state

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

{"level":"info","time":1766845882643,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":8,"requestId":"306553a1-13b7-4cc4-8111-4e150c0023b5","route":"/auth/login"}
{"level":"info","time":1766845882649,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":4,"requestId":"0ebb1458-08ea-4b93-86e5-88c3efe19102","route":"/auth/login"}
{"level":"info","time":1766845882651,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/menu/items","statusCode":401,"durationMs":1,"requestId":"86bb3ffb-b711-4ce5-b67e-924def78addd","route":"/menu/items"}
FAIL test/e37-promotions.e2e-spec.ts
  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should create a happy hour promotion (20% off drinks 17:00-19:00)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should list promotions (including inactive)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should approve the promotion

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should apply discount when placing order during happy hour (18:00 on Monday)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should NOT apply discount outside happy hour (20:00)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should toggle promotion inactive

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should NOT apply discount when promotion is inactive

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'promotionEffect')

      88 |   afterAll(async () => {
      89 |     // Clean up test data
    > 90 |     await prisma.promotionEffect.deleteMany({ where: { promotion: { orgId } } });
         |                  ^
      91 |     await prisma.promotion.deleteMany({ where: { orgId } });
      92 |     await prisma.orderItem.deleteMany({ where: { order: { branchId } } });
      93 |     await prisma.order.deleteMany({ where: { branchId } });

      at Object.<anonymous> (e37-promotions.e2e-spec.ts:90:18)

FAIL test/e27-costing.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.org.create()` invocation in
      /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41
      
        55 
        56 async function setupTestData() {
        57   // Create org
      → 58   const org = await prisma.client.org.create({
               data: {
                 name: "E27 Test Org",
                 subdomain: "e27-test",
                 isSandbox: true,
             +   slug: String
               }
             })
      
      Argument `slug` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.inventoryItem.deleteMany()` invocation in
      /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:47:39
      
        44 await prisma.client.stockBatch.deleteMany({ where: { branch: { orgId } } });
        45 await prisma.client.recipeIngredient.deleteMany({});
        46 await prisma.client.menuItem.deleteMany({ where: { branch: { orgId } } });
      → 47 await prisma.client.inventoryItem.deleteMany({
             where: {
               org: {
               ~~~
                 id: undefined
               },
           ?   AND?: InventoryItemWhereInput | InventoryItemWhereInput[],
           ?   OR?: InventoryItemWhereInput[],
           ?   NOT?: InventoryItemWhereInput | InventoryItemWhereInput[],
           ?   id?: StringFilter | String,
           ?   orgId?: StringFilter | String,
           ?   sku?: StringNullableFilter | String | Null,
           ?   name?: StringFilter | String,
           ?   unit?: StringFilter | String,
           ?   category?: StringNullableFilter | String | Null,
           ?   reorderLevel?: DecimalFilter | Decimal,
           ?   reorderQty?: DecimalFilter | Decimal,
           ?   isActive?: BoolFilter | Boolean,
           ?   metadata?: JsonNullableFilter,
           ?   createdAt?: DateTimeFilter | DateTime,
           ?   updatedAt?: DateTimeFilter | DateTime,
           ?   stockBatches?: StockBatchListRelationFilter,
           ?   recipeIngredients?: RecipeIngredientListRelationFilter,
           ?   wastageRecords?: WastageListRelationFilter,
           ?   adjustments?: AdjustmentListRelationFilter,
           ?   poItems?: PurchaseOrderItemListRelationFilter,
           ?   receiptLines?: GoodsReceiptLineListRelationFilter,
           ?   spoutCalibrations?: SpoutCalibrationListRelationFilter,
           ?   forecastProfiles?: ForecastProfileListRelationFilter,
           ?   forecastPoints?: ForecastPointListRelationFilter,
           ?   stockMovements?: StockMovementListRelationFilter,
           ?   lowStockConfigs?: LowStockConfigListRelationFilter
             }
           })
      
      Unknown argument `org`. Did you mean `orgId`? Available options are marked with ?.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● E27 - Costing & Profit Engine (e2e) › Costing calculation on order close › should calculate cost and margin when closing an order

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)

  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should include cost data for MANAGER (L4) role

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)

  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should exclude cost data for CHEF (L3) when showCostToChef=false

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)

  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should include cost data for CHEF (L3) when showCostToChef=true

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.inventoryItem.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:47:39

      44 await prisma.client.stockBatch.deleteMany({ where: { branch: { orgId } } });
      45 await prisma.client.recipeIngredient.deleteMany({});
      46 await prisma.client.menuItem.deleteMany({ where: { branch: { orgId } } });
    → 47 await prisma.client.inventoryItem.deleteMany({
           where: {
             org: {
             ~~~
               id: undefined
             },
         ?   AND?: InventoryItemWhereInput | InventoryItemWhereInput[],
         ?   OR?: InventoryItemWhereInput[],
         ?   NOT?: InventoryItemWhereInput | InventoryItemWhereInput[],
         ?   id?: StringFilter | String,
         ?   orgId?: StringFilter | String,
         ?   sku?: StringNullableFilter | String | Null,
         ?   name?: StringFilter | String,
         ?   unit?: StringFilter | String,
         ?   category?: StringNullableFilter | String | Null,
         ?   reorderLevel?: DecimalFilter | Decimal,
         ?   reorderQty?: DecimalFilter | Decimal,
         ?   isActive?: BoolFilter | Boolean,
         ?   metadata?: JsonNullableFilter,
         ?   createdAt?: DateTimeFilter | DateTime,
         ?   updatedAt?: DateTimeFilter | DateTime,
         ?   stockBatches?: StockBatchListRelationFilter,
         ?   recipeIngredients?: RecipeIngredientListRelationFilter,
         ?   wastageRecords?: WastageListRelationFilter,
         ?   adjustments?: AdjustmentListRelationFilter,
         ?   poItems?: PurchaseOrderItemListRelationFilter,
         ?   receiptLines?: GoodsReceiptLineListRelationFilter,
         ?   spoutCalibrations?: SpoutCalibrationListRelationFilter,
         ?   forecastProfiles?: ForecastProfileListRelationFilter,
         ?   forecastPoints?: ForecastPointListRelationFilter,
         ?   stockMovements?: StockMovementListRelationFilter,
         ?   lowStockConfigs?: LowStockConfigListRelationFilter
           }
         })

    Unknown argument `org`. Did you mean `orgId`? Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e27-costing.e2e-spec.ts:47:5)

FAIL test/e26-kpis.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.org.create()` invocation in
      /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41
      
        24 prisma = app.get(PrismaService);
        25 
        26 // Create test org
      → 27 const org = await prisma.client.org.create({
             data: {
               name: "E26 Test Org",
               currency: "UGX",
           +   slug: String
             }
           })
      
      Argument `slug` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.org.delete()` invocation in
      /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:77:35
      
        74 // Cleanup
        75 await prisma.client.user.deleteMany({ where: { orgId } });
        76 await prisma.client.branch.deleteMany({ where: { orgId } });
      → 77 await prisma.client.org.delete({
             where: {
               id: undefined,
           ?   slug?: String,
           ?   AND?: OrgWhereInput | OrgWhereInput[],
           ?   OR?: OrgWhereInput[],
           ?   NOT?: OrgWhereInput | OrgWhereInput[],
           ?   name?: StringFilter | String,
           ?   createdAt?: DateTimeFilter | DateTime,
           ?   updatedAt?: DateTimeFilter | DateTime,
           ?   branches?: BranchListRelationFilter,
           ?   users?: UserListRelationFilter,
           ?   settings?: OrgSettingsNullableRelationFilter | OrgSettingsWhereInput | Null,
           ?   devices?: DeviceListRelationFilter,
           ?   floorPlans?: FloorPlanListRelationFilter,
           ?   taxCategories?: TaxCategoryListRelationFilter,
           ?   modifierGroups?: ModifierGroupListRelationFilter,
           ?   anomalyEvents?: AnomalyEventListRelationFilter,
           ?   alertChannels?: AlertChannelListRelationFilter,
           ?   scheduledAlerts?: ScheduledAlertListRelationFilter,
           ?   reservations?: ReservationListRelationFilter,
           ?   supportSessions?: SupportSessionListRelationFilter,
           ?   spoutDevices?: SpoutDeviceListRelationFilter,
           ?   spoutEvents?: SpoutEventListRelationFilter,
           ?   ownerDigests?: OwnerDigestListRelationFilter,
           ?   apiKeys?: ApiKeyListRelationFilter,
           ?   subscription?: OrgSubscriptionNullableRelationFilter | OrgSubscriptionWhereInput | Null,
           ?   branchBudgets?: BranchBudgetListRelationFilter,
           ?   forecastProfiles?: ForecastProfileListRelationFilter,
           ?   forecastPoints?: ForecastPointListRelationFilter,
           ?   franchiseRanks?: FranchiseRankListRelationFilter,
           ?   franchiseBudgets?: FranchiseBudgetListRelationFilter,
           ?   badgeAssets?: BadgeAssetListRelationFilter,
           ?   kdsSlaConfigs?: KdsSlaConfigListRelationFilter,
           ?   shiftTemplates?: ShiftTemplateListRelationFilter,
           ?   reportSubscriptions?: ReportSubscriptionListRelationFilter,
           ?   serviceProviders?: ServiceProviderListRelationFilter,
           ?   serviceReminders?: ServicePayableReminderListRelationFilter,
           ?   opsBudgets?: OpsBudgetListRelationFilter,
           ?   costInsights?: CostInsightListRelationFilter,
           ?   sessions?: SessionListRelationFilter,
           ?   documents?: DocumentListRelationFilter,
           ?   staffAwards?: StaffAwardListRelationFilter,
           ?   Feedback?: FeedbackListRelationFilter,
           ?   promotionSuggestions?: PromotionSuggestionListRelationFilter
             }
           })
      
      Argument `where` of type OrgWhereUniqueInput needs at least one of `id` or `slug` arguments. Available options are marked with ?.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require authentication

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should reject non-L4+ users

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require scope query param

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require branchId for branch scope

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should stream org-wide KPIs for L4+ user

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › KPI Computation › should compute salesToday from completed orders

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › KPI Computation › should count open orders correctly

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.org.delete()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:77:35

      74 // Cleanup
      75 await prisma.client.user.deleteMany({ where: { orgId } });
      76 await prisma.client.branch.deleteMany({ where: { orgId } });
    → 77 await prisma.client.org.delete({
           where: {
             id: undefined,
         ?   slug?: String,
         ?   AND?: OrgWhereInput | OrgWhereInput[],
         ?   OR?: OrgWhereInput[],
         ?   NOT?: OrgWhereInput | OrgWhereInput[],
         ?   name?: StringFilter | String,
         ?   createdAt?: DateTimeFilter | DateTime,
         ?   updatedAt?: DateTimeFilter | DateTime,
         ?   branches?: BranchListRelationFilter,
         ?   users?: UserListRelationFilter,
         ?   settings?: OrgSettingsNullableRelationFilter | OrgSettingsWhereInput | Null,
         ?   devices?: DeviceListRelationFilter,
         ?   floorPlans?: FloorPlanListRelationFilter,
         ?   taxCategories?: TaxCategoryListRelationFilter,
         ?   modifierGroups?: ModifierGroupListRelationFilter,
         ?   anomalyEvents?: AnomalyEventListRelationFilter,
         ?   alertChannels?: AlertChannelListRelationFilter,
         ?   scheduledAlerts?: ScheduledAlertListRelationFilter,
         ?   reservations?: ReservationListRelationFilter,
         ?   supportSessions?: SupportSessionListRelationFilter,
         ?   spoutDevices?: SpoutDeviceListRelationFilter,
         ?   spoutEvents?: SpoutEventListRelationFilter,
         ?   ownerDigests?: OwnerDigestListRelationFilter,
         ?   apiKeys?: ApiKeyListRelationFilter,
         ?   subscription?: OrgSubscriptionNullableRelationFilter | OrgSubscriptionWhereInput | Null,
         ?   branchBudgets?: BranchBudgetListRelationFilter,
         ?   forecastProfiles?: ForecastProfileListRelationFilter,
         ?   forecastPoints?: ForecastPointListRelationFilter,
         ?   franchiseRanks?: FranchiseRankListRelationFilter,
         ?   franchiseBudgets?: FranchiseBudgetListRelationFilter,
         ?   badgeAssets?: BadgeAssetListRelationFilter,
         ?   kdsSlaConfigs?: KdsSlaConfigListRelationFilter,
         ?   shiftTemplates?: ShiftTemplateListRelationFilter,
         ?   reportSubscriptions?: ReportSubscriptionListRelationFilter,
         ?   serviceProviders?: ServiceProviderListRelationFilter,
         ?   serviceReminders?: ServicePayableReminderListRelationFilter,
         ?   opsBudgets?: OpsBudgetListRelationFilter,
         ?   costInsights?: CostInsightListRelationFilter,
         ?   sessions?: SessionListRelationFilter,
         ?   documents?: DocumentListRelationFilter,
         ?   staffAwards?: StaffAwardListRelationFilter,
         ?   Feedback?: FeedbackListRelationFilter,
         ?   promotionSuggestions?: PromotionSuggestionListRelationFilter
           }
         })

    Argument `where` of type OrgWhereUniqueInput needs at least one of `id` or `slug` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:77:5)

FAIL test/e24-subscriptions.e2e-spec.ts
  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/orgs › should create org with ACTIVE subscription (dev admin)

    expected 201 "Created", got 404 "Not Found"

      31 |           planCode: 'BASIC',
      32 |         })
    > 33 |         .expect(201);
         |          ^
      34 |
      35 |       expect(response.body).toHaveProperty('org');
      36 |       expect(response.body).toHaveProperty('owner');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:33:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/orgs › should reject without dev admin header

    expected 401 "Unauthorized", got 404 "Not Found"

      49 |           planCode: 'PRO',
      50 |         })
    > 51 |         .expect(401);
         |          ^
      52 |     });
      53 |   });
      54 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:51:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - GET /dev/subscriptions › should list all subscriptions (dev admin)

    expected 200 "OK", got 404 "Not Found"

      58 |         .get('/dev/subscriptions')
      59 |         .set('X-Dev-Admin', 'dev1@chefcloud.local')
    > 60 |         .expect(200);
         |          ^
      61 |
      62 |       expect(Array.isArray(response.body)).toBe(true);
      63 |       expect(response.body.length).toBeGreaterThan(0);

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:60:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/plans › should upsert plan (super dev)

    expected 201 "Created", got 404 "Not Found"

      80 |           isActive: true,
      81 |         })
    > 82 |         .expect(201);
         |          ^
      83 |
      84 |       expect(response.body.code).toBe('TEST_PLAN');
      85 |       expect(response.body.name).toBe('Test Plan');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:82:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/plans › should reject non-super dev from creating plans

    expected 403 "Forbidden", got 404 "Not Found"

      108 |           features: {},
      109 |         })
    > 110 |         .expect(403);
          |          ^
      111 |     });
      112 |   });
      113 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:110:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - GET /billing/subscription › should return subscription for org owner

    expected 200 "OK", got 401 "Unauthorized"

      121 |           password: 'Owner#123',
      122 |         })
    > 123 |         .expect(200);
          |          ^
      124 |
      125 |       const token = loginResponse.body.access_token;
      126 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:123:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - GET /billing/subscription › should reject non-owner from viewing subscription

    expected 200 "OK", got 401 "Unauthorized"

      144 |           password: 'Waiter#123',
      145 |         })
    > 146 |         .expect(200);
          |          ^
      147 |
      148 |       const token = loginResponse.body.access_token;
      149 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:146:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - POST /billing/plan/change › should allow owner to request plan change

    expected 200 "OK", got 401 "Unauthorized"

      163 |           password: 'Owner#123',
      164 |         })
    > 165 |         .expect(200);
          |          ^
      166 |
      167 |       const token = loginResponse.body.access_token;
      168 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:165:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - POST /billing/cancel › should allow owner to request cancellation

    expected 200 "OK", got 401 "Unauthorized"

      186 |           password: 'Owner#123',
      187 |         })
    > 188 |         .expect(200);
          |          ^
      189 |
      190 |       const token = loginResponse.body.access_token;
      191 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:188:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766845886735,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/dev/orgs","statusCode":404,"durationMs":9,"requestId":"0374172f-10b7-44b5-b716-f3080c3f7f17"}
{"level":"info","time":1766845886744,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/dev/orgs","statusCode":404,"durationMs":5,"requestId":"f1aa22c6-8da2-45c7-8eb4-78433d1a9cf3"}
{"level":"info","time":1766845886747,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/dev/subscriptions","statusCode":404,"durationMs":1,"requestId":"f0fa883c-841a-45fe-931a-ea5ae85596b8"}
{"level":"info","time":1766845886750,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/dev/plans","statusCode":404,"durationMs":1,"requestId":"b35b1df1-ec20-4779-a861-26f26f1c81c6"}
{"level":"info","time":1766845886805,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/dev/plans","statusCode":404,"durationMs":3,"requestId":"7a245cff-0db8-4f38-ba34-699756bd8618"}
{"level":"info","time":1766845886811,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":4,"requestId":"7cd2c603-a3b2-4c95-ad53-ee041b130745","route":"/auth/login"}
{"level":"info","time":1766845886815,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":3,"requestId":"6bb91083-e2fa-448b-9b0b-d65988ea0e31","route":"/auth/login"}
{"level":"info","time":1766845886819,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":2,"requestId":"15dad507-205b-4616-b22f-3645a0fc98ac","route":"/auth/login"}
{"level":"info","time":1766845886823,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":3,"requestId":"7b3f9d61-bfb5-4034-ab66-a79c9c58d2f7","route":"/auth/login"}
{"level":"info","time":1766845887553,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":7,"requestId":"dd36eb7e-b7ab-41c0-b2c6-7b6df1d275f2","route":"/auth/login"}
{"level":"info","time":1766845887558,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":3,"requestId":"f8d1a695-3013-4b64-b33a-37a0368e4515","route":"/auth/login"}
{"level":"info","time":1766845887562,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":3,"requestId":"c5ef398c-0ccc-401f-ae22-49abdc023cfa","route":"/auth/login"}
{"level":"info","time":1766845887565,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":2,"requestId":"e5e42a92-d635-46b3-925c-ae07866fe883","route":"/auth/login"}
{"level":"info","time":1766845887585,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":401,"durationMs":1,"requestId":"21b80351-8df7-4cf5-8aa7-f47d90cdb842","route":"/access/matrix"}
{"level":"info","time":1766845887588,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":401,"durationMs":1,"requestId":"98257c82-830e-479f-bc00-1e6ea103d315","route":"/access/matrix"}
{"level":"info","time":1766845887592,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":401,"durationMs":2,"requestId":"6bbc9754-777c-4f73-acba-ae05d8a2818c","route":"/access/matrix"}
{"level":"info","time":1766845887595,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":401,"durationMs":1,"requestId":"d53a9ca3-7536-48ad-bcd4-97efac492333","route":"/access/matrix"}
{"level":"info","time":1766845887597,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":401,"durationMs":0,"requestId":"4efad620-c969-49a3-96ad-2425ecf5dee6","route":"/access/matrix"}
{"level":"info","time":1766845887601,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":401,"durationMs":1,"requestId":"1e1d1a8a-1dc5-4712-bba8-2dd36848c328","route":"/access/matrix"}
{"level":"info","time":1766845887604,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":401,"durationMs":1,"requestId":"d99bee20-e84d-44fa-b145-6e00d157a61e","route":"/access/matrix"}
{"level":"info","time":1766845887607,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":401,"durationMs":1,"requestId":"66c4b495-087d-4df6-9ace-1b17aeba751f","route":"/access/matrix"}
{"level":"info","time":1766845887610,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":401,"durationMs":1,"requestId":"12bd4d2f-6ab9-438b-b59d-0b950c46026c","route":"/access/matrix"}
{"level":"info","time":1766845887614,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":401,"durationMs":2,"requestId":"b0bc50f6-7d0e-49d5-a68d-d08d0492733a","route":"/access/matrix"}
{"level":"info","time":1766845887618,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":3,"requestId":"bbaad585-a5ba-498b-9be1-1bfc6f0f995e","route":"/auth/login"}
{"level":"info","time":1766845887622,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":2,"requestId":"79d3a76a-506f-4da0-bc38-90b511a4943a","route":"/auth/login"}
{"level":"info","time":1766845887627,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":3,"requestId":"ee8f7c27-9a73-4c70-a456-a1aa39ffee53","route":"/auth/login"}
{"level":"info","time":1766845887641,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":5,"requestId":"87274921-20dc-43a4-87e2-acf1cd97e017","route":"/auth/login"}
{"level":"info","time":1766845887647,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":3,"requestId":"6cbb0153-e861-4138-9d4f-8242a05346a0","route":"/auth/login"}
{"level":"info","time":1766845887652,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":3,"requestId":"33502206-10d3-4d9a-ac30-31ab0b58dd61","route":"/auth/login"}
FAIL test/e23-roles-access.e2e-spec.ts
  ● E23 Roles & Platform Access (e2e) › GET /access/matrix › should allow L4 (manager) to get platform access matrix

    expected 200 "OK", got 401 "Unauthorized"

      77 |         .get('/access/matrix')
      78 |         .set('Authorization', `Bearer ${managerToken}`)
    > 79 |         .expect(200);
         |          ^
      80 |
      81 |       expect(response.body).toHaveProperty('platformAccess');
      82 |       expect(response.body).toHaveProperty('defaults');

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:79:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › GET /access/matrix › should reject L3 (procurement) from accessing matrix

    expected 403 "Forbidden", got 401 "Unauthorized"

      90 |         .get('/access/matrix')
      91 |         .set('Authorization', `Bearer ${procurementToken}`)
    > 92 |         .expect(403);
         |          ^
      93 |     });
      94 |
      95 |     it('should reject L2 (ticket master) from accessing matrix', async () => {

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:92:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › GET /access/matrix › should reject L2 (ticket master) from accessing matrix

    expected 403 "Forbidden", got 401 "Unauthorized"

       97 |         .get('/access/matrix')
       98 |         .set('Authorization', `Bearer ${ticketMasterToken}`)
    >  99 |         .expect(403);
          |          ^
      100 |     });
      101 |
      102 |     it('should reject L1 (waiter) from accessing matrix', async () => {

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:99:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › GET /access/matrix › should reject L1 (waiter) from accessing matrix

    expected 403 "Forbidden", got 401 "Unauthorized"

      104 |         .get('/access/matrix')
      105 |         .set('Authorization', `Bearer ${waiterToken}`)
    > 106 |         .expect(403);
          |          ^
      107 |     });
      108 |
      109 |     it('should reject unauthenticated requests', async () => {

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:106:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › PATCH /access/matrix › should allow L4 (manager) to update platform access matrix

    expected 200 "OK", got 401 "Unauthorized"

      123 |         .set('Authorization', `Bearer ${managerToken}`)
      124 |         .send(updates)
    > 125 |         .expect(200);
          |          ^
      126 |
      127 |       expect(response.body).toEqual(updates);
      128 |     });

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:125:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › PATCH /access/matrix › should reject updates with invalid structure

    expected 500 "Internal Server Error", got 401 "Unauthorized"

      137 |         .set('Authorization', `Bearer ${managerToken}`)
      138 |         .send(invalidUpdates)
    > 139 |         .expect(500); // Service throws an error for invalid data
          |          ^
      140 |     });
      141 |
      142 |     it('should reject L3 (procurement) from updating matrix', async () => {

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:139:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › PATCH /access/matrix › should reject L3 (procurement) from updating matrix

    expected 403 "Forbidden", got 401 "Unauthorized"

      149 |         .set('Authorization', `Bearer ${procurementToken}`)
      150 |         .send(updates)
    > 151 |         .expect(403);
          |          ^
      152 |     });
      153 |
      154 |     it('should reject L2 (ticket master) from updating matrix', async () => {

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:151:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › PATCH /access/matrix › should reject L2 (ticket master) from updating matrix

    expected 403 "Forbidden", got 401 "Unauthorized"

      161 |         .set('Authorization', `Bearer ${ticketMasterToken}`)
      162 |         .send(updates)
    > 163 |         .expect(403);
          |          ^
      164 |     });
      165 |
      166 |     it('should reject unauthenticated requests', async () => {

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:163:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › New role authentication › should authenticate procurement user (L3)

    expected 200 "OK", got 401 "Unauthorized"

      184 |           password: 'Procurement#123',
      185 |         })
    > 186 |         .expect(200);
          |          ^
      187 |
      188 |       expect(response.body.user).toMatchObject({
      189 |         email: 'procurement@demo.local',

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:186:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › New role authentication › should authenticate assistant manager user (L3)

    expected 200 "OK", got 401 "Unauthorized"

      201 |           password: 'AssistantMgr#123',
      202 |         })
    > 203 |         .expect(200);
          |          ^
      204 |
      205 |       expect(response.body.user).toMatchObject({
      206 |         email: 'assistantmgr@demo.local',

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:203:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › New role authentication › should authenticate event manager user (L3)

    expected 200 "OK", got 401 "Unauthorized"

      218 |           password: 'EventMgr#123',
      219 |         })
    > 220 |         .expect(200);
          |          ^
      221 |
      222 |       expect(response.body.user).toMatchObject({
      223 |         email: 'eventmgr@demo.local',

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:220:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › New role authentication › should authenticate ticket master user (L2)

    expected 200 "OK", got 401 "Unauthorized"

      235 |           password: 'TicketMaster#123',
      236 |         })
    > 237 |         .expect(200);
          |          ^
      238 |
      239 |       expect(response.body.user).toMatchObject({
      240 |         email: 'ticketmaster@demo.local',

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:237:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › New role authentication › should authenticate assistant chef user (L2)

    expected 200 "OK", got 401 "Unauthorized"

      252 |           password: 'AssistantChef#123',
      253 |         })
    > 254 |         .expect(200);
          |          ^
      255 |
      256 |       expect(response.body.user).toMatchObject({
      257 |         email: 'assistantchef@demo.local',

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:254:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › New role authentication › should authenticate head barista user (L3)

    expected 200 "OK", got 401 "Unauthorized"

      269 |           password: 'HeadBarista#123',
      270 |         })
    > 271 |         .expect(200);
          |          ^
      272 |
      273 |       expect(response.body.user).toMatchObject({
      274 |         email: 'headbarista@demo.local',

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:271:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › Platform access matrix persistence › should persist and retrieve updated platform access

    expected 200 "OK", got 401 "Unauthorized"

      292 |         .set('Authorization', `Bearer ${managerToken}`)
      293 |         .send(updates)
    > 294 |         .expect(200);
          |          ^
      295 |
      296 |       // Retrieve matrix
      297 |       const response = await request(app.getHttpServer())

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:294:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

Summary of all failing tests
FAIL ./sse-security.e2e-spec.ts
  ● SSE /stream/kpis Security (E26) › Authentication › should return 401 when no token provided

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authentication › should return 401 with invalid token

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authorization › should return 403 for L1 (Waiter) role

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authorization › should allow L4 (Manager) role

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authorization › should allow L5 (Owner) role

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › SSE Headers › should set correct SSE headers

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Event Emission › should emit at least one KPIs event with valid token

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Org-Scope Isolation › should only stream data for authenticated user's org

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Rate Limiting › should return 429 after exceeding rate limit

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Rate Limiting › should block concurrent connections beyond limit

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Connection Cleanup › should clean up resources on disconnect

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › CORS › should respect CORS allowlist

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'delete')

      72 |     await prisma.user.deleteMany({ where: { orgId } });
      73 |     await prisma.branch.deleteMany({ where: { orgId } });
    > 74 |     await prisma.organization.delete({ where: { id: orgId } });
         |                               ^
      75 |     await app.close();
      76 |   });
      77 |

      at Object.<anonymous> (sse-security.e2e-spec.ts:74:31)

FAIL e2e/accounting.e2e-spec.ts
  ● Accounting E2E › should create period → lock → posting blocked

    TypeError: Cannot read properties of undefined (reading 'upsert')

      362 |   const created = [];
      363 |   for (const acc of accounts) {
    > 364 |     const account = await prisma.account.upsert({
          |                                          ^
      365 |       where: { orgId_code: { orgId, code: acc.code } },
      366 |       update: {},
      367 |       create: {

      at createChartOfAccounts (e2e/factory.ts:364:42)
      at Object.<anonymous> (e2e/accounting.e2e-spec.ts:33:32)

FAIL ./e22-franchise.e2e-spec.ts
  ● E22-s2: Franchise APIs (e2e) › POST /franchise/budgets › should upsert a budget for a branch

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › POST /franchise/budgets › should update existing budget on re-upsert

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/budgets › should fetch budgets for a period

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/budgets › should reject invalid period format

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/rankings › should return ranked branches with deterministic ordering

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/procurement/suggest › should return items below safety stock

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate draft POs with packSize rounding

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate draft POs with packSize rounding

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate drafts for specific branches only

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate drafts for specific branches only

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › GET /franchise/procurement/drafts › should list all draft POs with supplier and branch names

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › GET /franchise/procurement/drafts › should list all draft POs with supplier and branch names

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should approve draft POs and update status to PLACED

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should approve draft POs and update status to PLACED

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should reject non-owner approval attempts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should reject non-owner approval attempts

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should return per-branch KPIs and totals for date range

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should filter by branchIds when provided

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should default to today when dates omitted

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should reject non-manager/owner users

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should return branches ranked by NET_SALES

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should return branches ranked by MARGIN_PERCENT

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should apply limit parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should reject unsupported metrics

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should reject requests without metric parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should return all budgets without filters

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should return all budgets without filters

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by year and month

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by year and month

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should allow L4 (Manager) to read budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should allow L4 (Manager) to read budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should create new budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should update existing budgets (idempotent)

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should reject L4 (Manager) from upserting budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should validate year range (2000-9999)

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should validate month range (1-12)

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should calculate variance for all branches

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should calculate variance for all branches

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should filter variance by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should filter variance by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should return empty array when no budgets exist

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should return empty array when no budgets exist

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require year parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require year parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require month parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require month parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.inventoryItem.delete()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:344:47

      341 await prisma.client.purchaseOrder.deleteMany({ where: { orgId } });
      342 await prisma.client.procurementJob.deleteMany({ where: { orgId } });
      343 await prisma.client.stockBatch.deleteMany({ where: { itemId } });
    → 344 await prisma.client.inventoryItem.delete({
            where: {
              id: undefined,
          ?   orgId_sku?: InventoryItemOrgIdSkuCompoundUniqueInput,
          ?   AND?: InventoryItemWhereInput | InventoryItemWhereInput[],
          ?   OR?: InventoryItemWhereInput[],
          ?   NOT?: InventoryItemWhereInput | InventoryItemWhereInput[],
          ?   orgId?: StringFilter | String,
          ?   sku?: StringNullableFilter | String | Null,
          ?   name?: StringFilter | String,
          ?   unit?: StringFilter | String,
          ?   category?: StringNullableFilter | String | Null,
          ?   reorderLevel?: DecimalFilter | Decimal,
          ?   reorderQty?: DecimalFilter | Decimal,
          ?   isActive?: BoolFilter | Boolean,
          ?   metadata?: JsonNullableFilter,
          ?   createdAt?: DateTimeFilter | DateTime,
          ?   updatedAt?: DateTimeFilter | DateTime,
          ?   stockBatches?: StockBatchListRelationFilter,
          ?   recipeIngredients?: RecipeIngredientListRelationFilter,
          ?   wastageRecords?: WastageListRelationFilter,
          ?   adjustments?: AdjustmentListRelationFilter,
          ?   poItems?: PurchaseOrderItemListRelationFilter,
          ?   receiptLines?: GoodsReceiptLineListRelationFilter,
          ?   spoutCalibrations?: SpoutCalibrationListRelationFilter,
          ?   forecastProfiles?: ForecastProfileListRelationFilter,
          ?   forecastPoints?: ForecastPointListRelationFilter,
          ?   stockMovements?: StockMovementListRelationFilter,
          ?   lowStockConfigs?: LowStockConfigListRelationFilter
            }
          })

    Argument `where` of type InventoryItemWhereUniqueInput needs at least one of `id` or `orgId_sku` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:344:7)

  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.order.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:996:35

      993 
      994 afterAll(async () => {
      995   // Cleanup variance test data
    → 996   await prisma.client.order.deleteMany({
              where: {
                branchId: {
                  in: [
                    undefined,
                    ~~~~~~~~~
                    undefined
                  ]
                },
                createdAt: {
                  gte: new Date("2025-01-01T00:00:00.000Z"),
                  lt: new Date("2025-02-01T00:00:00.000Z")
                }
              }
            })

    Invalid value for argument `in[0]`: Can not use `undefined` value within array. Use `null` or filter out `undefined` values.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                          ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at e.throwValidationError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:10206)
      at od (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:9323)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8075)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at mr (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:6037)
      at vn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:5902)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10186
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._executeRequest (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10165)
      at Na (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:9955)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9639)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9933
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9913
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9836)
      at s (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5636)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5864
      at i (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1016)
      at PrismaPromise.then (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1091)

  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.order.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:129:31

      126 
      127 afterAll(async () => {
      128   // Cleanup
    → 129   await prisma.client.order.deleteMany({
              where: {
                branchId: {
                  in: [
                    undefined,
                    ~~~~~~~~~
                    undefined
                  ]
                }
              }
            })

    Invalid value for argument `in[0]`: Can not use `undefined` value within array. Use `null` or filter out `undefined` values.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                          ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at e.throwValidationError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:10206)
      at od (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:9323)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8075)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at mr (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:6037)
      at vn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:5902)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10186
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._executeRequest (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10165)
      at Na (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:9955)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9639)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9933
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9913
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9836)
      at s (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5636)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5864
      at i (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1016)
      at PrismaPromise.then (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1091)

FAIL ./auth.e2e-spec.ts
  ● Auth (e2e) › POST /auth/login › should login with valid credentials

    expected 200 "OK", got 401 "Unauthorized"

      40 |           password: 'Owner#123',
      41 |         })
    > 42 |         .expect(200);
         |          ^
      43 |
      44 |       expect(response.body).toHaveProperty('access_token');
      45 |       expect(response.body).toHaveProperty('user');

      at Object.<anonymous> (auth.e2e-spec.ts:42:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/pin-login › should login with valid employee code and PIN

    expected 200 "OK", got 401 "Unauthorized"

      91 |           branchId: await getMainBranchId(),
      92 |         })
    > 93 |         .expect(200);
         |          ^
      94 |
      95 |       expect(response.body).toHaveProperty('access_token');
      96 |       expect(response.body.user).toMatchObject({

      at Object.<anonymous> (auth.e2e-spec.ts:93:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/msr-swipe › should login with valid badge ID

    expected 200 "OK", got 400 "Bad Request"

      142 |           badgeId: 'CASHIER001',
      143 |         })
    > 144 |         .expect(200);
          |          ^
      145 |
      146 |       expect(response.body).toHaveProperty('access_token');
      147 |       expect(response.body.user).toMatchObject({

      at Object.<anonymous> (auth.e2e-spec.ts:144:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/msr-swipe › should reject unknown badge ID

    expected 404 "Not Found", got 400 "Bad Request"

      158 |           badgeId: 'UNKNOWN_BADGE',
      159 |         })
    > 160 |         .expect(404);
          |          ^
      161 |     });
      162 |
      163 |     it('should login with branch verification', async () => {

      at Object.<anonymous> (auth.e2e-spec.ts:160:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/msr-swipe › should login with branch verification

    expected 200 "OK", got 400 "Bad Request"

      168 |           branchId: await getMainBranchId(),
      169 |         })
    > 170 |         .expect(200);
          |          ^
      171 |
      172 |       expect(response.body).toHaveProperty('access_token');
      173 |     });

      at Object.<anonymous> (auth.e2e-spec.ts:170:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › GET /me › should return user profile with valid token

    expected 200 "OK", got 401 "Unauthorized"

      190 |         .get('/me')
      191 |         .set('Authorization', `Bearer ${accessToken}`)
    > 192 |         .expect(200);
          |          ^
      193 |
      194 |       expect(response.body).toMatchObject({
      195 |         email: 'owner@demo.local',

      at Object.<anonymous> (auth.e2e-spec.ts:192:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /devices/register › should allow L4 manager to register a device

    expected 201 "Created", got 401 "Unauthorized"

      235 |           branchId: await getMainBranchId(),
      236 |         })
    > 237 |         .expect(201);
          |          ^
      238 |
      239 |       expect(response.body).toHaveProperty('id');
      240 |       expect(response.body).toHaveProperty('deviceKey');

      at Object.<anonymous> (auth.e2e-spec.ts:237:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL e2e/reports.e2e-spec.ts
  ● Reports E2E › should fetch X report (shift summary)

    expected 200 "OK", got 404 "Not Found"

      48 |       .get('/reports/x-report')
      49 |       .set('Authorization', `Bearer ${authToken}`)
    > 50 |       .expect(200);
         |        ^
      51 |
      52 |     expect(response.body).toBeDefined();
      53 |     expect(response.body.shift).toBeDefined();

      at Object.<anonymous> (e2e/reports.e2e-spec.ts:50:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Reports E2E › should fetch owner overview

    expected 200 "OK", got 404 "Not Found"

      62 |         endDate: '2025-01-31',
      63 |       })
    > 64 |       .expect(200);
         |        ^
      65 |
      66 |     expect(response.body).toBeDefined();
      67 |   });

      at Object.<anonymous> (e2e/reports.e2e-spec.ts:64:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL e2e/inventory.e2e-spec.ts
  ● Inventory E2E › should receive PO → on-hand increases

    expected 200 "OK", got 404 "Not Found"

      57 |       .get(`/inventory/items/${beefId}`)
      58 |       .set('Authorization', `Bearer ${authToken}`)
    > 59 |       .expect(200);
         |        ^
      60 |
      61 |     const initialOnHand = initialResponse.body.onHand || 0;
      62 |

      at Object.<anonymous> (e2e/inventory.e2e-spec.ts:59:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL e2e/workforce.e2e-spec.ts
  ● Workforce E2E › should clock in → clock out

    expected 201 "Created", got 404 "Not Found"

      58 |       .post('/workforce/attendance/clock-in')
      59 |       .set('Authorization', `Bearer ${waiterToken}`)
    > 60 |       .expect(201);
         |        ^
      61 |
      62 |     const _attendanceId = clockInResponse.body.id;
      63 |     expect(clockInResponse.body.clockIn).toBeDefined();

      at Object.<anonymous> (e2e/workforce.e2e-spec.ts:60:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL e2e/bookings.e2e-spec.ts
  ● Bookings E2E › should create booking → HOLD → pay → confirm

    TypeError: Cannot read properties of undefined (reading 'upsert')

      327 |  */
      328 | export async function createEvent(prisma: PrismaClient, orgId: string, branchId: string) {
    > 329 |   const event = await prisma.event.upsert({
          |                                    ^
      330 |     where: { id: `event-${orgId}` },
      331 |     update: {},
      332 |     create: {

      at createEvent (e2e/factory.ts:329:36)
      at Object.<anonymous> (e2e/bookings.e2e-spec.ts:33:36)

FAIL ./e23-platform-access.e2e-spec.ts
  ● E23 Platform Access (e2e) › Public routes bypass › should allow unauthenticated access to /health

    expected 200 "OK", got 404 "Not Found"

      27 |         .get('/health')
      28 |         .set('X-Client-Platform', 'mobile')
    > 29 |         .expect(200);
         |          ^
      30 |     });
      31 |
      32 |     it('should allow unauthenticated access to /health from any platform', async () => {

      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:29:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Platform Access (e2e) › Public routes bypass › should allow unauthenticated access to /health from any platform

    expected 200 "OK", got 404 "Not Found"

      34 |         .get('/health')
      35 |         .set('X-Client-Platform', 'desktop')
    > 36 |         .expect(200);
         |          ^
      37 |
      38 |       await request(app.getHttpServer()).get('/health').set('X-Client-Platform', 'web').expect(200);
      39 |     });

      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:36:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Platform Access (e2e) › Platform header handling › should work without X-Client-Platform header (defaults to web)

    expected 200 "OK", got 404 "Not Found"

      53 |         .get('/health')
      54 |         // No X-Client-Platform header
    > 55 |         .expect(200);
         |          ^
      56 |     });
      57 |   });
      58 | });

      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:55:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL e2e/pos.e2e-spec.ts
  ● POS E2E › should create order → send-to-kitchen → close

    TypeError: Cannot read properties of undefined (reading 'upsert')

      236 |  */
      237 | export async function createFloor(prisma: PrismaClient, orgId: string, branchId: string) {
    > 238 |   const floorPlan = await prisma.floorPlan.upsert({
          |                                            ^
      239 |     where: { id: `floor-e2e-${orgId}` },
      240 |     update: {},
      241 |     create: {

      at createFloor (e2e/factory.ts:238:44)
      at Object.<anonymous> (e2e/pos.e2e-spec.ts:36:36)

FAIL ./billing-simple.e2e-spec.ts
  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 401 if no authorization token is provided

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 200 and subscription details with valid L5 token

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 401 if no authorization token is provided

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 403 if user is not L5 (manager attempting)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 200 or 404 with valid L5 token

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 404 for unknown plan code

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should rate limit after burst requests (expect at least one 429)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 401 if no authorization token is provided

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 403 if user is not L5 (manager attempting)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 200 or 404 with valid L5 token

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should be idempotent (canceling twice should succeed)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

FAIL e2e/badge-revocation.e2e-spec.ts
  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should authenticate via badge swipe and include badgeId in token

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should access protected endpoint with valid token

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should reject login with REVOKED badge

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should invalidate existing token when badge is revoked (< 2s)

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should allow new login after badge revocation with updated version

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should invalidate sessions when badge is reported LOST

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should NOT reinstate old tokens when badge is RETURNED

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Session Version Validation › should reject token with mismatched session version

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Performance & Timing › should invalidate session within 2 seconds (E25 requirement)

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'id')

      124 |     // Delete in dependency order
      125 |     await prisma.client.employeeProfile.deleteMany({
    > 126 |       where: { userId: testUser.id },
          |                                 ^
      127 |     });
      128 |     await prisma.client.badgeAsset.deleteMany({
      129 |       where: { orgId: testOrg.id },

      at cleanupTestData (e2e/badge-revocation.e2e-spec.ts:126:33)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:43:11)

FAIL ./webhook-security.e2e-spec.ts
  ● Webhook Security E2E (E24) › Authentication › should reject webhook without signature header

    TypeError: request is not a function

      70 |   describe('Authentication', () => {
      71 |     it('should reject webhook without signature header', async () => {
    > 72 |       const response = await request(app.getHttpServer())
         |                              ^
      73 |         .post('/webhooks/billing')
      74 |         .set('Content-Type', 'application/json')
      75 |         .set('X-Ts', Date.now().toString())

      at Object.<anonymous> (webhook-security.e2e-spec.ts:72:30)

  ● Webhook Security E2E (E24) › Authentication › should reject webhook without timestamp header

    TypeError: request is not a function

      82 |
      83 |     it('should reject webhook without timestamp header', async () => {
    > 84 |       const response = await request(app.getHttpServer())
         |                              ^
      85 |         .post('/webhooks/billing')
      86 |         .set('Content-Type', 'application/json')
      87 |         .set('X-Sig', 'some-signature')

      at Object.<anonymous> (webhook-security.e2e-spec.ts:84:30)

  ● Webhook Security E2E (E24) › Authentication › should reject webhook without request ID header

    TypeError: request is not a function

      93 |
      94 |     it('should reject webhook without request ID header', async () => {
    > 95 |       const response = await request(app.getHttpServer())
         |                              ^
      96 |         .post('/webhooks/billing')
      97 |         .set('Content-Type', 'application/json')
      98 |         .set('X-Sig', 'some-signature')

      at Object.<anonymous> (webhook-security.e2e-spec.ts:95:30)

  ● Webhook Security E2E (E24) › Authentication › should reject webhook with invalid signature

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:107:30)

  ● Webhook Security E2E (E24) › Authentication › should accept webhook with valid signature

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:117:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with stale timestamp (>5 minutes old)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:132:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with future timestamp (>5 minutes ahead)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:148:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should accept webhook with timestamp at edge of window (4 minutes old)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:162:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with invalid timestamp format

    TypeError: request is not a function

      169 |
      170 |     it('should reject webhook with invalid timestamp format', async () => {
    > 171 |       const response = await request(app.getHttpServer())
          |                              ^
      172 |         .post('/webhooks/billing')
      173 |         .set('Content-Type', 'application/json')
      174 |         .set('X-Sig', 'some-signature')

      at Object.<anonymous> (webhook-security.e2e-spec.ts:171:30)

  ● Webhook Security E2E (E24) › Replay protection › should reject duplicate request ID (replay attack)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:190:31)

  ● Webhook Security E2E (E24) › Replay protection › should allow same payload with different request IDs

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:206:31)

  ● Webhook Security E2E (E24) › Body integrity › should reject webhook with tampered body

    TypeError: request is not a function

      221 |
      222 |       // Send tampered payload with signature from original
    > 223 |       const response = await request(app.getHttpServer())
          |                              ^
      224 |         .post('/webhooks/billing')
      225 |         .set('Content-Type', 'application/json')
      226 |         .set('X-Sig', signature)

      at Object.<anonymous> (webhook-security.e2e-spec.ts:223:30)

  ● Webhook Security E2E (E24) › Body integrity › should handle empty body correctly

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:237:30)

  ● Webhook Security E2E (E24) › Body integrity › should handle complex nested JSON

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:257:30)

  ● Webhook Security E2E (E24) › Multiple webhook endpoints › should protect MTN webhook endpoint

    TypeError: request is not a function

      263 |     it('should protect MTN webhook endpoint', async () => {
      264 |       const payload = { transactionId: 'mtn-123', status: 'completed' };
    > 265 |       const response = await request(app.getHttpServer())
          |                              ^
      266 |         .post('/webhooks/mtn')
      267 |         .set('Content-Type', 'application/json')
      268 |         .send(payload);

      at Object.<anonymous> (webhook-security.e2e-spec.ts:265:30)

  ● Webhook Security E2E (E24) › Multiple webhook endpoints › should protect Airtel webhook endpoint

    TypeError: request is not a function

      274 |     it('should protect Airtel webhook endpoint', async () => {
      275 |       const payload = { transactionId: 'airtel-123', status: 'completed' };
    > 276 |       const response = await request(app.getHttpServer())
          |                              ^
      277 |         .post('/webhooks/airtel')
      278 |         .set('Content-Type', 'application/json')
      279 |         .send(payload);

      at Object.<anonymous> (webhook-security.e2e-spec.ts:276:30)

  ● Webhook Security E2E (E24) › Response format › should return proper success response

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:289:30)

  ● Webhook Security E2E (E24) › Response format › should return proper error response for auth failure

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:302:30)

  ● Webhook Security E2E (E24) › Performance and load › should handle multiple concurrent valid webhooks

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at webhook-security.e2e-spec.ts:314:9
          at Function.from (<anonymous>)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:313:30)

FAIL ./plan-rate-limit.e2e-spec.ts
  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should enforce free tier rate limit (10/min)

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should allow pro tier higher limits (60/min)

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should allow enterprise tier highest limits (240/min)

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › POST /billing/cancel › should apply rate limiting to cancel endpoint

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › Rate limit headers › should include Retry-After header in 429 responses

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › Authentication requirement › should reject requests without authentication

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › Metrics › should emit rate limit hit metrics

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjoeenri0039znbneu1zt7hb",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

FAIL ./b2-apikey.e2e-spec.ts
  ● API Key Security (E2E) › POST /ops/apikeys › should create API key as L5 user

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /ops/apikeys › should list API keys (masked)

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should accept request with valid API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should reject request with missing API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should reject request with invalid API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › Rate limiting › should enforce rate limit on public endpoints

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › DELETE /ops/apikeys/:id › should delete API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjoeeob7003oznbndpju7qqh",
             token: "test-token-1766845862037",
             expiresAt: new Date("2025-12-28T14:31:02.037Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

FAIL ./b3-multi-tenant.e2e-spec.ts
  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should deny user A access to org B menu items with wrong x-org-id

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjoeeox9003vznbnsbgkdvf5",
             token: "token-a-1766845862831",
             expiresAt: new Date("2025-12-28T14:31:02.831Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should return 404 when user A requests org B resource with correct x-org-id

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjoeeox9003vznbnsbgkdvf5",
             token: "token-a-1766845862831",
             expiresAt: new Date("2025-12-28T14:31:02.831Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should allow user A to access org A menu items

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjoeeox9003vznbnsbgkdvf5",
             token: "token-a-1766845862831",
             expiresAt: new Date("2025-12-28T14:31:02.831Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should require x-org-id header

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjoeeox9003vznbnsbgkdvf5",
             token: "token-a-1766845862831",
             expiresAt: new Date("2025-12-28T14:31:02.831Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org data isolation › should not leak org B data when user A lists menu items

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjoeeox9003vznbnsbgkdvf5",
             token: "token-a-1766845862831",
             expiresAt: new Date("2025-12-28T14:31:02.831Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org data isolation › should isolate org B user from org A data

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjoeeox9003vznbnsbgkdvf5",
             token: "token-a-1766845862831",
             expiresAt: new Date("2025-12-28T14:31:02.831Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'id')

      152 |     // Cleanup in reverse order
      153 |     await prisma.client.menuItem.deleteMany({ where: { branchId: branchA.id } });
    > 154 |     await prisma.client.menuItem.deleteMany({ where: { branchId: branchB.id } });
          |                                                                          ^
      155 |     await prisma.category.deleteMany({ where: { branchId: branchA.id } });
      156 |     await prisma.category.deleteMany({ where: { branchId: branchB.id } });
      157 |     await prisma.session.deleteMany({ where: { userId: userA.id } });

      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:154:74)

FAIL ./a3-pos.e2e-spec.ts
  ● A3 POS Core (e2e) › should create order with burger+fries -> send-to-kitchen -> kds queue shows ticket -> mark ready -> close order

    TypeError: menuResponse.body.find is not a function

      41 |       .set('Authorization', `Bearer ${authToken}`);
      42 |
    > 43 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      44 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      45 |     burgerId = burger.id;
      46 |     friesId = fries.id;

      at Object.<anonymous> (a3-pos.e2e-spec.ts:43:38)

  ● A3 POS Core (e2e) › should create order with burger only -> send-to-kitchen -> order has NO_DRINKS anomaly flag

    TypeError: menuResponse.body.find is not a function

      41 |       .set('Authorization', `Bearer ${authToken}`);
      42 |
    > 43 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      44 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      45 |     burgerId = burger.id;
      46 |     friesId = fries.id;

      at Object.<anonymous> (a3-pos.e2e-spec.ts:43:38)

FAIL e2e/franchise-rankings-cache.e2e-spec.ts
  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return cached=false on first call (cache miss)

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return cached=true on second call within TTL (cache hit)

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return same data structure on cache hit and miss

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should cache separately for different periods

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return error for invalid period format

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should measure response time difference between miss and hit

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

FAIL e2e/franchise-budgets-cache.e2e-spec.ts
  ● E22.C - Franchise Budgets Caching (e2e) › should return cached=false on first call (cache miss)

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should return cached=true on second call within TTL (cache hit)

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should maintain data structure consistency between cached and non-cached responses

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should use different cache keys for different periods

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should return error for invalid period format

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › cache hit should be significantly faster than cache miss

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

FAIL e2e/franchise-cache-invalidation.e2e-spec.ts
  ● E22.D - Franchise Cache Invalidation (e2e) › Budget Update Invalidation › should invalidate budgets cache after budget update

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

  ● E22.D - Franchise Cache Invalidation (e2e) › Budget Update Invalidation › should not affect other cache prefixes when updating budgets

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

  ● E22.D - Franchise Cache Invalidation (e2e) › Cache Miss After Invalidation › should return fresh data after cache invalidation

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

  ● E22.D - Franchise Cache Invalidation (e2e) › Multiple Invalidations › should handle multiple rapid invalidations without errors

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

FAIL e2e/billing.e2e-spec.ts
  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 401 if no authorization token is provided

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 403 if user is not L5 (owner)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 200 and log plan change for L5 owner

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 404 for non-existent plan code

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 429 after exceeding plan-aware rate limit (burst)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 401 if no authorization token is provided

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 403 if user is not L5 (owner)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 200 and log cancellation for L5 owner

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should be idempotent (canceling twice returns 200)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 401 if no authorization token is provided

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 200 with subscription details for authenticated user

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

FAIL ./m7-service-providers.e2e-spec.ts
  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 1. Service Providers Management › should create a service provider

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 1. Service Providers Management › should create a monthly contract

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should generate reminders for active contracts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should list reminders for a branch

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should get reminder summary

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should mark reminder as paid

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should set a budget for a category

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should compute budget actuals

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should get budget summary

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should get franchise budget summary

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 4. Cost-Cutting Insights › should generate cost insights for a branch

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 4. Cost-Cutting Insights › should generate franchise-wide insights

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 5. Integration with Owner Digests › should include M7 data in franchise digest

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should validate dueDay for monthly contracts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should prevent deleting provider with active contracts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should require budget parameters

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)


  ● Test suite failed to run

    TypeError: prisma.$disconnect is not a function

      46 |     // Cleanup
      47 |     await cleanupTestData();
    > 48 |     await prisma.$disconnect();
         |                  ^
      49 |     await app.close();
      50 |   });
      51 |

      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:48:18)

FAIL e2e/inventory.slice.e2e-spec.ts
  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › GET /inventory/items should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › POST /inventory/items should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › POST /inventory/adjustments should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › POST /inventory/wastage should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Rate Limiting › Rate limiting produces >= one 429 deterministically

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › should bootstrap successfully without metatype errors

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › GET /inventory/items should exist (not 404)

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /inventory/items should validate request body

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /inventory/adjustments should validate request body

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › GET /inventory/items endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › POST /inventory/items endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › GET /inventory/levels endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › POST /inventory/adjustments endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › POST /inventory/wastage endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

FAIL ./msr-card.e2e-spec.ts
  ● MSR Card Management (e2e) › POST /auth/msr/assign › should assign MSR card to employee

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr/assign › should reject duplicate card assignment to same employee

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr/assign › should reject unauthorized access (no token)

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr-swipe › should authenticate with valid MSR card

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr-swipe › should reject invalid badge ID

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › GET /auth/msr/cards › should list MSR cards for organization

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › GET /auth/msr/cards › should reject unauthorized access

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr/revoke › should revoke MSR card

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr/revoke › should reject unauthorized access

    expected 200 "OK", got 401 "Unauthorized"

      50 |         password: 'Owner#123',
      51 |       })
    > 52 |       .expect(200); // Ensure login succeeds
         |        ^
      53 |
      54 |     ownerToken = loginResponse.body.access_token;
      55 |     orgId = loginResponse.body.user?.orgId || loginResponse.body.user?.org?.id; // Handle both formats

      at Object.<anonymous> (msr-card.e2e-spec.ts:52:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL e2e/reservations.slice.e2e-spec.ts
  ● Reservations (Slice E2E) › GET /reservations -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations -> 200 with token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations -> 201 (create booking)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations -> 400/422 (invalid payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations/:id/confirm -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations/:id/cancel -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations/:id/seat -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations?status=CONFIRMED -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations?from=2025-11-13&to=2025-11-14 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations/summary?from=2025-11-01&to=2025-11-30 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations-test/availability?date=2025-11-13&party=2 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations-test/availability?date=2025-11-13&party=6 -> 200 (fewer slots)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › Rate limiting produces >= one 429 on /reservations

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

FAIL e2e/devportal.slice.e2e-spec.ts
  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › GET /dev/keys without token -> 200 (test controller)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › GET /dev/keys -> 200 with token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys -> 201 (create)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys -> 400 (invalid payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys/key_1/revoke -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › Plan-aware limit hits 429 for free but not for pro (same burst)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev-webhook/events -> 200 { ok:true } (valid HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev-webhook/events -> 200 { ok:false } (bad HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev-webhook/events -> 200 { ok:false } (missing signature)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › GET /dev/keys returns multiple keys with plan info

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys with pro plan -> 201

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

FAIL e2e/transfer.invalidation.slice.e2e-spec.ts
  ● Transfer Invalidation (Slice E2E) — E22.D › POST /transfer-test/event -> 401 without token

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › POST /transfer-test/event -> 200 {ok:false} on invalid payload

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › HIT → transfer.changed → MISS (forecast cache proves invalidation)

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › Idempotency: repeating same event still returns ok:true

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › Deterministic rate limit: >= one 429 on /forecast-test/sales

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

FAIL e2e/payments.slice.e2e-spec.ts
  ● Payments (Slice E2E) › GET /payments -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › GET /payments -> 200 with token (lists payments)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › GET /payments/pay_001 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › GET /payments/pay_missing -> 404/400 (invalid id)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments -> 201 (create payment)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments -> 400/422 (invalid payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/pay_001/capture -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/pay_001/refund -> 201

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/intents -> 201 (create intent)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/intents/pi_001/cancel -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments-test-webhook/gateway -> 200 (valid HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments-test-webhook/gateway -> 200 { ok:false } (bad HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments-test-webhook/gateway -> 200 { ok:false } (missing signature)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › Rate limiting produces >= one 429 on /payments

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

FAIL e2e/orders.slice.e2e-spec.ts
  ● Orders (Slice E2E) › POST /pos/orders -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders -> 201 with token (creates open order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/send-to-kitchen -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/modify -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/send-to-kitchen -> 200/201 (sends to kitchen)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/modify -> 200 (modifies order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/void -> 200 (voids order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/close -> 200 (closes order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/discount -> 200 (applies discount)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/post-close-void -> 200 (voids closed order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders -> 400/422 (bad payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/invalid-id/send-to-kitchen -> 404/400 (invalid order id)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/ord_001/modify -> 400/422 (bad modify payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › Rate limiting produces >= one 429 on /pos/orders

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

FAIL e2e/franchise.slice.e2e-spec.ts
  ● Franchise (Slice E2E) › GET /franchise/overview -> 401 without token

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/overview -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/rankings -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/budgets -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › Two reads of /franchise/overview return consistent payload shape

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › POST /franchise-test/invalidate -> { ok:true }

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/overview after invalidation -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/forecast/items -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › Rate limiting produces >= one 429 on /franchise/overview

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

FAIL e2e/pos-isolation.e2e-spec.ts
  ● PosModule isolation test › should compile PosModule to show exact failing provider

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

       8 | describe('PosModule isolation test', () => {
       9 |   it('should compile PosModule to show exact failing provider', async () => {
    > 10 |     const moduleRef = await createE2ETestingModule({
         |                       ^
      11 |       imports: [PosModule],
      12 |     });
      13 |     await moduleRef.init();

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/pos-isolation.e2e-spec.ts:10:23)

FAIL e2e/kds.slice.e2e-spec.ts
  ● KDS (Slice E2E) › GET /kds-test/tickets without token -> 200 (test controller)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › GET /kds-test/tickets -> 200 with token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › GET /kds-test/tickets/tkt-001 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › GET /kds-test/tickets/tkt-missing -> 404

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/tickets/tkt-001/ack -> 200 (ACK)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/tickets/tkt-001/bump -> 200 (BUMPED)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/tickets/tkt-001/expo -> 200 (EXPO)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/screens/scr-001/heartbeat -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › Rate limiting produces >= one 429 on /kds-test/tickets

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

FAIL e2e/billing.slice.e2e-spec.ts
  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › POST /billing/plan/change should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › POST /billing/cancel should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › GET /billing/subscription should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Rate Limiting › Rate limiting produces >= one 429 deterministically

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › should bootstrap successfully without metatype errors

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › should have billing controller mounted at /billing

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /billing/plan/change should validate request body

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /billing/cancel should be idempotent

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › GET /billing/subscription endpoint exists

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › POST /billing/plan/change endpoint exists

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › POST /billing/cancel endpoint exists

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

FAIL e2e/pos-imports-bisect.e2e-spec.ts
  ● PosModule imports bisect › should test all PosModule imports together

    Nest can't resolve dependencies of the EfrisService (PrismaService, ?). Please make sure that the argument ConfigService at index [1] is available in the EfrisModule context.

    Potential solutions:
    - Is EfrisModule a valid NestJS module?
    - If ConfigService is a provider, is it part of the current EfrisModule?
    - If ConfigService is exported from a separate @Module, is that module imported within EfrisModule?
      @Module({
        imports: [ /* the Module containing ConfigService */ ]
      })

      14 | describe('PosModule imports bisect', () => {
      15 |   it('should test all PosModule imports together', async () => {
    > 16 |     const moduleRef = await createE2ETestingModule({
         |                       ^
      17 |       imports: [
      18 |         EfrisModule,
      19 |         ConfigModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/pos-imports-bisect.e2e-spec.ts:16:23)

FAIL e2e/inventory-kpis.e2e-spec.ts
  ● InventoryModule + KpisModule test › should compile these modules together

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

       8 | describe('InventoryModule + KpisModule test', () => {
       9 |   it('should compile these modules together', async () => {
    > 10 |     const moduleRef = await createE2ETestingModule({
         |                       ^
      11 |       imports: [InventoryModule, KpisModule],
      12 |     });
      13 |     await moduleRef.init();

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory-kpis.e2e-spec.ts:10:23)

FAIL e2e/devportal.prod.slice.e2e-spec.ts
  ● Test suite failed to run

    Cannot find module '../../src/dev-portal/ports/devportal.port' from 'e2e/devportal.prod.slice.e2e-spec.ts'

      15 | import { SuperDevGuard } from '../../src/dev-portal.disabled/guards/super-dev.guard'; // Fixed: was dev-portal (now disabled)
      16 | import { signBody } from '../payments/webhook.hmac';
    > 17 | import { DevPortalKeyRepo } from '../../src/dev-portal/ports/devportal.port';
         | ^
      18 | import { TestBypassAuthGuard } from '../devportal/auth-override.guard';
      19 | import { cleanup } from '../helpers/cleanup';
      20 |

      at Resolver._throwModNotFoundError (../../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (e2e/devportal.prod.slice.e2e-spec.ts:17:1)

FAIL e2e/app-bisect.e2e-spec.ts
  ● Test suite failed to run

    AppModule.imports not accessible; in AppModule, add: public static __imports = [ ...imports ]

      11 |
      12 | if (!appModuleImports || !Array.isArray(appModuleImports)) {
    > 13 |   throw new Error('AppModule.imports not accessible; in AppModule, add: public static __imports = [ ...imports ]');
         |         ^
      14 | }
      15 |
      16 | async function tryImports(imports: any[]) {

      at Object.<anonymous> (e2e/app-bisect.e2e-spec.ts:13:9)

FAIL ./m2-shifts-scheduling.e2e-spec.ts
  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - creates a lunch shift template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - creates a dinner shift template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - rejects invalid time format

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - rejects end time before start time

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › GET /shift-templates - lists all templates

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › GET /shift-templates/:id - gets template by ID

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › PATCH /shift-templates/:id - updates template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › DELETE /shift-templates/:id - soft deletes template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - creates a schedule from template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - creates a schedule from template

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - rejects overlapping schedule

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - rejects overlapping schedule

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/by-branch/:branchId - lists schedules

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/by-branch/:branchId - lists schedules

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/:id - gets schedule details

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/:id - gets schedule details

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - assigns staff to schedule

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - assigns manager on duty

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - rejects duplicate assignment

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › GET /shift-assignments/by-schedule/:scheduleId - lists assignments

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › GET /shift-assignments/by-user/:userId - lists user assignments

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Current Shift API › GET /shift-schedules/current/:branchId - returns empty when no active shift

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Current Shift API › GET /shift-schedules/current/:branchId - returns current shift with staff

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - blocks close when stock count out of tolerance

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - blocks close when stock count out of tolerance

    PrismaClientValidationError: 
    Invalid `prisma.client.shift.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47

      431 
      432 beforeAll(async () => {
      433   // Open a shift
    → 434   const shift = await prisma.client.shift.create({
              data: {
                branchId: undefined,
                openedById: undefined,
                openingFloat: 100,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - rejects override from L3 staff

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - rejects override from L3 staff

    PrismaClientValidationError: 
    Invalid `prisma.client.shift.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47

      431 
      432 beforeAll(async () => {
      433   // Open a shift
    → 434   const shift = await prisma.client.shift.create({
              data: {
                branchId: undefined,
                openedById: undefined,
                openingFloat: 100,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - allows manager override

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - allows manager override

    PrismaClientValidationError: 
    Invalid `prisma.client.shift.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47

      431 
      432 beforeAll(async () => {
      433   // Open a shift
    → 434   const shift = await prisma.client.shift.create({
              data: {
                branchId: undefined,
                openedById: undefined,
                openingFloat: 100,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.org.delete()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:96:35

      93 
      94 afterAll(async () => {
      95   // Cleanup
    → 96   await prisma.client.org.delete({
             where: {
               id: undefined,
           ?   slug?: String,
           ?   AND?: OrgWhereInput | OrgWhereInput[],
           ?   OR?: OrgWhereInput[],
           ?   NOT?: OrgWhereInput | OrgWhereInput[],
           ?   name?: StringFilter | String,
           ?   createdAt?: DateTimeFilter | DateTime,
           ?   updatedAt?: DateTimeFilter | DateTime,
           ?   branches?: BranchListRelationFilter,
           ?   users?: UserListRelationFilter,
           ?   settings?: OrgSettingsNullableRelationFilter | OrgSettingsWhereInput | Null,
           ?   devices?: DeviceListRelationFilter,
           ?   floorPlans?: FloorPlanListRelationFilter,
           ?   taxCategories?: TaxCategoryListRelationFilter,
           ?   modifierGroups?: ModifierGroupListRelationFilter,
           ?   anomalyEvents?: AnomalyEventListRelationFilter,
           ?   alertChannels?: AlertChannelListRelationFilter,
           ?   scheduledAlerts?: ScheduledAlertListRelationFilter,
           ?   reservations?: ReservationListRelationFilter,
           ?   supportSessions?: SupportSessionListRelationFilter,
           ?   spoutDevices?: SpoutDeviceListRelationFilter,
           ?   spoutEvents?: SpoutEventListRelationFilter,
           ?   ownerDigests?: OwnerDigestListRelationFilter,
           ?   apiKeys?: ApiKeyListRelationFilter,
           ?   subscription?: OrgSubscriptionNullableRelationFilter | OrgSubscriptionWhereInput | Null,
           ?   branchBudgets?: BranchBudgetListRelationFilter,
           ?   forecastProfiles?: ForecastProfileListRelationFilter,
           ?   forecastPoints?: ForecastPointListRelationFilter,
           ?   franchiseRanks?: FranchiseRankListRelationFilter,
           ?   franchiseBudgets?: FranchiseBudgetListRelationFilter,
           ?   badgeAssets?: BadgeAssetListRelationFilter,
           ?   kdsSlaConfigs?: KdsSlaConfigListRelationFilter,
           ?   shiftTemplates?: ShiftTemplateListRelationFilter,
           ?   reportSubscriptions?: ReportSubscriptionListRelationFilter,
           ?   serviceProviders?: ServiceProviderListRelationFilter,
           ?   serviceReminders?: ServicePayableReminderListRelationFilter,
           ?   opsBudgets?: OpsBudgetListRelationFilter,
           ?   costInsights?: CostInsightListRelationFilter,
           ?   sessions?: SessionListRelationFilter,
           ?   documents?: DocumentListRelationFilter,
           ?   staffAwards?: StaffAwardListRelationFilter,
           ?   Feedback?: FeedbackListRelationFilter,
           ?   promotionSuggestions?: PromotionSuggestionListRelationFilter
             }
           })

    Argument `where` of type OrgWhereUniqueInput needs at least one of `id` or `slug` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:96:5)

FAIL ./m1-kds-enterprise.e2e-spec.ts
  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should return tickets with waiterName, slaState, and proper ordering

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should filter tickets by station correctly

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should support "since" parameter for incremental sync

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

  ● M1 KDS Enterprise (e2e) › SLA Configuration › should get default SLA config for a station

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

  ● M1 KDS Enterprise (e2e) › SLA Configuration › should update SLA config (Manager/Owner only)

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

  ● M1 KDS Enterprise (e2e) › SLA Configuration › should reject SLA config update from waiter (L1)

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

  ● M1 KDS Enterprise (e2e) › KDS Resilience › should handle marking ticket ready and checking all-ready state

    TypeError: menuResponse.body.find is not a function

      60 |       .set('Authorization', `Bearer ${waiterToken}`);
      61 |
    > 62 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      63 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      64 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      65 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:62:38)

FAIL ./e37-promotions.e2e-spec.ts
  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should create a happy hour promotion (20% off drinks 17:00-19:00)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should list promotions (including inactive)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should approve the promotion

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should apply discount when placing order during happy hour (18:00 on Monday)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should NOT apply discount outside happy hour (20:00)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should toggle promotion inactive

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should NOT apply discount when promotion is inactive

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'promotionEffect')

      88 |   afterAll(async () => {
      89 |     // Clean up test data
    > 90 |     await prisma.promotionEffect.deleteMany({ where: { promotion: { orgId } } });
         |                  ^
      91 |     await prisma.promotion.deleteMany({ where: { orgId } });
      92 |     await prisma.orderItem.deleteMany({ where: { order: { branchId } } });
      93 |     await prisma.order.deleteMany({ where: { branchId } });

      at Object.<anonymous> (e37-promotions.e2e-spec.ts:90:18)

FAIL ./e27-costing.e2e-spec.ts
  ● E27 - Costing & Profit Engine (e2e) › Costing calculation on order close › should calculate cost and margin when closing an order

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)

  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should include cost data for MANAGER (L4) role

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)

  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should exclude cost data for CHEF (L3) when showCostToChef=false

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)

  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should include cost data for CHEF (L3) when showCostToChef=true

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.inventoryItem.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:47:39

      44 await prisma.client.stockBatch.deleteMany({ where: { branch: { orgId } } });
      45 await prisma.client.recipeIngredient.deleteMany({});
      46 await prisma.client.menuItem.deleteMany({ where: { branch: { orgId } } });
    → 47 await prisma.client.inventoryItem.deleteMany({
           where: {
             org: {
             ~~~
               id: undefined
             },
         ?   AND?: InventoryItemWhereInput | InventoryItemWhereInput[],
         ?   OR?: InventoryItemWhereInput[],
         ?   NOT?: InventoryItemWhereInput | InventoryItemWhereInput[],
         ?   id?: StringFilter | String,
         ?   orgId?: StringFilter | String,
         ?   sku?: StringNullableFilter | String | Null,
         ?   name?: StringFilter | String,
         ?   unit?: StringFilter | String,
         ?   category?: StringNullableFilter | String | Null,
         ?   reorderLevel?: DecimalFilter | Decimal,
         ?   reorderQty?: DecimalFilter | Decimal,
         ?   isActive?: BoolFilter | Boolean,
         ?   metadata?: JsonNullableFilter,
         ?   createdAt?: DateTimeFilter | DateTime,
         ?   updatedAt?: DateTimeFilter | DateTime,
         ?   stockBatches?: StockBatchListRelationFilter,
         ?   recipeIngredients?: RecipeIngredientListRelationFilter,
         ?   wastageRecords?: WastageListRelationFilter,
         ?   adjustments?: AdjustmentListRelationFilter,
         ?   poItems?: PurchaseOrderItemListRelationFilter,
         ?   receiptLines?: GoodsReceiptLineListRelationFilter,
         ?   spoutCalibrations?: SpoutCalibrationListRelationFilter,
         ?   forecastProfiles?: ForecastProfileListRelationFilter,
         ?   forecastPoints?: ForecastPointListRelationFilter,
         ?   stockMovements?: StockMovementListRelationFilter,
         ?   lowStockConfigs?: LowStockConfigListRelationFilter
           }
         })

    Unknown argument `org`. Did you mean `orgId`? Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e27-costing.e2e-spec.ts:47:5)

FAIL ./e26-kpis.e2e-spec.ts
  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require authentication

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should reject non-L4+ users

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require scope query param

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require branchId for branch scope

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should stream org-wide KPIs for L4+ user

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › KPI Computation › should compute salesToday from completed orders

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › KPI Computation › should count open orders correctly

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.org.delete()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:77:35

      74 // Cleanup
      75 await prisma.client.user.deleteMany({ where: { orgId } });
      76 await prisma.client.branch.deleteMany({ where: { orgId } });
    → 77 await prisma.client.org.delete({
           where: {
             id: undefined,
         ?   slug?: String,
         ?   AND?: OrgWhereInput | OrgWhereInput[],
         ?   OR?: OrgWhereInput[],
         ?   NOT?: OrgWhereInput | OrgWhereInput[],
         ?   name?: StringFilter | String,
         ?   createdAt?: DateTimeFilter | DateTime,
         ?   updatedAt?: DateTimeFilter | DateTime,
         ?   branches?: BranchListRelationFilter,
         ?   users?: UserListRelationFilter,
         ?   settings?: OrgSettingsNullableRelationFilter | OrgSettingsWhereInput | Null,
         ?   devices?: DeviceListRelationFilter,
         ?   floorPlans?: FloorPlanListRelationFilter,
         ?   taxCategories?: TaxCategoryListRelationFilter,
         ?   modifierGroups?: ModifierGroupListRelationFilter,
         ?   anomalyEvents?: AnomalyEventListRelationFilter,
         ?   alertChannels?: AlertChannelListRelationFilter,
         ?   scheduledAlerts?: ScheduledAlertListRelationFilter,
         ?   reservations?: ReservationListRelationFilter,
         ?   supportSessions?: SupportSessionListRelationFilter,
         ?   spoutDevices?: SpoutDeviceListRelationFilter,
         ?   spoutEvents?: SpoutEventListRelationFilter,
         ?   ownerDigests?: OwnerDigestListRelationFilter,
         ?   apiKeys?: ApiKeyListRelationFilter,
         ?   subscription?: OrgSubscriptionNullableRelationFilter | OrgSubscriptionWhereInput | Null,
         ?   branchBudgets?: BranchBudgetListRelationFilter,
         ?   forecastProfiles?: ForecastProfileListRelationFilter,
         ?   forecastPoints?: ForecastPointListRelationFilter,
         ?   franchiseRanks?: FranchiseRankListRelationFilter,
         ?   franchiseBudgets?: FranchiseBudgetListRelationFilter,
         ?   badgeAssets?: BadgeAssetListRelationFilter,
         ?   kdsSlaConfigs?: KdsSlaConfigListRelationFilter,
         ?   shiftTemplates?: ShiftTemplateListRelationFilter,
         ?   reportSubscriptions?: ReportSubscriptionListRelationFilter,
         ?   serviceProviders?: ServiceProviderListRelationFilter,
         ?   serviceReminders?: ServicePayableReminderListRelationFilter,
         ?   opsBudgets?: OpsBudgetListRelationFilter,
         ?   costInsights?: CostInsightListRelationFilter,
         ?   sessions?: SessionListRelationFilter,
         ?   documents?: DocumentListRelationFilter,
         ?   staffAwards?: StaffAwardListRelationFilter,
         ?   Feedback?: FeedbackListRelationFilter,
         ?   promotionSuggestions?: PromotionSuggestionListRelationFilter
           }
         })

    Argument `where` of type OrgWhereUniqueInput needs at least one of `id` or `slug` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:77:5)

FAIL ./e24-subscriptions.e2e-spec.ts
  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/orgs › should create org with ACTIVE subscription (dev admin)

    expected 201 "Created", got 404 "Not Found"

      31 |           planCode: 'BASIC',
      32 |         })
    > 33 |         .expect(201);
         |          ^
      34 |
      35 |       expect(response.body).toHaveProperty('org');
      36 |       expect(response.body).toHaveProperty('owner');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:33:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/orgs › should reject without dev admin header

    expected 401 "Unauthorized", got 404 "Not Found"

      49 |           planCode: 'PRO',
      50 |         })
    > 51 |         .expect(401);
         |          ^
      52 |     });
      53 |   });
      54 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:51:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - GET /dev/subscriptions › should list all subscriptions (dev admin)

    expected 200 "OK", got 404 "Not Found"

      58 |         .get('/dev/subscriptions')
      59 |         .set('X-Dev-Admin', 'dev1@chefcloud.local')
    > 60 |         .expect(200);
         |          ^
      61 |
      62 |       expect(Array.isArray(response.body)).toBe(true);
      63 |       expect(response.body.length).toBeGreaterThan(0);

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:60:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/plans › should upsert plan (super dev)

    expected 201 "Created", got 404 "Not Found"

      80 |           isActive: true,
      81 |         })
    > 82 |         .expect(201);
         |          ^
      83 |
      84 |       expect(response.body.code).toBe('TEST_PLAN');
      85 |       expect(response.body.name).toBe('Test Plan');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:82:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/plans › should reject non-super dev from creating plans

    expected 403 "Forbidden", got 404 "Not Found"

      108 |           features: {},
      109 |         })
    > 110 |         .expect(403);
          |          ^
      111 |     });
      112 |   });
      113 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:110:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - GET /billing/subscription › should return subscription for org owner

    expected 200 "OK", got 401 "Unauthorized"

      121 |           password: 'Owner#123',
      122 |         })
    > 123 |         .expect(200);
          |          ^
      124 |
      125 |       const token = loginResponse.body.access_token;
      126 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:123:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - GET /billing/subscription › should reject non-owner from viewing subscription

    expected 200 "OK", got 401 "Unauthorized"

      144 |           password: 'Waiter#123',
      145 |         })
    > 146 |         .expect(200);
          |          ^
      147 |
      148 |       const token = loginResponse.body.access_token;
      149 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:146:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - POST /billing/plan/change › should allow owner to request plan change

    expected 200 "OK", got 401 "Unauthorized"

      163 |           password: 'Owner#123',
      164 |         })
    > 165 |         .expect(200);
          |          ^
      166 |
      167 |       const token = loginResponse.body.access_token;
      168 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:165:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - POST /billing/cancel › should allow owner to request cancellation

    expected 200 "OK", got 401 "Unauthorized"

      186 |           password: 'Owner#123',
      187 |         })
    > 188 |         .expect(200);
          |          ^
      189 |
      190 |       const token = loginResponse.body.access_token;
      191 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:188:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL ./e23-roles-access.e2e-spec.ts
  ● E23 Roles & Platform Access (e2e) › GET /access/matrix › should allow L4 (manager) to get platform access matrix

    expected 200 "OK", got 401 "Unauthorized"

      77 |         .get('/access/matrix')
      78 |         .set('Authorization', `Bearer ${managerToken}`)
    > 79 |         .expect(200);
         |          ^
      80 |
      81 |       expect(response.body).toHaveProperty('platformAccess');
      82 |       expect(response.body).toHaveProperty('defaults');

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:79:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › GET /access/matrix › should reject L3 (procurement) from accessing matrix

    expected 403 "Forbidden", got 401 "Unauthorized"

      90 |         .get('/access/matrix')
      91 |         .set('Authorization', `Bearer ${procurementToken}`)
    > 92 |         .expect(403);
         |          ^
      93 |     });
      94 |
      95 |     it('should reject L2 (ticket master) from accessing matrix', async () => {

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:92:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › GET /access/matrix › should reject L2 (ticket master) from accessing matrix

    expected 403 "Forbidden", got 401 "Unauthorized"

       97 |         .get('/access/matrix')
       98 |         .set('Authorization', `Bearer ${ticketMasterToken}`)
    >  99 |         .expect(403);
          |          ^
      100 |     });
      101 |
      102 |     it('should reject L1 (waiter) from accessing matrix', async () => {

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:99:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › GET /access/matrix › should reject L1 (waiter) from accessing matrix

    expected 403 "Forbidden", got 401 "Unauthorized"

      104 |         .get('/access/matrix')
      105 |         .set('Authorization', `Bearer ${waiterToken}`)
    > 106 |         .expect(403);
          |          ^
      107 |     });
      108 |
      109 |     it('should reject unauthenticated requests', async () => {

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:106:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › PATCH /access/matrix › should allow L4 (manager) to update platform access matrix

    expected 200 "OK", got 401 "Unauthorized"

      123 |         .set('Authorization', `Bearer ${managerToken}`)
      124 |         .send(updates)
    > 125 |         .expect(200);
          |          ^
      126 |
      127 |       expect(response.body).toEqual(updates);
      128 |     });

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:125:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › PATCH /access/matrix › should reject updates with invalid structure

    expected 500 "Internal Server Error", got 401 "Unauthorized"

      137 |         .set('Authorization', `Bearer ${managerToken}`)
      138 |         .send(invalidUpdates)
    > 139 |         .expect(500); // Service throws an error for invalid data
          |          ^
      140 |     });
      141 |
      142 |     it('should reject L3 (procurement) from updating matrix', async () => {

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:139:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › PATCH /access/matrix › should reject L3 (procurement) from updating matrix

    expected 403 "Forbidden", got 401 "Unauthorized"

      149 |         .set('Authorization', `Bearer ${procurementToken}`)
      150 |         .send(updates)
    > 151 |         .expect(403);
          |          ^
      152 |     });
      153 |
      154 |     it('should reject L2 (ticket master) from updating matrix', async () => {

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:151:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › PATCH /access/matrix › should reject L2 (ticket master) from updating matrix

    expected 403 "Forbidden", got 401 "Unauthorized"

      161 |         .set('Authorization', `Bearer ${ticketMasterToken}`)
      162 |         .send(updates)
    > 163 |         .expect(403);
          |          ^
      164 |     });
      165 |
      166 |     it('should reject unauthenticated requests', async () => {

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:163:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › New role authentication › should authenticate procurement user (L3)

    expected 200 "OK", got 401 "Unauthorized"

      184 |           password: 'Procurement#123',
      185 |         })
    > 186 |         .expect(200);
          |          ^
      187 |
      188 |       expect(response.body.user).toMatchObject({
      189 |         email: 'procurement@demo.local',

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:186:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › New role authentication › should authenticate assistant manager user (L3)

    expected 200 "OK", got 401 "Unauthorized"

      201 |           password: 'AssistantMgr#123',
      202 |         })
    > 203 |         .expect(200);
          |          ^
      204 |
      205 |       expect(response.body.user).toMatchObject({
      206 |         email: 'assistantmgr@demo.local',

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:203:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › New role authentication › should authenticate event manager user (L3)

    expected 200 "OK", got 401 "Unauthorized"

      218 |           password: 'EventMgr#123',
      219 |         })
    > 220 |         .expect(200);
          |          ^
      221 |
      222 |       expect(response.body.user).toMatchObject({
      223 |         email: 'eventmgr@demo.local',

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:220:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › New role authentication › should authenticate ticket master user (L2)

    expected 200 "OK", got 401 "Unauthorized"

      235 |           password: 'TicketMaster#123',
      236 |         })
    > 237 |         .expect(200);
          |          ^
      238 |
      239 |       expect(response.body.user).toMatchObject({
      240 |         email: 'ticketmaster@demo.local',

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:237:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › New role authentication › should authenticate assistant chef user (L2)

    expected 200 "OK", got 401 "Unauthorized"

      252 |           password: 'AssistantChef#123',
      253 |         })
    > 254 |         .expect(200);
          |          ^
      255 |
      256 |       expect(response.body.user).toMatchObject({
      257 |         email: 'assistantchef@demo.local',

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:254:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › New role authentication › should authenticate head barista user (L3)

    expected 200 "OK", got 401 "Unauthorized"

      269 |           password: 'HeadBarista#123',
      270 |         })
    > 271 |         .expect(200);
          |          ^
      272 |
      273 |       expect(response.body.user).toMatchObject({
      274 |         email: 'headbarista@demo.local',

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:271:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Roles & Platform Access (e2e) › Platform access matrix persistence › should persist and retrieve updated platform access

    expected 200 "OK", got 401 "Unauthorized"

      292 |         .set('Authorization', `Bearer ${managerToken}`)
      293 |         .send(updates)
    > 294 |         .expect(200);
          |          ^
      295 |
      296 |       // Retrieve matrix
      297 |       const response = await request(app.getHttpServer())

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:294:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)


Test Suites: 44 failed, 13 passed, 57 total
Tests:       349 failed, 1 skipped, 72 passed, 422 total
Snapshots:   0 total
Time:        46.475 s
Ran all test suites.
Test results written to: .e2e-results-after.json
{"level":"info","time":1766845887655,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":401,"durationMs":1,"requestId":"6b695121-ccae-4623-ae46-ea056730423f","route":"/access/matrix"}
Jest did not exit one second after the test run has completed.

'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.
