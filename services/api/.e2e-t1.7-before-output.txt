
> @chefcloud/api@1.0.0-rc.1 test:e2e /workspaces/chefcloud/services/api
> jest --config ./test/jest-e2e.json "--runInBand" "--json" "--outputFile=.e2e-results-t1.7-before.json"

✓ E2E environment loaded
  DATABASE_URL: postgresql://postgres:***@localhost:5432/chefcloud_test
FAIL test/e22-franchise.e2e-spec.ts (10.156 s)
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.org.create()` invocation in
      /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41
      
        24 prisma = app.get(PrismaService);
        25 
        26 // Create test org
      → 27 const org = await prisma.client.org.create({
             data: {
               name: "E22 Franchise Org",
               currency: "UGX",
           +   slug: String
             }
           })
      
      Argument `slug` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.supplier.create()` invocation in
      /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53
      
        291 
        292 beforeAll(async () => {
        293   // Create supplier with packSize and minOrderQty
      → 294   const supplier = await prisma.client.supplier.create({
                data: {
                  name: "Test Supplier",
                  email: "test-supplier@example.com",
                  contactPerson: "John Doe",
                  phone: "+256700000000",
                  leadTimeDays: 3,
                  packSize: 10,
                  minOrderQty: 50,
              +   orgId: String
                }
              })
      
      Argument `orgId` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.inventoryItem.delete()` invocation in
      /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:344:47
      
        341 await prisma.client.purchaseOrder.deleteMany({ where: { orgId } });
        342 await prisma.client.procurementJob.deleteMany({ where: { orgId } });
        343 await prisma.client.stockBatch.deleteMany({ where: { itemId } });
      → 344 await prisma.client.inventoryItem.delete({
              where: {
                id: undefined,
            ?   orgId_sku?: InventoryItemOrgIdSkuCompoundUniqueInput,
            ?   AND?: InventoryItemWhereInput | InventoryItemWhereInput[],
            ?   OR?: InventoryItemWhereInput[],
            ?   NOT?: InventoryItemWhereInput | InventoryItemWhereInput[],
            ?   orgId?: StringFilter | String,
            ?   sku?: StringNullableFilter | String | Null,
            ?   name?: StringFilter | String,
            ?   unit?: StringFilter | String,
            ?   category?: StringNullableFilter | String | Null,
            ?   reorderLevel?: DecimalFilter | Decimal,
            ?   reorderQty?: DecimalFilter | Decimal,
            ?   isActive?: BoolFilter | Boolean,
            ?   metadata?: JsonNullableFilter,
            ?   createdAt?: DateTimeFilter | DateTime,
            ?   updatedAt?: DateTimeFilter | DateTime,
            ?   stockBatches?: StockBatchListRelationFilter,
            ?   recipeIngredients?: RecipeIngredientListRelationFilter,
            ?   wastageRecords?: WastageListRelationFilter,
            ?   adjustments?: AdjustmentListRelationFilter,
            ?   poItems?: PurchaseOrderItemListRelationFilter,
            ?   receiptLines?: GoodsReceiptLineListRelationFilter,
            ?   spoutCalibrations?: SpoutCalibrationListRelationFilter,
            ?   forecastProfiles?: ForecastProfileListRelationFilter,
            ?   forecastPoints?: ForecastPointListRelationFilter,
            ?   stockMovements?: StockMovementListRelationFilter,
            ?   lowStockConfigs?: LowStockConfigListRelationFilter
              }
            })
      
      Argument `where` of type InventoryItemWhereUniqueInput needs at least one of `id` or `orgId_sku` arguments. Available options are marked with ?.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.franchiseBudget.createMany()` invocation in
      /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45
      
        649 describe('GET /franchise/budgets (NEW)', () => {
        650   beforeAll(async () => {
        651     // Seed new FranchiseBudget records (year/month format)
      → 652     await prisma.client.franchiseBudget.createMany({
                  data: [
                    {
                      orgId: undefined,
                      branchId: undefined,
                      year: 2025,
                      month: 1,
                      category: "NET_SALES",
                      amountCents: 2000000,
                      currencyCode: "UGX"
                    },
                    {
                      orgId: undefined,
                      branchId: undefined,
                      year: 2025,
                      month: 1,
                      category: "NET_SALES",
                      amountCents: 1500000,
                      currencyCode: "UGX"
                    },
                    {
                      orgId: undefined,
                      branchId: undefined,
                      year: 2025,
                      month: 2,
                      category: "NET_SALES",
                      amountCents: 2500000,
                      currencyCode: "UGX"
                    }
                  ]
                })
      
      Argument `orgId` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.franchiseBudget.createMany()` invocation in
      /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45
      
        940   where: { orgId, year: 2025, month: 1 },
        941 });
        942 
      → 943 await prisma.client.franchiseBudget.createMany({
              data: [
                {
                  orgId: undefined,
                  branchId: undefined,
                  year: 2025,
                  month: 1,
                  category: "NET_SALES",
                  amountCents: 5000000,
                  currencyCode: "UGX"
                },
                {
                  orgId: undefined,
                  branchId: undefined,
                  year: 2025,
                  month: 1,
                  category: "NET_SALES",
                  amountCents: 3000000,
                  currencyCode: "UGX"
                }
              ]
            })
      
      Argument `orgId` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● E22-s2: Franchise APIs (e2e) › POST /franchise/budgets › should upsert a budget for a branch

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › POST /franchise/budgets › should update existing budget on re-upsert

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/budgets › should fetch budgets for a period

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/budgets › should reject invalid period format

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/rankings › should return ranked branches with deterministic ordering

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/procurement/suggest › should return items below safety stock

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate draft POs with packSize rounding

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate draft POs with packSize rounding

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate drafts for specific branches only

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate drafts for specific branches only

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › GET /franchise/procurement/drafts › should list all draft POs with supplier and branch names

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › GET /franchise/procurement/drafts › should list all draft POs with supplier and branch names

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should approve draft POs and update status to PLACED

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should approve draft POs and update status to PLACED

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should reject non-owner approval attempts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should reject non-owner approval attempts

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should return per-branch KPIs and totals for date range

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should filter by branchIds when provided

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should default to today when dates omitted

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should reject non-manager/owner users

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should return branches ranked by NET_SALES

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should return branches ranked by MARGIN_PERCENT

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should apply limit parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should reject unsupported metrics

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should reject requests without metric parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should return all budgets without filters

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should return all budgets without filters

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by year and month

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by year and month

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should allow L4 (Manager) to read budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should allow L4 (Manager) to read budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should create new budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should update existing budgets (idempotent)

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should reject L4 (Manager) from upserting budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should validate year range (2000-9999)

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should validate month range (1-12)

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should calculate variance for all branches

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should calculate variance for all branches

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should filter variance by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should filter variance by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should return empty array when no budgets exist

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should return empty array when no budgets exist

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require year parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require year parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require month parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require month parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.inventoryItem.delete()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:344:47

      341 await prisma.client.purchaseOrder.deleteMany({ where: { orgId } });
      342 await prisma.client.procurementJob.deleteMany({ where: { orgId } });
      343 await prisma.client.stockBatch.deleteMany({ where: { itemId } });
    → 344 await prisma.client.inventoryItem.delete({
            where: {
              id: undefined,
          ?   orgId_sku?: InventoryItemOrgIdSkuCompoundUniqueInput,
          ?   AND?: InventoryItemWhereInput | InventoryItemWhereInput[],
          ?   OR?: InventoryItemWhereInput[],
          ?   NOT?: InventoryItemWhereInput | InventoryItemWhereInput[],
          ?   orgId?: StringFilter | String,
          ?   sku?: StringNullableFilter | String | Null,
          ?   name?: StringFilter | String,
          ?   unit?: StringFilter | String,
          ?   category?: StringNullableFilter | String | Null,
          ?   reorderLevel?: DecimalFilter | Decimal,
          ?   reorderQty?: DecimalFilter | Decimal,
          ?   isActive?: BoolFilter | Boolean,
          ?   metadata?: JsonNullableFilter,
          ?   createdAt?: DateTimeFilter | DateTime,
          ?   updatedAt?: DateTimeFilter | DateTime,
          ?   stockBatches?: StockBatchListRelationFilter,
          ?   recipeIngredients?: RecipeIngredientListRelationFilter,
          ?   wastageRecords?: WastageListRelationFilter,
          ?   adjustments?: AdjustmentListRelationFilter,
          ?   poItems?: PurchaseOrderItemListRelationFilter,
          ?   receiptLines?: GoodsReceiptLineListRelationFilter,
          ?   spoutCalibrations?: SpoutCalibrationListRelationFilter,
          ?   forecastProfiles?: ForecastProfileListRelationFilter,
          ?   forecastPoints?: ForecastPointListRelationFilter,
          ?   stockMovements?: StockMovementListRelationFilter,
          ?   lowStockConfigs?: LowStockConfigListRelationFilter
            }
          })

    Argument `where` of type InventoryItemWhereUniqueInput needs at least one of `id` or `orgId_sku` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:344:7)

  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.order.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:996:35

      993 
      994 afterAll(async () => {
      995   // Cleanup variance test data
    → 996   await prisma.client.order.deleteMany({
              where: {
                branchId: {
                  in: [
                    undefined,
                    ~~~~~~~~~
                    undefined
                  ]
                },
                createdAt: {
                  gte: new Date("2025-01-01T00:00:00.000Z"),
                  lt: new Date("2025-02-01T00:00:00.000Z")
                }
              }
            })

    Invalid value for argument `in[0]`: Can not use `undefined` value within array. Use `null` or filter out `undefined` values.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                          ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at e.throwValidationError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:10206)
      at od (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:9323)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8075)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at mr (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:6037)
      at vn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:5902)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10186
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._executeRequest (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10165)
      at Na (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:9955)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9639)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9933
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9913
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9836)
      at s (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5636)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5864
      at i (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1016)
      at PrismaPromise.then (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1091)

  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.order.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:129:31

      126 
      127 afterAll(async () => {
      128   // Cleanup
    → 129   await prisma.client.order.deleteMany({
              where: {
                branchId: {
                  in: [
                    undefined,
                    ~~~~~~~~~
                    undefined
                  ]
                }
              }
            })

    Invalid value for argument `in[0]`: Can not use `undefined` value within array. Use `null` or filter out `undefined` values.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                          ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at e.throwValidationError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:10206)
      at od (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:9323)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8075)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at mr (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:6037)
      at vn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:5902)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10186
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._executeRequest (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10165)
      at Na (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:9955)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9639)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9933
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9913
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9836)
      at s (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5636)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5864
      at i (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1016)
      at PrismaPromise.then (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1091)

FAIL test/m2-shifts-scheduling.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.org.create()` invocation in
      /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41
      
        33 prisma = app.get<PrismaService>(PrismaService);
        34 
        35 // Create test org, branch, and users
      → 36 const org = await prisma.client.org.create({
             data: {
               name: "M2 Test Org",
               currencyCode: "UGX",
           +   slug: String
             }
           })
      
      Argument `slug` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.shiftTemplate.update()` invocation in
      /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34
      
        215 describe('Shift Schedules', () => {
        216   beforeAll(async () => {
        217     // Reactivate template for schedule tests
      → 218     await prisma.shiftTemplate.update({
                  where: {
                    id: undefined,
                ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
                ?   OR?: ShiftTemplateWhereInput[],
                ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
                ?   orgId?: StringFilter | String,
                ?   name?: StringFilter | String,
                ?   startTime?: StringFilter | String,
                ?   endTime?: StringFilter | String,
                ?   description?: StringNullableFilter | String | Null,
                ?   isActive?: BoolFilter | Boolean,
                ?   createdAt?: DateTimeFilter | DateTime,
                ?   updatedAt?: DateTimeFilter | DateTime,
                ?   org?: OrgRelationFilter | OrgWhereInput,
                ?   schedules?: ShiftScheduleListRelationFilter
                  },
                  data: {
                    isActive: true
                  }
                })
      
      Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.shift.create()` invocation in
      /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47
      
        431 
        432 beforeAll(async () => {
        433   // Open a shift
      → 434   const shift = await prisma.client.shift.create({
                data: {
                  branchId: undefined,
                  openedById: undefined,
                  openingFloat: 100,
              +   orgId: String
                }
              })
      
      Argument `orgId` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.org.delete()` invocation in
      /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:96:35
      
        93 
        94 afterAll(async () => {
        95   // Cleanup
      → 96   await prisma.client.org.delete({
               where: {
                 id: undefined,
             ?   slug?: String,
             ?   AND?: OrgWhereInput | OrgWhereInput[],
             ?   OR?: OrgWhereInput[],
             ?   NOT?: OrgWhereInput | OrgWhereInput[],
             ?   name?: StringFilter | String,
             ?   createdAt?: DateTimeFilter | DateTime,
             ?   updatedAt?: DateTimeFilter | DateTime,
             ?   branches?: BranchListRelationFilter,
             ?   users?: UserListRelationFilter,
             ?   settings?: OrgSettingsNullableRelationFilter | OrgSettingsWhereInput | Null,
             ?   devices?: DeviceListRelationFilter,
             ?   floorPlans?: FloorPlanListRelationFilter,
             ?   taxCategories?: TaxCategoryListRelationFilter,
             ?   modifierGroups?: ModifierGroupListRelationFilter,
             ?   anomalyEvents?: AnomalyEventListRelationFilter,
             ?   alertChannels?: AlertChannelListRelationFilter,
             ?   scheduledAlerts?: ScheduledAlertListRelationFilter,
             ?   reservations?: ReservationListRelationFilter,
             ?   supportSessions?: SupportSessionListRelationFilter,
             ?   spoutDevices?: SpoutDeviceListRelationFilter,
             ?   spoutEvents?: SpoutEventListRelationFilter,
             ?   ownerDigests?: OwnerDigestListRelationFilter,
             ?   apiKeys?: ApiKeyListRelationFilter,
             ?   subscription?: OrgSubscriptionNullableRelationFilter | OrgSubscriptionWhereInput | Null,
             ?   branchBudgets?: BranchBudgetListRelationFilter,
             ?   forecastProfiles?: ForecastProfileListRelationFilter,
             ?   forecastPoints?: ForecastPointListRelationFilter,
             ?   franchiseRanks?: FranchiseRankListRelationFilter,
             ?   franchiseBudgets?: FranchiseBudgetListRelationFilter,
             ?   badgeAssets?: BadgeAssetListRelationFilter,
             ?   kdsSlaConfigs?: KdsSlaConfigListRelationFilter,
             ?   shiftTemplates?: ShiftTemplateListRelationFilter,
             ?   reportSubscriptions?: ReportSubscriptionListRelationFilter,
             ?   serviceProviders?: ServiceProviderListRelationFilter,
             ?   serviceReminders?: ServicePayableReminderListRelationFilter,
             ?   opsBudgets?: OpsBudgetListRelationFilter,
             ?   costInsights?: CostInsightListRelationFilter,
             ?   sessions?: SessionListRelationFilter,
             ?   documents?: DocumentListRelationFilter,
             ?   staffAwards?: StaffAwardListRelationFilter,
             ?   Feedback?: FeedbackListRelationFilter,
             ?   promotionSuggestions?: PromotionSuggestionListRelationFilter
               }
             })
      
      Argument `where` of type OrgWhereUniqueInput needs at least one of `id` or `slug` arguments. Available options are marked with ?.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - creates a lunch shift template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - creates a dinner shift template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - rejects invalid time format

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - rejects end time before start time

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › GET /shift-templates - lists all templates

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › GET /shift-templates/:id - gets template by ID

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › PATCH /shift-templates/:id - updates template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › DELETE /shift-templates/:id - soft deletes template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - creates a schedule from template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - creates a schedule from template

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - rejects overlapping schedule

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - rejects overlapping schedule

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/by-branch/:branchId - lists schedules

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/by-branch/:branchId - lists schedules

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/:id - gets schedule details

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/:id - gets schedule details

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - assigns staff to schedule

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - assigns manager on duty

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - rejects duplicate assignment

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › GET /shift-assignments/by-schedule/:scheduleId - lists assignments

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › GET /shift-assignments/by-user/:userId - lists user assignments

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Current Shift API › GET /shift-schedules/current/:branchId - returns empty when no active shift

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Current Shift API › GET /shift-schedules/current/:branchId - returns current shift with staff

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - blocks close when stock count out of tolerance

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - blocks close when stock count out of tolerance

    PrismaClientValidationError: 
    Invalid `prisma.client.shift.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47

      431 
      432 beforeAll(async () => {
      433   // Open a shift
    → 434   const shift = await prisma.client.shift.create({
              data: {
                branchId: undefined,
                openedById: undefined,
                openingFloat: 100,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - rejects override from L3 staff

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - rejects override from L3 staff

    PrismaClientValidationError: 
    Invalid `prisma.client.shift.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47

      431 
      432 beforeAll(async () => {
      433   // Open a shift
    → 434   const shift = await prisma.client.shift.create({
              data: {
                branchId: undefined,
                openedById: undefined,
                openingFloat: 100,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - allows manager override

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - allows manager override

    PrismaClientValidationError: 
    Invalid `prisma.client.shift.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47

      431 
      432 beforeAll(async () => {
      433   // Open a shift
    → 434   const shift = await prisma.client.shift.create({
              data: {
                branchId: undefined,
                openedById: undefined,
                openingFloat: 100,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.org.delete()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:96:35

      93 
      94 afterAll(async () => {
      95   // Cleanup
    → 96   await prisma.client.org.delete({
             where: {
               id: undefined,
           ?   slug?: String,
           ?   AND?: OrgWhereInput | OrgWhereInput[],
           ?   OR?: OrgWhereInput[],
           ?   NOT?: OrgWhereInput | OrgWhereInput[],
           ?   name?: StringFilter | String,
           ?   createdAt?: DateTimeFilter | DateTime,
           ?   updatedAt?: DateTimeFilter | DateTime,
           ?   branches?: BranchListRelationFilter,
           ?   users?: UserListRelationFilter,
           ?   settings?: OrgSettingsNullableRelationFilter | OrgSettingsWhereInput | Null,
           ?   devices?: DeviceListRelationFilter,
           ?   floorPlans?: FloorPlanListRelationFilter,
           ?   taxCategories?: TaxCategoryListRelationFilter,
           ?   modifierGroups?: ModifierGroupListRelationFilter,
           ?   anomalyEvents?: AnomalyEventListRelationFilter,
           ?   alertChannels?: AlertChannelListRelationFilter,
           ?   scheduledAlerts?: ScheduledAlertListRelationFilter,
           ?   reservations?: ReservationListRelationFilter,
           ?   supportSessions?: SupportSessionListRelationFilter,
           ?   spoutDevices?: SpoutDeviceListRelationFilter,
           ?   spoutEvents?: SpoutEventListRelationFilter,
           ?   ownerDigests?: OwnerDigestListRelationFilter,
           ?   apiKeys?: ApiKeyListRelationFilter,
           ?   subscription?: OrgSubscriptionNullableRelationFilter | OrgSubscriptionWhereInput | Null,
           ?   branchBudgets?: BranchBudgetListRelationFilter,
           ?   forecastProfiles?: ForecastProfileListRelationFilter,
           ?   forecastPoints?: ForecastPointListRelationFilter,
           ?   franchiseRanks?: FranchiseRankListRelationFilter,
           ?   franchiseBudgets?: FranchiseBudgetListRelationFilter,
           ?   badgeAssets?: BadgeAssetListRelationFilter,
           ?   kdsSlaConfigs?: KdsSlaConfigListRelationFilter,
           ?   shiftTemplates?: ShiftTemplateListRelationFilter,
           ?   reportSubscriptions?: ReportSubscriptionListRelationFilter,
           ?   serviceProviders?: ServiceProviderListRelationFilter,
           ?   serviceReminders?: ServicePayableReminderListRelationFilter,
           ?   opsBudgets?: OpsBudgetListRelationFilter,
           ?   costInsights?: CostInsightListRelationFilter,
           ?   sessions?: SessionListRelationFilter,
           ?   documents?: DocumentListRelationFilter,
           ?   staffAwards?: StaffAwardListRelationFilter,
           ?   Feedback?: FeedbackListRelationFilter,
           ?   promotionSuggestions?: PromotionSuggestionListRelationFilter
             }
           })

    Argument `where` of type OrgWhereUniqueInput needs at least one of `id` or `slug` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:96:5)

FAIL test/e2e/devportal.prod.slice.e2e-spec.ts
  ● Test suite failed to run

    Cannot find module '../../src/dev-portal/ports/devportal.port' from 'e2e/devportal.prod.slice.e2e-spec.ts'

      15 | import { SuperDevGuard } from '../../src/dev-portal.disabled/guards/super-dev.guard'; // Fixed: was dev-portal (now disabled)
      16 | import { signBody } from '../payments/webhook.hmac';
    > 17 | import { DevPortalKeyRepo } from '../../src/dev-portal/ports/devportal.port';
         | ^
      18 | import { TestBypassAuthGuard } from '../devportal/auth-override.guard';
      19 | import { cleanup } from '../helpers/cleanup';
      20 |

      at Resolver._throwModNotFoundError (../../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (e2e/devportal.prod.slice.e2e-spec.ts:17:1)

FAIL test/e2e/badge-revocation.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.org.create()` invocation in
      /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39
      
        46 
        47 async function setupTestData() {
        48   // Create test organization
      → 49   testOrg = await prisma.client.org.create(
      Unique constraint failed on the fields: (`slug`)

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should authenticate via badge swipe and include badgeId in token

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should access protected endpoint with valid token

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should reject login with REVOKED badge

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should invalidate existing token when badge is revoked (< 2s)

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should allow new login after badge revocation with updated version

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should invalidate sessions when badge is reported LOST

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should NOT reinstate old tokens when badge is RETURNED

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Session Version Validation › should reject token with mismatched session version

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Performance & Timing › should invalidate session within 2 seconds (E25 requirement)

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'id')

      124 |     // Delete in dependency order
      125 |     await prisma.client.employeeProfile.deleteMany({
    > 126 |       where: { userId: testUser.id },
          |                                 ^
      127 |     });
      128 |     await prisma.client.badgeAsset.deleteMany({
      129 |       where: { orgId: testOrg.id },

      at cleanupTestData (e2e/badge-revocation.e2e-spec.ts:126:33)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:43:11)

FAIL test/m7-service-providers.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.org.create()` invocation in
      /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41
      
        51 
        52 async function setupTestData() {
        53   // Create test org
      → 54   const org = await prisma.client.org.create({
               data: {
                 name: "M7 Test Restaurant",
                 email: "m7test@example.com",
             +   slug: String
               }
             })
      
      Argument `slug` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 1. Service Providers Management › should create a service provider

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 1. Service Providers Management › should create a monthly contract

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should generate reminders for active contracts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should list reminders for a branch

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should get reminder summary

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should mark reminder as paid

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should set a budget for a category

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should compute budget actuals

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should get budget summary

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should get franchise budget summary

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 4. Cost-Cutting Insights › should generate cost insights for a branch

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 4. Cost-Cutting Insights › should generate franchise-wide insights

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 5. Integration with Owner Digests › should include M7 data in franchise digest

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should validate dueDay for monthly contracts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should prevent deleting provider with active contracts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should require budget parameters

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)


  ● Test suite failed to run

    TypeError: prisma.$disconnect is not a function

      46 |     // Cleanup
      47 |     await cleanupTestData();
    > 48 |     await prisma.$disconnect();
         |                  ^
      49 |     await app.close();
      50 |   });
      51 |

      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:48:18)

{"level":"info","time":1766886701329,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":998,"requestId":"b6fd1b60-c45e-495e-9f3b-201bfdb18ed2","route":"/auth/login"}
FAIL test/m1-kds-enterprise.e2e-spec.ts
  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should return tickets with waiterName, slaState, and proper ordering

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should filter tickets by station correctly

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should support "since" parameter for incremental sync

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

  ● M1 KDS Enterprise (e2e) › SLA Configuration › should get default SLA config for a station

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

  ● M1 KDS Enterprise (e2e) › SLA Configuration › should update SLA config (Manager/Owner only)

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

  ● M1 KDS Enterprise (e2e) › SLA Configuration › should reject SLA config update from waiter (L1)

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

  ● M1 KDS Enterprise (e2e) › KDS Resilience › should handle marking ticket ready and checking all-ready state

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

{"level":"info","time":1766886701438,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":105,"requestId":"4c6a6446-48ab-441c-a5dd-fac58ac40f88","route":"/auth/login"}
{"level":"info","time":1766886701447,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/menu/items","statusCode":400,"durationMs":7,"requestId":"e180402e-8a3a-4452-955e-73a15895dcb7","orgId":"00000000-0000-4000-8000-000000000001","route":"/menu/items"}
FAIL test/e27-costing.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.org.create()` invocation in
      /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41
      
        55 
        56 async function setupTestData() {
        57   // Create org
      → 58   const org = await prisma.client.org.create({
               data: {
                 name: "E27 Test Org",
                 subdomain: "e27-test",
                 isSandbox: true,
             +   slug: String
               }
             })
      
      Argument `slug` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.payment.deleteMany()` invocation in
      /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:42:33
      
        39 afterAll(async () => {
        40   // Cleanup
        41   await prisma.client.orderItem.deleteMany({ where: { order: { branchId } } });
      → 42   await prisma.client.payment.deleteMany(
      Foreign key constraint violated: `refunds_paymentId_fkey (index)`

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● E27 - Costing & Profit Engine (e2e) › Costing calculation on order close › should calculate cost and margin when closing an order

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)

  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should include cost data for MANAGER (L4) role

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)

  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should exclude cost data for CHEF (L3) when showCostToChef=false

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)

  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should include cost data for CHEF (L3) when showCostToChef=true

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.payment.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:42:33

      39 afterAll(async () => {
      40   // Cleanup
      41   await prisma.client.orderItem.deleteMany({ where: { order: { branchId } } });
    → 42   await prisma.client.payment.deleteMany(
    Foreign key constraint violated: `refunds_paymentId_fkey (index)`

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e27-costing.e2e-spec.ts:42:5)

FAIL test/webhook-security.e2e-spec.ts
  ● Webhook Security E2E (E24) › Authentication › should reject webhook without signature header

    TypeError: request is not a function

      70 |   describe('Authentication', () => {
      71 |     it('should reject webhook without signature header', async () => {
    > 72 |       const response = await request(app.getHttpServer())
         |                              ^
      73 |         .post('/webhooks/billing')
      74 |         .set('Content-Type', 'application/json')
      75 |         .set('X-Ts', Date.now().toString())

      at Object.<anonymous> (webhook-security.e2e-spec.ts:72:30)

  ● Webhook Security E2E (E24) › Authentication › should reject webhook without timestamp header

    TypeError: request is not a function

      82 |
      83 |     it('should reject webhook without timestamp header', async () => {
    > 84 |       const response = await request(app.getHttpServer())
         |                              ^
      85 |         .post('/webhooks/billing')
      86 |         .set('Content-Type', 'application/json')
      87 |         .set('X-Sig', 'some-signature')

      at Object.<anonymous> (webhook-security.e2e-spec.ts:84:30)

  ● Webhook Security E2E (E24) › Authentication › should reject webhook without request ID header

    TypeError: request is not a function

      93 |
      94 |     it('should reject webhook without request ID header', async () => {
    > 95 |       const response = await request(app.getHttpServer())
         |                              ^
      96 |         .post('/webhooks/billing')
      97 |         .set('Content-Type', 'application/json')
      98 |         .set('X-Sig', 'some-signature')

      at Object.<anonymous> (webhook-security.e2e-spec.ts:95:30)

  ● Webhook Security E2E (E24) › Authentication › should reject webhook with invalid signature

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:107:30)

  ● Webhook Security E2E (E24) › Authentication › should accept webhook with valid signature

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:117:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with stale timestamp (>5 minutes old)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:132:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with future timestamp (>5 minutes ahead)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:148:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should accept webhook with timestamp at edge of window (4 minutes old)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:162:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with invalid timestamp format

    TypeError: request is not a function

      169 |
      170 |     it('should reject webhook with invalid timestamp format', async () => {
    > 171 |       const response = await request(app.getHttpServer())
          |                              ^
      172 |         .post('/webhooks/billing')
      173 |         .set('Content-Type', 'application/json')
      174 |         .set('X-Sig', 'some-signature')

      at Object.<anonymous> (webhook-security.e2e-spec.ts:171:30)

  ● Webhook Security E2E (E24) › Replay protection › should reject duplicate request ID (replay attack)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:190:31)

  ● Webhook Security E2E (E24) › Replay protection › should allow same payload with different request IDs

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:206:31)

  ● Webhook Security E2E (E24) › Body integrity › should reject webhook with tampered body

    TypeError: request is not a function

      221 |
      222 |       // Send tampered payload with signature from original
    > 223 |       const response = await request(app.getHttpServer())
          |                              ^
      224 |         .post('/webhooks/billing')
      225 |         .set('Content-Type', 'application/json')
      226 |         .set('X-Sig', signature)

      at Object.<anonymous> (webhook-security.e2e-spec.ts:223:30)

  ● Webhook Security E2E (E24) › Body integrity › should handle empty body correctly

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:237:30)

  ● Webhook Security E2E (E24) › Body integrity › should handle complex nested JSON

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:257:30)

  ● Webhook Security E2E (E24) › Multiple webhook endpoints › should protect MTN webhook endpoint

    TypeError: request is not a function

      263 |     it('should protect MTN webhook endpoint', async () => {
      264 |       const payload = { transactionId: 'mtn-123', status: 'completed' };
    > 265 |       const response = await request(app.getHttpServer())
          |                              ^
      266 |         .post('/webhooks/mtn')
      267 |         .set('Content-Type', 'application/json')
      268 |         .send(payload);

      at Object.<anonymous> (webhook-security.e2e-spec.ts:265:30)

  ● Webhook Security E2E (E24) › Multiple webhook endpoints › should protect Airtel webhook endpoint

    TypeError: request is not a function

      274 |     it('should protect Airtel webhook endpoint', async () => {
      275 |       const payload = { transactionId: 'airtel-123', status: 'completed' };
    > 276 |       const response = await request(app.getHttpServer())
          |                              ^
      277 |         .post('/webhooks/airtel')
      278 |         .set('Content-Type', 'application/json')
      279 |         .send(payload);

      at Object.<anonymous> (webhook-security.e2e-spec.ts:276:30)

  ● Webhook Security E2E (E24) › Response format › should return proper success response

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:289:30)

  ● Webhook Security E2E (E24) › Response format › should return proper error response for auth failure

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:302:30)

  ● Webhook Security E2E (E24) › Performance and load › should handle multiple concurrent valid webhooks

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at webhook-security.e2e-spec.ts:314:9
          at Function.from (<anonymous>)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:313:30)

{"level":"info","time":1766886704813,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":148,"requestId":"91b93fb2-9010-4e12-b71e-f9aa2a3f3a7f","route":"/auth/login"}
{"level":"info","time":1766886704912,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":97,"requestId":"e2fbbe81-63ff-4d35-b51c-64f91b0085f9","route":"/auth/login"}
{"level":"info","time":1766886705019,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":105,"requestId":"581b0a1d-d477-45b2-95c1-1e5405734a2b","route":"/auth/login"}
[31m[Nest] 4689  - [39m12/28/2025, 1:51:45 AM [31m  ERROR[39m [38;5;3m[ExceptionsHandler] [39m[31mInvalid config for role WAITER: desktop, web, and mobile must be booleans[39m
Error: Invalid config for role WAITER: desktop, web, and mobile must be booleans
    at AccessService.patchMatrix (/workspaces/chefcloud/services/api/src/access/access.service.ts:79:15)
    at AccessController.patchMatrix (/workspaces/chefcloud/services/api/src/access/access.controller.ts:44:31)
    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/router/router-execution-context.js:38:29
    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/router/router-execution-context.js:46:28
    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/router/router-proxy.js:9:17
{"level":"info","time":1766886705121,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":99,"requestId":"38905434-cb57-42b4-8c73-545b9c8867ef","route":"/auth/login"}
{"level":"info","time":1766886705152,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":200,"durationMs":13,"requestId":"d218d40a-224f-46e0-90df-e08a02e3e50c","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766886705165,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":403,"durationMs":7,"requestId":"949c0ac7-ea21-4a91-a904-48fe340bbbc4","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766886705171,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":403,"durationMs":4,"requestId":"05906b42-0359-4692-97fa-6d0eb162388b","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766886705178,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":403,"durationMs":5,"requestId":"ed1fe485-328c-49ab-960e-70f343c5284e","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766886705180,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":401,"durationMs":1,"requestId":"80c1138a-6c8b-4e1a-8978-5e7448da57c3","route":"/access/matrix"}
{"level":"info","time":1766886705191,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":200,"durationMs":8,"requestId":"547cc7f4-93f5-42f6-89bb-65c370675f93","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766886705203,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":500,"durationMs":9,"requestId":"0eca9af1-bb81-4ff9-8169-810dee996008","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766886705213,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":403,"durationMs":7,"requestId":"d4596617-b37d-4465-9271-3f5837e8093c","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766886705224,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":403,"durationMs":8,"requestId":"a059fa42-51a6-4c49-81d7-b57bb49e2c35","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766886705227,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":401,"durationMs":1,"requestId":"4a198293-5acf-43cb-a2c3-f1ee344ffe36","route":"/access/matrix"}
{"level":"info","time":1766886705334,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":104,"requestId":"a620998d-d779-4ca4-b74d-1fa3dd0a3093","route":"/auth/login"}
{"level":"info","time":1766886705457,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":120,"requestId":"0cac8b6f-d796-4499-ad09-55b3764778c4","route":"/auth/login"}
{"level":"info","time":1766886705565,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":103,"requestId":"9b9bd514-6929-4b93-95b9-066193770d2e","route":"/auth/login"}
{"level":"info","time":1766886705677,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":109,"requestId":"6c56d7ee-23b7-4afa-bea8-8460dbac868a","route":"/auth/login"}
{"level":"info","time":1766886705788,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":108,"requestId":"678bd5cf-8279-486b-84bd-dccfa16c7b71","route":"/auth/login"}
FAIL test/e23-roles-access.e2e-spec.ts
  ● E23 Roles & Platform Access (e2e) › GET /access/matrix › should allow L4 (manager) to get platform access matrix

    expect(received).toHaveProperty(path)

    Expected path: "WAITER"
    Received path: []

    Received value: {"HEAD_BARISTA": {"desktop": true, "mobile": false, "web": true}, "TICKET_MASTER": {"desktop": false, "mobile": true, "web": true}}

      82 |       expect(response.body).toHaveProperty('platformAccess');
      83 |       expect(response.body).toHaveProperty('defaults');
    > 84 |       expect(response.body.platformAccess).toHaveProperty('WAITER');
         |                                            ^
      85 |       expect(response.body.platformAccess).toHaveProperty('PROCUREMENT');
      86 |       expect(response.body.platformAccess).toHaveProperty('TICKET_MASTER');
      87 |     });

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:84:44)

{"level":"info","time":1766886705944,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":153,"requestId":"f33c8246-4a5f-4dc5-8b3a-cc0c00e9d6cb","route":"/auth/login"}
{"level":"info","time":1766886705966,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":200,"durationMs":17,"requestId":"d60bca02-89d9-4190-bb53-a34c4555e76d","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766886705976,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":200,"durationMs":7,"requestId":"f1f7acb0-97fe-4b7f-8552-13c72a3e9793","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
FAIL test/plan-rate-limit.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.user.upsert()` invocation in
      /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40
      
        157 });
        158 
        159 // Create test users
      → 160 const freeUser = await prisma.user.upsert({
              where: {
                email: "rate-limit-free@test.local"
              },
              update: {},
              create: {
                email: "rate-limit-free@test.local",
                role: "L5",
                orgId: "cmjp2q4iu001y124f85ejwl5e",
            +   firstName: String
              }
            })
      
      Argument `firstName` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should enforce free tier rate limit (10/min)

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should allow pro tier higher limits (60/min)

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should allow enterprise tier highest limits (240/min)

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › POST /billing/cancel › should apply rate limiting to cancel endpoint

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › Rate limit headers › should include Retry-After header in 429 responses

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › Authentication requirement › should reject requests without authentication

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › Metrics › should emit rate limit hit metrics

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

PASS test/e2e/auth.slice.e2e-spec.ts
  ● Console

    console.warn
      WARNING: No 429 responses observed. Rate limiter may not be active (auth guard runs first).

      224 |       const has429 = codes.includes(429);
      225 |       if (!has429) {
    > 226 |         console.warn('WARNING: No 429 responses observed. Rate limiter may not be active (auth guard runs first).');
          |                 ^
      227 |         console.log('Rate limit test results:', codes.reduce((acc, code) => {
      228 |           acc[code] = (acc[code] || 0) + 1;
      229 |           return acc;

      at Object.<anonymous> (e2e/auth.slice.e2e-spec.ts:226:17)

    console.log
      Rate limit test results: { '200': 7 }

      at Object.<anonymous> (e2e/auth.slice.e2e-spec.ts:227:17)

FAIL test/sse-security.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.user.deleteMany()` invocation in
      /workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:72:23
      
        69 
        70 afterAll(async () => {
        71   // Cleanup
      → 72   await prisma.user.deleteMany(
      Foreign key constraint violated: `orders_userId_fkey (index)`

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● SSE /stream/kpis Security (E26) › Authentication › should return 401 when no token provided

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authentication › should return 401 with invalid token

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authorization › should return 403 for L1 (Waiter) role

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authorization › should allow L4 (Manager) role

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authorization › should allow L5 (Owner) role

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › SSE Headers › should set correct SSE headers

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Event Emission › should emit at least one KPIs event with valid token

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Org-Scope Isolation › should only stream data for authenticated user's org

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Rate Limiting › should return 429 after exceeding rate limit

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Rate Limiting › should block concurrent connections beyond limit

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Connection Cleanup › should clean up resources on disconnect

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › CORS › should respect CORS allowlist

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:72:23

      69 
      70 afterAll(async () => {
      71   // Cleanup
    → 72   await prisma.user.deleteMany(
    Foreign key constraint violated: `orders_userId_fkey (index)`

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (sse-security.e2e-spec.ts:72:5)

FAIL test/e37-promotions.e2e-spec.ts
  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should create a happy hour promotion (20% off drinks 17:00-19:00)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should list promotions (including inactive)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should approve the promotion

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should apply discount when placing order during happy hour (18:00 on Monday)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should NOT apply discount outside happy hour (20:00)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should toggle promotion inactive

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should NOT apply discount when promotion is inactive

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'promotionEffect')

      88 |   afterAll(async () => {
      89 |     // Clean up test data
    > 90 |     await prisma.promotionEffect.deleteMany({ where: { promotion: { orgId } } });
         |                  ^
      91 |     await prisma.promotion.deleteMany({ where: { orgId } });
      92 |     await prisma.orderItem.deleteMany({ where: { order: { branchId } } });
      93 |     await prisma.order.deleteMany({ where: { branchId } });

      at Object.<anonymous> (e37-promotions.e2e-spec.ts:90:18)

FAIL test/e2e/billing.e2e-spec.ts
  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 401 if no authorization token is provided

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 403 if user is not L5 (owner)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 200 and log plan change for L5 owner

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 404 for non-existent plan code

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 429 after exceeding plan-aware rate limit (burst)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 401 if no authorization token is provided

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 403 if user is not L5 (owner)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 200 and log cancellation for L5 owner

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should be idempotent (canceling twice returns 200)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 401 if no authorization token is provided

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 200 with subscription details for authenticated user

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

FAIL test/e2e/franchise-cache-invalidation.e2e-spec.ts
  ● E22.D - Franchise Cache Invalidation (e2e) › Budget Update Invalidation › should invalidate budgets cache after budget update

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

  ● E22.D - Franchise Cache Invalidation (e2e) › Budget Update Invalidation › should not affect other cache prefixes when updating budgets

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

  ● E22.D - Franchise Cache Invalidation (e2e) › Cache Miss After Invalidation › should return fresh data after cache invalidation

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

  ● E22.D - Franchise Cache Invalidation (e2e) › Multiple Invalidations › should handle multiple rapid invalidations without errors

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

[31m[Nest] 4689  - [39m12/28/2025, 1:51:53 AM [31m  ERROR[39m [38;5;3m[ExceptionsHandler] [39m[31mThe "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received undefined[39m
TypeError: The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received undefined
    at Hash.update (node:internal/crypto/hash:115:11)
    at MsrCardService.hashTrackData (/workspaces/chefcloud/services/api/src/auth/msr-card.service.ts:57:33)
    at MsrCardService.assignCard (/workspaces/chefcloud/services/api/src/auth/msr-card.service.ts:73:28)
    at AuthController.assignMsrCard (/workspaces/chefcloud/services/api/src/auth/auth.controller.ts:154:44)
    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/router/router-execution-context.js:38:29
    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/router/router-execution-context.js:46:28
    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/router/router-proxy.js:9:17
[31m[Nest] 4689  - [39m12/28/2025, 1:51:53 AM [31m  ERROR[39m [38;5;3m[ExceptionsHandler] [39m[31mThe "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received undefined[39m
TypeError: The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received undefined
    at Hash.update (node:internal/crypto/hash:115:11)
    at MsrCardService.hashTrackData (/workspaces/chefcloud/services/api/src/auth/msr-card.service.ts:57:33)
    at MsrCardService.assignCard (/workspaces/chefcloud/services/api/src/auth/msr-card.service.ts:73:28)
    at AuthController.assignMsrCard (/workspaces/chefcloud/services/api/src/auth/auth.controller.ts:154:44)
    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/router/router-execution-context.js:38:29
    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/router/router-execution-context.js:46:28
    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/router/router-proxy.js:9:17
[31m[Nest] 4689  - [39m12/28/2025, 1:51:53 AM [31m  ERROR[39m [38;5;3m[ExceptionsHandler] [39m[31m
Invalid `this.prisma.client.msrCard.findUnique()` invocation in
/workspaces/chefcloud/services/api/src/auth/msr-card.service.ts:141:51

  138  * Marks card as revoked and invalidates all associated sessions
  139  */
  140 async revokeCard(cardId: string, revokedById: string, reason: string): Promise<any> {
→ 141   const card = await this.prisma.client.msrCard.findUnique({
          where: {
            id: undefined,
        ?   employeeId?: String,
        ?   cardToken?: String,
        ?   AND?: MsrCardWhereInput | MsrCardWhereInput[],
        ?   OR?: MsrCardWhereInput[],
        ?   NOT?: MsrCardWhereInput | MsrCardWhereInput[],
        ?   orgId?: StringFilter | String,
        ?   status?: EnumMsrCardStatusFilter | MsrCardStatus,
        ?   assignedAt?: DateTimeFilter | DateTime,
        ?   assignedById?: StringFilter | String,
        ?   revokedAt?: DateTimeNullableFilter | DateTime | Null,
        ?   revokedById?: StringNullableFilter | String | Null,
        ?   revokedReason?: StringNullableFilter | String | Null,
        ?   metadata?: JsonNullableFilter,
        ?   createdAt?: DateTimeFilter | DateTime,
        ?   updatedAt?: DateTimeFilter | DateTime,
        ?   employee?: EmployeeRelationFilter | EmployeeWhereInput,
        ?   assignedBy?: UserRelationFilter | UserWhereInput,
        ?   revokedBy?: UserNullableRelationFilter | UserWhereInput | Null
          },
          include: {
            employee: {
              include: {
                user: true
              }
            }
          }
        })

Argument `where` of type MsrCardWhereUniqueInput needs at least one of `id`, `employeeId` or `cardToken` arguments. Available options are marked with ?.[39m
PrismaClientValidationError: 
Invalid `this.prisma.client.msrCard.findUnique()` invocation in
/workspaces/chefcloud/services/api/src/auth/msr-card.service.ts:141:51

  138  * Marks card as revoked and invalidates all associated sessions
  139  */
  140 async revokeCard(cardId: string, revokedById: string, reason: string): Promise<any> {
→ 141   const card = await this.prisma.client.msrCard.findUnique({
          where: {
            id: undefined,
        ?   employeeId?: String,
        ?   cardToken?: String,
        ?   AND?: MsrCardWhereInput | MsrCardWhereInput[],
        ?   OR?: MsrCardWhereInput[],
        ?   NOT?: MsrCardWhereInput | MsrCardWhereInput[],
        ?   orgId?: StringFilter | String,
        ?   status?: EnumMsrCardStatusFilter | MsrCardStatus,
        ?   assignedAt?: DateTimeFilter | DateTime,
        ?   assignedById?: StringFilter | String,
        ?   revokedAt?: DateTimeNullableFilter | DateTime | Null,
        ?   revokedById?: StringNullableFilter | String | Null,
        ?   revokedReason?: StringNullableFilter | String | Null,
        ?   metadata?: JsonNullableFilter,
        ?   createdAt?: DateTimeFilter | DateTime,
        ?   updatedAt?: DateTimeFilter | DateTime,
        ?   employee?: EmployeeRelationFilter | EmployeeWhereInput,
        ?   assignedBy?: UserRelationFilter | UserWhereInput,
        ?   revokedBy?: UserNullableRelationFilter | UserWhereInput | Null
          },
          include: {
            employee: {
              include: {
                user: true
              }
            }
          }
        })

Argument `where` of type MsrCardWhereUniqueInput needs at least one of `id`, `employeeId` or `cardToken` arguments. Available options are marked with ?.
    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20
    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20
    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20
    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20
    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20
    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20
    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20
    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20
    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20
    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20
    at MsrCardService.revokeCard (/workspaces/chefcloud/services/api/src/auth/msr-card.service.ts:141:18)
    at AuthController.revokeMsrCard (/workspaces/chefcloud/services/api/src/auth/auth.controller.ts:183:18)
    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/router/router-execution-context.js:46:28
    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/router/router-proxy.js:9:17
{"level":"info","time":1766886713216,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":131,"requestId":"6a814112-a9fc-4fd5-ab35-4f21bd864001","route":"/auth/login"}
{"level":"info","time":1766886713268,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr/assign","statusCode":500,"durationMs":13,"requestId":"38b6e312-dc1a-43b9-808d-bd4f11ca3ad3","orgId":"00000000-0000-4000-8000-000000000001","route":"/auth/msr/assign"}
{"level":"info","time":1766886713275,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr/assign","statusCode":500,"durationMs":5,"requestId":"f9e0223c-99aa-468a-abbe-481c8385c570","orgId":"00000000-0000-4000-8000-000000000001","route":"/auth/msr/assign"}
{"level":"info","time":1766886713278,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr/assign","statusCode":401,"durationMs":1,"requestId":"97272a06-993b-48dc-b183-73d3e157bdfa","route":"/auth/msr/assign"}
{"level":"info","time":1766886713289,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr-swipe","statusCode":400,"durationMs":3,"requestId":"d3622c34-03b1-4a5a-a533-15958370282e","route":"/auth/msr-swipe"}
{"level":"info","time":1766886713298,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/auth/msr/cards","statusCode":200,"durationMs":7,"requestId":"09ee1bf9-f682-4bb4-b090-5fceecd2cefa","orgId":"00000000-0000-4000-8000-000000000001","route":"/auth/msr/cards"}
{"level":"info","time":1766886713302,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/auth/msr/cards","statusCode":401,"durationMs":1,"requestId":"69bb2c4c-c0e7-4986-b8dd-5d47dd54b903","route":"/auth/msr/cards"}
{"level":"info","time":1766886713315,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr/revoke","statusCode":500,"durationMs":12,"requestId":"b0abce42-3f08-403e-a834-5eae64a701de","orgId":"00000000-0000-4000-8000-000000000001","route":"/auth/msr/revoke"}
FAIL test/msr-card.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.msrCard.findUnique()` invocation in
      /workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:169:48
      
        166 describe('POST /auth/msr-swipe', () => {
        167   it('should authenticate with valid MSR card', async () => {
        168     // Get the card we assigned
      → 169     const card = await prisma.client.msrCard.findUnique({
                  where: {
                    id: undefined,
                ?   employeeId?: String,
                ?   cardToken?: String,
                ?   AND?: MsrCardWhereInput | MsrCardWhereInput[],
                ?   OR?: MsrCardWhereInput[],
                ?   NOT?: MsrCardWhereInput | MsrCardWhereInput[],
                ?   orgId?: StringFilter | String,
                ?   status?: EnumMsrCardStatusFilter | MsrCardStatus,
                ?   assignedAt?: DateTimeFilter | DateTime,
                ?   assignedById?: StringFilter | String,
                ?   revokedAt?: DateTimeNullableFilter | DateTime | Null,
                ?   revokedById?: StringNullableFilter | String | Null,
                ?   revokedReason?: StringNullableFilter | String | Null,
                ?   metadata?: JsonNullableFilter,
                ?   createdAt?: DateTimeFilter | DateTime,
                ?   updatedAt?: DateTimeFilter | DateTime,
                ?   employee?: EmployeeRelationFilter | EmployeeWhereInput,
                ?   assignedBy?: UserRelationFilter | UserWhereInput,
                ?   revokedBy?: UserNullableRelationFilter | UserWhereInput | Null
                  },
                  include: {
                    employee: true
                  }
                })
      
      Argument `where` of type MsrCardWhereUniqueInput needs at least one of `id`, `employeeId` or `cardToken` arguments. Available options are marked with ?.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `this.prisma.client.msrCard.findUnique()` invocation in
      /workspaces/chefcloud/services/api/src/auth/msr-card.service.ts:141:51
      
        138  * Marks card as revoked and invalidates all associated sessions
        139  */
        140 async revokeCard(cardId: string, revokedById: string, reason: string): Promise<any> {
      → 141   const card = await this.prisma.client.msrCard.findUnique({
                where: {
                  id: undefined,
              ?   employeeId?: String,
              ?   cardToken?: String,
              ?   AND?: MsrCardWhereInput | MsrCardWhereInput[],
              ?   OR?: MsrCardWhereInput[],
              ?   NOT?: MsrCardWhereInput | MsrCardWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   status?: EnumMsrCardStatusFilter | MsrCardStatus,
              ?   assignedAt?: DateTimeFilter | DateTime,
              ?   assignedById?: StringFilter | String,
              ?   revokedAt?: DateTimeNullableFilter | DateTime | Null,
              ?   revokedById?: StringNullableFilter | String | Null,
              ?   revokedReason?: StringNullableFilter | String | Null,
              ?   metadata?: JsonNullableFilter,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   employee?: EmployeeRelationFilter | EmployeeWhereInput,
              ?   assignedBy?: UserRelationFilter | UserWhereInput,
              ?   revokedBy?: UserNullableRelationFilter | UserWhereInput | Null
                },
                include: {
                  employee: {
                    include: {
                      user: true
                    }
                  }
                }
              })
      
      Argument `where` of type MsrCardWhereUniqueInput needs at least one of `id`, `employeeId` or `cardToken` arguments. Available options are marked with ?.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● MSR Card Management (e2e) › POST /auth/msr/assign › should assign MSR card to employee

    expected 201 "Created", got 500 "Internal Server Error"

      128 |           badgeId: trackData,
      129 |         })
    > 130 |         .expect(201);
          |          ^
      131 |
      132 |       expect(response.body).toHaveProperty('id');
      133 |       expect(response.body).toHaveProperty('cardToken');

      at Object.<anonymous> (msr-card.e2e-spec.ts:130:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr/assign › should reject duplicate card assignment to same employee

    expected 409 "Conflict", got 500 "Internal Server Error"

      148 |           badgeId: trackData,
      149 |         })
    > 150 |         .expect(409); // Conflict - employee already has card
          |          ^
      151 |     });
      152 |
      153 |     it('should reject unauthorized access (no token)', async () => {

      at Object.<anonymous> (msr-card.e2e-spec.ts:150:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr-swipe › should authenticate with valid MSR card

    PrismaClientValidationError: 
    Invalid `prisma.client.msrCard.findUnique()` invocation in
    /workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:169:48

      166 describe('POST /auth/msr-swipe', () => {
      167   it('should authenticate with valid MSR card', async () => {
      168     // Get the card we assigned
    → 169     const card = await prisma.client.msrCard.findUnique({
                where: {
                  id: undefined,
              ?   employeeId?: String,
              ?   cardToken?: String,
              ?   AND?: MsrCardWhereInput | MsrCardWhereInput[],
              ?   OR?: MsrCardWhereInput[],
              ?   NOT?: MsrCardWhereInput | MsrCardWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   status?: EnumMsrCardStatusFilter | MsrCardStatus,
              ?   assignedAt?: DateTimeFilter | DateTime,
              ?   assignedById?: StringFilter | String,
              ?   revokedAt?: DateTimeNullableFilter | DateTime | Null,
              ?   revokedById?: StringNullableFilter | String | Null,
              ?   revokedReason?: StringNullableFilter | String | Null,
              ?   metadata?: JsonNullableFilter,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   employee?: EmployeeRelationFilter | EmployeeWhereInput,
              ?   assignedBy?: UserRelationFilter | UserWhereInput,
              ?   revokedBy?: UserNullableRelationFilter | UserWhereInput | Null
                },
                include: {
                  employee: true
                }
              })

    Argument `where` of type MsrCardWhereUniqueInput needs at least one of `id`, `employeeId` or `cardToken` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (msr-card.e2e-spec.ts:169:20)

  ● MSR Card Management (e2e) › POST /auth/msr-swipe › should reject invalid badge ID

    expected 404 "Not Found", got 400 "Bad Request"

      256 |           branchId,
      257 |         })
    > 258 |         .expect(404); // Card not found
          |          ^
      259 |     });
      260 |   });
      261 |

      at Object.<anonymous> (msr-card.e2e-spec.ts:258:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › GET /auth/msr/cards › should list MSR cards for organization

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      267 |         .expect(200);
      268 |
    > 269 |       expect(Array.isArray(response.body)).toBe(true);
          |                                            ^
      270 |       expect(response.body.length).toBeGreaterThanOrEqual(1);
      271 |
      272 |       const assignedCard = response.body.find((c: any) => c.id === cardId);

      at Object.<anonymous> (msr-card.e2e-spec.ts:269:44)

  ● MSR Card Management (e2e) › POST /auth/msr/revoke › should revoke MSR card

    expected 200 "OK", got 500 "Internal Server Error"

      291 |           reason: 'E2E test cleanup',
      292 |         })
    > 293 |         .expect(200);
          |          ^
      294 |
      295 |       expect(response.body.status).toBe('REVOKED');
      296 |       expect(response.body.revokedReason).toBe('E2E test cleanup');

      at Object.<anonymous> (msr-card.e2e-spec.ts:293:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766886713325,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr/revoke","statusCode":401,"durationMs":1,"requestId":"85083d64-cd87-45b3-b6d6-7c166b49ddca","route":"/auth/msr/revoke"}
FAIL test/e2e/payments.slice.e2e-spec.ts
  ● Payments (Slice E2E) › GET /payments -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › GET /payments -> 200 with token (lists payments)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › GET /payments/pay_001 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › GET /payments/pay_missing -> 404/400 (invalid id)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments -> 201 (create payment)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments -> 400/422 (invalid payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/pay_001/capture -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/pay_001/refund -> 201

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/intents -> 201 (create intent)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/intents/pi_001/cancel -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments-test-webhook/gateway -> 200 (valid HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments-test-webhook/gateway -> 200 { ok:false } (bad HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments-test-webhook/gateway -> 200 { ok:false } (missing signature)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › Rate limiting produces >= one 429 on /payments

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

FAIL test/e2e/orders.slice.e2e-spec.ts
  ● Orders (Slice E2E) › POST /pos/orders -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders -> 201 with token (creates open order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/send-to-kitchen -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/modify -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/send-to-kitchen -> 200/201 (sends to kitchen)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/modify -> 200 (modifies order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/void -> 200 (voids order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/close -> 200 (closes order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/discount -> 200 (applies discount)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/post-close-void -> 200 (voids closed order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders -> 400/422 (bad payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/invalid-id/send-to-kitchen -> 404/400 (invalid order id)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/ord_001/modify -> 400/422 (bad modify payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › Rate limiting produces >= one 429 on /pos/orders

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

FAIL test/e2e/franchise.slice.e2e-spec.ts
  ● Franchise (Slice E2E) › GET /franchise/overview -> 401 without token

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/overview -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/rankings -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/budgets -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › Two reads of /franchise/overview return consistent payload shape

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › POST /franchise-test/invalidate -> { ok:true }

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/overview after invalidation -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/forecast/items -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › Rate limiting produces >= one 429 on /franchise/overview

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

FAIL test/e2e/franchise-budgets-cache.e2e-spec.ts
  ● E22.C - Franchise Budgets Caching (e2e) › should return cached=false on first call (cache miss)

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should return cached=true on second call within TTL (cache hit)

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should maintain data structure consistency between cached and non-cached responses

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should use different cache keys for different periods

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should return error for invalid period format

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › cache hit should be significantly faster than cache miss

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

FAIL test/e2e/franchise-rankings-cache.e2e-spec.ts
  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return cached=false on first call (cache miss)

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return cached=true on second call within TTL (cache hit)

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return same data structure on cache hit and miss

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should cache separately for different periods

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return error for invalid period format

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should measure response time difference between miss and hit

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

{"level":"info","time":1766886716430,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":130,"requestId":"64d11901-60a3-4a8d-a2b8-f355342e2cae","route":"/auth/login"}
{"level":"info","time":1766886716436,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":2,"requestId":"6d315b6b-2e50-4e57-a845-dfb89d503705","route":"/auth/login"}
{"level":"info","time":1766886716542,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":104,"requestId":"c8e597a3-0751-48c2-8990-e7073df505a7","route":"/auth/login"}
{"level":"info","time":1766886716545,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":400,"durationMs":1,"requestId":"d49d450a-b85a-4cb2-a9c0-c36b90e29c8b","route":"/auth/login"}
{"level":"info","time":1766886716552,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/pin-login","statusCode":401,"durationMs":4,"requestId":"f432573b-05f2-4c76-ab32-4151e9708d21","route":"/auth/pin-login"}
{"level":"info","time":1766886716556,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/pin-login","statusCode":401,"durationMs":1,"requestId":"f57a93f0-2099-456e-bac2-dfce1c54c8d8","route":"/auth/pin-login"}
{"level":"info","time":1766886716561,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/pin-login","statusCode":401,"durationMs":3,"requestId":"36846e69-bc27-46e3-afe1-83fa54be28d1","route":"/auth/pin-login"}
{"level":"info","time":1766886716566,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/pin-login","statusCode":401,"durationMs":3,"requestId":"a9c1958b-6480-4e11-86e2-de934d3946a2","route":"/auth/pin-login"}
{"level":"info","time":1766886716570,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr-swipe","statusCode":400,"durationMs":2,"requestId":"5feaa0c0-1259-4163-846b-559bced1c56e","route":"/auth/msr-swipe"}
{"level":"info","time":1766886716573,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr-swipe","statusCode":400,"durationMs":2,"requestId":"ab0212b9-8216-4b48-a624-82bac93c4e58","route":"/auth/msr-swipe"}
{"level":"info","time":1766886716583,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr-swipe","statusCode":400,"durationMs":8,"requestId":"5b8d70f2-3982-4a14-9bec-c53eaa2577df","route":"/auth/msr-swipe"}
{"level":"info","time":1766886716709,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":124,"requestId":"66156ec6-02ba-49c3-bafa-b1e1359a8943","route":"/auth/login"}
{"level":"info","time":1766886716718,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/me","statusCode":200,"durationMs":7,"requestId":"a082e92b-049c-417c-9d67-fa82abb207f5","orgId":"00000000-0000-4000-8000-000000000001","route":"/me"}
{"level":"info","time":1766886716720,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/me","statusCode":401,"durationMs":0,"requestId":"68621c02-c76d-4fb6-8cc5-7d98b12992b7","route":"/me"}
{"level":"info","time":1766886716722,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/me","statusCode":401,"durationMs":0,"requestId":"4db7d9bb-f1b7-4aea-86e9-95b2103e43f0","route":"/me"}
FAIL test/auth.e2e-spec.ts
  ● Auth (e2e) › POST /auth/pin-login › should login with valid employee code and PIN

    expected 200 "OK", got 401 "Unauthorized"

      92 |           branchId: await getMainBranchId(),
      93 |         })
    > 94 |         .expect(200);
         |          ^
      95 |
      96 |       expect(response.body).toHaveProperty('access_token');
      97 |       expect(response.body.user).toMatchObject({

      at Object.<anonymous> (auth.e2e-spec.ts:94:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/msr-swipe › should login with valid badge ID

    expected 200 "OK", got 400 "Bad Request"

      143 |           badgeId: 'CASHIER001',
      144 |         })
    > 145 |         .expect(200);
          |          ^
      146 |
      147 |       expect(response.body).toHaveProperty('access_token');
      148 |       expect(response.body.user).toMatchObject({

      at Object.<anonymous> (auth.e2e-spec.ts:145:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/msr-swipe › should reject unknown badge ID

    expected 404 "Not Found", got 400 "Bad Request"

      159 |           badgeId: 'UNKNOWN_BADGE',
      160 |         })
    > 161 |         .expect(404);
          |          ^
      162 |     });
      163 |
      164 |     it('should login with branch verification', async () => {

      at Object.<anonymous> (auth.e2e-spec.ts:161:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/msr-swipe › should login with branch verification

    expected 200 "OK", got 400 "Bad Request"

      169 |           branchId: await getMainBranchId(),
      170 |         })
    > 171 |         .expect(200);
          |          ^
      172 |
      173 |       expect(response.body).toHaveProperty('access_token');
      174 |     });

      at Object.<anonymous> (auth.e2e-spec.ts:171:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766886716835,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":112,"requestId":"c755b213-e72d-4ddb-934b-5513cd9da335","route":"/auth/login"}
{"level":"info","time":1766886716844,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/devices/register","statusCode":201,"durationMs":6,"requestId":"0548efdf-ffc1-4628-93a9-12c95c0129b6","orgId":"00000000-0000-4000-8000-000000000001","route":"/devices/register"}
{"level":"info","time":1766886716847,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/devices/register","statusCode":401,"durationMs":1,"requestId":"f4325756-ac03-4277-9a3d-8ebeb3b08655","route":"/devices/register"}
FAIL test/b3-multi-tenant.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.session.create()` invocation in
      /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37
      
        61   },
        62 });
        63 
      → 64 sessionA = await prisma.session.create({
             data: {
               userId: "cmjp2qcwf0038124f70xwnxnb",
               token: "token-a-1766886717906",
               expiresAt: new Date("2025-12-29T01:51:57.906Z"),
           +   user: {
           +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
           +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
           +     connect: UserWhereUniqueInput
           +   }
             }
           })
      
      Argument `user` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should deny user A access to org B menu items with wrong x-org-id

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjp2qcwf0038124f70xwnxnb",
             token: "token-a-1766886717906",
             expiresAt: new Date("2025-12-29T01:51:57.906Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should return 404 when user A requests org B resource with correct x-org-id

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjp2qcwf0038124f70xwnxnb",
             token: "token-a-1766886717906",
             expiresAt: new Date("2025-12-29T01:51:57.906Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should allow user A to access org A menu items

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjp2qcwf0038124f70xwnxnb",
             token: "token-a-1766886717906",
             expiresAt: new Date("2025-12-29T01:51:57.906Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should require x-org-id header

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjp2qcwf0038124f70xwnxnb",
             token: "token-a-1766886717906",
             expiresAt: new Date("2025-12-29T01:51:57.906Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org data isolation › should not leak org B data when user A lists menu items

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjp2qcwf0038124f70xwnxnb",
             token: "token-a-1766886717906",
             expiresAt: new Date("2025-12-29T01:51:57.906Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org data isolation › should isolate org B user from org A data

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjp2qcwf0038124f70xwnxnb",
             token: "token-a-1766886717906",
             expiresAt: new Date("2025-12-29T01:51:57.906Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'id')

      152 |     // Cleanup in reverse order
      153 |     await prisma.client.menuItem.deleteMany({ where: { branchId: branchA.id } });
    > 154 |     await prisma.client.menuItem.deleteMany({ where: { branchId: branchB.id } });
          |                                                                          ^
      155 |     await prisma.category.deleteMany({ where: { branchId: branchA.id } });
      156 |     await prisma.category.deleteMany({ where: { branchId: branchB.id } });
      157 |     await prisma.session.deleteMany({ where: { userId: userA.id } });

      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:154:74)

FAIL test/billing-simple.e2e-spec.ts
  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 401 if no authorization token is provided

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 200 and subscription details with valid L5 token

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 401 if no authorization token is provided

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 403 if user is not L5 (manager attempting)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 200 or 404 with valid L5 token

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 404 for unknown plan code

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should rate limit after burst requests (expect at least one 429)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 401 if no authorization token is provided

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 403 if user is not L5 (manager attempting)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 200 or 404 with valid L5 token

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should be idempotent (canceling twice should succeed)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

FAIL test/e2e/devportal.slice.e2e-spec.ts
  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › GET /dev/keys without token -> 200 (test controller)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › GET /dev/keys -> 200 with token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys -> 201 (create)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys -> 400 (invalid payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys/key_1/revoke -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › Plan-aware limit hits 429 for free but not for pro (same burst)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev-webhook/events -> 200 { ok:true } (valid HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev-webhook/events -> 200 { ok:false } (bad HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev-webhook/events -> 200 { ok:false } (missing signature)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › GET /dev/keys returns multiple keys with plan info

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys with pro plan -> 201

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

FAIL test/e2e/reservations.slice.e2e-spec.ts
  ● Reservations (Slice E2E) › GET /reservations -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations -> 200 with token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations -> 201 (create booking)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations -> 400/422 (invalid payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations/:id/confirm -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations/:id/cancel -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations/:id/seat -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations?status=CONFIRMED -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations?from=2025-11-13&to=2025-11-14 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations/summary?from=2025-11-01&to=2025-11-30 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations-test/availability?date=2025-11-13&party=2 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations-test/availability?date=2025-11-13&party=6 -> 200 (fewer slots)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › Rate limiting produces >= one 429 on /reservations

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

FAIL test/b2-apikey.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.session.create()` invocation in
      /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42
      
        55 });
        56 
        57 // Create session for auth
      → 58 const session = await prisma.session.create({
             data: {
               userId: "cmjp2qepc003f124ftsr4ccyi",
               token: "test-token-1766886720242",
               expiresAt: new Date("2025-12-29T01:52:00.242Z"),
           +   user: {
           +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
           +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
           +     connect: UserWhereUniqueInput
           +   }
             }
           })
      
      Argument `user` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● API Key Security (E2E) › POST /ops/apikeys › should create API key as L5 user

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /ops/apikeys › should list API keys (masked)

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should accept request with valid API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should reject request with missing API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should reject request with invalid API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › Rate limiting › should enforce rate limit on public endpoints

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › DELETE /ops/apikeys/:id › should delete API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

{"level":"info","time":1766886721314,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/dev/orgs","statusCode":404,"durationMs":11,"requestId":"ab634048-2d3a-45dd-8bca-8d35eda5857d"}
{"level":"info","time":1766886721322,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/dev/orgs","statusCode":404,"durationMs":5,"requestId":"23d162aa-e26a-4971-81a2-13ffd56f3ff7"}
{"level":"info","time":1766886721325,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/dev/subscriptions","statusCode":404,"durationMs":0,"requestId":"412a2a34-8d5e-4a7b-ab3c-1c9fdd9bedb7"}
{"level":"info","time":1766886721328,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/dev/plans","statusCode":404,"durationMs":1,"requestId":"7c70ec28-6a9e-4514-9acb-3527103d3e70"}
{"level":"info","time":1766886721365,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/dev/plans","statusCode":404,"durationMs":2,"requestId":"7f390729-794c-46a4-be46-c20007c3cbcd"}
{"level":"info","time":1766886721499,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":132,"requestId":"ea6deb37-849c-43a6-91eb-edcbdfbaa21f","route":"/auth/login"}
{"level":"info","time":1766886721507,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":404,"durationMs":6,"requestId":"48cbf5c6-589d-4039-a01e-6946fa8efc85","orgId":"00000000-0000-4000-8000-000000000001","route":"/billing/subscription"}
{"level":"info","time":1766886721620,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":111,"requestId":"9440f6a1-3810-4cd9-bf0d-1d08f0343204","route":"/auth/login"}
{"level":"info","time":1766886721632,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":403,"durationMs":10,"requestId":"9399669a-78c5-4946-86e8-2dcb81ebee39","orgId":"00000000-0000-4000-8000-000000000001","route":"/billing/subscription"}
{"level":"info","time":1766886721752,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":118,"requestId":"c1e72fce-d29e-48f3-9aa0-6be512deb6e5","route":"/auth/login"}
{"level":"info","time":1766886721760,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/billing/plan/change","statusCode":403,"durationMs":5,"requestId":"453b438e-2d42-4303-83c9-04369474307b","orgId":"00000000-0000-4000-8000-000000000001","route":"/billing/plan/change"}
FAIL test/e24-subscriptions.e2e-spec.ts
  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/orgs › should create org with ACTIVE subscription (dev admin)

    expected 201 "Created", got 404 "Not Found"

      32 |           planCode: 'BASIC',
      33 |         })
    > 34 |         .expect(201);
         |          ^
      35 |
      36 |       expect(response.body).toHaveProperty('org');
      37 |       expect(response.body).toHaveProperty('owner');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:34:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/orgs › should reject without dev admin header

    expected 401 "Unauthorized", got 404 "Not Found"

      50 |           planCode: 'PRO',
      51 |         })
    > 52 |         .expect(401);
         |          ^
      53 |     });
      54 |   });
      55 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:52:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - GET /dev/subscriptions › should list all subscriptions (dev admin)

    expected 200 "OK", got 404 "Not Found"

      59 |         .get('/dev/subscriptions')
      60 |         .set('X-Dev-Admin', 'dev1@chefcloud.local')
    > 61 |         .expect(200);
         |          ^
      62 |
      63 |       expect(Array.isArray(response.body)).toBe(true);
      64 |       expect(response.body.length).toBeGreaterThan(0);

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:61:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/plans › should upsert plan (super dev)

    expected 201 "Created", got 404 "Not Found"

      81 |           isActive: true,
      82 |         })
    > 83 |         .expect(201);
         |          ^
      84 |
      85 |       expect(response.body.code).toBe('TEST_PLAN');
      86 |       expect(response.body.name).toBe('Test Plan');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:83:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/plans › should reject non-super dev from creating plans

    expected 403 "Forbidden", got 404 "Not Found"

      109 |           features: {},
      110 |         })
    > 111 |         .expect(403);
          |          ^
      112 |     });
      113 |   });
      114 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:111:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - GET /billing/subscription › should return subscription for org owner

    expected 200 "OK", got 404 "Not Found"

      129 |         .get('/billing/subscription')
      130 |         .set('Authorization', `Bearer ${token}`)
    > 131 |         .expect(200);
          |          ^
      132 |
      133 |       expect(response.body).toHaveProperty('plan');
      134 |       expect(response.body).toHaveProperty('status');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:131:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - POST /billing/plan/change › should allow owner to request plan change

    expected 201 "Created", got 403 "Forbidden"

      172 |         .set('Authorization', `Bearer ${token}`)
      173 |         .send({ planCode: 'ENTERPRISE' })
    > 174 |         .expect(201);
          |          ^
      175 |
      176 |       expect(response.body).toHaveProperty('message');
      177 |       expect(response.body).toHaveProperty('effectiveDate');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:174:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - POST /billing/cancel › should allow owner to request cancellation

    expected 201 "Created", got 403 "Forbidden"

      194 |         .post('/billing/cancel')
      195 |         .set('Authorization', `Bearer ${token}`)
    > 196 |         .expect(201);
          |          ^
      197 |
      198 |       expect(response.body).toHaveProperty('message');
      199 |       expect(response.body).toHaveProperty('effectiveDate');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:196:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766886721892,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":131,"requestId":"7665a0d9-f36d-400f-99ca-7c6459ae16d4","route":"/auth/login"}
{"level":"info","time":1766886721900,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/billing/cancel","statusCode":403,"durationMs":6,"requestId":"6fd24bf6-6273-4c8f-9569-a2c99b79a4ea","orgId":"00000000-0000-4000-8000-000000000001","route":"/billing/cancel"}
FAIL test/e2e/inventory.slice.e2e-spec.ts
  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › GET /inventory/items should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › POST /inventory/items should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › POST /inventory/adjustments should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › POST /inventory/wastage should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Rate Limiting › Rate limiting produces >= one 429 deterministically

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › should bootstrap successfully without metatype errors

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › GET /inventory/items should exist (not 404)

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /inventory/items should validate request body

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /inventory/adjustments should validate request body

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › GET /inventory/items endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › POST /inventory/items endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › GET /inventory/levels endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › POST /inventory/adjustments endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › POST /inventory/wastage endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

FAIL test/e26-kpis.e2e-spec.ts
  ● Console

    console.log
      prisma:error 
      Invalid `prisma.client.org.create()` invocation in
      /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41
      
        24 prisma = app.get(PrismaService);
        25 
        26 // Create test org
      → 27 const org = await prisma.client.org.create({
             data: {
               name: "E26 Test Org",
               currency: "UGX",
           +   slug: String
             }
           })
      
      Argument `slug` is missing.

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

    console.log
      prisma:error 
      Invalid `prisma.client.user.deleteMany()` invocation in
      /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:75:30
      
        72 
        73 afterAll(async () => {
        74   // Cleanup
      → 75   await prisma.client.user.deleteMany(
      Foreign key constraint violated: `orders_userId_fkey (index)`

      at Object.mc (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:21:432)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require authentication

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should reject non-L4+ users

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require scope query param

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require branchId for branch scope

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should stream org-wide KPIs for L4+ user

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › KPI Computation › should compute salesToday from completed orders

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › KPI Computation › should count open orders correctly

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.user.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:75:30

      72 
      73 afterAll(async () => {
      74   // Cleanup
    → 75   await prisma.client.user.deleteMany(
    Foreign key constraint violated: `orders_userId_fkey (index)`

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:75:5)

FAIL test/e2e/billing.slice.e2e-spec.ts
  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › POST /billing/plan/change should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › POST /billing/cancel should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › GET /billing/subscription should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Rate Limiting › Rate limiting produces >= one 429 deterministically

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › should bootstrap successfully without metatype errors

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › should have billing controller mounted at /billing

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /billing/plan/change should validate request body

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /billing/cancel should be idempotent

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › GET /billing/subscription endpoint exists

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › POST /billing/plan/change endpoint exists

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › POST /billing/cancel endpoint exists

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

PASS test/e2e/purchasing.slice.e2e-spec.ts
  ● Console

    console.log
      Rate limit test results: { '401': 20 }

      at Object.<anonymous> (e2e/purchasing.slice.e2e-spec.ts:102:15)

    console.warn
      WARNING: No 429 responses observed. Rate limiter may not be active (auth guard runs first).

      104 |       // Verify we actually got some 429s (not just 401s)
      105 |       if (!has429) {
    > 106 |         console.warn('WARNING: No 429 responses observed. Rate limiter may not be active (auth guard runs first).');
          |                 ^
      107 |       }
      108 |     });
      109 |   });

      at Object.<anonymous> (e2e/purchasing.slice.e2e-spec.ts:106:17)

FAIL test/a3-pos.e2e-spec.ts
  ● A3 POS Core (e2e) › should create order with burger+fries -> send-to-kitchen -> kds queue shows ticket -> mark ready -> close order

    TypeError: menuResponse.body.find is not a function

      42 |       .set('Authorization', `Bearer ${authToken}`);
      43 |
    > 44 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      45 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      46 |     burgerId = burger.id;
      47 |     friesId = fries.id;

      at Object.<anonymous> (a3-pos.e2e-spec.ts:44:38)

  ● A3 POS Core (e2e) › should create order with burger only -> send-to-kitchen -> order has NO_DRINKS anomaly flag

    TypeError: menuResponse.body.find is not a function

      42 |       .set('Authorization', `Bearer ${authToken}`);
      43 |
    > 44 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      45 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      46 |     burgerId = burger.id;
      47 |     friesId = fries.id;

      at Object.<anonymous> (a3-pos.e2e-spec.ts:44:38)

{"level":"info","time":1766886725256,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":123,"requestId":"860f79df-c07c-4674-82c3-619779e1b199","route":"/auth/login"}
{"level":"info","time":1766886725267,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/menu/items","statusCode":400,"durationMs":9,"requestId":"dbbba147-e26e-4002-8c4d-1351367eb2de","orgId":"00000000-0000-4000-8000-000000000001","route":"/menu/items"}
FAIL test/e2e/transfer.invalidation.slice.e2e-spec.ts
  ● Transfer Invalidation (Slice E2E) — E22.D › POST /transfer-test/event -> 401 without token

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › POST /transfer-test/event -> 200 {ok:false} on invalid payload

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › HIT → transfer.changed → MISS (forecast cache proves invalidation)

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › Idempotency: repeating same event still returns ok:true

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › Deterministic rate limit: >= one 429 on /forecast-test/sales

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

PASS test/e2e/sse.smoke.e2e-spec.ts
FAIL test/e2e/kds.slice.e2e-spec.ts
  ● KDS (Slice E2E) › GET /kds-test/tickets without token -> 200 (test controller)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › GET /kds-test/tickets -> 200 with token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › GET /kds-test/tickets/tkt-001 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › GET /kds-test/tickets/tkt-missing -> 404

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/tickets/tkt-001/ack -> 200 (ACK)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/tickets/tkt-001/bump -> 200 (BUMPED)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/tickets/tkt-001/expo -> 200 (EXPO)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/screens/scr-001/heartbeat -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › Rate limiting produces >= one 429 on /kds-test/tickets

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

PASS test/e2e/webhook.replay.slice.e2e-spec.ts
PASS test/e2e/forecast.slice.e2e-spec.ts
FAIL test/e2e/inventory.e2e-spec.ts
  ● Inventory E2E › should receive PO → on-hand increases

    expected 200 "OK", got 404 "Not Found"

      57 |       .get(`/inventory/items/${beefId}`)
      58 |       .set('Authorization', `Bearer ${authToken}`)
    > 59 |       .expect(200);
         |        ^
      60 |
      61 |     const initialOnHand = initialResponse.body.onHand || 0;
      62 |

      at Object.<anonymous> (e2e/inventory.e2e-spec.ts:59:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766886728630,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":127,"requestId":"a34d2ca4-8d93-4653-871a-e6aee2b71f31","route":"/auth/login"}
{"level":"info","time":1766886728649,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/inventory/items/beef-cmjo545si0037fwk5b46m83e0","statusCode":404,"durationMs":5,"requestId":"6747ad45-79c4-4b68-87a4-217a82374b98"}
FAIL test/e2e/pos.e2e-spec.ts
  ● POS E2E › should create order → send-to-kitchen → close

    TypeError: Cannot read properties of undefined (reading 'upsert')

      236 |  */
      237 | export async function createFloor(prisma: PrismaClient, orgId: string, branchId: string) {
    > 238 |   const floorPlan = await prisma.floorPlan.upsert({
          |                                            ^
      239 |     where: { id: `floor-e2e-${orgId}` },
      240 |     update: {},
      241 |     create: {

      at createFloor (e2e/factory.ts:238:44)
      at Object.<anonymous> (e2e/pos.e2e-spec.ts:36:36)

{"level":"info","time":1766886731551,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":148,"requestId":"69ab3df2-d45d-4c1c-a8dd-33863e41785a","route":"/auth/login"}
FAIL test/e2e/workforce.e2e-spec.ts
  ● Workforce E2E › should clock in → clock out

    expected 201 "Created", got 404 "Not Found"

      58 |       .post('/workforce/attendance/clock-in')
      59 |       .set('Authorization', `Bearer ${waiterToken}`)
    > 60 |       .expect(201);
         |        ^
      61 |
      62 |     const _attendanceId = clockInResponse.body.id;
      63 |     expect(clockInResponse.body.clockIn).toBeDefined();

      at Object.<anonymous> (e2e/workforce.e2e-spec.ts:60:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766886731661,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":108,"requestId":"2e41f1ae-c856-42f0-ac4c-5061c794e60e","route":"/auth/login"}
{"level":"info","time":1766886731678,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/workforce/attendance/clock-in","statusCode":404,"durationMs":11,"requestId":"3964a843-bdc4-4ac6-a7df-73af36bf8371"}
FAIL test/e2e/bookings.e2e-spec.ts
  ● Bookings E2E › should create booking → HOLD → pay → confirm

    TypeError: Cannot read properties of undefined (reading 'upsert')

      327 |  */
      328 | export async function createEvent(prisma: PrismaClient, orgId: string, branchId: string) {
    > 329 |   const event = await prisma.event.upsert({
          |                                    ^
      330 |     where: { id: `event-${orgId}` },
      331 |     update: {},
      332 |     create: {

      at createEvent (e2e/factory.ts:329:36)
      at Object.<anonymous> (e2e/bookings.e2e-spec.ts:33:36)

FAIL test/e2e/accounting.e2e-spec.ts
  ● Accounting E2E › should create period → lock → posting blocked

    TypeError: Cannot read properties of undefined (reading 'upsert')

      362 |   const created = [];
      363 |   for (const acc of accounts) {
    > 364 |     const account = await prisma.account.upsert({
          |                                          ^
      365 |       where: { orgId_code: { orgId, code: acc.code } },
      366 |       update: {},
      367 |       create: {

      at createChartOfAccounts (e2e/factory.ts:364:42)
      at Object.<anonymous> (e2e/accounting.e2e-spec.ts:33:32)

PASS test/e2e/docs.e2e-spec.ts
PASS test/smoke/di.e2e-spec.ts
[BOOTSTRAP] Starting ChefCloud API {
  NODE_ENV: 'test',
  PORT: '4050',
  DATABASE_URL: '***configured***',
  JWT_SECRET: '***configured***'
}
[BOOTSTRAP] Creating NestJS application...
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPrismaModule dependencies initialized[39m[38;5;3m +33ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[CacheService] [39m[32mCacheService initialized with Redis fallback to memory[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[SseRateLimiterGuard] [39m[32mSSE Rate Limiter initialized: 60/min per user/IP, max 2 concurrent/user[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMetaModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCurrencyModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTaxModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mObservabilityModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCommonModule dependencies initialized[39m[38;5;3m +36ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[SseRateLimiterGuard] [39m[32mSSE Rate Limiter initialized: 60/min per user/IP, max 2 concurrent/user[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[OwnerService] [39m[32m[SMTP] Configured: localhost:1025 (secure=false)[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDemoModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PaymentsService] [39m[32mPayment adapters running in SANDBOX mode[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMeModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSettingsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDeviceModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMenuModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFloorModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPromotionsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAccountingModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mShiftTemplatesModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mShiftSchedulesModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mShiftAssignmentsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDashboardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFeedbackModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFinanceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSupportModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThresholdsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAccessModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDocumentsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mKpisModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mStreamModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mWorkforceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEfrisModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mReservationsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mWebAuthnModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mKdsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHardwareModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPaymentsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOpsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAnalyticsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mBillingModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mBookingsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mBadgesModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCashModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAntiTheftModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mReportsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPurchasingModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAlertsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOwnerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mStaffModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mInventoryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFranchiseModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPosModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mShiftsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[BOOTSTRAP] NestJS application created
[BOOTSTRAP] CORS enabled for 1 origin(s): http://localhost:3000
[BOOTSTRAP] Binding to 0.0.0.0:4050...
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mHealthController {/api/health}:[39m[38;5;3m +28ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +3ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWebhooksController {/webhooks}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webhooks/mtn, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webhooks/airtel, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webhooks/billing, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMetricsController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/metrics, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mHealthController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/healthz, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/readiness, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/pin-login, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/msr-swipe, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/enroll-badge, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/logout, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/logout-all, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/sessions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/msr/assign, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/msr/revoke, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/msr/cards, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMeController {/me}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDeviceController {/devices}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/devices/register, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMenuController {/menu}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/items, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/items, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/items/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/modifier-groups, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/items/:id/groups/:groupId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mFloorController {/floor}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/floor, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/floor/availability, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mTableController {/tables}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/tables/:id, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPosController {/pos/orders}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/send-to-kitchen, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/modify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/void, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/close, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/discount, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/post-close-void, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mEfrisController {/fiscal}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/fiscal/push/:orderId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/fiscal/retry/:orderId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mInventoryController {/inventory}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/items, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/items, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/items/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/levels, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/adjustments, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mRecipesController {/inventory/recipes}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/recipes/:menuItemId, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/recipes/:menuItemId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWastageController {/inventory/wastage}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/wastage, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mCountsController {/inventory/counts}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/counts/begin, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/counts/:id/submit, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/counts/current, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mReconciliationController {/inventory/reconciliation}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/reconciliation, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/reconciliation/summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mLowStockAlertsController {/inventory/low-stock}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/low-stock/alerts, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/low-stock/config, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/low-stock/config, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/low-stock/config/:configId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mTemplatesController {/inventory/templates}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/templates, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/templates/:packId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/templates/apply, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mImportController {/inventory/import}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/import, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/import/template, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mKpisController {/stream/kpis}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/stream/kpis, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPromotionsController {/promotions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/promotions, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/promotions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/promotions/:id/approve, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/promotions/:id/toggle, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAccountingController {/accounting}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendors, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendors, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendor-bills, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendor-bills/:billId/open, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendor-payments, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/ap/aging, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/ar/aging, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/trial-balance, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/pnl, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/balance-sheet, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPeriodsController {/accounting/periods}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/periods, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/periods/:id/lock, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/periods, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/periods/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBankRecController {/accounting/bank}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/accounts, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/accounts, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/:accountId/import-csv, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/match, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/:accountId/auto-match, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/unreconciled, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mKdsController {/kds}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/queue, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/sla-config/:station, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/sla-config/:station, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/tickets/:id/mark-ready, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/tickets/:id/recall, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mShiftsController {/shifts}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shifts/open, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shifts/:id/close, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shifts/current, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shifts/history, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mShiftTemplatesController {/shift-templates}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates/:id, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mShiftSchedulesController {/shift-schedules}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules/by-branch/:branchId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules/current/:branchId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mShiftAssignmentsController {/shift-assignments}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-assignments, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-assignments/by-schedule/:scheduleId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-assignments/by-user/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-assignments/:id, DELETE} route[39m[38;5;3m +3ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mReportsController {/reports}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/x, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/z/:shiftId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/subscriptions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/subscriptions, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/subscriptions/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/subscriptions/:id, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDashboardsController {/dash}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/leaderboards/voids, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/leaderboards/discounts, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/no-drinks-rate, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/late-void-heatmap, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/anomalies/recent, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mFranchiseController {/franchise}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/analytics/overview, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/analytics/rankings, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/overview, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/rankings, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/forecast/items, GET} route[39m[38;5;3m +3ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/procurement/suggest, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/procurement/generate-drafts, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/procurement/drafts, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/procurement/approve, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/branch-metrics, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets, PUT} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets/variance, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/forecast, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/export/overview.csv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/export/rankings.csv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/export/budgets.csv, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/export/budgets-variance.csv, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mStaffController {/staff}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/waiters/metrics, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/waiters/rankings, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/waiters/top-performers, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/waiters/risk-staff, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mStaffInsightsController {/staff/insights}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/rankings, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/employee-of-:period, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/awards, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/awards, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPromotionInsightsController {/staff/promotion-suggestions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/promotion-suggestions/preview, GET} route[39m[38;5;3m +3ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/promotion-suggestions/generate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/promotion-suggestions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/promotion-suggestions/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAntiTheftController {/anti-theft}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/anti-theft/summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mFeedbackController {/feedback}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/public, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/analytics/nps-summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/analytics/breakdown, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/analytics/top-comments, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAnalyticsController {/analytics}:[39m[38;5;3m +3ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/daily, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/top-items, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/staff/voids, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/staff/discounts, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/orders/no-drinks, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/late-voids, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/anomalies, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/daily-metrics, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/risk-summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/risk-events, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/financial-summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/branch-ranking, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/cogs-timeseries, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/stock-valuation, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/wastage-summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBudgetController {/finance/budgets}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/franchise, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/update-actuals, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/insights, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/insights/franchise, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/reminders/summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPurchasingController {/purchasing}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/purchasing/po, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/purchasing/po/:id/place, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/purchasing/po/:id/receive, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWebAuthnController {/webauthn}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webauthn/registration/options, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webauthn/registration/verify, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webauthn/authentication/options, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webauthn/authentication/verify, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPaymentsController {/payments}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payments/intents, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payments/intents/:intentId/cancel, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAlertsController {/alerts}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/alerts/channels, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/alerts/schedules, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/alerts/run-now/:id, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mReservationsController {/reservations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations/:id/confirm, POST} route[39m[38;5;3m +2ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations/:id/cancel, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations/:id/seat, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations/summary, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOpsController {/ops}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/ready, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/metrics, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/diag/snapshot, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/apikeys, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/apikeys, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/apikeys/:id, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags/:key, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags/:key/toggle, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags/:key/kill, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags/:key/audit, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/maintenance, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/maintenance/active, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/maintenance, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSupportController {/support}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/support/sessions, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/support/ingest, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/support/sessions/events, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSpoutController {/hardware/spout}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/hardware/spout/ingest, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/hardware/spout/devices, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/hardware/spout/calibrate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/hardware/spout/events, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOwnerController {/owner}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/owner/overview, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/owner/digest, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/owner/digest/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/owner/digest/run-now/:id, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mStreamController {/stream}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/stream/spout, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/stream/kds, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mThresholdsController {/thresholds}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/thresholds, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/thresholds, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAccessController {/access}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/access/matrix, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/access/matrix, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/access/matrix/reset-defaults, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBillingController {/billing}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/billing/subscription, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/billing/plan/change, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/billing/cancel, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBadgesController {/badges}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/register, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/assign, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/revoke, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/report-lost, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/mark-returned, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mCashController {/cash}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/till/open, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/till/:id/close, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/movements, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/till/current, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/till/sessions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSettingsController {/settings}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/currency, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/currency, PUT} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/tax-matrix, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/tax-matrix, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/rounding, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/rounding, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/exchange-rate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBookingsController {/bookings}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/events, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/events/:id/publish, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/events/:id/unpublish, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/events/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/:id/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/:id/cancel, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicBookingsController {/public/bookings}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/bookings/events/:slug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/bookings, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/bookings/:id/pay, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/bookings/:id/status, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mCheckinController {/events}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/events/checkin, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/events/booking/:id/ticket, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWorkforceController {/workforce}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/leave/:id/approve, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/roster, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/swaps, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/swaps/:id/approve, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/clock/in, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/clock/out, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/time-entries, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/payroll/export, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/absence-violations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPayrollController {/payroll}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs/:id/approve, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs/:id/post, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs/:id/slips, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/components, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mVersionController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/version, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDocumentsController {/documents}:[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/:id/download, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/purchase-orders/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/pay-slips/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/reservations/:id, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/service-providers/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/employees/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis connected to redis://localhost:6379[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis connected to redis://localhost:6379[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis connected to redis://localhost:6379[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis connected to redis://localhost:6379[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis client ready[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis client ready[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis client ready[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis client ready[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 8027  - [39m12/28/2025, 1:52:18 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +3ms[39m
{"level":"info","time":1766886738578,"service":"chefcloud-api","env":"test","msg":"🚀 ChefCloud API running on http://0.0.0.0:4050"}
[BOOTSTRAP] Server started successfully
{"level":"info","time":1766886738578,"service":"chefcloud-api","env":"test","msg":"CORS allowlist: http://localhost:3000"}
{"level":30,"time":1766886738756,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"2fca6d88-e2c0-48c7-b117-a19ddc453292","method":"GET","url":"/readiness","body":{}},"requestId":"2fca6d88-e2c0-48c7-b117-a19ddc453292","msg":"REQ GET /readiness"}
{"level":"info","time":1766886738762,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/readiness","statusCode":200,"durationMs":5,"requestId":"70d50d4f-4784-4202-9ab5-9ec31c74bbed","route":"/readiness"}
{"level":30,"time":1766886738762,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"2fca6d88-e2c0-48c7-b117-a19ddc453292","method":"GET","url":"/readiness","body":{}},"requestId":"2fca6d88-e2c0-48c7-b117-a19ddc453292","requestId":"70d50d4f-4784-4202-9ab5-9ec31c74bbed","res":{"statusCode":200},"responseTime":6,"msg":"GET /readiness -> 200"}
{"level":30,"time":1766886738769,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"e23178a6-5c31-4d31-bc7e-258701c61c01","method":"GET","url":"/readiness","body":{}},"requestId":"e23178a6-5c31-4d31-bc7e-258701c61c01","msg":"REQ GET /readiness"}
{"level":"info","time":1766886738770,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/readiness","statusCode":200,"durationMs":1,"requestId":"90b96115-3653-4828-92f2-b221d1880e86","route":"/readiness"}
{"level":30,"time":1766886738770,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"e23178a6-5c31-4d31-bc7e-258701c61c01","method":"GET","url":"/readiness","body":{}},"requestId":"e23178a6-5c31-4d31-bc7e-258701c61c01","requestId":"90b96115-3653-4828-92f2-b221d1880e86","res":{"statusCode":200},"responseTime":1,"msg":"GET /readiness -> 200"}
{"level":30,"time":1766886738801,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"1b4865da-58ab-436e-93f3-f3ee492df73c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1b4865da-58ab-436e-93f3-f3ee492df73c","msg":"REQ GET /billing/subscription"}
{"level":"info","time":1766886738809,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":7,"requestId":"112c3627-c135-4b47-a568-d82611e2b618","route":"/billing/subscription"}
{"level":40,"time":1766886738809,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"1b4865da-58ab-436e-93f3-f3ee492df73c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1b4865da-58ab-436e-93f3-f3ee492df73c","requestId":"112c3627-c135-4b47-a568-d82611e2b618","res":{"statusCode":401},"responseTime":8,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766886738818,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"8873c97d-b90c-47cf-b7c5-29921026f59b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"8873c97d-b90c-47cf-b7c5-29921026f59b","msg":"REQ GET /billing/subscription"}
{"level":"info","time":1766886738824,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":6,"requestId":"810d6901-baf3-4b3c-8fd8-cda627372e2b","route":"/billing/subscription"}
{"level":40,"time":1766886738824,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"8873c97d-b90c-47cf-b7c5-29921026f59b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"8873c97d-b90c-47cf-b7c5-29921026f59b","requestId":"810d6901-baf3-4b3c-8fd8-cda627372e2b","res":{"statusCode":401},"responseTime":6,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766886738825,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"7400e38a-335d-409f-ace1-1506bfcf9e42","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7400e38a-335d-409f-ace1-1506bfcf9e42","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738825,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"7400e38a-335d-409f-ace1-1506bfcf9e42","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7400e38a-335d-409f-ace1-1506bfcf9e42","requestId":"14b6ee04-5f10-4f19-b5a0-3ac4c1e025f4","res":{"statusCode":401},"responseTime":0,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766886738826,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5fe986e8-6000-4790-b0d0-47aa6562e626","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5fe986e8-6000-4790-b0d0-47aa6562e626","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738827,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5fe986e8-6000-4790-b0d0-47aa6562e626","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5fe986e8-6000-4790-b0d0-47aa6562e626","requestId":"0c8bfb17-5652-4c3d-bd79-d0102657a860","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766886738827,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"e5d47cf8-8f8b-4118-b03e-567b4f6cd93b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"e5d47cf8-8f8b-4118-b03e-567b4f6cd93b","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738828,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"e5d47cf8-8f8b-4118-b03e-567b4f6cd93b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"e5d47cf8-8f8b-4118-b03e-567b4f6cd93b","requestId":"e58486b6-063f-4c48-947c-6536fcbf54db","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766886738829,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"04ce43a9-6d75-4dda-9ed8-923724b60850","method":"GET","url":"/billing/subscription","body":{}},"requestId":"04ce43a9-6d75-4dda-9ed8-923724b60850","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738829,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"04ce43a9-6d75-4dda-9ed8-923724b60850","method":"GET","url":"/billing/subscription","body":{}},"requestId":"04ce43a9-6d75-4dda-9ed8-923724b60850","requestId":"77f5dc58-3cc9-4c7a-9cba-9ec3d7539f94","res":{"statusCode":401},"responseTime":0,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766886738830,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"308af99b-75a1-48db-b233-00fb20b1b897","method":"GET","url":"/billing/subscription","body":{}},"requestId":"308af99b-75a1-48db-b233-00fb20b1b897","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738831,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"308af99b-75a1-48db-b233-00fb20b1b897","method":"GET","url":"/billing/subscription","body":{}},"requestId":"308af99b-75a1-48db-b233-00fb20b1b897","requestId":"d15903ee-a346-4aee-8cfc-d1d658d4a143","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766886738832,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"e69dffb5-d8fe-4191-abb3-fba967bdc5ac","method":"GET","url":"/billing/subscription","body":{}},"requestId":"e69dffb5-d8fe-4191-abb3-fba967bdc5ac","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738833,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"e69dffb5-d8fe-4191-abb3-fba967bdc5ac","method":"GET","url":"/billing/subscription","body":{}},"requestId":"e69dffb5-d8fe-4191-abb3-fba967bdc5ac","requestId":"799dbaea-0500-48c5-a016-144929e12f8c","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766886738833,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"af884dec-d568-4003-b334-24f4d94d955c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"af884dec-d568-4003-b334-24f4d94d955c","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738834,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"af884dec-d568-4003-b334-24f4d94d955c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"af884dec-d568-4003-b334-24f4d94d955c","requestId":"f691fc24-5f8c-454b-975b-d78d0dad1592","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766886738835,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"449747e1-226e-44ae-ac4a-2749949ad42a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"449747e1-226e-44ae-ac4a-2749949ad42a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738836,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"449747e1-226e-44ae-ac4a-2749949ad42a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"449747e1-226e-44ae-ac4a-2749949ad42a","requestId":"cc64bd08-83d3-4985-8c37-42554ae6e280","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766886738836,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"9a818135-82b1-4c6a-808a-b27521ab5b06","method":"GET","url":"/billing/subscription","body":{}},"requestId":"9a818135-82b1-4c6a-808a-b27521ab5b06","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738837,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"9a818135-82b1-4c6a-808a-b27521ab5b06","method":"GET","url":"/billing/subscription","body":{}},"requestId":"9a818135-82b1-4c6a-808a-b27521ab5b06","requestId":"28f5c979-f39c-48c3-883a-8dcfd71832f4","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738838,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"e6b6fabc-11d6-4bb0-abaa-342c2de7b8fb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"e6b6fabc-11d6-4bb0-abaa-342c2de7b8fb","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738839,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"e6b6fabc-11d6-4bb0-abaa-342c2de7b8fb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"e6b6fabc-11d6-4bb0-abaa-342c2de7b8fb","requestId":"c5398d40-0339-4ead-a087-ba0c3eff6db5","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738839,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"da5c23a8-85cb-412e-a13c-d537b16ae16d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"da5c23a8-85cb-412e-a13c-d537b16ae16d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738840,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"da5c23a8-85cb-412e-a13c-d537b16ae16d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"da5c23a8-85cb-412e-a13c-d537b16ae16d","requestId":"5ddab522-3755-4744-b698-019d9da181b5","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738840,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5af580f2-9a02-4e5d-835c-35aeec9baaee","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5af580f2-9a02-4e5d-835c-35aeec9baaee","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738841,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5af580f2-9a02-4e5d-835c-35aeec9baaee","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5af580f2-9a02-4e5d-835c-35aeec9baaee","requestId":"ea10539d-4241-4add-89f1-7f1d1e9a02e2","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738842,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"a6a51567-281b-4e2b-9ccf-4d87ef93ddcb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a6a51567-281b-4e2b-9ccf-4d87ef93ddcb","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738842,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"a6a51567-281b-4e2b-9ccf-4d87ef93ddcb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a6a51567-281b-4e2b-9ccf-4d87ef93ddcb","requestId":"db6e4b72-92c2-478a-a437-f5580e659174","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738843,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"92a8877b-ccd3-462f-97a9-4869ecd94ca0","method":"GET","url":"/billing/subscription","body":{}},"requestId":"92a8877b-ccd3-462f-97a9-4869ecd94ca0","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738844,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"92a8877b-ccd3-462f-97a9-4869ecd94ca0","method":"GET","url":"/billing/subscription","body":{}},"requestId":"92a8877b-ccd3-462f-97a9-4869ecd94ca0","requestId":"857b9902-2049-48ac-b4dd-3025693909e1","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738844,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"447df2c6-d6d3-4e13-b603-c0da99912516","method":"GET","url":"/billing/subscription","body":{}},"requestId":"447df2c6-d6d3-4e13-b603-c0da99912516","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738845,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"447df2c6-d6d3-4e13-b603-c0da99912516","method":"GET","url":"/billing/subscription","body":{}},"requestId":"447df2c6-d6d3-4e13-b603-c0da99912516","requestId":"93710ddf-0556-4201-b240-0904ab9ffa42","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738845,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"7c9c27d6-852d-4b3e-adf1-a9be64660087","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7c9c27d6-852d-4b3e-adf1-a9be64660087","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738846,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"7c9c27d6-852d-4b3e-adf1-a9be64660087","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7c9c27d6-852d-4b3e-adf1-a9be64660087","requestId":"84558c0c-8754-4989-8f6c-187660db3dd7","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738846,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5e26b734-74d7-44ed-870e-eb0e4406f2d8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5e26b734-74d7-44ed-870e-eb0e4406f2d8","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738847,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5e26b734-74d7-44ed-870e-eb0e4406f2d8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5e26b734-74d7-44ed-870e-eb0e4406f2d8","requestId":"5301a892-4e05-4da5-b5bd-fb590b51f618","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738848,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"2e0d9537-77f5-4167-91f2-8a565f7d23fb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2e0d9537-77f5-4167-91f2-8a565f7d23fb","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738850,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"2e0d9537-77f5-4167-91f2-8a565f7d23fb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2e0d9537-77f5-4167-91f2-8a565f7d23fb","requestId":"415b7ae9-2ecb-4e94-b738-4dcf42ad406a","res":{"statusCode":429},"responseTime":2,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738850,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"86e75edd-fedf-4aa5-9f2d-fa85adde7719","method":"GET","url":"/billing/subscription","body":{}},"requestId":"86e75edd-fedf-4aa5-9f2d-fa85adde7719","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738851,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"86e75edd-fedf-4aa5-9f2d-fa85adde7719","method":"GET","url":"/billing/subscription","body":{}},"requestId":"86e75edd-fedf-4aa5-9f2d-fa85adde7719","requestId":"31c76d98-e907-47e1-9083-f2e1e096e0b7","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738852,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"b53cced7-025e-4634-99cc-693012e93546","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b53cced7-025e-4634-99cc-693012e93546","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738852,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"b53cced7-025e-4634-99cc-693012e93546","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b53cced7-025e-4634-99cc-693012e93546","requestId":"f8158f2a-266d-4f28-ad14-f4c073befa89","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738853,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"752df5c5-f8f7-4ba2-9539-e37aa2f69962","method":"GET","url":"/billing/subscription","body":{}},"requestId":"752df5c5-f8f7-4ba2-9539-e37aa2f69962","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738853,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"752df5c5-f8f7-4ba2-9539-e37aa2f69962","method":"GET","url":"/billing/subscription","body":{}},"requestId":"752df5c5-f8f7-4ba2-9539-e37aa2f69962","requestId":"dbc67fec-df3f-45a7-9787-379b1c5b93ef","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738855,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"cec76ccc-6f10-478e-ac93-dbf51e41fad0","method":"GET","url":"/billing/subscription","body":{}},"requestId":"cec76ccc-6f10-478e-ac93-dbf51e41fad0","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738856,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"cec76ccc-6f10-478e-ac93-dbf51e41fad0","method":"GET","url":"/billing/subscription","body":{}},"requestId":"cec76ccc-6f10-478e-ac93-dbf51e41fad0","requestId":"41dcecfd-523a-4c8a-99dd-539be8c126d5","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738856,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"b97f287e-6fe8-44ce-8cb4-41e481afaa0e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b97f287e-6fe8-44ce-8cb4-41e481afaa0e","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738858,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"b97f287e-6fe8-44ce-8cb4-41e481afaa0e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b97f287e-6fe8-44ce-8cb4-41e481afaa0e","requestId":"3ea6b2e9-e838-4a9b-8ee4-ceda8f3b229a","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738858,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"af8ff35e-30f6-4c5f-ac99-5ff4c8073fb8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"af8ff35e-30f6-4c5f-ac99-5ff4c8073fb8","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738859,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"af8ff35e-30f6-4c5f-ac99-5ff4c8073fb8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"af8ff35e-30f6-4c5f-ac99-5ff4c8073fb8","requestId":"ceef6015-906f-4dec-9be0-2a470e6168c8","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738860,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"34848260-a71b-4a0b-9cea-663e82a4ef59","method":"GET","url":"/billing/subscription","body":{}},"requestId":"34848260-a71b-4a0b-9cea-663e82a4ef59","msg":"REQ GET /billing/subscription"}
{"level":"info","time":1766886738825,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":0,"requestId":"14b6ee04-5f10-4f19-b5a0-3ac4c1e025f4","route":"/billing/subscription"}
{"level":"info","time":1766886738827,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"0c8bfb17-5652-4c3d-bd79-d0102657a860","route":"/billing/subscription"}
{"level":"info","time":1766886738828,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"e58486b6-063f-4c48-947c-6536fcbf54db","route":"/billing/subscription"}
{"level":"info","time":1766886738829,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":0,"requestId":"77f5dc58-3cc9-4c7a-9cba-9ec3d7539f94","route":"/billing/subscription"}
{"level":"info","time":1766886738831,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"d15903ee-a346-4aee-8cfc-d1d658d4a143","route":"/billing/subscription"}
{"level":"info","time":1766886738833,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"799dbaea-0500-48c5-a016-144929e12f8c","route":"/billing/subscription"}
{"level":"info","time":1766886738834,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"f691fc24-5f8c-454b-975b-d78d0dad1592","route":"/billing/subscription"}
{"level":"info","time":1766886738836,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"cc64bd08-83d3-4985-8c37-42554ae6e280","route":"/billing/subscription"}
{"level":"info","time":1766886738837,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"28f5c979-f39c-48c3-883a-8dcfd71832f4","route":"/billing/subscription"}
{"level":"info","time":1766886738839,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"c5398d40-0339-4ead-a087-ba0c3eff6db5","route":"/billing/subscription"}
{"level":"info","time":1766886738840,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"5ddab522-3755-4744-b698-019d9da181b5","route":"/billing/subscription"}
{"level":"info","time":1766886738841,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"ea10539d-4241-4add-89f1-7f1d1e9a02e2","route":"/billing/subscription"}
{"level":"info","time":1766886738843,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"db6e4b72-92c2-478a-a437-f5580e659174","route":"/billing/subscription"}
{"level":"info","time":1766886738844,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"857b9902-2049-48ac-b4dd-3025693909e1","route":"/billing/subscription"}
{"level":"info","time":1766886738845,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"93710ddf-0556-4201-b240-0904ab9ffa42","route":"/billing/subscription"}
{"level":"info","time":1766886738846,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"84558c0c-8754-4989-8f6c-187660db3dd7","route":"/billing/subscription"}
{"level":"info","time":1766886738847,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"5301a892-4e05-4da5-b5bd-fb590b51f618","route":"/billing/subscription"}
{"level":"info","time":1766886738850,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":2,"requestId":"415b7ae9-2ecb-4e94-b738-4dcf42ad406a","route":"/billing/subscription"}
{"level":"info","time":1766886738851,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"31c76d98-e907-47e1-9083-f2e1e096e0b7","route":"/billing/subscription"}
{"level":"info","time":1766886738852,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"f8158f2a-266d-4f28-ad14-f4c073befa89","route":"/billing/subscription"}
{"level":"info","time":1766886738854,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"dbc67fec-df3f-45a7-9787-379b1c5b93ef","route":"/billing/subscription"}
{"level":"info","time":1766886738856,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"41dcecfd-523a-4c8a-99dd-539be8c126d5","route":"/billing/subscription"}
{"level":"info","time":1766886738858,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":2,"requestId":"3ea6b2e9-e838-4a9b-8ee4-ceda8f3b229a","route":"/billing/subscription"}
{"level":"info","time":1766886738859,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"ceef6015-906f-4dec-9be0-2a470e6168c8","route":"/billing/subscription"}
{"level":"info","time":1766886738860,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"6d3ccbf3-e185-4759-b261-402020af4ce1","route":"/billing/subscription"}
{"level":"info","time":1766886738861,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"b24f607a-0d40-4245-9c6a-fa04f6342ac6","route":"/billing/subscription"}
{"level":"info","time":1766886738864,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"670a515b-e6cf-4086-b772-980d3f9f8891","route":"/billing/subscription"}
{"level":"info","time":1766886738865,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"7502d04a-c641-4915-b18e-39a1d66a9f59","route":"/billing/subscription"}
{"level":"info","time":1766886738866,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"44c50767-21b3-4857-b740-ae9f1dccb916","route":"/billing/subscription"}
{"level":"info","time":1766886738868,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":2,"requestId":"9e6b0bb0-9cf2-4108-8582-1831a851c04f","route":"/billing/subscription"}
{"level":"info","time":1766886738869,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"1a75cace-aaf9-4989-952c-058417c9651e","route":"/billing/subscription"}
{"level":"info","time":1766886738871,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"f39da162-e4a3-41cd-9850-7d93979c0cd1","route":"/billing/subscription"}
{"level":"info","time":1766886738872,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"6745479d-87f5-443b-bd09-ebb0a825bc0d","route":"/billing/subscription"}
{"level":"info","time":1766886738873,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"7cb619ff-33e5-465a-ad3e-5ee9f3197d08","route":"/billing/subscription"}
{"level":"info","time":1766886738875,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":2,"requestId":"68bf54ed-6070-4042-84c6-aebc21ddfc77","route":"/billing/subscription"}
{"level":"info","time":1766886738876,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"a33d3316-b374-4096-977a-6389b487fb8a","route":"/billing/subscription"}
{"level":"info","time":1766886738877,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"8e7dd840-34ba-4756-9cc6-2da41fc88b02","route":"/billing/subscription"}
{"level":"info","time":1766886738878,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"abbcfab0-6508-404c-a465-e6e9ca06195f","route":"/billing/subscription"}
{"level":"info","time":1766886738879,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"58b9d428-8ca7-4755-ad1e-a79b21fda073","route":"/billing/subscription"}
{"level":"info","time":1766886738880,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"f99b1976-7e7b-448f-bf32-8cacd02fbbe6","route":"/billing/subscription"}
{"level":"info","time":1766886738881,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"40f75b74-f1b2-4d3f-8e1f-0aec3aa598b2","route":"/billing/subscription"}
{"level":"info","time":1766886738882,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"03aa7891-87e9-47e6-b895-9bc07a1a7634","route":"/billing/subscription"}
{"level":"info","time":1766886738883,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"cb29a1f7-b8da-43d1-9c63-cd166889d957","route":"/billing/subscription"}
{"level":"info","time":1766886738884,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"fb520ba2-9873-4176-9624-a9cb7b297b8a","route":"/billing/subscription"}
{"level":"info","time":1766886738884,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"782b4229-3241-4178-8612-3a8f7e731c29","route":"/billing/subscription"}
{"level":"info","time":1766886738885,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"1ef686cc-099e-485a-a4eb-d16d919e11a0","route":"/billing/subscription"}
{"level":"info","time":1766886738886,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"d57609ee-0628-4fe2-9be8-a5269be2d491","route":"/billing/subscription"}
{"level":"info","time":1766886738887,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"8ceaf5ad-657b-4c56-aad5-6c4f7f045ecf","route":"/billing/subscription"}
{"level":"info","time":1766886738888,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"85cd2fd4-6f7d-40d0-97ad-889f0f95d194","route":"/billing/subscription"}
{"level":"info","time":1766886738889,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"2b285851-25dd-48d5-b6d3-7761e33baa5b","route":"/billing/subscription"}
{"level":"info","time":1766886738890,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"fa03805f-5e17-4f08-b28a-fe9ab7ff1078","route":"/billing/subscription"}
{"level":"info","time":1766886738892,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"e0049e0b-1548-4a1e-9192-0097c84ac12f","route":"/billing/subscription"}
{"level":"info","time":1766886738893,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"a81abebb-682b-4613-aef0-cad1f140b3a2","route":"/billing/subscription"}
{"level":"info","time":1766886738894,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"1a866a2c-ad1d-4c27-87ec-bda4c0329f85","route":"/billing/subscription"}
{"level":40,"time":1766886738860,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"34848260-a71b-4a0b-9cea-663e82a4ef59","method":"GET","url":"/billing/subscription","body":{}},"requestId":"34848260-a71b-4a0b-9cea-663e82a4ef59","requestId":"6d3ccbf3-e185-4759-b261-402020af4ce1","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738861,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"632dcc8a-6cb1-418f-ab0e-a06a8ae7305c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"632dcc8a-6cb1-418f-ab0e-a06a8ae7305c","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738861,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"632dcc8a-6cb1-418f-ab0e-a06a8ae7305c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"632dcc8a-6cb1-418f-ab0e-a06a8ae7305c","requestId":"b24f607a-0d40-4245-9c6a-fa04f6342ac6","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738862,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"06c77272-c3e2-4100-a090-070d6a7c44fb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"06c77272-c3e2-4100-a090-070d6a7c44fb","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738863,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"06c77272-c3e2-4100-a090-070d6a7c44fb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"06c77272-c3e2-4100-a090-070d6a7c44fb","requestId":"670a515b-e6cf-4086-b772-980d3f9f8891","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738864,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"d8e278b0-5491-42ca-96af-607ff0ffbda4","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d8e278b0-5491-42ca-96af-607ff0ffbda4","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738865,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"d8e278b0-5491-42ca-96af-607ff0ffbda4","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d8e278b0-5491-42ca-96af-607ff0ffbda4","requestId":"7502d04a-c641-4915-b18e-39a1d66a9f59","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738865,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"d4a667b9-eeaa-48cc-a41f-dc4edea24dfc","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d4a667b9-eeaa-48cc-a41f-dc4edea24dfc","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738865,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"d4a667b9-eeaa-48cc-a41f-dc4edea24dfc","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d4a667b9-eeaa-48cc-a41f-dc4edea24dfc","requestId":"44c50767-21b3-4857-b740-ae9f1dccb916","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738866,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"3a10bcf1-ac42-44eb-9dc5-59ac6cc9f388","method":"GET","url":"/billing/subscription","body":{}},"requestId":"3a10bcf1-ac42-44eb-9dc5-59ac6cc9f388","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738868,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"3a10bcf1-ac42-44eb-9dc5-59ac6cc9f388","method":"GET","url":"/billing/subscription","body":{}},"requestId":"3a10bcf1-ac42-44eb-9dc5-59ac6cc9f388","requestId":"9e6b0bb0-9cf2-4108-8582-1831a851c04f","res":{"statusCode":429},"responseTime":2,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738868,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"b842de3f-6a48-40a8-b074-6cd0c234521d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b842de3f-6a48-40a8-b074-6cd0c234521d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738869,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"b842de3f-6a48-40a8-b074-6cd0c234521d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b842de3f-6a48-40a8-b074-6cd0c234521d","requestId":"1a75cace-aaf9-4989-952c-058417c9651e","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738870,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"94ac9e7d-7256-449b-b44f-c21d1e940e30","method":"GET","url":"/billing/subscription","body":{}},"requestId":"94ac9e7d-7256-449b-b44f-c21d1e940e30","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738871,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"94ac9e7d-7256-449b-b44f-c21d1e940e30","method":"GET","url":"/billing/subscription","body":{}},"requestId":"94ac9e7d-7256-449b-b44f-c21d1e940e30","requestId":"f39da162-e4a3-41cd-9850-7d93979c0cd1","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738871,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5d20251d-a0d7-4724-b2e4-d8a969c8a0ff","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5d20251d-a0d7-4724-b2e4-d8a969c8a0ff","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738872,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5d20251d-a0d7-4724-b2e4-d8a969c8a0ff","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5d20251d-a0d7-4724-b2e4-d8a969c8a0ff","requestId":"6745479d-87f5-443b-bd09-ebb0a825bc0d","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738872,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"6927be99-537e-4dcd-aa09-81708d91a09f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"6927be99-537e-4dcd-aa09-81708d91a09f","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738873,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"6927be99-537e-4dcd-aa09-81708d91a09f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"6927be99-537e-4dcd-aa09-81708d91a09f","requestId":"7cb619ff-33e5-465a-ad3e-5ee9f3197d08","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738873,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"1996449d-6068-440d-a8f9-aa220b6ec2d1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1996449d-6068-440d-a8f9-aa220b6ec2d1","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738875,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"1996449d-6068-440d-a8f9-aa220b6ec2d1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1996449d-6068-440d-a8f9-aa220b6ec2d1","requestId":"68bf54ed-6070-4042-84c6-aebc21ddfc77","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738875,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"f7730a8c-90c3-4576-9fd9-a0eb60472856","method":"GET","url":"/billing/subscription","body":{}},"requestId":"f7730a8c-90c3-4576-9fd9-a0eb60472856","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738876,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"f7730a8c-90c3-4576-9fd9-a0eb60472856","method":"GET","url":"/billing/subscription","body":{}},"requestId":"f7730a8c-90c3-4576-9fd9-a0eb60472856","requestId":"a33d3316-b374-4096-977a-6389b487fb8a","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738876,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"c79956ba-a06f-4622-b5ec-294e93f303ea","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c79956ba-a06f-4622-b5ec-294e93f303ea","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738877,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"c79956ba-a06f-4622-b5ec-294e93f303ea","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c79956ba-a06f-4622-b5ec-294e93f303ea","requestId":"8e7dd840-34ba-4756-9cc6-2da41fc88b02","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738877,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"a4c9320c-4328-4572-904b-e38e77b79f92","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a4c9320c-4328-4572-904b-e38e77b79f92","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738878,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"a4c9320c-4328-4572-904b-e38e77b79f92","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a4c9320c-4328-4572-904b-e38e77b79f92","requestId":"abbcfab0-6508-404c-a465-e6e9ca06195f","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738878,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"4f55f362-c14b-49c8-8c91-b261108f146e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"4f55f362-c14b-49c8-8c91-b261108f146e","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738879,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"4f55f362-c14b-49c8-8c91-b261108f146e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"4f55f362-c14b-49c8-8c91-b261108f146e","requestId":"58b9d428-8ca7-4755-ad1e-a79b21fda073","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738879,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"94cd3041-8759-46bf-a530-42b2e5cc20e2","method":"GET","url":"/billing/subscription","body":{}},"requestId":"94cd3041-8759-46bf-a530-42b2e5cc20e2","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738880,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"94cd3041-8759-46bf-a530-42b2e5cc20e2","method":"GET","url":"/billing/subscription","body":{}},"requestId":"94cd3041-8759-46bf-a530-42b2e5cc20e2","requestId":"f99b1976-7e7b-448f-bf32-8cacd02fbbe6","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738880,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"3029ab15-5828-4f72-a81a-66d6f9d1e7e1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"3029ab15-5828-4f72-a81a-66d6f9d1e7e1","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738881,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"3029ab15-5828-4f72-a81a-66d6f9d1e7e1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"3029ab15-5828-4f72-a81a-66d6f9d1e7e1","requestId":"40f75b74-f1b2-4d3f-8e1f-0aec3aa598b2","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738881,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"c165efa8-f5e1-4b65-922e-6491477d7d68","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c165efa8-f5e1-4b65-922e-6491477d7d68","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738882,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"c165efa8-f5e1-4b65-922e-6491477d7d68","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c165efa8-f5e1-4b65-922e-6491477d7d68","requestId":"03aa7891-87e9-47e6-b895-9bc07a1a7634","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738882,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"b0bf93c9-a199-4318-9a93-6422f74b2b73","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b0bf93c9-a199-4318-9a93-6422f74b2b73","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738883,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"b0bf93c9-a199-4318-9a93-6422f74b2b73","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b0bf93c9-a199-4318-9a93-6422f74b2b73","requestId":"cb29a1f7-b8da-43d1-9c63-cd166889d957","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738883,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5eea3d67-00a2-468a-945d-af1e9c977772","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5eea3d67-00a2-468a-945d-af1e9c977772","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738884,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5eea3d67-00a2-468a-945d-af1e9c977772","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5eea3d67-00a2-468a-945d-af1e9c977772","requestId":"fb520ba2-9873-4176-9624-a9cb7b297b8a","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738884,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"c84dcc04-200d-4b09-a912-f481a6754bc5","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c84dcc04-200d-4b09-a912-f481a6754bc5","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738884,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"c84dcc04-200d-4b09-a912-f481a6754bc5","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c84dcc04-200d-4b09-a912-f481a6754bc5","requestId":"782b4229-3241-4178-8612-3a8f7e731c29","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738885,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"2bdff1f8-d568-434a-bb10-a424371dcda3","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2bdff1f8-d568-434a-bb10-a424371dcda3","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738885,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"2bdff1f8-d568-434a-bb10-a424371dcda3","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2bdff1f8-d568-434a-bb10-a424371dcda3","requestId":"1ef686cc-099e-485a-a4eb-d16d919e11a0","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738886,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"db1bc0f7-a017-4dd3-a301-2c1c183a027d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"db1bc0f7-a017-4dd3-a301-2c1c183a027d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738886,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"db1bc0f7-a017-4dd3-a301-2c1c183a027d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"db1bc0f7-a017-4dd3-a301-2c1c183a027d","requestId":"d57609ee-0628-4fe2-9be8-a5269be2d491","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738887,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"4126ae4e-a0a7-4a5c-98ac-8c327531f3cd","method":"GET","url":"/billing/subscription","body":{}},"requestId":"4126ae4e-a0a7-4a5c-98ac-8c327531f3cd","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738887,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"4126ae4e-a0a7-4a5c-98ac-8c327531f3cd","method":"GET","url":"/billing/subscription","body":{}},"requestId":"4126ae4e-a0a7-4a5c-98ac-8c327531f3cd","requestId":"8ceaf5ad-657b-4c56-aad5-6c4f7f045ecf","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738887,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"4dcaddaa-ecd1-4288-b463-5c722160c860","method":"GET","url":"/billing/subscription","body":{}},"requestId":"4dcaddaa-ecd1-4288-b463-5c722160c860","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738888,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"4dcaddaa-ecd1-4288-b463-5c722160c860","method":"GET","url":"/billing/subscription","body":{}},"requestId":"4dcaddaa-ecd1-4288-b463-5c722160c860","requestId":"85cd2fd4-6f7d-40d0-97ad-889f0f95d194","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738889,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"76edebb6-f0ce-4c2a-8ac9-9ec87751a4cd","method":"GET","url":"/billing/subscription","body":{}},"requestId":"76edebb6-f0ce-4c2a-8ac9-9ec87751a4cd","msg":"REQ GET /billing/subscription"}
{"level":"info","time":1766886738896,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"73436275-770d-4a7d-8f20-b01f9c1e540a","route":"/billing/subscription"}
{"level":"info","time":1766886738896,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"015ca5fe-208f-475f-93b2-b3914b963b27","route":"/billing/subscription"}
{"level":"info","time":1766886738897,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"281e017d-bfa2-4aa3-97cb-9e13fe0a349a","route":"/billing/subscription"}
{"level":"info","time":1766886738898,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"e341ad91-ce3d-44a5-8457-f8371644d0b4","route":"/billing/subscription"}
{"level":"info","time":1766886738899,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"07524606-6f70-467d-9e97-bb2b48b4e3b4","route":"/billing/subscription"}
{"level":"info","time":1766886738900,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"94515b17-c98a-4377-ac4f-a5c519dd3017","route":"/billing/subscription"}
{"level":"info","time":1766886738901,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"c2f2c429-12ce-4274-8ab3-0f6f5c47510b","route":"/billing/subscription"}
{"level":"info","time":1766886738902,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"142e2562-8e37-4b2a-9d29-9a617b9dc42c","route":"/billing/subscription"}
{"level":"info","time":1766886738903,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"d08c49c2-7885-432a-b57a-ac030a7f1c03","route":"/billing/subscription"}
{"level":"info","time":1766886738905,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"7b9f93b3-0a28-4d33-bd8a-92ee7168396e","route":"/billing/subscription"}
{"level":"info","time":1766886738906,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"67cb82da-90bb-4d20-8990-1affb849fc72","route":"/billing/subscription"}
{"level":"info","time":1766886738910,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":4,"requestId":"9b6b8f19-b924-4860-907a-7818ee7285a8","route":"/billing/subscription"}
{"level":"info","time":1766886738911,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"628022fe-9633-47c6-a334-5fe2db21ae5d","route":"/billing/subscription"}
{"level":"info","time":1766886738912,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"0396c10c-220a-4a4d-8748-44b2a2c29ba7","route":"/billing/subscription"}
{"level":40,"time":1766886738889,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"76edebb6-f0ce-4c2a-8ac9-9ec87751a4cd","method":"GET","url":"/billing/subscription","body":{}},"requestId":"76edebb6-f0ce-4c2a-8ac9-9ec87751a4cd","requestId":"2b285851-25dd-48d5-b6d3-7761e33baa5b","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738889,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"de49387d-a65b-43ff-b645-56f9d0e38bbe","method":"GET","url":"/billing/subscription","body":{}},"requestId":"de49387d-a65b-43ff-b645-56f9d0e38bbe","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738890,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"de49387d-a65b-43ff-b645-56f9d0e38bbe","method":"GET","url":"/billing/subscription","body":{}},"requestId":"de49387d-a65b-43ff-b645-56f9d0e38bbe","requestId":"fa03805f-5e17-4f08-b28a-fe9ab7ff1078","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738891,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"c18a81ad-46c4-4e6a-a728-cb43d5cc4885","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c18a81ad-46c4-4e6a-a728-cb43d5cc4885","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738892,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"c18a81ad-46c4-4e6a-a728-cb43d5cc4885","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c18a81ad-46c4-4e6a-a728-cb43d5cc4885","requestId":"e0049e0b-1548-4a1e-9192-0097c84ac12f","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738892,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"840a47db-6106-4009-82ac-3cb756d15cbb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"840a47db-6106-4009-82ac-3cb756d15cbb","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738893,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"840a47db-6106-4009-82ac-3cb756d15cbb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"840a47db-6106-4009-82ac-3cb756d15cbb","requestId":"a81abebb-682b-4613-aef0-cad1f140b3a2","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738893,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"247d390e-a63b-43a3-9688-f32452a6d748","method":"GET","url":"/billing/subscription","body":{}},"requestId":"247d390e-a63b-43a3-9688-f32452a6d748","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738894,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"247d390e-a63b-43a3-9688-f32452a6d748","method":"GET","url":"/billing/subscription","body":{}},"requestId":"247d390e-a63b-43a3-9688-f32452a6d748","requestId":"1a866a2c-ad1d-4c27-87ec-bda4c0329f85","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738895,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"8d371f7a-d676-4b6c-9b94-8ad07170332e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"8d371f7a-d676-4b6c-9b94-8ad07170332e","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738895,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"8d371f7a-d676-4b6c-9b94-8ad07170332e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"8d371f7a-d676-4b6c-9b94-8ad07170332e","requestId":"73436275-770d-4a7d-8f20-b01f9c1e540a","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738896,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5f085bdb-6d9c-49cf-a191-246b9eba6322","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5f085bdb-6d9c-49cf-a191-246b9eba6322","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738896,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5f085bdb-6d9c-49cf-a191-246b9eba6322","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5f085bdb-6d9c-49cf-a191-246b9eba6322","requestId":"015ca5fe-208f-475f-93b2-b3914b963b27","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738897,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"e928e6f0-8ddb-4f1f-af14-95b44eddb02f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"e928e6f0-8ddb-4f1f-af14-95b44eddb02f","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738897,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"e928e6f0-8ddb-4f1f-af14-95b44eddb02f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"e928e6f0-8ddb-4f1f-af14-95b44eddb02f","requestId":"281e017d-bfa2-4aa3-97cb-9e13fe0a349a","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738898,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"89e09dad-1836-4109-b5e9-fb8f1fb6f3fc","method":"GET","url":"/billing/subscription","body":{}},"requestId":"89e09dad-1836-4109-b5e9-fb8f1fb6f3fc","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738898,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"89e09dad-1836-4109-b5e9-fb8f1fb6f3fc","method":"GET","url":"/billing/subscription","body":{}},"requestId":"89e09dad-1836-4109-b5e9-fb8f1fb6f3fc","requestId":"e341ad91-ce3d-44a5-8457-f8371644d0b4","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738898,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"933c75bb-4920-4e89-a38f-d164d0a26a75","method":"GET","url":"/billing/subscription","body":{}},"requestId":"933c75bb-4920-4e89-a38f-d164d0a26a75","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738899,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"933c75bb-4920-4e89-a38f-d164d0a26a75","method":"GET","url":"/billing/subscription","body":{}},"requestId":"933c75bb-4920-4e89-a38f-d164d0a26a75","requestId":"07524606-6f70-467d-9e97-bb2b48b4e3b4","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738900,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"780c90ed-b0b8-4377-8fba-1cadc685307e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"780c90ed-b0b8-4377-8fba-1cadc685307e","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738900,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"780c90ed-b0b8-4377-8fba-1cadc685307e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"780c90ed-b0b8-4377-8fba-1cadc685307e","requestId":"94515b17-c98a-4377-ac4f-a5c519dd3017","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738901,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"b694ae29-b3ac-4005-a410-5c6f4f6601fb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b694ae29-b3ac-4005-a410-5c6f4f6601fb","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738901,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"b694ae29-b3ac-4005-a410-5c6f4f6601fb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b694ae29-b3ac-4005-a410-5c6f4f6601fb","requestId":"c2f2c429-12ce-4274-8ab3-0f6f5c47510b","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738902,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"623bdcd3-9584-4716-b78b-3df230154a5a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"623bdcd3-9584-4716-b78b-3df230154a5a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738902,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"623bdcd3-9584-4716-b78b-3df230154a5a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"623bdcd3-9584-4716-b78b-3df230154a5a","requestId":"142e2562-8e37-4b2a-9d29-9a617b9dc42c","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738903,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"fea74c5c-2a18-4a16-bf1c-af2f0e8b075e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"fea74c5c-2a18-4a16-bf1c-af2f0e8b075e","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738903,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"fea74c5c-2a18-4a16-bf1c-af2f0e8b075e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"fea74c5c-2a18-4a16-bf1c-af2f0e8b075e","requestId":"d08c49c2-7885-432a-b57a-ac030a7f1c03","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738904,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"211dfd57-9372-46bf-912a-b2bba3d63e3a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"211dfd57-9372-46bf-912a-b2bba3d63e3a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738905,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"211dfd57-9372-46bf-912a-b2bba3d63e3a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"211dfd57-9372-46bf-912a-b2bba3d63e3a","requestId":"7b9f93b3-0a28-4d33-bd8a-92ee7168396e","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738905,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"aa41f075-46c9-4f84-9348-9c38fa5d2f5a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"aa41f075-46c9-4f84-9348-9c38fa5d2f5a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738906,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"aa41f075-46c9-4f84-9348-9c38fa5d2f5a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"aa41f075-46c9-4f84-9348-9c38fa5d2f5a","requestId":"67cb82da-90bb-4d20-8990-1affb849fc72","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738906,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"ac276177-ff4f-4c70-9149-895d7de15729","method":"GET","url":"/billing/subscription","body":{}},"requestId":"ac276177-ff4f-4c70-9149-895d7de15729","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738910,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"ac276177-ff4f-4c70-9149-895d7de15729","method":"GET","url":"/billing/subscription","body":{}},"requestId":"ac276177-ff4f-4c70-9149-895d7de15729","requestId":"9b6b8f19-b924-4860-907a-7818ee7285a8","res":{"statusCode":429},"responseTime":4,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738910,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"3e3b8b22-a894-4b9f-ad43-3d9fcb6b3347","method":"GET","url":"/billing/subscription","body":{}},"requestId":"3e3b8b22-a894-4b9f-ad43-3d9fcb6b3347","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738911,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"3e3b8b22-a894-4b9f-ad43-3d9fcb6b3347","method":"GET","url":"/billing/subscription","body":{}},"requestId":"3e3b8b22-a894-4b9f-ad43-3d9fcb6b3347","requestId":"628022fe-9633-47c6-a334-5fe2db21ae5d","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738911,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"794b322a-da7e-4cfe-b1db-1b9fffebfcc5","method":"GET","url":"/billing/subscription","body":{}},"requestId":"794b322a-da7e-4cfe-b1db-1b9fffebfcc5","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738912,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"794b322a-da7e-4cfe-b1db-1b9fffebfcc5","method":"GET","url":"/billing/subscription","body":{}},"requestId":"794b322a-da7e-4cfe-b1db-1b9fffebfcc5","requestId":"0396c10c-220a-4a4d-8748-44b2a2c29ba7","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766886738913,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"dc64b064-11ee-47be-ba12-88ac7c7b4b6d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"dc64b064-11ee-47be-ba12-88ac7c7b4b6d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738913,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"dc64b064-11ee-47be-ba12-88ac7c7b4b6d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"dc64b064-11ee-47be-ba12-88ac7c7b4b6d","requestId":"d2963ffb-27cc-4344-b10b-ff564037e743","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766886738913,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"d2963ffb-27cc-4344-b10b-ff564037e743","route":"/billing/subscription"}
{"level":30,"time":1766886738916,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"be7f760c-76cf-4958-b55f-843ced4e8c48","method":"GET","url":"/billing/subscription","body":{}},"requestId":"be7f760c-76cf-4958-b55f-843ced4e8c48","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738917,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"be7f760c-76cf-4958-b55f-843ced4e8c48","method":"GET","url":"/billing/subscription","body":{}},"requestId":"be7f760c-76cf-4958-b55f-843ced4e8c48","requestId":"cb8f75eb-8e10-4999-a91a-a091fd3d7e5c","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766886738917,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"cb8f75eb-8e10-4999-a91a-a091fd3d7e5c","route":"/billing/subscription"}
{"level":30,"time":1766886738917,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"311495d1-7180-4a21-ac9e-4fe8cf0d32c4","method":"GET","url":"/billing/subscription","body":{}},"requestId":"311495d1-7180-4a21-ac9e-4fe8cf0d32c4","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738918,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"311495d1-7180-4a21-ac9e-4fe8cf0d32c4","method":"GET","url":"/billing/subscription","body":{}},"requestId":"311495d1-7180-4a21-ac9e-4fe8cf0d32c4","requestId":"9bf17739-1aa2-4a83-adbf-9a9cad0ad0ba","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766886738918,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"9bf17739-1aa2-4a83-adbf-9a9cad0ad0ba","route":"/billing/subscription"}
{"level":30,"time":1766886738920,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"d9344b60-9f42-44a8-b160-3da9601b36f2","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d9344b60-9f42-44a8-b160-3da9601b36f2","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738920,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"d9344b60-9f42-44a8-b160-3da9601b36f2","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d9344b60-9f42-44a8-b160-3da9601b36f2","requestId":"883cfe83-867b-4f78-8cd2-c5700687a163","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766886738920,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"883cfe83-867b-4f78-8cd2-c5700687a163","route":"/billing/subscription"}
{"level":30,"time":1766886738922,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"23b70023-08eb-4d46-afaa-0c1ab5528984","method":"GET","url":"/billing/subscription","body":{}},"requestId":"23b70023-08eb-4d46-afaa-0c1ab5528984","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738923,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"23b70023-08eb-4d46-afaa-0c1ab5528984","method":"GET","url":"/billing/subscription","body":{}},"requestId":"23b70023-08eb-4d46-afaa-0c1ab5528984","requestId":"b68b2460-de49-42ea-94d3-eb4e1731e935","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766886738923,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"b68b2460-de49-42ea-94d3-eb4e1731e935","route":"/billing/subscription"}
{"level":"info","time":1766886738925,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"8d04e6cf-7429-4b53-ae9f-f2f265578e5f","route":"/billing/subscription"}
{"level":30,"time":1766886738925,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"3b7347da-b8ae-440a-b74e-f6059bcfb004","method":"GET","url":"/billing/subscription","body":{}},"requestId":"3b7347da-b8ae-440a-b74e-f6059bcfb004","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738925,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"3b7347da-b8ae-440a-b74e-f6059bcfb004","method":"GET","url":"/billing/subscription","body":{}},"requestId":"3b7347da-b8ae-440a-b74e-f6059bcfb004","requestId":"8d04e6cf-7429-4b53-ae9f-f2f265578e5f","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766886738929,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"41666b6c-07b4-45bc-935c-04a22d1c5841","route":"/billing/subscription"}
{"level":30,"time":1766886738928,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"11d1ec18-9c48-4164-b047-fd0eae1d497d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"11d1ec18-9c48-4164-b047-fd0eae1d497d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738928,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"11d1ec18-9c48-4164-b047-fd0eae1d497d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"11d1ec18-9c48-4164-b047-fd0eae1d497d","requestId":"41666b6c-07b4-45bc-935c-04a22d1c5841","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766886738934,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"333da502-6fc4-41f4-b83b-1b1b70e2f610","route":"/billing/subscription"}
{"level":30,"time":1766886738933,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5586f2d0-debf-4f31-bd84-da31f2513056","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5586f2d0-debf-4f31-bd84-da31f2513056","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738934,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"5586f2d0-debf-4f31-bd84-da31f2513056","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5586f2d0-debf-4f31-bd84-da31f2513056","requestId":"333da502-6fc4-41f4-b83b-1b1b70e2f610","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766886738937,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"457937fb-f648-45b1-bbf4-80920fd6f5b6","route":"/billing/subscription"}
{"level":30,"time":1766886738937,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"60df7a1c-9405-453d-bd5a-20ba0045bc8e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"60df7a1c-9405-453d-bd5a-20ba0045bc8e","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738937,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"60df7a1c-9405-453d-bd5a-20ba0045bc8e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"60df7a1c-9405-453d-bd5a-20ba0045bc8e","requestId":"457937fb-f648-45b1-bbf4-80920fd6f5b6","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766886738940,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":2,"requestId":"761243f4-a200-49d9-933d-dcde8db6bfd9","route":"/billing/subscription"}
{"level":30,"time":1766886738938,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"e8da3060-cab1-4f09-993a-06c679aba4d8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"e8da3060-cab1-4f09-993a-06c679aba4d8","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766886738939,"pid":8027,"hostname":"codespaces-242710","req":{"requestId":"e8da3060-cab1-4f09-993a-06c679aba4d8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"e8da3060-cab1-4f09-993a-06c679aba4d8","requestId":"761243f4-a200-49d9-933d-dcde8db6bfd9","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
PASS test/blackbox/billing.blackbox.e2e-spec.ts
FAIL test/e2e/reports.e2e-spec.ts
  ● Reports E2E › should fetch X report (shift summary)

    expected 200 "OK", got 404 "Not Found"

      48 |       .get('/reports/x-report')
      49 |       .set('Authorization', `Bearer ${authToken}`)
    > 50 |       .expect(200);
         |        ^
      51 |
      52 |     expect(response.body).toBeDefined();
      53 |     expect(response.body.shift).toBeDefined();

      at Object.<anonymous> (e2e/reports.e2e-spec.ts:50:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Reports E2E › should fetch owner overview

    expected 200 "OK", got 404 "Not Found"

      62 |         endDate: '2025-01-31',
      63 |       })
    > 64 |       .expect(200);
         |        ^
      65 |
      66 |     expect(response.body).toBeDefined();
      67 |   });

      at Object.<anonymous> (e2e/reports.e2e-spec.ts:64:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL test/e2e/app-bisect.e2e-spec.ts
  ● Test suite failed to run

    AppModule.imports not accessible; in AppModule, add: public static __imports = [ ...imports ]

      11 |
      12 | if (!appModuleImports || !Array.isArray(appModuleImports)) {
    > 13 |   throw new Error('AppModule.imports not accessible; in AppModule, add: public static __imports = [ ...imports ]');
         |         ^
      14 | }
      15 |
      16 | async function tryImports(imports: any[]) {

      at Object.<anonymous> (e2e/app-bisect.e2e-spec.ts:13:9)

{"level":"info","time":1766886740497,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":158,"requestId":"3e34f7f8-9d51-4344-a14b-9657c1722514","route":"/auth/login"}
{"level":"info","time":1766886740507,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/reports/x-report","statusCode":404,"durationMs":5,"requestId":"4ceaeb9d-789c-4559-9ef6-bad8ce6ce306"}
{"level":"info","time":1766886740514,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/reports/owner-overview?startDate=2025-01-01&endDate=2025-01-31","statusCode":404,"durationMs":4,"requestId":"2d7e4dbd-8d4e-41f5-b73e-1521e55c2d48"}
FAIL test/e23-platform-access.e2e-spec.ts
  ● E23 Platform Access (e2e) › Public routes bypass › should allow unauthenticated access to /health

    expected 200 "OK", got 404 "Not Found"

      27 |         .get('/health')
      28 |         .set('X-Client-Platform', 'mobile')
    > 29 |         .expect(200);
         |          ^
      30 |     });
      31 |
      32 |     it('should allow unauthenticated access to /health from any platform', async () => {

      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:29:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Platform Access (e2e) › Public routes bypass › should allow unauthenticated access to /health from any platform

    expected 200 "OK", got 404 "Not Found"

      34 |         .get('/health')
      35 |         .set('X-Client-Platform', 'desktop')
    > 36 |         .expect(200);
         |          ^
      37 |
      38 |       await request(app.getHttpServer()).get('/health').set('X-Client-Platform', 'web').expect(200);
      39 |     });

      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:36:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Platform Access (e2e) › Platform header handling › should work without X-Client-Platform header (defaults to web)

    expected 200 "OK", got 404 "Not Found"

      53 |         .get('/health')
      54 |         // No X-Client-Platform header
    > 55 |         .expect(200);
         |          ^
      56 |     });
      57 |   });
      58 | });

      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:55:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

{"level":"info","time":1766886741785,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/health","statusCode":404,"durationMs":1,"requestId":"adf4de84-7c33-4490-9a6b-51aad83c8854"}
{"level":"info","time":1766886741788,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/health","statusCode":404,"durationMs":1,"requestId":"42590bdd-235c-4ee2-a0a9-2039a088aa39"}
{"level":"info","time":1766886741799,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":6,"requestId":"bc624c67-40da-4a06-9454-f2258fdc37e4","route":"/auth/login"}
{"level":"info","time":1766886741801,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/health","statusCode":404,"durationMs":1,"requestId":"ec337004-f87d-4c30-940e-8af13142fdfd"}
{"level":"info","time":1766886743364,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":151,"requestId":"ebe7d3f7-6866-433e-b814-b510b95b98f6","route":"/auth/login"}
PASS test/e2e/auth.e2e-spec.ts
{"level":"info","time":1766886743475,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":107,"requestId":"6ab86425-5595-40f8-978b-09a327f8bc01","route":"/auth/login"}
PASS test/e2e/minimal-harness.e2e-spec.ts
  ● Console

    console.log
      [HARNESS] Starting minimal module compilation...

      at Object.<anonymous> (e2e/minimal-harness.e2e-spec.ts:31:13)

    console.log
      [HARNESS] Module compiled in 3ms

      at Object.<anonymous> (e2e/minimal-harness.e2e-spec.ts:38:13)

    console.log
      [HARNESS] App initialized in 146ms total

      at Object.<anonymous> (e2e/minimal-harness.e2e-spec.ts:43:13)

    console.log
      [HARNESS] App closed successfully

      at Object.<anonymous> (e2e/minimal-harness.e2e-spec.ts:48:13)

PASS test/smoke/minimal-boot.e2e-spec.ts
  ● Console

    console.log
      Starting module compilation...

      at Object.<anonymous> (smoke/minimal-boot.e2e-spec.ts:16:13)

    console.log
      Module compiled in 66ms

      at Object.<anonymous> (smoke/minimal-boot.e2e-spec.ts:27:15)

    console.log
      App initialized in 167ms total

      at Object.<anonymous> (smoke/minimal-boot.e2e-spec.ts:32:15)

FAIL test/e2e/pos-imports-bisect.e2e-spec.ts
  ● PosModule imports bisect › should test all PosModule imports together

    Nest can't resolve dependencies of the EfrisService (PrismaService, ?). Please make sure that the argument ConfigService at index [1] is available in the EfrisModule context.

    Potential solutions:
    - Is EfrisModule a valid NestJS module?
    - If ConfigService is a provider, is it part of the current EfrisModule?
    - If ConfigService is exported from a separate @Module, is that module imported within EfrisModule?
      @Module({
        imports: [ /* the Module containing ConfigService */ ]
      })

      14 | describe('PosModule imports bisect', () => {
      15 |   it('should test all PosModule imports together', async () => {
    > 16 |     const moduleRef = await createE2ETestingModule({
         |                       ^
      17 |       imports: [
      18 |         EfrisModule,
      19 |         ConfigModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/pos-imports-bisect.e2e-spec.ts:16:23)

PASS test/e2e/metrics.e2e-spec.ts
PASS test/e2e/events-isolation.e2e-spec.ts
  ● Console

    console.log
      EventsModule: [class EventsModule]

      at Object.<anonymous> (e2e/events-isolation.e2e-spec.ts:10:13)

    console.log
      EventsModule is constructor: true

      at Object.<anonymous> (e2e/events-isolation.e2e-spec.ts:11:13)

FAIL test/e2e/inventory-kpis.e2e-spec.ts
  ● InventoryModule + KpisModule test › should compile these modules together

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

       8 | describe('InventoryModule + KpisModule test', () => {
       9 |   it('should compile these modules together', async () => {
    > 10 |     const moduleRef = await createE2ETestingModule({
         |                       ^
      11 |       imports: [InventoryModule, KpisModule],
      12 |     });
      13 |     await moduleRef.init();

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory-kpis.e2e-spec.ts:10:23)

FAIL test/e2e/pos-isolation.e2e-spec.ts
  ● PosModule isolation test › should compile PosModule to show exact failing provider

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

       8 | describe('PosModule isolation test', () => {
       9 |   it('should compile PosModule to show exact failing provider', async () => {
    > 10 |     const moduleRef = await createE2ETestingModule({
         |                       ^
      11 |       imports: [PosModule],
      12 |     });
      13 |     await moduleRef.init();

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/pos-isolation.e2e-spec.ts:10:23)

Summary of all failing tests
FAIL ./e22-franchise.e2e-spec.ts (10.156 s)
  ● E22-s2: Franchise APIs (e2e) › POST /franchise/budgets › should upsert a budget for a branch

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › POST /franchise/budgets › should update existing budget on re-upsert

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/budgets › should fetch budgets for a period

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/budgets › should reject invalid period format

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/rankings › should return ranked branches with deterministic ordering

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/procurement/suggest › should return items below safety stock

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate draft POs with packSize rounding

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate draft POs with packSize rounding

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate drafts for specific branches only

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate drafts for specific branches only

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › GET /franchise/procurement/drafts › should list all draft POs with supplier and branch names

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › GET /franchise/procurement/drafts › should list all draft POs with supplier and branch names

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should approve draft POs and update status to PLACED

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should approve draft POs and update status to PLACED

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should reject non-owner approval attempts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should reject non-owner approval attempts

    PrismaClientValidationError: 
    Invalid `prisma.client.supplier.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53

      291 
      292 beforeAll(async () => {
      293   // Create supplier with packSize and minOrderQty
    → 294   const supplier = await prisma.client.supplier.create({
              data: {
                name: "Test Supplier",
                email: "test-supplier@example.com",
                contactPerson: "John Doe",
                phone: "+256700000000",
                leadTimeDays: 3,
                packSize: 10,
                minOrderQty: 50,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should return per-branch KPIs and totals for date range

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should filter by branchIds when provided

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should default to today when dates omitted

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should reject non-manager/owner users

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should return branches ranked by NET_SALES

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should return branches ranked by MARGIN_PERCENT

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should apply limit parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should reject unsupported metrics

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should reject requests without metric parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should return all budgets without filters

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should return all budgets without filters

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by year and month

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by year and month

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should allow L4 (Manager) to read budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should allow L4 (Manager) to read budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45

      649 describe('GET /franchise/budgets (NEW)', () => {
      650   beforeAll(async () => {
      651     // Seed new FranchiseBudget records (year/month format)
    → 652     await prisma.client.franchiseBudget.createMany({
                data: [
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 2000000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 1,
                    category: "NET_SALES",
                    amountCents: 1500000,
                    currencyCode: "UGX"
                  },
                  {
                    orgId: undefined,
                    branchId: undefined,
                    year: 2025,
                    month: 2,
                    category: "NET_SALES",
                    amountCents: 2500000,
                    currencyCode: "UGX"
                  }
                ]
              })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should create new budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should update existing budgets (idempotent)

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should reject L4 (Manager) from upserting budgets

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should validate year range (2000-9999)

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should validate month range (1-12)

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should calculate variance for all branches

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should calculate variance for all branches

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should filter variance by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should filter variance by branchIds

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should return empty array when no budgets exist

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should return empty array when no budgets exist

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require year parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require year parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require month parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E22 Franchise Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)

  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require month parameter

    PrismaClientValidationError: 
    Invalid `prisma.client.franchiseBudget.createMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45

      940   where: { orgId, year: 2025, month: 1 },
      941 });
      942 
    → 943 await prisma.client.franchiseBudget.createMany({
            data: [
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 5000000,
                currencyCode: "UGX"
              },
              {
                orgId: undefined,
                branchId: undefined,
                year: 2025,
                month: 1,
                category: "NET_SALES",
                amountCents: 3000000,
                currencyCode: "UGX"
              }
            ]
          })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.inventoryItem.delete()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:344:47

      341 await prisma.client.purchaseOrder.deleteMany({ where: { orgId } });
      342 await prisma.client.procurementJob.deleteMany({ where: { orgId } });
      343 await prisma.client.stockBatch.deleteMany({ where: { itemId } });
    → 344 await prisma.client.inventoryItem.delete({
            where: {
              id: undefined,
          ?   orgId_sku?: InventoryItemOrgIdSkuCompoundUniqueInput,
          ?   AND?: InventoryItemWhereInput | InventoryItemWhereInput[],
          ?   OR?: InventoryItemWhereInput[],
          ?   NOT?: InventoryItemWhereInput | InventoryItemWhereInput[],
          ?   orgId?: StringFilter | String,
          ?   sku?: StringNullableFilter | String | Null,
          ?   name?: StringFilter | String,
          ?   unit?: StringFilter | String,
          ?   category?: StringNullableFilter | String | Null,
          ?   reorderLevel?: DecimalFilter | Decimal,
          ?   reorderQty?: DecimalFilter | Decimal,
          ?   isActive?: BoolFilter | Boolean,
          ?   metadata?: JsonNullableFilter,
          ?   createdAt?: DateTimeFilter | DateTime,
          ?   updatedAt?: DateTimeFilter | DateTime,
          ?   stockBatches?: StockBatchListRelationFilter,
          ?   recipeIngredients?: RecipeIngredientListRelationFilter,
          ?   wastageRecords?: WastageListRelationFilter,
          ?   adjustments?: AdjustmentListRelationFilter,
          ?   poItems?: PurchaseOrderItemListRelationFilter,
          ?   receiptLines?: GoodsReceiptLineListRelationFilter,
          ?   spoutCalibrations?: SpoutCalibrationListRelationFilter,
          ?   forecastProfiles?: ForecastProfileListRelationFilter,
          ?   forecastPoints?: ForecastPointListRelationFilter,
          ?   stockMovements?: StockMovementListRelationFilter,
          ?   lowStockConfigs?: LowStockConfigListRelationFilter
            }
          })

    Argument `where` of type InventoryItemWhereUniqueInput needs at least one of `id` or `orgId_sku` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e22-franchise.e2e-spec.ts:344:7)

  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.order.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:996:35

      993 
      994 afterAll(async () => {
      995   // Cleanup variance test data
    → 996   await prisma.client.order.deleteMany({
              where: {
                branchId: {
                  in: [
                    undefined,
                    ~~~~~~~~~
                    undefined
                  ]
                },
                createdAt: {
                  gte: new Date("2025-01-01T00:00:00.000Z"),
                  lt: new Date("2025-02-01T00:00:00.000Z")
                }
              }
            })

    Invalid value for argument `in[0]`: Can not use `undefined` value within array. Use `null` or filter out `undefined` values.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                          ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at e.throwValidationError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:10206)
      at od (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:9323)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8075)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at mr (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:6037)
      at vn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:5902)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10186
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._executeRequest (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10165)
      at Na (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:9955)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9639)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9933
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9913
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9836)
      at s (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5636)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5864
      at i (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1016)
      at PrismaPromise.then (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1091)

  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.order.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:129:31

      126 
      127 afterAll(async () => {
      128   // Cleanup
    → 129   await prisma.client.order.deleteMany({
              where: {
                branchId: {
                  in: [
                    undefined,
                    ~~~~~~~~~
                    undefined
                  ]
                }
              }
            })

    Invalid value for argument `in[0]`: Can not use `undefined` value within array. Use `null` or filter out `undefined` values.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                          ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at e.throwValidationError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:10206)
      at od (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:9323)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8075)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)
      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)
      at mr (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:6037)
      at vn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:5902)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10186
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._executeRequest (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10165)
      at Na (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:9955)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9639)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469
      at ../src/common/slow-query.ts:19:26
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9933
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9913
      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)
      at t._request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9836)
      at s (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5636)
      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5864
      at i (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1016)
      at PrismaPromise.then (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1091)

FAIL ./m2-shifts-scheduling.e2e-spec.ts
  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - creates a lunch shift template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - creates a dinner shift template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - rejects invalid time format

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - rejects end time before start time

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › GET /shift-templates - lists all templates

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › GET /shift-templates/:id - gets template by ID

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › PATCH /shift-templates/:id - updates template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › DELETE /shift-templates/:id - soft deletes template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - creates a schedule from template

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - creates a schedule from template

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - rejects overlapping schedule

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - rejects overlapping schedule

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/by-branch/:branchId - lists schedules

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/by-branch/:branchId - lists schedules

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/:id - gets schedule details

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/:id - gets schedule details

    PrismaClientValidationError: 
    Invalid `prisma.shiftTemplate.update()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34

      215 describe('Shift Schedules', () => {
      216   beforeAll(async () => {
      217     // Reactivate template for schedule tests
    → 218     await prisma.shiftTemplate.update({
                where: {
                  id: undefined,
              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   OR?: ShiftTemplateWhereInput[],
              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   name?: StringFilter | String,
              ?   startTime?: StringFilter | String,
              ?   endTime?: StringFilter | String,
              ?   description?: StringNullableFilter | String | Null,
              ?   isActive?: BoolFilter | Boolean,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   org?: OrgRelationFilter | OrgWhereInput,
              ?   schedules?: ShiftScheduleListRelationFilter
                },
                data: {
                  isActive: true
                }
              })

    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - assigns staff to schedule

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - assigns manager on duty

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - rejects duplicate assignment

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › GET /shift-assignments/by-schedule/:scheduleId - lists assignments

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › GET /shift-assignments/by-user/:userId - lists user assignments

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Current Shift API › GET /shift-schedules/current/:branchId - returns empty when no active shift

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Current Shift API › GET /shift-schedules/current/:branchId - returns current shift with staff

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - blocks close when stock count out of tolerance

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - blocks close when stock count out of tolerance

    PrismaClientValidationError: 
    Invalid `prisma.client.shift.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47

      431 
      432 beforeAll(async () => {
      433   // Open a shift
    → 434   const shift = await prisma.client.shift.create({
              data: {
                branchId: undefined,
                openedById: undefined,
                openingFloat: 100,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - rejects override from L3 staff

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - rejects override from L3 staff

    PrismaClientValidationError: 
    Invalid `prisma.client.shift.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47

      431 
      432 beforeAll(async () => {
      433   // Open a shift
    → 434   const shift = await prisma.client.shift.create({
              data: {
                branchId: undefined,
                openedById: undefined,
                openingFloat: 100,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - allows manager override

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41

      33 prisma = app.get<PrismaService>(PrismaService);
      34 
      35 // Create test org, branch, and users
    → 36 const org = await prisma.client.org.create({
           data: {
             name: "M2 Test Org",
             currencyCode: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)

  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - allows manager override

    PrismaClientValidationError: 
    Invalid `prisma.client.shift.create()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47

      431 
      432 beforeAll(async () => {
      433   // Open a shift
    → 434   const shift = await prisma.client.shift.create({
              data: {
                branchId: undefined,
                openedById: undefined,
                openingFloat: 100,
            +   orgId: String
              }
            })

    Argument `orgId` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.client.org.delete()` invocation in
    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:96:35

      93 
      94 afterAll(async () => {
      95   // Cleanup
    → 96   await prisma.client.org.delete({
             where: {
               id: undefined,
           ?   slug?: String,
           ?   AND?: OrgWhereInput | OrgWhereInput[],
           ?   OR?: OrgWhereInput[],
           ?   NOT?: OrgWhereInput | OrgWhereInput[],
           ?   name?: StringFilter | String,
           ?   createdAt?: DateTimeFilter | DateTime,
           ?   updatedAt?: DateTimeFilter | DateTime,
           ?   branches?: BranchListRelationFilter,
           ?   users?: UserListRelationFilter,
           ?   settings?: OrgSettingsNullableRelationFilter | OrgSettingsWhereInput | Null,
           ?   devices?: DeviceListRelationFilter,
           ?   floorPlans?: FloorPlanListRelationFilter,
           ?   taxCategories?: TaxCategoryListRelationFilter,
           ?   modifierGroups?: ModifierGroupListRelationFilter,
           ?   anomalyEvents?: AnomalyEventListRelationFilter,
           ?   alertChannels?: AlertChannelListRelationFilter,
           ?   scheduledAlerts?: ScheduledAlertListRelationFilter,
           ?   reservations?: ReservationListRelationFilter,
           ?   supportSessions?: SupportSessionListRelationFilter,
           ?   spoutDevices?: SpoutDeviceListRelationFilter,
           ?   spoutEvents?: SpoutEventListRelationFilter,
           ?   ownerDigests?: OwnerDigestListRelationFilter,
           ?   apiKeys?: ApiKeyListRelationFilter,
           ?   subscription?: OrgSubscriptionNullableRelationFilter | OrgSubscriptionWhereInput | Null,
           ?   branchBudgets?: BranchBudgetListRelationFilter,
           ?   forecastProfiles?: ForecastProfileListRelationFilter,
           ?   forecastPoints?: ForecastPointListRelationFilter,
           ?   franchiseRanks?: FranchiseRankListRelationFilter,
           ?   franchiseBudgets?: FranchiseBudgetListRelationFilter,
           ?   badgeAssets?: BadgeAssetListRelationFilter,
           ?   kdsSlaConfigs?: KdsSlaConfigListRelationFilter,
           ?   shiftTemplates?: ShiftTemplateListRelationFilter,
           ?   reportSubscriptions?: ReportSubscriptionListRelationFilter,
           ?   serviceProviders?: ServiceProviderListRelationFilter,
           ?   serviceReminders?: ServicePayableReminderListRelationFilter,
           ?   opsBudgets?: OpsBudgetListRelationFilter,
           ?   costInsights?: CostInsightListRelationFilter,
           ?   sessions?: SessionListRelationFilter,
           ?   documents?: DocumentListRelationFilter,
           ?   staffAwards?: StaffAwardListRelationFilter,
           ?   Feedback?: FeedbackListRelationFilter,
           ?   promotionSuggestions?: PromotionSuggestionListRelationFilter
             }
           })

    Argument `where` of type OrgWhereUniqueInput needs at least one of `id` or `slug` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:96:5)

FAIL e2e/devportal.prod.slice.e2e-spec.ts
  ● Test suite failed to run

    Cannot find module '../../src/dev-portal/ports/devportal.port' from 'e2e/devportal.prod.slice.e2e-spec.ts'

      15 | import { SuperDevGuard } from '../../src/dev-portal.disabled/guards/super-dev.guard'; // Fixed: was dev-portal (now disabled)
      16 | import { signBody } from '../payments/webhook.hmac';
    > 17 | import { DevPortalKeyRepo } from '../../src/dev-portal/ports/devportal.port';
         | ^
      18 | import { TestBypassAuthGuard } from '../devportal/auth-override.guard';
      19 | import { cleanup } from '../helpers/cleanup';
      20 |

      at Resolver._throwModNotFoundError (../../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.<anonymous> (e2e/devportal.prod.slice.e2e-spec.ts:17:1)

FAIL e2e/badge-revocation.e2e-spec.ts
  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should authenticate via badge swipe and include badgeId in token

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should access protected endpoint with valid token

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should reject login with REVOKED badge

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should invalidate existing token when badge is revoked (< 2s)

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should allow new login after badge revocation with updated version

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should invalidate sessions when badge is reported LOST

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should NOT reinstate old tokens when badge is RETURNED

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Session Version Validation › should reject token with mismatched session version

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)

  ● Badge Revocation & Session Invalidation (E25) - E2E › Performance & Timing › should invalidate session within 2 seconds (E25 requirement)

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39

      46 
      47 async function setupTestData() {
      48   // Create test organization
    → 49   testOrg = await prisma.client.org.create(
    Unique constraint failed on the fields: (`slug`)

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'id')

      124 |     // Delete in dependency order
      125 |     await prisma.client.employeeProfile.deleteMany({
    > 126 |       where: { userId: testUser.id },
          |                                 ^
      127 |     });
      128 |     await prisma.client.badgeAsset.deleteMany({
      129 |       where: { orgId: testOrg.id },

      at cleanupTestData (e2e/badge-revocation.e2e-spec.ts:126:33)
      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:43:11)

FAIL ./m7-service-providers.e2e-spec.ts
  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 1. Service Providers Management › should create a service provider

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 1. Service Providers Management › should create a monthly contract

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should generate reminders for active contracts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should list reminders for a branch

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should get reminder summary

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should mark reminder as paid

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should set a budget for a category

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should compute budget actuals

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should get budget summary

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should get franchise budget summary

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 4. Cost-Cutting Insights › should generate cost insights for a branch

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 4. Cost-Cutting Insights › should generate franchise-wide insights

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 5. Integration with Owner Digests › should include M7 data in franchise digest

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should validate dueDay for monthly contracts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should prevent deleting provider with active contracts

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)

  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should require budget parameters

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41

      51 
      52 async function setupTestData() {
      53   // Create test org
    → 54   const org = await prisma.client.org.create({
             data: {
               name: "M7 Test Restaurant",
               email: "m7test@example.com",
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)
      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)


  ● Test suite failed to run

    TypeError: prisma.$disconnect is not a function

      46 |     // Cleanup
      47 |     await cleanupTestData();
    > 48 |     await prisma.$disconnect();
         |                  ^
      49 |     await app.close();
      50 |   });
      51 |

      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:48:18)

FAIL ./m1-kds-enterprise.e2e-spec.ts
  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should return tickets with waiterName, slaState, and proper ordering

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should filter tickets by station correctly

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should support "since" parameter for incremental sync

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

  ● M1 KDS Enterprise (e2e) › SLA Configuration › should get default SLA config for a station

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

  ● M1 KDS Enterprise (e2e) › SLA Configuration › should update SLA config (Manager/Owner only)

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

  ● M1 KDS Enterprise (e2e) › SLA Configuration › should reject SLA config update from waiter (L1)

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

  ● M1 KDS Enterprise (e2e) › KDS Resilience › should handle marking ticket ready and checking all-ready state

    TypeError: menuResponse.body.find is not a function

      61 |       .set('Authorization', `Bearer ${waiterToken}`);
      62 |
    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');
      66 |     burgerId = burger?.id;

      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)

FAIL ./e27-costing.e2e-spec.ts
  ● E27 - Costing & Profit Engine (e2e) › Costing calculation on order close › should calculate cost and margin when closing an order

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)

  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should include cost data for MANAGER (L4) role

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)

  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should exclude cost data for CHEF (L3) when showCostToChef=false

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)

  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should include cost data for CHEF (L3) when showCostToChef=true

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41

      55 
      56 async function setupTestData() {
      57   // Create org
    → 58   const org = await prisma.client.org.create({
             data: {
               name: "E27 Test Org",
               subdomain: "e27-test",
               isSandbox: true,
           +   slug: String
             }
           })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (e27-costing.e2e-spec.ts:58:17)
      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.payment.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:42:33

      39 afterAll(async () => {
      40   // Cleanup
      41   await prisma.client.orderItem.deleteMany({ where: { order: { branchId } } });
    → 42   await prisma.client.payment.deleteMany(
    Foreign key constraint violated: `refunds_paymentId_fkey (index)`

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e27-costing.e2e-spec.ts:42:5)

FAIL ./webhook-security.e2e-spec.ts
  ● Webhook Security E2E (E24) › Authentication › should reject webhook without signature header

    TypeError: request is not a function

      70 |   describe('Authentication', () => {
      71 |     it('should reject webhook without signature header', async () => {
    > 72 |       const response = await request(app.getHttpServer())
         |                              ^
      73 |         .post('/webhooks/billing')
      74 |         .set('Content-Type', 'application/json')
      75 |         .set('X-Ts', Date.now().toString())

      at Object.<anonymous> (webhook-security.e2e-spec.ts:72:30)

  ● Webhook Security E2E (E24) › Authentication › should reject webhook without timestamp header

    TypeError: request is not a function

      82 |
      83 |     it('should reject webhook without timestamp header', async () => {
    > 84 |       const response = await request(app.getHttpServer())
         |                              ^
      85 |         .post('/webhooks/billing')
      86 |         .set('Content-Type', 'application/json')
      87 |         .set('X-Sig', 'some-signature')

      at Object.<anonymous> (webhook-security.e2e-spec.ts:84:30)

  ● Webhook Security E2E (E24) › Authentication › should reject webhook without request ID header

    TypeError: request is not a function

      93 |
      94 |     it('should reject webhook without request ID header', async () => {
    > 95 |       const response = await request(app.getHttpServer())
         |                              ^
      96 |         .post('/webhooks/billing')
      97 |         .set('Content-Type', 'application/json')
      98 |         .set('X-Sig', 'some-signature')

      at Object.<anonymous> (webhook-security.e2e-spec.ts:95:30)

  ● Webhook Security E2E (E24) › Authentication › should reject webhook with invalid signature

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:107:30)

  ● Webhook Security E2E (E24) › Authentication › should accept webhook with valid signature

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:117:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with stale timestamp (>5 minutes old)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:132:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with future timestamp (>5 minutes ahead)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:148:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should accept webhook with timestamp at edge of window (4 minutes old)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:162:30)

  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with invalid timestamp format

    TypeError: request is not a function

      169 |
      170 |     it('should reject webhook with invalid timestamp format', async () => {
    > 171 |       const response = await request(app.getHttpServer())
          |                              ^
      172 |         .post('/webhooks/billing')
      173 |         .set('Content-Type', 'application/json')
      174 |         .set('X-Sig', 'some-signature')

      at Object.<anonymous> (webhook-security.e2e-spec.ts:171:30)

  ● Webhook Security E2E (E24) › Replay protection › should reject duplicate request ID (replay attack)

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:190:31)

  ● Webhook Security E2E (E24) › Replay protection › should allow same payload with different request IDs

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:206:31)

  ● Webhook Security E2E (E24) › Body integrity › should reject webhook with tampered body

    TypeError: request is not a function

      221 |
      222 |       // Send tampered payload with signature from original
    > 223 |       const response = await request(app.getHttpServer())
          |                              ^
      224 |         .post('/webhooks/billing')
      225 |         .set('Content-Type', 'application/json')
      226 |         .set('X-Sig', signature)

      at Object.<anonymous> (webhook-security.e2e-spec.ts:223:30)

  ● Webhook Security E2E (E24) › Body integrity › should handle empty body correctly

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:237:30)

  ● Webhook Security E2E (E24) › Body integrity › should handle complex nested JSON

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:257:30)

  ● Webhook Security E2E (E24) › Multiple webhook endpoints › should protect MTN webhook endpoint

    TypeError: request is not a function

      263 |     it('should protect MTN webhook endpoint', async () => {
      264 |       const payload = { transactionId: 'mtn-123', status: 'completed' };
    > 265 |       const response = await request(app.getHttpServer())
          |                              ^
      266 |         .post('/webhooks/mtn')
      267 |         .set('Content-Type', 'application/json')
      268 |         .send(payload);

      at Object.<anonymous> (webhook-security.e2e-spec.ts:265:30)

  ● Webhook Security E2E (E24) › Multiple webhook endpoints › should protect Airtel webhook endpoint

    TypeError: request is not a function

      274 |     it('should protect Airtel webhook endpoint', async () => {
      275 |       const payload = { transactionId: 'airtel-123', status: 'completed' };
    > 276 |       const response = await request(app.getHttpServer())
          |                              ^
      277 |         .post('/webhooks/airtel')
      278 |         .set('Content-Type', 'application/json')
      279 |         .send(payload);

      at Object.<anonymous> (webhook-security.e2e-spec.ts:276:30)

  ● Webhook Security E2E (E24) › Response format › should return proper success response

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:289:30)

  ● Webhook Security E2E (E24) › Response format › should return proper error response for auth failure

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:302:30)

  ● Webhook Security E2E (E24) › Performance and load › should handle multiple concurrent valid webhooks

    TypeError: request is not a function

      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;
      60 |
    > 61 |     return request(app.getHttpServer())
         |            ^
      62 |       .post('/webhooks/billing')
      63 |       .set('Content-Type', 'application/json')
      64 |       .set('X-Sig', signature)

      at sendWebhook (webhook-security.e2e-spec.ts:61:12)
      at webhook-security.e2e-spec.ts:314:9
          at Function.from (<anonymous>)
      at Object.<anonymous> (webhook-security.e2e-spec.ts:313:30)

FAIL ./e23-roles-access.e2e-spec.ts
  ● E23 Roles & Platform Access (e2e) › GET /access/matrix › should allow L4 (manager) to get platform access matrix

    expect(received).toHaveProperty(path)

    Expected path: "WAITER"
    Received path: []

    Received value: {"HEAD_BARISTA": {"desktop": true, "mobile": false, "web": true}, "TICKET_MASTER": {"desktop": false, "mobile": true, "web": true}}

      82 |       expect(response.body).toHaveProperty('platformAccess');
      83 |       expect(response.body).toHaveProperty('defaults');
    > 84 |       expect(response.body.platformAccess).toHaveProperty('WAITER');
         |                                            ^
      85 |       expect(response.body.platformAccess).toHaveProperty('PROCUREMENT');
      86 |       expect(response.body.platformAccess).toHaveProperty('TICKET_MASTER');
      87 |     });

      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:84:44)

FAIL ./plan-rate-limit.e2e-spec.ts
  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should enforce free tier rate limit (10/min)

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should allow pro tier higher limits (60/min)

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should allow enterprise tier highest limits (240/min)

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › POST /billing/cancel › should apply rate limiting to cancel endpoint

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › Rate limit headers › should include Retry-After header in 429 responses

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › Authentication requirement › should reject requests without authentication

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

  ● Plan-Aware Rate Limiting E2E › Metrics › should emit rate limit hit metrics

    PrismaClientValidationError: 
    Invalid `prisma.user.upsert()` invocation in
    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40

      157 });
      158 
      159 // Create test users
    → 160 const freeUser = await prisma.user.upsert({
            where: {
              email: "rate-limit-free@test.local"
            },
            update: {},
            create: {
              email: "rate-limit-free@test.local",
              role: "L5",
              orgId: "cmjp2q4iu001y124f85ejwl5e",
          +   firstName: String
            }
          })

    Argument `firstName` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)
      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)

FAIL ./sse-security.e2e-spec.ts
  ● SSE /stream/kpis Security (E26) › Authentication › should return 401 when no token provided

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authentication › should return 401 with invalid token

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authorization › should return 403 for L1 (Waiter) role

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authorization › should allow L4 (Manager) role

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Authorization › should allow L5 (Owner) role

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › SSE Headers › should set correct SSE headers

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Event Emission › should emit at least one KPIs event with valid token

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Org-Scope Isolation › should only stream data for authenticated user's org

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Rate Limiting › should return 429 after exceeding rate limit

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Rate Limiting › should block concurrent connections beyond limit

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › Connection Cleanup › should clean up resources on disconnect

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)

  ● SSE /stream/kpis Security (E26) › CORS › should respect CORS allowlist

    TypeError: Cannot read properties of undefined (reading 'id')

      37 |     // Create test org with users
      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');
    > 39 |     orgId = org.id;
         |                 ^
      40 |
      41 |     // Generate tokens
      42 |     ownerToken = jwtService.sign({

      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:72:23

      69 
      70 afterAll(async () => {
      71   // Cleanup
    → 72   await prisma.user.deleteMany(
    Foreign key constraint violated: `orders_userId_fkey (index)`

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (sse-security.e2e-spec.ts:72:5)

FAIL ./e37-promotions.e2e-spec.ts
  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should create a happy hour promotion (20% off drinks 17:00-19:00)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should list promotions (including inactive)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should approve the promotion

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should apply discount when placing order during happy hour (18:00 on Monday)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should NOT apply discount outside happy hour (20:00)

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should toggle promotion inactive

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)

  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should NOT apply discount when promotion is inactive

    Nest could not find given element (this provider does not exist in the current context)

      23 |
      24 |     app = moduleFixture.createNestApplication();
    > 25 |     prisma = app.get<PrismaService>(PrismaService);
         |                  ^
      26 |     await app.init();
      27 |
      28 |     // Create org, user, and branch for testing

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'promotionEffect')

      88 |   afterAll(async () => {
      89 |     // Clean up test data
    > 90 |     await prisma.promotionEffect.deleteMany({ where: { promotion: { orgId } } });
         |                  ^
      91 |     await prisma.promotion.deleteMany({ where: { orgId } });
      92 |     await prisma.orderItem.deleteMany({ where: { order: { branchId } } });
      93 |     await prisma.order.deleteMany({ where: { branchId } });

      at Object.<anonymous> (e37-promotions.e2e-spec.ts:90:18)

FAIL e2e/billing.e2e-spec.ts
  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 401 if no authorization token is provided

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 403 if user is not L5 (owner)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 200 and log plan change for L5 owner

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 404 for non-existent plan code

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 429 after exceeding plan-aware rate limit (burst)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 401 if no authorization token is provided

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 403 if user is not L5 (owner)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 200 and log cancellation for L5 owner

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should be idempotent (canceling twice returns 200)

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 401 if no authorization token is provided

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 200 with subscription details for authenticated user

    Nest could not find given element (this provider does not exist in the current context)

      164 |     await app.init();
      165 |
    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);
          |                            ^
      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);
      168 |
      169 |     await setupTestData();

      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)
      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)
      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)
      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)

FAIL e2e/franchise-cache-invalidation.e2e-spec.ts
  ● E22.D - Franchise Cache Invalidation (e2e) › Budget Update Invalidation › should invalidate budgets cache after budget update

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

  ● E22.D - Franchise Cache Invalidation (e2e) › Budget Update Invalidation › should not affect other cache prefixes when updating budgets

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

  ● E22.D - Franchise Cache Invalidation (e2e) › Cache Miss After Invalidation › should return fresh data after cache invalidation

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

  ● E22.D - Franchise Cache Invalidation (e2e) › Multiple Invalidations › should handle multiple rapid invalidations without errors

    TypeError: Cannot read properties of undefined (reading 'create')

      57 |   async function setupTestData() {
      58 |     // Create test organization
    > 59 |     const org = await prisma.organization.create({
         |                                           ^
      60 |       data: {
      61 |         name: 'E22D Test Org',
      62 |         slug: `e22d-test-${Date.now()}`,

      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)
      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)

FAIL ./msr-card.e2e-spec.ts
  ● MSR Card Management (e2e) › POST /auth/msr/assign › should assign MSR card to employee

    expected 201 "Created", got 500 "Internal Server Error"

      128 |           badgeId: trackData,
      129 |         })
    > 130 |         .expect(201);
          |          ^
      131 |
      132 |       expect(response.body).toHaveProperty('id');
      133 |       expect(response.body).toHaveProperty('cardToken');

      at Object.<anonymous> (msr-card.e2e-spec.ts:130:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr/assign › should reject duplicate card assignment to same employee

    expected 409 "Conflict", got 500 "Internal Server Error"

      148 |           badgeId: trackData,
      149 |         })
    > 150 |         .expect(409); // Conflict - employee already has card
          |          ^
      151 |     });
      152 |
      153 |     it('should reject unauthorized access (no token)', async () => {

      at Object.<anonymous> (msr-card.e2e-spec.ts:150:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › POST /auth/msr-swipe › should authenticate with valid MSR card

    PrismaClientValidationError: 
    Invalid `prisma.client.msrCard.findUnique()` invocation in
    /workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:169:48

      166 describe('POST /auth/msr-swipe', () => {
      167   it('should authenticate with valid MSR card', async () => {
      168     // Get the card we assigned
    → 169     const card = await prisma.client.msrCard.findUnique({
                where: {
                  id: undefined,
              ?   employeeId?: String,
              ?   cardToken?: String,
              ?   AND?: MsrCardWhereInput | MsrCardWhereInput[],
              ?   OR?: MsrCardWhereInput[],
              ?   NOT?: MsrCardWhereInput | MsrCardWhereInput[],
              ?   orgId?: StringFilter | String,
              ?   status?: EnumMsrCardStatusFilter | MsrCardStatus,
              ?   assignedAt?: DateTimeFilter | DateTime,
              ?   assignedById?: StringFilter | String,
              ?   revokedAt?: DateTimeNullableFilter | DateTime | Null,
              ?   revokedById?: StringNullableFilter | String | Null,
              ?   revokedReason?: StringNullableFilter | String | Null,
              ?   metadata?: JsonNullableFilter,
              ?   createdAt?: DateTimeFilter | DateTime,
              ?   updatedAt?: DateTimeFilter | DateTime,
              ?   employee?: EmployeeRelationFilter | EmployeeWhereInput,
              ?   assignedBy?: UserRelationFilter | UserWhereInput,
              ?   revokedBy?: UserNullableRelationFilter | UserWhereInput | Null
                },
                include: {
                  employee: true
                }
              })

    Argument `where` of type MsrCardWhereUniqueInput needs at least one of `id`, `employeeId` or `cardToken` arguments. Available options are marked with ?.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (msr-card.e2e-spec.ts:169:20)

  ● MSR Card Management (e2e) › POST /auth/msr-swipe › should reject invalid badge ID

    expected 404 "Not Found", got 400 "Bad Request"

      256 |           branchId,
      257 |         })
    > 258 |         .expect(404); // Card not found
          |          ^
      259 |     });
      260 |   });
      261 |

      at Object.<anonymous> (msr-card.e2e-spec.ts:258:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● MSR Card Management (e2e) › GET /auth/msr/cards › should list MSR cards for organization

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      267 |         .expect(200);
      268 |
    > 269 |       expect(Array.isArray(response.body)).toBe(true);
          |                                            ^
      270 |       expect(response.body.length).toBeGreaterThanOrEqual(1);
      271 |
      272 |       const assignedCard = response.body.find((c: any) => c.id === cardId);

      at Object.<anonymous> (msr-card.e2e-spec.ts:269:44)

  ● MSR Card Management (e2e) › POST /auth/msr/revoke › should revoke MSR card

    expected 200 "OK", got 500 "Internal Server Error"

      291 |           reason: 'E2E test cleanup',
      292 |         })
    > 293 |         .expect(200);
          |          ^
      294 |
      295 |       expect(response.body.status).toBe('REVOKED');
      296 |       expect(response.body.revokedReason).toBe('E2E test cleanup');

      at Object.<anonymous> (msr-card.e2e-spec.ts:293:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL e2e/payments.slice.e2e-spec.ts
  ● Payments (Slice E2E) › GET /payments -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › GET /payments -> 200 with token (lists payments)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › GET /payments/pay_001 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › GET /payments/pay_missing -> 404/400 (invalid id)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments -> 201 (create payment)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments -> 400/422 (invalid payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/pay_001/capture -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/pay_001/refund -> 201

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/intents -> 201 (create intent)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments/intents/pi_001/cancel -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments-test-webhook/gateway -> 200 (valid HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments-test-webhook/gateway -> 200 { ok:false } (bad HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › POST /payments-test-webhook/gateway -> 200 { ok:false } (missing signature)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

  ● Payments (Slice E2E) › Rate limiting produces >= one 429 on /payments

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      106 |
      107 |   beforeAll(async () => {
    > 108 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      109 |       imports: [
      110 |         ConfigModule.forRoot({ isGlobal: true }),
      111 |

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/payments.slice.e2e-spec.ts:108:20)

FAIL e2e/orders.slice.e2e-spec.ts
  ● Orders (Slice E2E) › POST /pos/orders -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders -> 201 with token (creates open order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/send-to-kitchen -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/modify -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/send-to-kitchen -> 200/201 (sends to kitchen)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/modify -> 200 (modifies order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/void -> 200 (voids order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/close -> 200 (closes order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/discount -> 200 (applies discount)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/:id/post-close-void -> 200 (voids closed order)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders -> 400/422 (bad payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/invalid-id/send-to-kitchen -> 404/400 (invalid order id)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › POST /pos/orders/ord_001/modify -> 400/422 (bad modify payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

  ● Orders (Slice E2E) › Rate limiting produces >= one 429 on /pos/orders

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      105 |
      106 |   beforeAll(async () => {
    > 107 |     const modRef = await createE2ETestingModuleBuilder({
          |                    ^
      108 |       imports: [
      109 |         ConfigModule.forRoot({ isGlobal: true }),
      110 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 7)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/orders.slice.e2e-spec.ts:107:20)

FAIL e2e/franchise.slice.e2e-spec.ts
  ● Franchise (Slice E2E) › GET /franchise/overview -> 401 without token

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/overview -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/rankings -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/budgets -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › Two reads of /franchise/overview return consistent payload shape

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › POST /franchise-test/invalidate -> { ok:true }

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/overview after invalidation -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › GET /franchise/forecast/items -> 200

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

  ● Franchise (Slice E2E) › Rate limiting produces >= one 429 on /franchise/overview

    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.

    Potential solutions:
    - Is FranchiseInvalidationTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      110 |
      111 |   beforeAll(async () => {
    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({
          |                       ^
      113 |       imports: [
      114 |         ThrottlerTestModule,
      115 |         PrismaTestModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)

FAIL e2e/franchise-budgets-cache.e2e-spec.ts
  ● E22.C - Franchise Budgets Caching (e2e) › should return cached=false on first call (cache miss)

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should return cached=true on second call within TTL (cache hit)

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should maintain data structure consistency between cached and non-cached responses

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should use different cache keys for different periods

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › should return error for invalid period format

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

  ● E22.C - Franchise Budgets Caching (e2e) › cache hit should be significantly faster than cache miss

    TypeError: Cannot read properties of undefined (reading 'create')

      60 |   async function setupTestData() {
      61 |     // Create test organization
    > 62 |     const org = await prisma.organization.create({
         |                                           ^
      63 |       data: {
      64 |         name: 'E22C Test Org',
      65 |         slug: `e22c-test-${Date.now()}`,

      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)
      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)

FAIL e2e/franchise-rankings-cache.e2e-spec.ts
  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return cached=false on first call (cache miss)

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return cached=true on second call within TTL (cache hit)

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return same data structure on cache hit and miss

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should cache separately for different periods

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return error for invalid period format

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should measure response time difference between miss and hit

    TypeError: Cannot read properties of undefined (reading 'create')

      58 |   async function setupTestData() {
      59 |     // Create test organization
    > 60 |     const org = await prisma.organization.create({
         |                                           ^
      61 |       data: {
      62 |         name: 'E22B Test Org',
      63 |         slug: `e22b-test-${Date.now()}`,

      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)
      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)

FAIL ./auth.e2e-spec.ts
  ● Auth (e2e) › POST /auth/pin-login › should login with valid employee code and PIN

    expected 200 "OK", got 401 "Unauthorized"

      92 |           branchId: await getMainBranchId(),
      93 |         })
    > 94 |         .expect(200);
         |          ^
      95 |
      96 |       expect(response.body).toHaveProperty('access_token');
      97 |       expect(response.body.user).toMatchObject({

      at Object.<anonymous> (auth.e2e-spec.ts:94:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/msr-swipe › should login with valid badge ID

    expected 200 "OK", got 400 "Bad Request"

      143 |           badgeId: 'CASHIER001',
      144 |         })
    > 145 |         .expect(200);
          |          ^
      146 |
      147 |       expect(response.body).toHaveProperty('access_token');
      148 |       expect(response.body.user).toMatchObject({

      at Object.<anonymous> (auth.e2e-spec.ts:145:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/msr-swipe › should reject unknown badge ID

    expected 404 "Not Found", got 400 "Bad Request"

      159 |           badgeId: 'UNKNOWN_BADGE',
      160 |         })
    > 161 |         .expect(404);
          |          ^
      162 |     });
      163 |
      164 |     it('should login with branch verification', async () => {

      at Object.<anonymous> (auth.e2e-spec.ts:161:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Auth (e2e) › POST /auth/msr-swipe › should login with branch verification

    expected 200 "OK", got 400 "Bad Request"

      169 |           branchId: await getMainBranchId(),
      170 |         })
    > 171 |         .expect(200);
          |          ^
      172 |
      173 |       expect(response.body).toHaveProperty('access_token');
      174 |     });

      at Object.<anonymous> (auth.e2e-spec.ts:171:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL ./b3-multi-tenant.e2e-spec.ts
  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should deny user A access to org B menu items with wrong x-org-id

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjp2qcwf0038124f70xwnxnb",
             token: "token-a-1766886717906",
             expiresAt: new Date("2025-12-29T01:51:57.906Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should return 404 when user A requests org B resource with correct x-org-id

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjp2qcwf0038124f70xwnxnb",
             token: "token-a-1766886717906",
             expiresAt: new Date("2025-12-29T01:51:57.906Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should allow user A to access org A menu items

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjp2qcwf0038124f70xwnxnb",
             token: "token-a-1766886717906",
             expiresAt: new Date("2025-12-29T01:51:57.906Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should require x-org-id header

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjp2qcwf0038124f70xwnxnb",
             token: "token-a-1766886717906",
             expiresAt: new Date("2025-12-29T01:51:57.906Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org data isolation › should not leak org B data when user A lists menu items

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjp2qcwf0038124f70xwnxnb",
             token: "token-a-1766886717906",
             expiresAt: new Date("2025-12-29T01:51:57.906Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)

  ● Multi-Tenant Isolation (E2E) › Cross-org data isolation › should isolate org B user from org A data

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37

      61   },
      62 });
      63 
    → 64 sessionA = await prisma.session.create({
           data: {
             userId: "cmjp2qcwf0038124f70xwnxnb",
             token: "token-a-1766886717906",
             expiresAt: new Date("2025-12-29T01:51:57.906Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'id')

      152 |     // Cleanup in reverse order
      153 |     await prisma.client.menuItem.deleteMany({ where: { branchId: branchA.id } });
    > 154 |     await prisma.client.menuItem.deleteMany({ where: { branchId: branchB.id } });
          |                                                                          ^
      155 |     await prisma.category.deleteMany({ where: { branchId: branchA.id } });
      156 |     await prisma.category.deleteMany({ where: { branchId: branchB.id } });
      157 |     await prisma.session.deleteMany({ where: { userId: userA.id } });

      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:154:74)

FAIL ./billing-simple.e2e-spec.ts
  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 401 if no authorization token is provided

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 200 and subscription details with valid L5 token

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 401 if no authorization token is provided

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 403 if user is not L5 (manager attempting)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 200 or 404 with valid L5 token

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 404 for unknown plan code

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should rate limit after burst requests (expect at least one 429)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 401 if no authorization token is provided

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 403 if user is not L5 (manager attempting)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 200 or 404 with valid L5 token

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should be idempotent (canceling twice should succeed)

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      38 |
      39 |     // Use existing demo data instead of creating new test data
    > 40 |     const demoOrg = await prisma.organization.findFirst({
         |                                               ^
      41 |       where: { slug: 'demo' },
      42 |       include: { branches: { where: { isHeadquarters: true } } },
      43 |     });

      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)

FAIL e2e/devportal.slice.e2e-spec.ts
  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › GET /dev/keys without token -> 200 (test controller)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › GET /dev/keys -> 200 with token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys -> 201 (create)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys -> 400 (invalid payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys/key_1/revoke -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › Plan-aware limit hits 429 for free but not for pro (same burst)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev-webhook/events -> 200 { ok:true } (valid HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev-webhook/events -> 200 { ok:false } (bad HMAC)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev-webhook/events -> 200 { ok:false } (missing signature)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › GET /dev/keys returns multiple keys with plan info

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

  ● Dev-Portal (Slice E2E) — Plan-aware limits + HMAC › POST /dev/keys with pro plan -> 201

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      23 |       imports: [
      24 |         // minimal shared deps
      25 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/devportal.slice.e2e-spec.ts:22:20)

FAIL e2e/reservations.slice.e2e-spec.ts
  ● Reservations (Slice E2E) › GET /reservations -> 401 without token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations -> 200 with token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations -> 201 (create booking)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations -> 400/422 (invalid payload)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations/:id/confirm -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations/:id/cancel -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › POST /reservations/:id/seat -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations?status=CONFIRMED -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations?from=2025-11-13&to=2025-11-14 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations/summary?from=2025-11-01&to=2025-11-30 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations-test/availability?date=2025-11-13&party=2 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › GET /reservations-test/availability?date=2025-11-13&party=6 -> 200 (fewer slots)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

  ● Reservations (Slice E2E) › Rate limiting produces >= one 429 on /reservations

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      19 |
      20 |   beforeAll(async () => {
    > 21 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      22 |       imports: [
      23 |         ReservationsModule,
      24 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/reservations.slice.e2e-spec.ts:21:20)

FAIL ./b2-apikey.e2e-spec.ts
  ● API Key Security (E2E) › POST /ops/apikeys › should create API key as L5 user

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /ops/apikeys › should list API keys (masked)

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should accept request with valid API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should reject request with missing API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should reject request with invalid API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › Rate limiting › should enforce rate limit on public endpoints

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

  ● API Key Security (E2E) › DELETE /ops/apikeys/:id › should delete API key

    PrismaClientValidationError: 
    Invalid `prisma.session.create()` invocation in
    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42

      55 });
      56 
      57 // Create session for auth
    → 58 const session = await prisma.session.create({
           data: {
             userId: "cmjp2qepc003f124ftsr4ccyi",
             token: "test-token-1766886720242",
             expiresAt: new Date("2025-12-29T01:52:00.242Z"),
         +   user: {
         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,
         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,
         +     connect: UserWhereUniqueInput
         +   }
           }
         })

    Argument `user` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)

FAIL ./e24-subscriptions.e2e-spec.ts
  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/orgs › should create org with ACTIVE subscription (dev admin)

    expected 201 "Created", got 404 "Not Found"

      32 |           planCode: 'BASIC',
      33 |         })
    > 34 |         .expect(201);
         |          ^
      35 |
      36 |       expect(response.body).toHaveProperty('org');
      37 |       expect(response.body).toHaveProperty('owner');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:34:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/orgs › should reject without dev admin header

    expected 401 "Unauthorized", got 404 "Not Found"

      50 |           planCode: 'PRO',
      51 |         })
    > 52 |         .expect(401);
         |          ^
      53 |     });
      54 |   });
      55 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:52:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - GET /dev/subscriptions › should list all subscriptions (dev admin)

    expected 200 "OK", got 404 "Not Found"

      59 |         .get('/dev/subscriptions')
      60 |         .set('X-Dev-Admin', 'dev1@chefcloud.local')
    > 61 |         .expect(200);
         |          ^
      62 |
      63 |       expect(Array.isArray(response.body)).toBe(true);
      64 |       expect(response.body.length).toBeGreaterThan(0);

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:61:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/plans › should upsert plan (super dev)

    expected 201 "Created", got 404 "Not Found"

      81 |           isActive: true,
      82 |         })
    > 83 |         .expect(201);
         |          ^
      84 |
      85 |       expect(response.body.code).toBe('TEST_PLAN');
      86 |       expect(response.body.name).toBe('Test Plan');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:83:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/plans › should reject non-super dev from creating plans

    expected 403 "Forbidden", got 404 "Not Found"

      109 |           features: {},
      110 |         })
    > 111 |         .expect(403);
          |          ^
      112 |     });
      113 |   });
      114 |

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:111:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - GET /billing/subscription › should return subscription for org owner

    expected 200 "OK", got 404 "Not Found"

      129 |         .get('/billing/subscription')
      130 |         .set('Authorization', `Bearer ${token}`)
    > 131 |         .expect(200);
          |          ^
      132 |
      133 |       expect(response.body).toHaveProperty('plan');
      134 |       expect(response.body).toHaveProperty('status');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:131:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - POST /billing/plan/change › should allow owner to request plan change

    expected 201 "Created", got 403 "Forbidden"

      172 |         .set('Authorization', `Bearer ${token}`)
      173 |         .send({ planCode: 'ENTERPRISE' })
    > 174 |         .expect(201);
          |          ^
      175 |
      176 |       expect(response.body).toHaveProperty('message');
      177 |       expect(response.body).toHaveProperty('effectiveDate');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:174:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E24 Subscriptions & Dev Portal (e2e) › Billing - POST /billing/cancel › should allow owner to request cancellation

    expected 201 "Created", got 403 "Forbidden"

      194 |         .post('/billing/cancel')
      195 |         .set('Authorization', `Bearer ${token}`)
    > 196 |         .expect(201);
          |          ^
      197 |
      198 |       expect(response.body).toHaveProperty('message');
      199 |       expect(response.body).toHaveProperty('effectiveDate');

      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:196:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL e2e/inventory.slice.e2e-spec.ts
  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › GET /inventory/items should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › POST /inventory/items should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › POST /inventory/adjustments should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Authentication & Authorization › POST /inventory/wastage should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Rate Limiting › Rate limiting produces >= one 429 deterministically

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › should bootstrap successfully without metatype errors

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › GET /inventory/items should exist (not 404)

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /inventory/items should validate request body

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /inventory/adjustments should validate request body

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › GET /inventory/items endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › POST /inventory/items endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › GET /inventory/levels endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › POST /inventory/adjustments endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

  ● Inventory (Slice E2E) — Deterministic › Endpoint Availability › POST /inventory/wastage endpoint exists

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory.slice.e2e-spec.ts:24:20)

FAIL ./e26-kpis.e2e-spec.ts
  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require authentication

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should reject non-L4+ users

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require scope query param

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require branchId for branch scope

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should stream org-wide KPIs for L4+ user

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › KPI Computation › should compute salesToday from completed orders

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)

  ● E26-s1: Live KPI Streaming (SSE) › KPI Computation › should count open orders correctly

    PrismaClientValidationError: 
    Invalid `prisma.client.org.create()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41

      24 prisma = app.get(PrismaService);
      25 
      26 // Create test org
    → 27 const org = await prisma.client.org.create({
           data: {
             name: "E26 Test Org",
             currency: "UGX",
         +   slug: String
           }
         })

    Argument `slug` is missing.

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.client.user.deleteMany()` invocation in
    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:75:30

      72 
      73 afterAll(async () => {
      74   // Cleanup
    → 75   await prisma.client.user.deleteMany(
    Foreign key constraint violated: `orders_userId_fkey (index)`

      17 |   return async (params: any, next: any) => {
      18 |     const start = Date.now();
    > 19 |     const result = await next(params);
         |                    ^
      20 |     const duration = Date.now() - start;
      21 |
      22 |     // Sample slow queries to avoid log spam

      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at ../src/common/slow-query.ts:19:20
      at Object.<anonymous> (e26-kpis.e2e-spec.ts:75:5)

FAIL e2e/billing.slice.e2e-spec.ts
  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › POST /billing/plan/change should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › POST /billing/cancel should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › GET /billing/subscription should return 401 if no authorization token is provided

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Rate Limiting › Rate limiting produces >= one 429 deterministically

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › should bootstrap successfully without metatype errors

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › should have billing controller mounted at /billing

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /billing/plan/change should validate request body

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /billing/cancel should be idempotent

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › GET /billing/subscription endpoint exists

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › POST /billing/plan/change endpoint exists

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › POST /billing/cancel endpoint exists

    Nest can't resolve dependencies of the PlanRateLimiterGuard (?, PrismaService). Please make sure that the argument RedisService at index [0] is available in the BillingModule context.

    Potential solutions:
    - Is BillingModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current BillingModule?
    - If RedisService is exported from a separate @Module, is that module imported within BillingModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      22 |
      23 |   beforeAll(async () => {
    > 24 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      25 |       imports: [
      26 |         ConfigModule.forRoot({ isGlobal: true }),
      27 |         

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 10)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)

FAIL ./a3-pos.e2e-spec.ts
  ● A3 POS Core (e2e) › should create order with burger+fries -> send-to-kitchen -> kds queue shows ticket -> mark ready -> close order

    TypeError: menuResponse.body.find is not a function

      42 |       .set('Authorization', `Bearer ${authToken}`);
      43 |
    > 44 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      45 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      46 |     burgerId = burger.id;
      47 |     friesId = fries.id;

      at Object.<anonymous> (a3-pos.e2e-spec.ts:44:38)

  ● A3 POS Core (e2e) › should create order with burger only -> send-to-kitchen -> order has NO_DRINKS anomaly flag

    TypeError: menuResponse.body.find is not a function

      42 |       .set('Authorization', `Bearer ${authToken}`);
      43 |
    > 44 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');
         |                                      ^
      45 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');
      46 |     burgerId = burger.id;
      47 |     friesId = fries.id;

      at Object.<anonymous> (a3-pos.e2e-spec.ts:44:38)

FAIL e2e/transfer.invalidation.slice.e2e-spec.ts
  ● Transfer Invalidation (Slice E2E) — E22.D › POST /transfer-test/event -> 401 without token

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › POST /transfer-test/event -> 200 {ok:false} on invalid payload

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › HIT → transfer.changed → MISS (forecast cache proves invalidation)

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › Idempotency: repeating same event still returns ok:true

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

  ● Transfer Invalidation (Slice E2E) — E22.D › Deterministic rate limit: >= one 429 on /forecast-test/sales

    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.

    Potential solutions:
    - Is TransferEventsTestModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

      20 |
      21 |   beforeAll(async () => {
    > 22 |     const modRef = await createE2ETestingModule({
         |                    ^
      23 |       imports: [
      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,
      25 |         // test-only modules

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 0)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13
          at async Promise.all (index 0)
      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)

FAIL e2e/kds.slice.e2e-spec.ts
  ● KDS (Slice E2E) › GET /kds-test/tickets without token -> 200 (test controller)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › GET /kds-test/tickets -> 200 with token

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › GET /kds-test/tickets/tkt-001 -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › GET /kds-test/tickets/tkt-missing -> 404

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/tickets/tkt-001/ack -> 200 (ACK)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/tickets/tkt-001/bump -> 200 (BUMPED)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/tickets/tkt-001/expo -> 200 (EXPO)

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › POST /kds-test/screens/scr-001/heartbeat -> 200

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

  ● KDS (Slice E2E) › Rate limiting produces >= one 429 on /kds-test/tickets

    Nest can't resolve dependencies of the SessionInvalidationService (PrismaService, ?). Please make sure that the argument RedisService at index [1] is available in the AuthModule context.

    Potential solutions:
    - Is AuthModule a valid NestJS module?
    - If RedisService is a provider, is it part of the current AuthModule?
    - If RedisService is exported from a separate @Module, is that module imported within AuthModule?
      @Module({
        imports: [ /* the Module containing RedisService */ ]
      })

      18 |
      19 |   beforeAll(async () => {
    > 20 |     const modRef = await createE2ETestingModuleBuilder({
         |                    ^
      21 |       imports: [
      22 |         // minimal shared deps
      23 |         AuthModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 6)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/kds.slice.e2e-spec.ts:20:20)

FAIL e2e/inventory.e2e-spec.ts
  ● Inventory E2E › should receive PO → on-hand increases

    expected 200 "OK", got 404 "Not Found"

      57 |       .get(`/inventory/items/${beefId}`)
      58 |       .set('Authorization', `Bearer ${authToken}`)
    > 59 |       .expect(200);
         |        ^
      60 |
      61 |     const initialOnHand = initialResponse.body.onHand || 0;
      62 |

      at Object.<anonymous> (e2e/inventory.e2e-spec.ts:59:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL e2e/pos.e2e-spec.ts
  ● POS E2E › should create order → send-to-kitchen → close

    TypeError: Cannot read properties of undefined (reading 'upsert')

      236 |  */
      237 | export async function createFloor(prisma: PrismaClient, orgId: string, branchId: string) {
    > 238 |   const floorPlan = await prisma.floorPlan.upsert({
          |                                            ^
      239 |     where: { id: `floor-e2e-${orgId}` },
      240 |     update: {},
      241 |     create: {

      at createFloor (e2e/factory.ts:238:44)
      at Object.<anonymous> (e2e/pos.e2e-spec.ts:36:36)

FAIL e2e/workforce.e2e-spec.ts
  ● Workforce E2E › should clock in → clock out

    expected 201 "Created", got 404 "Not Found"

      58 |       .post('/workforce/attendance/clock-in')
      59 |       .set('Authorization', `Bearer ${waiterToken}`)
    > 60 |       .expect(201);
         |        ^
      61 |
      62 |     const _attendanceId = clockInResponse.body.id;
      63 |     expect(clockInResponse.body.clockIn).toBeDefined();

      at Object.<anonymous> (e2e/workforce.e2e-spec.ts:60:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL e2e/bookings.e2e-spec.ts
  ● Bookings E2E › should create booking → HOLD → pay → confirm

    TypeError: Cannot read properties of undefined (reading 'upsert')

      327 |  */
      328 | export async function createEvent(prisma: PrismaClient, orgId: string, branchId: string) {
    > 329 |   const event = await prisma.event.upsert({
          |                                    ^
      330 |     where: { id: `event-${orgId}` },
      331 |     update: {},
      332 |     create: {

      at createEvent (e2e/factory.ts:329:36)
      at Object.<anonymous> (e2e/bookings.e2e-spec.ts:33:36)

FAIL e2e/accounting.e2e-spec.ts
  ● Accounting E2E › should create period → lock → posting blocked

    TypeError: Cannot read properties of undefined (reading 'upsert')

      362 |   const created = [];
      363 |   for (const acc of accounts) {
    > 364 |     const account = await prisma.account.upsert({
          |                                          ^
      365 |       where: { orgId_code: { orgId, code: acc.code } },
      366 |       update: {},
      367 |       create: {

      at createChartOfAccounts (e2e/factory.ts:364:42)
      at Object.<anonymous> (e2e/accounting.e2e-spec.ts:33:32)

FAIL e2e/reports.e2e-spec.ts
  ● Reports E2E › should fetch X report (shift summary)

    expected 200 "OK", got 404 "Not Found"

      48 |       .get('/reports/x-report')
      49 |       .set('Authorization', `Bearer ${authToken}`)
    > 50 |       .expect(200);
         |        ^
      51 |
      52 |     expect(response.body).toBeDefined();
      53 |     expect(response.body.shift).toBeDefined();

      at Object.<anonymous> (e2e/reports.e2e-spec.ts:50:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● Reports E2E › should fetch owner overview

    expected 200 "OK", got 404 "Not Found"

      62 |         endDate: '2025-01-31',
      63 |       })
    > 64 |       .expect(200);
         |        ^
      65 |
      66 |     expect(response.body).toBeDefined();
      67 |   });

      at Object.<anonymous> (e2e/reports.e2e-spec.ts:64:8)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL e2e/app-bisect.e2e-spec.ts
  ● Test suite failed to run

    AppModule.imports not accessible; in AppModule, add: public static __imports = [ ...imports ]

      11 |
      12 | if (!appModuleImports || !Array.isArray(appModuleImports)) {
    > 13 |   throw new Error('AppModule.imports not accessible; in AppModule, add: public static __imports = [ ...imports ]');
         |         ^
      14 | }
      15 |
      16 | async function tryImports(imports: any[]) {

      at Object.<anonymous> (e2e/app-bisect.e2e-spec.ts:13:9)

FAIL ./e23-platform-access.e2e-spec.ts
  ● E23 Platform Access (e2e) › Public routes bypass › should allow unauthenticated access to /health

    expected 200 "OK", got 404 "Not Found"

      27 |         .get('/health')
      28 |         .set('X-Client-Platform', 'mobile')
    > 29 |         .expect(200);
         |          ^
      30 |     });
      31 |
      32 |     it('should allow unauthenticated access to /health from any platform', async () => {

      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:29:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Platform Access (e2e) › Public routes bypass › should allow unauthenticated access to /health from any platform

    expected 200 "OK", got 404 "Not Found"

      34 |         .get('/health')
      35 |         .set('X-Client-Platform', 'desktop')
    > 36 |         .expect(200);
         |          ^
      37 |
      38 |       await request(app.getHttpServer()).get('/health').set('X-Client-Platform', 'web').expect(200);
      39 |     });

      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:36:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

  ● E23 Platform Access (e2e) › Platform header handling › should work without X-Client-Platform header (defaults to web)

    expected 200 "OK", got 404 "Not Found"

      53 |         .get('/health')
      54 |         // No X-Client-Platform header
    > 55 |         .expect(200);
         |          ^
      56 |     });
      57 |   });
      58 | });

      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:55:10)
      ----
      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)
      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)

FAIL e2e/pos-imports-bisect.e2e-spec.ts
  ● PosModule imports bisect › should test all PosModule imports together

    Nest can't resolve dependencies of the EfrisService (PrismaService, ?). Please make sure that the argument ConfigService at index [1] is available in the EfrisModule context.

    Potential solutions:
    - Is EfrisModule a valid NestJS module?
    - If ConfigService is a provider, is it part of the current EfrisModule?
    - If ConfigService is exported from a separate @Module, is that module imported within EfrisModule?
      @Module({
        imports: [ /* the Module containing ConfigService */ ]
      })

      14 | describe('PosModule imports bisect', () => {
      15 |   it('should test all PosModule imports together', async () => {
    > 16 |     const moduleRef = await createE2ETestingModule({
         |                       ^
      17 |       imports: [
      18 |         EfrisModule,
      19 |         ConfigModule,

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/pos-imports-bisect.e2e-spec.ts:16:23)

FAIL e2e/inventory-kpis.e2e-spec.ts
  ● InventoryModule + KpisModule test › should compile these modules together

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

       8 | describe('InventoryModule + KpisModule test', () => {
       9 |   it('should compile these modules together', async () => {
    > 10 |     const moduleRef = await createE2ETestingModule({
         |                       ^
      11 |       imports: [InventoryModule, KpisModule],
      12 |     });
      13 |     await moduleRef.init();

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 2)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/inventory-kpis.e2e-spec.ts:10:23)

FAIL e2e/pos-isolation.e2e-spec.ts
  ● PosModule isolation test › should compile PosModule to show exact failing provider

    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.

    Potential solutions:
    - Is InventoryModule a valid NestJS module?
    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?
    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?
      @Module({
        imports: [ /* the Module containing CacheInvalidationService */ ]
      })

       8 | describe('PosModule isolation test', () => {
       9 |   it('should compile PosModule to show exact failing provider', async () => {
    > 10 |     const moduleRef = await createE2ETestingModule({
         |                       ^
      11 |       imports: [PosModule],
      12 |     });
      13 |     await moduleRef.init();

      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)
      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)
      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)
          at async Promise.all (index 1)
      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)
      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)
      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13
          at async Promise.all (index 3)
      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)
      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13
          at async Promise.all (index 5)
      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)
      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)
      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)
      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)
      at Object.<anonymous> (e2e/pos-isolation.e2e-spec.ts:10:23)


Test Suites: 44 failed, 13 passed, 57 total
Tests:       328 failed, 1 skipped, 93 passed, 422 total
Snapshots:   0 total
Time:        67.194 s
Ran all test suites.
Test results written to: .e2e-results-t1.7-before.json
Jest did not exit one second after the test run has completed.

'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.
