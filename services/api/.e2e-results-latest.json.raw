âœ“ E2E environment loaded
  DATABASE_URL: postgresql://postgres:***@localhost:5432/chefcloud_test
{"level":"info","time":1766893822664,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":917,"requestId":"a829f2ed-9465-4017-b361-0d2a42c5abe4","route":"/auth/login"}
{"level":"info","time":1766893822779,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":109,"requestId":"043b7f39-bb40-4246-a2fb-cafd04b7c1fe","route":"/auth/login"}
{"level":"info","time":1766893822788,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/menu/items","statusCode":400,"durationMs":8,"requestId":"f2777cc8-e56c-4146-9e3e-b7f520dcdf54","orgId":"00000000-0000-4000-8000-000000000001","route":"/menu/items"}
{"level":"info","time":1766893826037,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":129,"requestId":"ad439b9c-44cd-423f-b1b5-d851ca933786","route":"/auth/login"}
{"level":"info","time":1766893826163,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":123,"requestId":"35c08301-b1fc-4301-98cc-73015a8d119a","route":"/auth/login"}
{"level":"info","time":1766893826309,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":144,"requestId":"9b165589-61db-4f5c-bfa7-ea3adec21da4","route":"/auth/login"}
{"level":"info","time":1766893826438,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":126,"requestId":"1cd7361f-ba83-4567-b86c-cefe75e046bd","route":"/auth/login"}
{"level":"info","time":1766893826478,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":200,"durationMs":16,"requestId":"6484c53d-f517-45a9-9b82-5ceb781912c6","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766893826495,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":403,"durationMs":12,"requestId":"e864e7e0-c68c-47bc-8cd4-5fefc566be17","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766893826502,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":403,"durationMs":4,"requestId":"83735124-d9f7-4606-96c4-c494fc88d386","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766893826508,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":403,"durationMs":4,"requestId":"59e9b9a3-c9fd-4a2a-bb86-a3039da6c721","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766893826511,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":401,"durationMs":1,"requestId":"439ffd65-5b17-4ca8-9ceb-b655c96fe6ae","route":"/access/matrix"}
{"level":"info","time":1766893826523,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":200,"durationMs":9,"requestId":"d107101d-f441-4f27-97b5-4d3f7408326d","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766893826537,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":500,"durationMs":11,"requestId":"9662e1df-1f6e-4e98-bd50-05c9cf8920a2","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766893826547,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":403,"durationMs":6,"requestId":"e9486373-2b5a-45fa-8f00-7fa07a1a113f","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766893826554,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":403,"durationMs":5,"requestId":"2467e2e0-9840-4733-8e7a-33420384e01f","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766893826557,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":401,"durationMs":1,"requestId":"1f59919d-8a06-46c3-974e-32e4a2d96313","route":"/access/matrix"}
{"level":"info","time":1766893826718,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":158,"requestId":"45d166ba-c19f-4143-85de-ef901d5a3d28","route":"/auth/login"}
{"level":"info","time":1766893826829,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":108,"requestId":"8e271c93-cb83-4a9e-9d5a-bd928a5d624b","route":"/auth/login"}
{"level":"info","time":1766893826966,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":134,"requestId":"a027ca9a-214b-4bbe-8c45-be1521eca7e4","route":"/auth/login"}
{"level":"info","time":1766893827074,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":105,"requestId":"b418bd97-05da-4d14-a805-20bd7073f80d","route":"/auth/login"}
{"level":"info","time":1766893827182,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":105,"requestId":"e8190ab9-3801-4254-a3a1-ba07a22fb072","route":"/auth/login"}
{"level":"info","time":1766893827293,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":109,"requestId":"3bc4597b-a623-4e85-a1f7-55964f77078b","route":"/auth/login"}
{"level":"info","time":1766893827302,"service":"chefcloud-api","env":"test","type":"http_request","method":"PATCH","url":"/access/matrix","statusCode":200,"durationMs":7,"requestId":"183218be-739a-42f7-8a56-e80a10c736c3","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766893827309,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/access/matrix","statusCode":200,"durationMs":5,"requestId":"1639ef0c-41b7-484a-aba8-78fe74b2a5e3","orgId":"00000000-0000-4000-8000-000000000001","route":"/access/matrix"}
{"level":"info","time":1766893834407,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":140,"requestId":"e06d056a-3f4f-4438-a463-c2ea6f232079","route":"/auth/login"}
{"level":"info","time":1766893834463,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr/assign","statusCode":500,"durationMs":9,"requestId":"1d8086e5-e835-40dc-b923-6e7e335ec250","orgId":"00000000-0000-4000-8000-000000000001","route":"/auth/msr/assign"}
{"level":"info","time":1766893834471,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr/assign","statusCode":500,"durationMs":5,"requestId":"a6a1c772-7ba0-4875-940c-dad759f68cbc","orgId":"00000000-0000-4000-8000-000000000001","route":"/auth/msr/assign"}
{"level":"info","time":1766893834474,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr/assign","statusCode":401,"durationMs":1,"requestId":"1dacb88f-757f-40fc-a803-89f866a7f524","route":"/auth/msr/assign"}
{"level":"info","time":1766893834486,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr-swipe","statusCode":400,"durationMs":4,"requestId":"1f208b71-4fed-40c4-993d-8dc02c5533b9","route":"/auth/msr-swipe"}
{"level":"info","time":1766893834495,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/auth/msr/cards","statusCode":200,"durationMs":7,"requestId":"faef9b86-4020-4abd-81d4-792ebcf5b8f7","orgId":"00000000-0000-4000-8000-000000000001","route":"/auth/msr/cards"}
{"level":"info","time":1766893834513,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/auth/msr/cards","statusCode":401,"durationMs":1,"requestId":"7649feba-35ab-4c77-8828-5f2a9d3cedba","route":"/auth/msr/cards"}
{"level":"info","time":1766893834539,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr/revoke","statusCode":500,"durationMs":23,"requestId":"92475d21-170a-4cb4-9bb2-f52ea924029c","orgId":"00000000-0000-4000-8000-000000000001","route":"/auth/msr/revoke"}
{"level":"info","time":1766893834543,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr/revoke","statusCode":401,"durationMs":1,"requestId":"1941dca2-0ff8-4010-9d75-077ac065daf7","route":"/auth/msr/revoke"}
{"level":"info","time":1766893837719,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":122,"requestId":"f241da35-ab10-4965-8609-cbf0d5f3c752","route":"/auth/login"}
{"level":"info","time":1766893837725,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":3,"requestId":"e7040479-adaa-4803-b329-44e5852f97df","route":"/auth/login"}
{"level":"info","time":1766893837834,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":107,"requestId":"9981d9b5-d945-4f8d-b967-1d8da7101069","route":"/auth/login"}
{"level":"info","time":1766893837838,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":400,"durationMs":2,"requestId":"732cda08-b30a-467e-b859-0f55a9728635","route":"/auth/login"}
{"level":"info","time":1766893837847,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/pin-login","statusCode":401,"durationMs":5,"requestId":"991c8850-2156-4474-96d0-9d9ad5f3d382","route":"/auth/pin-login"}
{"level":"info","time":1766893837851,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/pin-login","statusCode":401,"durationMs":2,"requestId":"4bdcbd65-795a-40d2-9122-e5bf6c013ec4","route":"/auth/pin-login"}
{"level":"info","time":1766893837856,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/pin-login","statusCode":401,"durationMs":3,"requestId":"7e7d3e3c-86c2-479d-afad-220ab186407e","route":"/auth/pin-login"}
{"level":"info","time":1766893837860,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/pin-login","statusCode":401,"durationMs":2,"requestId":"9ce6ce68-9682-43e4-bf61-bf998f04d66b","route":"/auth/pin-login"}
{"level":"info","time":1766893837865,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr-swipe","statusCode":400,"durationMs":3,"requestId":"af8cd734-1c4f-4171-942a-936f35293b66","route":"/auth/msr-swipe"}
{"level":"info","time":1766893837869,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr-swipe","statusCode":400,"durationMs":1,"requestId":"fa5f7945-e9ee-41f4-b9c7-f560374ff4cf","route":"/auth/msr-swipe"}
{"level":"info","time":1766893837873,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/msr-swipe","statusCode":400,"durationMs":1,"requestId":"23d8f906-04e5-416b-8e7d-0f8e8a87c3fa","route":"/auth/msr-swipe"}
{"level":"info","time":1766893837981,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":106,"requestId":"5ddc25ce-405d-449a-9d45-d956414b30af","route":"/auth/login"}
{"level":"info","time":1766893837991,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/me","statusCode":200,"durationMs":8,"requestId":"5df62569-e29b-47df-8598-1fd3cdef06dd","orgId":"00000000-0000-4000-8000-000000000001","route":"/me"}
{"level":"info","time":1766893837994,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/me","statusCode":401,"durationMs":0,"requestId":"0e5a7b15-0ffe-404c-9d83-9f4ea1ccfa10","route":"/me"}
{"level":"info","time":1766893837997,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/me","statusCode":401,"durationMs":1,"requestId":"8e00940a-611b-4fe8-bd3e-60f2d9b4fd3b","route":"/me"}
{"level":"info","time":1766893838134,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":135,"requestId":"2c3efb03-8765-4d5a-b73c-00399c758721","route":"/auth/login"}
{"level":"info","time":1766893838144,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/devices/register","statusCode":201,"durationMs":7,"requestId":"c85eb27a-e714-4053-a2f2-e0a2afffd43f","orgId":"00000000-0000-4000-8000-000000000001","route":"/devices/register"}
{"level":"info","time":1766893838147,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/devices/register","statusCode":401,"durationMs":0,"requestId":"3d6147a6-1026-45d0-ab1c-ef7347e868c5","route":"/devices/register"}
{"level":"info","time":1766893842580,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/dev/orgs","statusCode":404,"durationMs":8,"requestId":"a863c8e2-8cf1-4e20-b1ef-af30b3a7ad40"}
{"level":"info","time":1766893842588,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/dev/orgs","statusCode":404,"durationMs":5,"requestId":"925ff57b-f8eb-4b66-8ae1-2dc1aabc139a"}
{"level":"info","time":1766893842590,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/dev/subscriptions","statusCode":404,"durationMs":0,"requestId":"101d85a6-8410-4740-a7aa-ff14a1b41aee"}
{"level":"info","time":1766893842594,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/dev/plans","statusCode":404,"durationMs":2,"requestId":"f64b1cdc-1e5f-477c-8060-9ee5561896e9"}
{"level":"info","time":1766893842632,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/dev/plans","statusCode":404,"durationMs":2,"requestId":"8b051870-1a26-4452-95f2-e1e4242a9508"}
{"level":"info","time":1766893842755,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":121,"requestId":"95f11cc0-2ed7-4742-80e6-17c58c69de73","route":"/auth/login"}
{"level":"info","time":1766893842763,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":404,"durationMs":6,"requestId":"9ab20340-5f6c-4593-9831-515dfc0a0e88","orgId":"00000000-0000-4000-8000-000000000001","route":"/billing/subscription"}
{"level":"info","time":1766893842875,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":109,"requestId":"2cb5979b-e2ad-4e19-9df8-c215022b2a53","route":"/auth/login"}
{"level":"info","time":1766893842881,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":403,"durationMs":5,"requestId":"db504066-5d73-4dd8-98d5-7dfe6a024640","orgId":"00000000-0000-4000-8000-000000000001","route":"/billing/subscription"}
{"level":"info","time":1766893843003,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":119,"requestId":"0dffbeae-0fc0-40b8-9805-426dcc32a981","route":"/auth/login"}
{"level":"info","time":1766893843010,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/billing/plan/change","statusCode":403,"durationMs":5,"requestId":"c4d53f26-7c89-4f26-b925-08083b71c3eb","orgId":"00000000-0000-4000-8000-000000000001","route":"/billing/plan/change"}
{"level":"info","time":1766893843129,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":110,"requestId":"ca71e99d-08f5-4dbb-9935-69ef80910696","route":"/auth/login"}
{"level":"info","time":1766893843136,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/billing/cancel","statusCode":403,"durationMs":5,"requestId":"530b1c8a-e0bc-4ab0-ac9f-61db37c0e330","orgId":"00000000-0000-4000-8000-000000000001","route":"/billing/cancel"}
{"level":"info","time":1766893846314,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":124,"requestId":"63e29de3-4b3b-4978-8764-5adda534ac83","route":"/auth/login"}
{"level":"info","time":1766893846321,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/menu/items","statusCode":400,"durationMs":5,"requestId":"32b5520e-e069-4bee-b54b-8d98ec996949","orgId":"00000000-0000-4000-8000-000000000001","route":"/menu/items"}
{"level":"info","time":1766893849151,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":116,"requestId":"f5356ad9-8e02-4f01-a7ad-8e0a5a06506b","route":"/auth/login"}
{"level":"info","time":1766893849162,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/inventory/items/beef-cmjo545si0037fwk5b46m83e0","statusCode":404,"durationMs":6,"requestId":"91bc59c5-fd56-4db2-ae35-8ad986a90f84"}
{"level":"info","time":1766893852546,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":120,"requestId":"73e6b351-0602-4294-a1f9-5ebbf140315b","route":"/auth/login"}
{"level":"info","time":1766893852659,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":110,"requestId":"5410bcef-61dc-4eff-9ce7-3202626ca0cd","route":"/auth/login"}
{"level":"info","time":1766893852670,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/workforce/attendance/clock-in","statusCode":404,"durationMs":6,"requestId":"f99cde5c-4ec7-4daf-ba68-b2d82cdfcff8"}
[BOOTSTRAP] Starting ChefCloud API {
  NODE_ENV: 'test',
  PORT: '4050',
  DATABASE_URL: '***configured***',
  JWT_SECRET: '***configured***'
}
[BOOTSTRAP] Creating NestJS application...
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPrismaModule dependencies initialized[39m[38;5;3m +69ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPassportModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[CacheService] [39m[32mCacheService initialized with Redis fallback to memory[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[SseRateLimiterGuard] [39m[32mSSE Rate Limiter initialized: 60/min per user/IP, max 2 concurrent/user[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThrottlerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMetaModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCurrencyModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTaxModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mObservabilityModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCommonModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[SseRateLimiterGuard] [39m[32mSSE Rate Limiter initialized: 60/min per user/IP, max 2 concurrent/user[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[OwnerService] [39m[32m[SMTP] Configured: localhost:1025 (secure=false)[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDemoModule dependencies initialized[39m[38;5;3m +6ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PaymentsService] [39m[32mPayment adapters running in SANDBOX mode[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMeModule dependencies initialized[39m[38;5;3m +5ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSettingsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDeviceModule dependencies initialized[39m[38;5;3m +5ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMenuModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFloorModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPromotionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAccountingModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mShiftTemplatesModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mShiftSchedulesModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mShiftAssignmentsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDashboardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFeedbackModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFinanceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSupportModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mThresholdsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAccessModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDocumentsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mKpisModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mStreamModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mWorkforceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEfrisModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mReservationsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mWebAuthnModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mKdsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHardwareModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPaymentsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOpsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAnalyticsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mBillingModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mBookingsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mBadgesModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCashModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAntiTheftModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mReportsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPurchasingModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAlertsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOwnerModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mStaffModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mInventoryModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mFranchiseModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPosModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mShiftsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[BOOTSTRAP] NestJS application created
[BOOTSTRAP] CORS enabled for 1 origin(s): http://localhost:3000
[BOOTSTRAP] Binding to 0.0.0.0:4050...
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mHealthController {/api/health}:[39m[38;5;3m +49ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/health, GET} route[39m[38;5;3m +3ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWebhooksController {/webhooks}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webhooks/mtn, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webhooks/airtel, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webhooks/billing, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMetricsController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/metrics, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mHealthController {/}:[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/healthz, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/readiness, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/login, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/pin-login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/msr-swipe, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/enroll-badge, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/logout, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/logout-all, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/sessions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/msr/assign, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/msr/revoke, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/msr/cards, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMeController {/me}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDeviceController {/devices}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/devices/register, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mMenuController {/menu}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/items, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/items, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/items/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/modifier-groups, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/menu/items/:id/groups/:groupId, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mFloorController {/floor}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/floor, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/floor/availability, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mTableController {/tables}:[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/tables/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPosController {/pos/orders}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/send-to-kitchen, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/modify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/void, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/close, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/discount, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/pos/orders/:id/post-close-void, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mEfrisController {/fiscal}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/fiscal/push/:orderId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/fiscal/retry/:orderId, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mInventoryController {/inventory}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/items, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/items, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/items/:id, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/levels, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/adjustments, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mRecipesController {/inventory/recipes}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/recipes/:menuItemId, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/recipes/:menuItemId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWastageController {/inventory/wastage}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/wastage, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mCountsController {/inventory/counts}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/counts/begin, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/counts/:id/submit, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/counts/current, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mReconciliationController {/inventory/reconciliation}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/reconciliation, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/reconciliation/summary, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mLowStockAlertsController {/inventory/low-stock}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/low-stock/alerts, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/low-stock/config, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/low-stock/config, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/low-stock/config/:configId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mTemplatesController {/inventory/templates}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/templates, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/templates/:packId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/templates/apply, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mImportController {/inventory/import}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/import, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/inventory/import/template, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mKpisController {/stream/kpis}:[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/stream/kpis, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPromotionsController {/promotions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/promotions, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/promotions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/promotions/:id/approve, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/promotions/:id/toggle, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAccountingController {/accounting}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendors, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendors, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendor-bills, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendor-bills/:billId/open, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/vendor-payments, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/ap/aging, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/ar/aging, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/trial-balance, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/pnl, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/balance-sheet, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPeriodsController {/accounting/periods}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/periods, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/periods/:id/lock, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/periods, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/periods/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBankRecController {/accounting/bank}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/accounts, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/accounts, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/:accountId/import-csv, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/match, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/:accountId/auto-match, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/accounting/bank/unreconciled, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mKdsController {/kds}:[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/queue, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/sla-config/:station, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/sla-config/:station, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/tickets/:id/mark-ready, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/kds/tickets/:id/recall, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mShiftsController {/shifts}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shifts/open, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shifts/:id/close, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shifts/current, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shifts/history, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mShiftTemplatesController {/shift-templates}:[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates/:id, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-templates/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mShiftSchedulesController {/shift-schedules}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules/by-branch/:branchId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules/current/:branchId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-schedules/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mShiftAssignmentsController {/shift-assignments}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-assignments, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-assignments/by-schedule/:scheduleId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-assignments/by-user/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/shift-assignments/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mReportsController {/reports}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/x, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/z/:shiftId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/subscriptions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/subscriptions, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/subscriptions/:id, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reports/subscriptions/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDashboardsController {/dash}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/leaderboards/voids, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/leaderboards/discounts, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/no-drinks-rate, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/late-void-heatmap, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dash/anomalies/recent, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mFranchiseController {/franchise}:[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/analytics/overview, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/analytics/rankings, GET} route[39m[38;5;3m +3ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/overview, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/rankings, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/forecast/items, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/procurement/suggest, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/procurement/generate-drafts, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/procurement/drafts, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/procurement/approve, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/branch-metrics, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets, PUT} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/budgets/variance, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/forecast, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/export/overview.csv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/export/rankings.csv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/export/budgets.csv, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/franchise/export/budgets-variance.csv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mStaffController {/staff}:[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/waiters/metrics, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/waiters/rankings, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/waiters/top-performers, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/waiters/risk-staff, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mStaffInsightsController {/staff/insights}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/rankings, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/employee-of-:period, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/awards, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/awards, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/insights/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPromotionInsightsController {/staff/promotion-suggestions}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/promotion-suggestions/preview, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/promotion-suggestions/generate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/promotion-suggestions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/staff/promotion-suggestions/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAntiTheftController {/anti-theft}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/anti-theft/summary, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mFeedbackController {/feedback}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/public, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/analytics/nps-summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/analytics/breakdown, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/feedback/analytics/top-comments, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAnalyticsController {/analytics}:[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/daily, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/top-items, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/staff/voids, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/staff/discounts, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/orders/no-drinks, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/late-voids, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/anomalies, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/daily-metrics, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/risk-summary, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/risk-events, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/financial-summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/branch-ranking, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/cogs-timeseries, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/stock-valuation, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/analytics/wastage-summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBudgetController {/finance/budgets}:[39m[38;5;3m +2ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/summary, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/franchise, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/update-actuals, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/insights, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/insights/franchise, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/finance/budgets/reminders/summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPurchasingController {/purchasing}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/purchasing/po, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/purchasing/po/:id/place, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/purchasing/po/:id/receive, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWebAuthnController {/webauthn}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webauthn/registration/options, POST} route[39m[38;5;3m +2ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webauthn/registration/verify, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webauthn/authentication/options, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/webauthn/authentication/verify, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPaymentsController {/payments}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payments/intents, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payments/intents/:intentId/cancel, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAlertsController {/alerts}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/alerts/channels, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/alerts/schedules, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/alerts/run-now/:id, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mReservationsController {/reservations}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations/:id/confirm, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations/:id/cancel, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations/:id/seat, POST} route[39m[38;5;3m +2ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/reservations/summary, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOpsController {/ops}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/ready, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/metrics, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/diag/snapshot, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/apikeys, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/apikeys, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/apikeys/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags/:key, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags/:key/toggle, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags/:key/kill, POST} route[39m[38;5;3m +2ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/flags/:key/audit, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/maintenance, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/maintenance/active, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/ops/maintenance, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSupportController {/support}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/support/sessions, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/support/ingest, POST} route[39m[38;5;3m +2ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/support/sessions/events, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSpoutController {/hardware/spout}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/hardware/spout/ingest, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/hardware/spout/devices, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/hardware/spout/calibrate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/hardware/spout/events, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOwnerController {/owner}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/owner/overview, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/owner/digest, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/owner/digest/:id, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/owner/digest/run-now/:id, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mStreamController {/stream}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/stream/spout, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/stream/kds, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mThresholdsController {/thresholds}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/thresholds, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/thresholds, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAccessController {/access}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/access/matrix, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/access/matrix, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/access/matrix/reset-defaults, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBillingController {/billing}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/billing/subscription, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/billing/plan/change, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/billing/cancel, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBadgesController {/badges}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/register, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/assign, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/revoke, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/report-lost, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges/mark-returned, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/badges, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mCashController {/cash}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/till/open, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/till/:id/close, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/movements, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/till/current, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/cash/till/sessions, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSettingsController {/settings}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/currency, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/currency, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/tax-matrix, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/tax-matrix, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/rounding, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/rounding, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/settings/exchange-rate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mBookingsController {/bookings}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/events/:id/publish, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/events/:id/unpublish, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/events/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/:id/confirm, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/:id/cancel, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/bookings/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicBookingsController {/public/bookings}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/bookings/events/:slug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/bookings, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/bookings/:id/pay, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/bookings/:id/status, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mCheckinController {/events}:[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/events/checkin, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/events/booking/:id/ticket, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWorkforceController {/workforce}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/leave/:id/approve, PATCH} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/roster, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/swaps, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/swaps/:id/approve, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/clock/in, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/clock/out, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/time-entries, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/payroll/export, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/workforce/absence-violations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPayrollController {/payroll}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs/:id/approve, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs/:id/post, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/runs/:id/slips, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/payroll/components, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mVersionController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/version, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDocumentsController {/documents}:[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/:id/download, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/purchase-orders/:id, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/pay-slips/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/reservations/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/service-providers/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/documents/links/employees/:id, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis connected to redis://localhost:6379[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis connected to redis://localhost:6379[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis connected to redis://localhost:6379[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis connected to redis://localhost:6379[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis client ready[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis client ready[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis client ready[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[RedisService] [39m[32mRedis client ready[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[PrismaService] [39m[32mPrisma connected with slow-query middleware[39m
[32m[Nest] 15937  - [39m12/28/2025, 3:50:58 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +4ms[39m
{"level":"info","time":1766893858846,"service":"chefcloud-api","env":"test","msg":"ðŸš€ ChefCloud API running on http://0.0.0.0:4050"}
[BOOTSTRAP] Server started successfully
{"level":"info","time":1766893858846,"service":"chefcloud-api","env":"test","msg":"CORS allowlist: http://localhost:3000"}
{"level":30,"time":1766893858962,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"94d672ff-9b37-4bb1-ab7a-10a3f0832fe2","method":"GET","url":"/readiness","body":{}},"requestId":"94d672ff-9b37-4bb1-ab7a-10a3f0832fe2","msg":"REQ GET /readiness"}
{"level":"info","time":1766893858968,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/readiness","statusCode":200,"durationMs":6,"requestId":"a363fdd1-855b-4da6-9db7-e02a3f0a3c16","route":"/readiness"}
{"level":30,"time":1766893858968,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"94d672ff-9b37-4bb1-ab7a-10a3f0832fe2","method":"GET","url":"/readiness","body":{}},"requestId":"94d672ff-9b37-4bb1-ab7a-10a3f0832fe2","requestId":"a363fdd1-855b-4da6-9db7-e02a3f0a3c16","res":{"statusCode":200},"responseTime":5,"msg":"GET /readiness -> 200"}
{"level":30,"time":1766893858976,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"c35da17c-c29f-4440-8b5e-fc1db26d8de6","method":"GET","url":"/readiness","body":{}},"requestId":"c35da17c-c29f-4440-8b5e-fc1db26d8de6","msg":"REQ GET /readiness"}
{"level":"info","time":1766893858977,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/readiness","statusCode":200,"durationMs":1,"requestId":"8b9c53f9-cbb7-4fd9-a59c-3a746824e613","route":"/readiness"}
{"level":30,"time":1766893858977,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"c35da17c-c29f-4440-8b5e-fc1db26d8de6","method":"GET","url":"/readiness","body":{}},"requestId":"c35da17c-c29f-4440-8b5e-fc1db26d8de6","requestId":"8b9c53f9-cbb7-4fd9-a59c-3a746824e613","res":{"statusCode":200},"responseTime":1,"msg":"GET /readiness -> 200"}
{"level":30,"time":1766893859019,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"c5f2e545-9af3-4d22-aa2e-fb7312a5a45d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c5f2e545-9af3-4d22-aa2e-fb7312a5a45d","msg":"REQ GET /billing/subscription"}
{"level":"info","time":1766893859028,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":9,"requestId":"c12ce892-7e6d-4e5d-930e-12ad7776c4a9","route":"/billing/subscription"}
{"level":40,"time":1766893859027,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"c5f2e545-9af3-4d22-aa2e-fb7312a5a45d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c5f2e545-9af3-4d22-aa2e-fb7312a5a45d","requestId":"c12ce892-7e6d-4e5d-930e-12ad7776c4a9","res":{"statusCode":401},"responseTime":8,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766893859034,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"eca915a2-f133-478a-9bae-b722b8152192","method":"GET","url":"/billing/subscription","body":{}},"requestId":"eca915a2-f133-478a-9bae-b722b8152192","msg":"REQ GET /billing/subscription"}
{"level":"info","time":1766893859039,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":5,"requestId":"6a3e999f-b55c-4b7c-91c2-3d4fe26435f0","route":"/billing/subscription"}
{"level":40,"time":1766893859039,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"eca915a2-f133-478a-9bae-b722b8152192","method":"GET","url":"/billing/subscription","body":{}},"requestId":"eca915a2-f133-478a-9bae-b722b8152192","requestId":"6a3e999f-b55c-4b7c-91c2-3d4fe26435f0","res":{"statusCode":401},"responseTime":5,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766893859040,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"1ee602ef-9a99-4af1-905f-4637e79ef38b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1ee602ef-9a99-4af1-905f-4637e79ef38b","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859041,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"1ee602ef-9a99-4af1-905f-4637e79ef38b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1ee602ef-9a99-4af1-905f-4637e79ef38b","requestId":"3a6a5532-036b-40ea-9019-7914caf0caac","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766893859042,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"5dceb4ba-99a1-44fb-a0a6-981b700a8368","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5dceb4ba-99a1-44fb-a0a6-981b700a8368","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859042,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"5dceb4ba-99a1-44fb-a0a6-981b700a8368","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5dceb4ba-99a1-44fb-a0a6-981b700a8368","requestId":"71c7aa97-8a86-4953-94c7-6bae5aa9ce3d","res":{"statusCode":401},"responseTime":0,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766893859043,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"98a134b9-519c-4419-b0d1-31cb8e5a7d7a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"98a134b9-519c-4419-b0d1-31cb8e5a7d7a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859044,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"98a134b9-519c-4419-b0d1-31cb8e5a7d7a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"98a134b9-519c-4419-b0d1-31cb8e5a7d7a","requestId":"b5a142c7-65a9-42ed-9682-e5a6d7721327","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766893859044,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"02a13d42-49f5-49e3-9333-bb5dc80a2fb8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"02a13d42-49f5-49e3-9333-bb5dc80a2fb8","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859045,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"02a13d42-49f5-49e3-9333-bb5dc80a2fb8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"02a13d42-49f5-49e3-9333-bb5dc80a2fb8","requestId":"3c20da49-a01d-4e32-82be-7d45d2df03e4","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766893859046,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"f9ffd645-b806-4553-9b20-a796d2575d3a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"f9ffd645-b806-4553-9b20-a796d2575d3a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859047,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"f9ffd645-b806-4553-9b20-a796d2575d3a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"f9ffd645-b806-4553-9b20-a796d2575d3a","requestId":"c0eb82f4-96c3-4fd4-82f4-e6d141e786b7","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766893859048,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"1d5e69de-1016-4340-a347-a4ad93552113","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1d5e69de-1016-4340-a347-a4ad93552113","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859049,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"1d5e69de-1016-4340-a347-a4ad93552113","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1d5e69de-1016-4340-a347-a4ad93552113","requestId":"d6e56730-6649-41d1-a305-1bfb7473d1ca","res":{"statusCode":401},"responseTime":0,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766893859049,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"cced816f-c0b8-4ca0-aeb9-69868d61b4d2","method":"GET","url":"/billing/subscription","body":{}},"requestId":"cced816f-c0b8-4ca0-aeb9-69868d61b4d2","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859050,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"cced816f-c0b8-4ca0-aeb9-69868d61b4d2","method":"GET","url":"/billing/subscription","body":{}},"requestId":"cced816f-c0b8-4ca0-aeb9-69868d61b4d2","requestId":"62b9f483-2336-49de-bc1c-e95a50e90c82","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766893859051,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"36a25add-1cea-4647-b076-ba33be3a9c4b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"36a25add-1cea-4647-b076-ba33be3a9c4b","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859052,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"36a25add-1cea-4647-b076-ba33be3a9c4b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"36a25add-1cea-4647-b076-ba33be3a9c4b","requestId":"93456fe8-e687-4688-95b2-5b7b7e1c5568","res":{"statusCode":401},"responseTime":1,"msg":"GET /billing/subscription -> 401"}
{"level":30,"time":1766893859052,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"805acf24-578e-4eb4-bdd5-1692bc3508a9","method":"GET","url":"/billing/subscription","body":{}},"requestId":"805acf24-578e-4eb4-bdd5-1692bc3508a9","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859053,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"805acf24-578e-4eb4-bdd5-1692bc3508a9","method":"GET","url":"/billing/subscription","body":{}},"requestId":"805acf24-578e-4eb4-bdd5-1692bc3508a9","requestId":"61f95b51-bcd8-4a3a-8e27-efe67e5363f7","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859054,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"0700e2ef-4d34-4eb8-9d98-8049cbbd535a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0700e2ef-4d34-4eb8-9d98-8049cbbd535a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859055,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"0700e2ef-4d34-4eb8-9d98-8049cbbd535a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0700e2ef-4d34-4eb8-9d98-8049cbbd535a","requestId":"08215ae2-bf11-41dd-9433-5b0dc949b81a","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859055,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"1fbbcf7e-8a1e-496d-8dc9-ff73a787cd81","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1fbbcf7e-8a1e-496d-8dc9-ff73a787cd81","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859056,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"1fbbcf7e-8a1e-496d-8dc9-ff73a787cd81","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1fbbcf7e-8a1e-496d-8dc9-ff73a787cd81","requestId":"6f81ada7-839a-4903-b3bd-12eb66c7ee11","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859056,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"e15d5bb5-e7ec-4450-ba60-bebbaa4f2a2c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"e15d5bb5-e7ec-4450-ba60-bebbaa4f2a2c","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859057,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"e15d5bb5-e7ec-4450-ba60-bebbaa4f2a2c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"e15d5bb5-e7ec-4450-ba60-bebbaa4f2a2c","requestId":"dafdb4b3-7953-480a-8fd9-c1c6630ebac8","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859058,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"7e866c9d-5ff2-4dca-8f85-02350b367ecc","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7e866c9d-5ff2-4dca-8f85-02350b367ecc","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859059,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"7e866c9d-5ff2-4dca-8f85-02350b367ecc","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7e866c9d-5ff2-4dca-8f85-02350b367ecc","requestId":"aeadb3f1-ca3b-4a06-9bba-88aede45824f","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859059,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"4372e128-4ce2-43f3-8c54-0fe3f7bf3a32","method":"GET","url":"/billing/subscription","body":{}},"requestId":"4372e128-4ce2-43f3-8c54-0fe3f7bf3a32","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859060,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"4372e128-4ce2-43f3-8c54-0fe3f7bf3a32","method":"GET","url":"/billing/subscription","body":{}},"requestId":"4372e128-4ce2-43f3-8c54-0fe3f7bf3a32","requestId":"a0353737-3082-4730-9b5b-0d77baa30407","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859060,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"385ff3eb-85ed-41a4-9d73-42bfa98c94b8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"385ff3eb-85ed-41a4-9d73-42bfa98c94b8","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859061,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"385ff3eb-85ed-41a4-9d73-42bfa98c94b8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"385ff3eb-85ed-41a4-9d73-42bfa98c94b8","requestId":"a1d95b8d-86e7-4b87-b090-f7641668cb32","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859062,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"41d42e46-ee5e-49a0-8af0-921a7eab86c5","method":"GET","url":"/billing/subscription","body":{}},"requestId":"41d42e46-ee5e-49a0-8af0-921a7eab86c5","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859062,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"41d42e46-ee5e-49a0-8af0-921a7eab86c5","method":"GET","url":"/billing/subscription","body":{}},"requestId":"41d42e46-ee5e-49a0-8af0-921a7eab86c5","requestId":"684ff0aa-f064-435c-94b2-7c81e85434ba","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859063,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"189bb7f0-68fb-41af-8821-3a19ada9f5e7","method":"GET","url":"/billing/subscription","body":{}},"requestId":"189bb7f0-68fb-41af-8821-3a19ada9f5e7","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859063,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"189bb7f0-68fb-41af-8821-3a19ada9f5e7","method":"GET","url":"/billing/subscription","body":{}},"requestId":"189bb7f0-68fb-41af-8821-3a19ada9f5e7","requestId":"319f136a-8181-40d3-b30b-d9b9edc6438b","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859064,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"a27ec94a-e70c-46e9-bb33-960d4126bc4c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a27ec94a-e70c-46e9-bb33-960d4126bc4c","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859065,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"a27ec94a-e70c-46e9-bb33-960d4126bc4c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a27ec94a-e70c-46e9-bb33-960d4126bc4c","requestId":"833f2c14-2ead-4060-be40-40bcb9344655","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859065,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"74809001-d2fd-4925-823d-18530d42d203","method":"GET","url":"/billing/subscription","body":{}},"requestId":"74809001-d2fd-4925-823d-18530d42d203","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859067,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"74809001-d2fd-4925-823d-18530d42d203","method":"GET","url":"/billing/subscription","body":{}},"requestId":"74809001-d2fd-4925-823d-18530d42d203","requestId":"157a95f5-a0e1-4c53-a9eb-523e0bfe3b6f","res":{"statusCode":429},"responseTime":2,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859068,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"2172db17-97fd-47f8-ac80-0d57d27101eb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2172db17-97fd-47f8-ac80-0d57d27101eb","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859069,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"2172db17-97fd-47f8-ac80-0d57d27101eb","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2172db17-97fd-47f8-ac80-0d57d27101eb","requestId":"d5870c2c-3bac-437b-ae60-0c391f67cad6","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859069,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"f03c9d42-5e6f-4ddc-b8c6-314c79f3bc53","method":"GET","url":"/billing/subscription","body":{}},"requestId":"f03c9d42-5e6f-4ddc-b8c6-314c79f3bc53","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859070,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"f03c9d42-5e6f-4ddc-b8c6-314c79f3bc53","method":"GET","url":"/billing/subscription","body":{}},"requestId":"f03c9d42-5e6f-4ddc-b8c6-314c79f3bc53","requestId":"fbd75711-eedf-4476-8e00-81ec6b01e71e","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859071,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"a432d40d-2472-4d20-a1d2-b757b9a7d602","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a432d40d-2472-4d20-a1d2-b757b9a7d602","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859071,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"a432d40d-2472-4d20-a1d2-b757b9a7d602","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a432d40d-2472-4d20-a1d2-b757b9a7d602","requestId":"78698a9e-6d00-4377-be31-b936b5318f62","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859072,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"a7de6a23-dd75-4b6c-8da7-410a93bda715","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a7de6a23-dd75-4b6c-8da7-410a93bda715","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859073,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"a7de6a23-dd75-4b6c-8da7-410a93bda715","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a7de6a23-dd75-4b6c-8da7-410a93bda715","requestId":"4ba221b5-b547-456c-ae77-02aaaa300162","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859073,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"8f56d5ae-1b14-41d4-a8cd-3e1f2e6a3b3a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"8f56d5ae-1b14-41d4-a8cd-3e1f2e6a3b3a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859074,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"8f56d5ae-1b14-41d4-a8cd-3e1f2e6a3b3a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"8f56d5ae-1b14-41d4-a8cd-3e1f2e6a3b3a","requestId":"d23ffde6-46c1-4903-96b2-1d2d37c9ce88","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859041,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"3a6a5532-036b-40ea-9019-7914caf0caac","route":"/billing/subscription"}
{"level":"info","time":1766893859043,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"71c7aa97-8a86-4953-94c7-6bae5aa9ce3d","route":"/billing/subscription"}
{"level":"info","time":1766893859044,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"b5a142c7-65a9-42ed-9682-e5a6d7721327","route":"/billing/subscription"}
{"level":"info","time":1766893859045,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"3c20da49-a01d-4e32-82be-7d45d2df03e4","route":"/billing/subscription"}
{"level":"info","time":1766893859047,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"c0eb82f4-96c3-4fd4-82f4-e6d141e786b7","route":"/billing/subscription"}
{"level":"info","time":1766893859049,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"d6e56730-6649-41d1-a305-1bfb7473d1ca","route":"/billing/subscription"}
{"level":"info","time":1766893859050,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"62b9f483-2336-49de-bc1c-e95a50e90c82","route":"/billing/subscription"}
{"level":"info","time":1766893859052,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":401,"durationMs":1,"requestId":"93456fe8-e687-4688-95b2-5b7b7e1c5568","route":"/billing/subscription"}
{"level":"info","time":1766893859053,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"61f95b51-bcd8-4a3a-8e27-efe67e5363f7","route":"/billing/subscription"}
{"level":"info","time":1766893859055,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"08215ae2-bf11-41dd-9433-5b0dc949b81a","route":"/billing/subscription"}
{"level":"info","time":1766893859056,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"6f81ada7-839a-4903-b3bd-12eb66c7ee11","route":"/billing/subscription"}
{"level":"info","time":1766893859057,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"dafdb4b3-7953-480a-8fd9-c1c6630ebac8","route":"/billing/subscription"}
{"level":"info","time":1766893859059,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"aeadb3f1-ca3b-4a06-9bba-88aede45824f","route":"/billing/subscription"}
{"level":"info","time":1766893859060,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"a0353737-3082-4730-9b5b-0d77baa30407","route":"/billing/subscription"}
{"level":"info","time":1766893859061,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"a1d95b8d-86e7-4b87-b090-f7641668cb32","route":"/billing/subscription"}
{"level":"info","time":1766893859062,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"684ff0aa-f064-435c-94b2-7c81e85434ba","route":"/billing/subscription"}
{"level":"info","time":1766893859064,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"319f136a-8181-40d3-b30b-d9b9edc6438b","route":"/billing/subscription"}
{"level":"info","time":1766893859065,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"833f2c14-2ead-4060-be40-40bcb9344655","route":"/billing/subscription"}
{"level":"info","time":1766893859067,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":2,"requestId":"157a95f5-a0e1-4c53-a9eb-523e0bfe3b6f","route":"/billing/subscription"}
{"level":"info","time":1766893859069,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"d5870c2c-3bac-437b-ae60-0c391f67cad6","route":"/billing/subscription"}
{"level":"info","time":1766893859070,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"fbd75711-eedf-4476-8e00-81ec6b01e71e","route":"/billing/subscription"}
{"level":"info","time":1766893859071,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"78698a9e-6d00-4377-be31-b936b5318f62","route":"/billing/subscription"}
{"level":"info","time":1766893859073,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"4ba221b5-b547-456c-ae77-02aaaa300162","route":"/billing/subscription"}
{"level":"info","time":1766893859074,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"d23ffde6-46c1-4903-96b2-1d2d37c9ce88","route":"/billing/subscription"}
{"level":"info","time":1766893859076,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"53b8b536-fa38-4349-aafd-9cfa6ab45f86","route":"/billing/subscription"}
{"level":"info","time":1766893859077,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"3b6b6843-dd00-408a-8f7c-53b25b35f60c","route":"/billing/subscription"}
{"level":"info","time":1766893859079,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"a3bf9569-532b-4042-bf29-f5ab5cefa1c8","route":"/billing/subscription"}
{"level":"info","time":1766893859080,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"d81390aa-00cc-4b7a-ba32-c5f044f57795","route":"/billing/subscription"}
{"level":"info","time":1766893859081,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"72d88dea-9fad-41f1-81e4-99eaa7db0417","route":"/billing/subscription"}
{"level":"info","time":1766893859082,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"893202f6-bf98-4f37-81aa-38cf142a9050","route":"/billing/subscription"}
{"level":"info","time":1766893859084,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"8cf7e298-c1f0-465b-a19e-614b98e31643","route":"/billing/subscription"}
{"level":"info","time":1766893859085,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"d4d702f0-c5f1-4077-81fa-0f3c23b9b52c","route":"/billing/subscription"}
{"level":"info","time":1766893859086,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"d7af953d-367a-4a9b-be7b-828bb977aba0","route":"/billing/subscription"}
{"level":"info","time":1766893859087,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"86e32850-1bd5-4b0a-9d7f-28d0293db59a","route":"/billing/subscription"}
{"level":"info","time":1766893859088,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"e2d2e6a7-c35d-440e-b8d7-72b3aa9fc0ae","route":"/billing/subscription"}
{"level":"info","time":1766893859090,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"05de4652-1f1a-44ff-a07c-93bd58522d6a","route":"/billing/subscription"}
{"level":30,"time":1766893859074,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"d8a9483d-03cd-4c1e-95c7-b798940fcfb5","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d8a9483d-03cd-4c1e-95c7-b798940fcfb5","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859076,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"d8a9483d-03cd-4c1e-95c7-b798940fcfb5","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d8a9483d-03cd-4c1e-95c7-b798940fcfb5","requestId":"53b8b536-fa38-4349-aafd-9cfa6ab45f86","res":{"statusCode":429},"responseTime":2,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859076,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"21fd2b06-5ca1-4bfd-bc65-02aed6e6d1f4","method":"GET","url":"/billing/subscription","body":{}},"requestId":"21fd2b06-5ca1-4bfd-bc65-02aed6e6d1f4","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859077,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"21fd2b06-5ca1-4bfd-bc65-02aed6e6d1f4","method":"GET","url":"/billing/subscription","body":{}},"requestId":"21fd2b06-5ca1-4bfd-bc65-02aed6e6d1f4","requestId":"3b6b6843-dd00-408a-8f7c-53b25b35f60c","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859078,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"77eb35fd-83e7-459b-9176-e50d58f6359b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"77eb35fd-83e7-459b-9176-e50d58f6359b","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859079,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"77eb35fd-83e7-459b-9176-e50d58f6359b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"77eb35fd-83e7-459b-9176-e50d58f6359b","requestId":"a3bf9569-532b-4042-bf29-f5ab5cefa1c8","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859080,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"1169adfa-135d-4598-8996-f669f0df6b03","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1169adfa-135d-4598-8996-f669f0df6b03","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859080,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"1169adfa-135d-4598-8996-f669f0df6b03","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1169adfa-135d-4598-8996-f669f0df6b03","requestId":"d81390aa-00cc-4b7a-ba32-c5f044f57795","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859081,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"8ac55289-5c81-49ff-a5b2-1147775a2aec","method":"GET","url":"/billing/subscription","body":{}},"requestId":"8ac55289-5c81-49ff-a5b2-1147775a2aec","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859081,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"8ac55289-5c81-49ff-a5b2-1147775a2aec","method":"GET","url":"/billing/subscription","body":{}},"requestId":"8ac55289-5c81-49ff-a5b2-1147775a2aec","requestId":"72d88dea-9fad-41f1-81e4-99eaa7db0417","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859082,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"fbb21139-80c4-45e6-910f-c80af5ca1cb7","method":"GET","url":"/billing/subscription","body":{}},"requestId":"fbb21139-80c4-45e6-910f-c80af5ca1cb7","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859082,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"fbb21139-80c4-45e6-910f-c80af5ca1cb7","method":"GET","url":"/billing/subscription","body":{}},"requestId":"fbb21139-80c4-45e6-910f-c80af5ca1cb7","requestId":"893202f6-bf98-4f37-81aa-38cf142a9050","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859083,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"16e855b8-0fa4-4841-b8ae-0132026ea19d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"16e855b8-0fa4-4841-b8ae-0132026ea19d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859084,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"16e855b8-0fa4-4841-b8ae-0132026ea19d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"16e855b8-0fa4-4841-b8ae-0132026ea19d","requestId":"8cf7e298-c1f0-465b-a19e-614b98e31643","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859084,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"55768e38-0b57-46e3-bda8-0549697f4d71","method":"GET","url":"/billing/subscription","body":{}},"requestId":"55768e38-0b57-46e3-bda8-0549697f4d71","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859085,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"55768e38-0b57-46e3-bda8-0549697f4d71","method":"GET","url":"/billing/subscription","body":{}},"requestId":"55768e38-0b57-46e3-bda8-0549697f4d71","requestId":"d4d702f0-c5f1-4077-81fa-0f3c23b9b52c","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859085,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"d0669aa5-69c9-40ac-9324-89181a34934c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d0669aa5-69c9-40ac-9324-89181a34934c","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859086,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"d0669aa5-69c9-40ac-9324-89181a34934c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d0669aa5-69c9-40ac-9324-89181a34934c","requestId":"d7af953d-367a-4a9b-be7b-828bb977aba0","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859086,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"bd696720-0ad2-4a6c-a40d-33cbd0a02a68","method":"GET","url":"/billing/subscription","body":{}},"requestId":"bd696720-0ad2-4a6c-a40d-33cbd0a02a68","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859087,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"bd696720-0ad2-4a6c-a40d-33cbd0a02a68","method":"GET","url":"/billing/subscription","body":{}},"requestId":"bd696720-0ad2-4a6c-a40d-33cbd0a02a68","requestId":"86e32850-1bd5-4b0a-9d7f-28d0293db59a","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859088,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"7b66e21a-1ee5-4760-8048-13644db3ee9c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7b66e21a-1ee5-4760-8048-13644db3ee9c","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859088,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"7b66e21a-1ee5-4760-8048-13644db3ee9c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7b66e21a-1ee5-4760-8048-13644db3ee9c","requestId":"e2d2e6a7-c35d-440e-b8d7-72b3aa9fc0ae","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859089,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"7958f507-c965-4c97-bbb4-9d0e0b46835f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7958f507-c965-4c97-bbb4-9d0e0b46835f","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859090,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"7958f507-c965-4c97-bbb4-9d0e0b46835f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7958f507-c965-4c97-bbb4-9d0e0b46835f","requestId":"05de4652-1f1a-44ff-a07c-93bd58522d6a","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859090,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"5559687a-9a6c-4bc6-8df0-ec40542a3310","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5559687a-9a6c-4bc6-8df0-ec40542a3310","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859091,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"5559687a-9a6c-4bc6-8df0-ec40542a3310","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5559687a-9a6c-4bc6-8df0-ec40542a3310","requestId":"1cab4bc7-e465-4f86-99e6-e18f4da5f2b3","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859091,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"1cab4bc7-e465-4f86-99e6-e18f4da5f2b3","route":"/billing/subscription"}
{"level":30,"time":1766893859092,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"40e4a847-ea2f-4bf8-b6d3-13ee3cc08342","method":"GET","url":"/billing/subscription","body":{}},"requestId":"40e4a847-ea2f-4bf8-b6d3-13ee3cc08342","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859093,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"40e4a847-ea2f-4bf8-b6d3-13ee3cc08342","method":"GET","url":"/billing/subscription","body":{}},"requestId":"40e4a847-ea2f-4bf8-b6d3-13ee3cc08342","requestId":"c9989d37-83a7-45d1-a6a9-91dc82c90bcd","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859093,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"c9989d37-83a7-45d1-a6a9-91dc82c90bcd","route":"/billing/subscription"}
{"level":30,"time":1766893859093,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"2f2a5099-608a-496a-9ccb-cd9e80a092ec","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2f2a5099-608a-496a-9ccb-cd9e80a092ec","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859094,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"2f2a5099-608a-496a-9ccb-cd9e80a092ec","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2f2a5099-608a-496a-9ccb-cd9e80a092ec","requestId":"698e2448-5fec-48eb-a984-4f4e9f00cf1d","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859094,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"698e2448-5fec-48eb-a984-4f4e9f00cf1d","route":"/billing/subscription"}
{"level":30,"time":1766893859095,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"5dfa608c-6b7f-44aa-82b1-09f9c56ab812","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5dfa608c-6b7f-44aa-82b1-09f9c56ab812","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859095,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"5dfa608c-6b7f-44aa-82b1-09f9c56ab812","method":"GET","url":"/billing/subscription","body":{}},"requestId":"5dfa608c-6b7f-44aa-82b1-09f9c56ab812","requestId":"543da11c-33ac-4232-9042-31c1c2430dbb","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859096,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"434f4931-de3b-4df3-950f-bad63be80b12","method":"GET","url":"/billing/subscription","body":{}},"requestId":"434f4931-de3b-4df3-950f-bad63be80b12","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859096,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"434f4931-de3b-4df3-950f-bad63be80b12","method":"GET","url":"/billing/subscription","body":{}},"requestId":"434f4931-de3b-4df3-950f-bad63be80b12","requestId":"1ca001ca-1c14-43f2-919f-a0cc6340af0f","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859095,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"543da11c-33ac-4232-9042-31c1c2430dbb","route":"/billing/subscription"}
{"level":"info","time":1766893859097,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"1ca001ca-1c14-43f2-919f-a0cc6340af0f","route":"/billing/subscription"}
{"level":30,"time":1766893859099,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"2ed85b1b-bcb9-45d1-816e-8468cc910cdf","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2ed85b1b-bcb9-45d1-816e-8468cc910cdf","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859100,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"2ed85b1b-bcb9-45d1-816e-8468cc910cdf","method":"GET","url":"/billing/subscription","body":{}},"requestId":"2ed85b1b-bcb9-45d1-816e-8468cc910cdf","requestId":"5c6373ce-7854-4e5e-9733-d83c7ad8687f","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859100,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"5c6373ce-7854-4e5e-9733-d83c7ad8687f","route":"/billing/subscription"}
{"level":30,"time":1766893859107,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"55a808de-9020-44e6-8a94-d656f0bd918a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"55a808de-9020-44e6-8a94-d656f0bd918a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859107,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"55a808de-9020-44e6-8a94-d656f0bd918a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"55a808de-9020-44e6-8a94-d656f0bd918a","requestId":"32d6ed4d-713c-458a-9b74-d49d931cf2a1","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859107,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"32d6ed4d-713c-458a-9b74-d49d931cf2a1","route":"/billing/subscription"}
{"level":30,"time":1766893859108,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"bdabc8cf-ac1e-4590-a14d-b911678b7b3a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"bdabc8cf-ac1e-4590-a14d-b911678b7b3a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859109,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"bdabc8cf-ac1e-4590-a14d-b911678b7b3a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"bdabc8cf-ac1e-4590-a14d-b911678b7b3a","requestId":"08154438-8753-4764-9510-1bb6f7f718e2","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859109,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"08154438-8753-4764-9510-1bb6f7f718e2","route":"/billing/subscription"}
{"level":30,"time":1766893859109,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"184464ed-f35c-455e-b551-962efefb98de","method":"GET","url":"/billing/subscription","body":{}},"requestId":"184464ed-f35c-455e-b551-962efefb98de","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859110,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"184464ed-f35c-455e-b551-962efefb98de","method":"GET","url":"/billing/subscription","body":{}},"requestId":"184464ed-f35c-455e-b551-962efefb98de","requestId":"bbfa43dd-a5c3-44cf-816a-180d1da248fb","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859110,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"bbfa43dd-a5c3-44cf-816a-180d1da248fb","route":"/billing/subscription"}
{"level":30,"time":1766893859110,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"c8785dca-90b4-4ce7-8b1f-8a44bb42bb83","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c8785dca-90b4-4ce7-8b1f-8a44bb42bb83","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859111,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"c8785dca-90b4-4ce7-8b1f-8a44bb42bb83","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c8785dca-90b4-4ce7-8b1f-8a44bb42bb83","requestId":"c9a72671-80a1-410b-abdb-386c8a38ddbf","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859111,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"c9a72671-80a1-410b-abdb-386c8a38ddbf","route":"/billing/subscription"}
{"level":30,"time":1766893859112,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"b20e8d0d-22cd-4054-a6e1-8340c78aa72d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b20e8d0d-22cd-4054-a6e1-8340c78aa72d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859112,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"b20e8d0d-22cd-4054-a6e1-8340c78aa72d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b20e8d0d-22cd-4054-a6e1-8340c78aa72d","requestId":"c36c2f56-90c5-47ad-8331-91ad79ce7c74","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859112,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"c36c2f56-90c5-47ad-8331-91ad79ce7c74","route":"/billing/subscription"}
{"level":30,"time":1766893859113,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"d279b357-1730-472f-b6e9-2ebfdcaff3ab","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d279b357-1730-472f-b6e9-2ebfdcaff3ab","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859114,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"d279b357-1730-472f-b6e9-2ebfdcaff3ab","method":"GET","url":"/billing/subscription","body":{}},"requestId":"d279b357-1730-472f-b6e9-2ebfdcaff3ab","requestId":"1d3c200e-7edb-41b8-8584-737cca0be75f","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859114,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"1d3c200e-7edb-41b8-8584-737cca0be75f","route":"/billing/subscription"}
{"level":30,"time":1766893859114,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"acf3df7b-0ba4-4f36-88ab-0a22863be548","method":"GET","url":"/billing/subscription","body":{}},"requestId":"acf3df7b-0ba4-4f36-88ab-0a22863be548","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859115,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"acf3df7b-0ba4-4f36-88ab-0a22863be548","method":"GET","url":"/billing/subscription","body":{}},"requestId":"acf3df7b-0ba4-4f36-88ab-0a22863be548","requestId":"af2f3fd5-20c9-49f3-904d-55b951dc6698","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859115,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"af2f3fd5-20c9-49f3-904d-55b951dc6698","route":"/billing/subscription"}
{"level":30,"time":1766893859115,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"514932af-3a2a-4108-b7b0-5ece480bb9d6","method":"GET","url":"/billing/subscription","body":{}},"requestId":"514932af-3a2a-4108-b7b0-5ece480bb9d6","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859117,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"514932af-3a2a-4108-b7b0-5ece480bb9d6","method":"GET","url":"/billing/subscription","body":{}},"requestId":"514932af-3a2a-4108-b7b0-5ece480bb9d6","requestId":"6a67336b-a3b4-45c1-87dd-997090412a3f","res":{"statusCode":429},"responseTime":2,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859117,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"6a67336b-a3b4-45c1-87dd-997090412a3f","route":"/billing/subscription"}
{"level":30,"time":1766893859117,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"aaefacae-9fb9-48ef-a385-70e4f1f9e21a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"aaefacae-9fb9-48ef-a385-70e4f1f9e21a","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859118,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"aaefacae-9fb9-48ef-a385-70e4f1f9e21a","method":"GET","url":"/billing/subscription","body":{}},"requestId":"aaefacae-9fb9-48ef-a385-70e4f1f9e21a","requestId":"82f9ed3e-0174-49e2-bc31-61259b28d754","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859118,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"82f9ed3e-0174-49e2-bc31-61259b28d754","route":"/billing/subscription"}
{"level":30,"time":1766893859119,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"1d98442c-770f-459d-b77c-d4db20a5d17c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1d98442c-770f-459d-b77c-d4db20a5d17c","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859119,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"1d98442c-770f-459d-b77c-d4db20a5d17c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"1d98442c-770f-459d-b77c-d4db20a5d17c","requestId":"4b618ef3-2055-4089-a860-ea62f2f2375b","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859120,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"4b618ef3-2055-4089-a860-ea62f2f2375b","route":"/billing/subscription"}
{"level":30,"time":1766893859120,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"a9e22c02-21cb-41d6-ab20-1185a9022e3f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a9e22c02-21cb-41d6-ab20-1185a9022e3f","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859121,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"a9e22c02-21cb-41d6-ab20-1185a9022e3f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a9e22c02-21cb-41d6-ab20-1185a9022e3f","requestId":"28d58f10-8472-4c54-95ac-4634d1c01108","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859121,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"28d58f10-8472-4c54-95ac-4634d1c01108","route":"/billing/subscription"}
{"level":30,"time":1766893859121,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"b52b039d-c861-4dc2-b2e6-68a0a405e27d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b52b039d-c861-4dc2-b2e6-68a0a405e27d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859122,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"b52b039d-c861-4dc2-b2e6-68a0a405e27d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"b52b039d-c861-4dc2-b2e6-68a0a405e27d","requestId":"5609b279-243f-4a63-9337-77efa2c09ba6","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859122,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"5609b279-243f-4a63-9337-77efa2c09ba6","route":"/billing/subscription"}
{"level":30,"time":1766893859122,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"f3178d22-449d-48cd-b645-2e38a79d5a7f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"f3178d22-449d-48cd-b645-2e38a79d5a7f","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859123,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"f3178d22-449d-48cd-b645-2e38a79d5a7f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"f3178d22-449d-48cd-b645-2e38a79d5a7f","requestId":"2e0604c8-ba16-4509-8ee9-5c1d25c1a55b","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859123,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"2e0604c8-ba16-4509-8ee9-5c1d25c1a55b","route":"/billing/subscription"}
{"level":30,"time":1766893859125,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"13bff326-372a-42a2-a4f3-50e3cd8d84ba","method":"GET","url":"/billing/subscription","body":{}},"requestId":"13bff326-372a-42a2-a4f3-50e3cd8d84ba","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859126,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"13bff326-372a-42a2-a4f3-50e3cd8d84ba","method":"GET","url":"/billing/subscription","body":{}},"requestId":"13bff326-372a-42a2-a4f3-50e3cd8d84ba","requestId":"a9a66721-b969-4b41-a4b2-daa479a12e10","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859126,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"a9a66721-b969-4b41-a4b2-daa479a12e10","route":"/billing/subscription"}
{"level":30,"time":1766893859127,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"501e8b36-6b6e-4660-ac8f-507b0a2eb2b7","method":"GET","url":"/billing/subscription","body":{}},"requestId":"501e8b36-6b6e-4660-ac8f-507b0a2eb2b7","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859128,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"501e8b36-6b6e-4660-ac8f-507b0a2eb2b7","method":"GET","url":"/billing/subscription","body":{}},"requestId":"501e8b36-6b6e-4660-ac8f-507b0a2eb2b7","requestId":"deed11c2-41ca-4c2e-83c7-7c9b712caa25","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859128,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"deed11c2-41ca-4c2e-83c7-7c9b712caa25","route":"/billing/subscription"}
{"level":30,"time":1766893859129,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"92e54423-86a1-4e74-a4d0-ab55dd598ae0","method":"GET","url":"/billing/subscription","body":{}},"requestId":"92e54423-86a1-4e74-a4d0-ab55dd598ae0","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859130,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"92e54423-86a1-4e74-a4d0-ab55dd598ae0","method":"GET","url":"/billing/subscription","body":{}},"requestId":"92e54423-86a1-4e74-a4d0-ab55dd598ae0","requestId":"99c7865b-6265-45f6-886e-60d7d0eecc18","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859130,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"99c7865b-6265-45f6-886e-60d7d0eecc18","route":"/billing/subscription"}
{"level":30,"time":1766893859131,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"cdc769ab-586d-42bf-a6da-5abba721a658","method":"GET","url":"/billing/subscription","body":{}},"requestId":"cdc769ab-586d-42bf-a6da-5abba721a658","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859132,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"cdc769ab-586d-42bf-a6da-5abba721a658","method":"GET","url":"/billing/subscription","body":{}},"requestId":"cdc769ab-586d-42bf-a6da-5abba721a658","requestId":"5d5394a8-edf1-447f-b84a-b5e07ae4d65b","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859132,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"5d5394a8-edf1-447f-b84a-b5e07ae4d65b","route":"/billing/subscription"}
{"level":30,"time":1766893859133,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"9d0f5b54-ddfd-4ccb-be5f-e8ab19ce14ff","method":"GET","url":"/billing/subscription","body":{}},"requestId":"9d0f5b54-ddfd-4ccb-be5f-e8ab19ce14ff","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859133,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"9d0f5b54-ddfd-4ccb-be5f-e8ab19ce14ff","method":"GET","url":"/billing/subscription","body":{}},"requestId":"9d0f5b54-ddfd-4ccb-be5f-e8ab19ce14ff","requestId":"a0a05021-55a8-4275-ac7d-c4e85c9b969d","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859133,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"a0a05021-55a8-4275-ac7d-c4e85c9b969d","route":"/billing/subscription"}
{"level":30,"time":1766893859136,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"694889bf-1a9e-49f1-8ac7-7b9f6bbef75e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"694889bf-1a9e-49f1-8ac7-7b9f6bbef75e","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859137,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"694889bf-1a9e-49f1-8ac7-7b9f6bbef75e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"694889bf-1a9e-49f1-8ac7-7b9f6bbef75e","requestId":"c7bba327-a2e2-4fec-8ff4-538a0fd37a21","res":{"statusCode":429},"responseTime":2,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859137,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"c7bba327-a2e2-4fec-8ff4-538a0fd37a21","route":"/billing/subscription"}
{"level":30,"time":1766893859137,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"0364694c-40b8-4e81-80da-5e3c70f88c1b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0364694c-40b8-4e81-80da-5e3c70f88c1b","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859138,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"0364694c-40b8-4e81-80da-5e3c70f88c1b","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0364694c-40b8-4e81-80da-5e3c70f88c1b","requestId":"e4aae223-0179-4e6a-9064-ded379f6f6fc","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859138,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"e4aae223-0179-4e6a-9064-ded379f6f6fc","route":"/billing/subscription"}
{"level":30,"time":1766893859139,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"65c605b4-5f7a-42e3-976e-39293fcfb3f6","method":"GET","url":"/billing/subscription","body":{}},"requestId":"65c605b4-5f7a-42e3-976e-39293fcfb3f6","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859139,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"65c605b4-5f7a-42e3-976e-39293fcfb3f6","method":"GET","url":"/billing/subscription","body":{}},"requestId":"65c605b4-5f7a-42e3-976e-39293fcfb3f6","requestId":"76709a39-f9e5-4bda-a104-a57aea44e5ba","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859139,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"76709a39-f9e5-4bda-a104-a57aea44e5ba","route":"/billing/subscription"}
{"level":30,"time":1766893859140,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"94ef8296-aa35-45a6-85c2-dcc4c0be560f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"94ef8296-aa35-45a6-85c2-dcc4c0be560f","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859140,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"94ef8296-aa35-45a6-85c2-dcc4c0be560f","method":"GET","url":"/billing/subscription","body":{}},"requestId":"94ef8296-aa35-45a6-85c2-dcc4c0be560f","requestId":"2dd4cb28-bcd0-4462-997b-e0de9ae9d922","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859140,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"2dd4cb28-bcd0-4462-997b-e0de9ae9d922","route":"/billing/subscription"}
{"level":30,"time":1766893859142,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"87e1f509-eb20-4079-a399-c81dc1493ece","method":"GET","url":"/billing/subscription","body":{}},"requestId":"87e1f509-eb20-4079-a399-c81dc1493ece","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859142,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"87e1f509-eb20-4079-a399-c81dc1493ece","method":"GET","url":"/billing/subscription","body":{}},"requestId":"87e1f509-eb20-4079-a399-c81dc1493ece","requestId":"1001fe65-9a94-4767-913e-f6d8ff12ac5c","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859142,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"1001fe65-9a94-4767-913e-f6d8ff12ac5c","route":"/billing/subscription"}
{"level":30,"time":1766893859143,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"c33343ef-6e37-4fe0-86eb-947383480ca3","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c33343ef-6e37-4fe0-86eb-947383480ca3","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859144,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"c33343ef-6e37-4fe0-86eb-947383480ca3","method":"GET","url":"/billing/subscription","body":{}},"requestId":"c33343ef-6e37-4fe0-86eb-947383480ca3","requestId":"e263f652-5449-4333-bd9c-151797968f59","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859144,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"e263f652-5449-4333-bd9c-151797968f59","route":"/billing/subscription"}
{"level":30,"time":1766893859145,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"3af6b2aa-fd14-4a9c-8f08-a05b3d78ecaa","method":"GET","url":"/billing/subscription","body":{}},"requestId":"3af6b2aa-fd14-4a9c-8f08-a05b3d78ecaa","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859145,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"3af6b2aa-fd14-4a9c-8f08-a05b3d78ecaa","method":"GET","url":"/billing/subscription","body":{}},"requestId":"3af6b2aa-fd14-4a9c-8f08-a05b3d78ecaa","requestId":"38fdfdef-4eaa-43fa-a24c-13bb987b940b","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859146,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"38fdfdef-4eaa-43fa-a24c-13bb987b940b","route":"/billing/subscription"}
{"level":"info","time":1766893859147,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"035c34ae-8d0f-4cde-bde5-6ad269527111","route":"/billing/subscription"}
{"level":30,"time":1766893859146,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"adc1291a-c215-4c8d-a0ff-ed82374c65a3","method":"GET","url":"/billing/subscription","body":{}},"requestId":"adc1291a-c215-4c8d-a0ff-ed82374c65a3","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859147,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"adc1291a-c215-4c8d-a0ff-ed82374c65a3","method":"GET","url":"/billing/subscription","body":{}},"requestId":"adc1291a-c215-4c8d-a0ff-ed82374c65a3","requestId":"035c34ae-8d0f-4cde-bde5-6ad269527111","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859148,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"23b83bae-fddd-4af3-bda5-11d9e6470bdc","route":"/billing/subscription"}
{"level":30,"time":1766893859147,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"6246afe2-df0b-4bb5-a340-d6aedaa94c4e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"6246afe2-df0b-4bb5-a340-d6aedaa94c4e","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859148,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"6246afe2-df0b-4bb5-a340-d6aedaa94c4e","method":"GET","url":"/billing/subscription","body":{}},"requestId":"6246afe2-df0b-4bb5-a340-d6aedaa94c4e","requestId":"23b83bae-fddd-4af3-bda5-11d9e6470bdc","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859149,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"38df4c0a-032a-4787-91f5-faa7c8515760","route":"/billing/subscription"}
{"level":30,"time":1766893859149,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"0910043f-2ff5-4d0c-afee-e0cc5a9a7e9d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0910043f-2ff5-4d0c-afee-e0cc5a9a7e9d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859149,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"0910043f-2ff5-4d0c-afee-e0cc5a9a7e9d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"0910043f-2ff5-4d0c-afee-e0cc5a9a7e9d","requestId":"38df4c0a-032a-4787-91f5-faa7c8515760","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859150,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"706c265f-536e-4164-b7d7-f49dcf9ac975","method":"GET","url":"/billing/subscription","body":{}},"requestId":"706c265f-536e-4164-b7d7-f49dcf9ac975","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859150,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"706c265f-536e-4164-b7d7-f49dcf9ac975","method":"GET","url":"/billing/subscription","body":{}},"requestId":"706c265f-536e-4164-b7d7-f49dcf9ac975","requestId":"bdc6846c-aca0-45e8-b849-ebcf5cc17902","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859150,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"bdc6846c-aca0-45e8-b849-ebcf5cc17902","route":"/billing/subscription"}
{"level":"info","time":1766893859153,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"90062658-06fc-4613-8c54-8c32c675c2be","route":"/billing/subscription"}
{"level":30,"time":1766893859152,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"07cac7b5-0140-4b4f-ba1a-48fc7c3324c1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"07cac7b5-0140-4b4f-ba1a-48fc7c3324c1","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859153,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"07cac7b5-0140-4b4f-ba1a-48fc7c3324c1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"07cac7b5-0140-4b4f-ba1a-48fc7c3324c1","requestId":"90062658-06fc-4613-8c54-8c32c675c2be","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859154,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"d5bed49d-bbce-4dab-8514-e4f21b4b92fc","route":"/billing/subscription"}
{"level":30,"time":1766893859153,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"a8911cd5-23df-400f-b295-9f965140a93c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a8911cd5-23df-400f-b295-9f965140a93c","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859154,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"a8911cd5-23df-400f-b295-9f965140a93c","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a8911cd5-23df-400f-b295-9f965140a93c","requestId":"d5bed49d-bbce-4dab-8514-e4f21b4b92fc","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":30,"time":1766893859155,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"85f9f36e-90f5-443f-8564-bdddf6c71a9d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"85f9f36e-90f5-443f-8564-bdddf6c71a9d","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859155,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"85f9f36e-90f5-443f-8564-bdddf6c71a9d","method":"GET","url":"/billing/subscription","body":{}},"requestId":"85f9f36e-90f5-443f-8564-bdddf6c71a9d","requestId":"f1d40118-472d-46ec-9852-de4a5d4f2010","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859155,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"f1d40118-472d-46ec-9852-de4a5d4f2010","route":"/billing/subscription"}
{"level":30,"time":1766893859156,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"7f6e9895-8fe0-49fa-947a-3f4620de61c1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7f6e9895-8fe0-49fa-947a-3f4620de61c1","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859156,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"7f6e9895-8fe0-49fa-947a-3f4620de61c1","method":"GET","url":"/billing/subscription","body":{}},"requestId":"7f6e9895-8fe0-49fa-947a-3f4620de61c1","requestId":"93b04ac6-134d-43a8-ae6d-85fac0d4ca2a","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859156,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"93b04ac6-134d-43a8-ae6d-85fac0d4ca2a","route":"/billing/subscription"}
{"level":30,"time":1766893859158,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"22f36cb0-999f-4a77-86ef-47c553074907","method":"GET","url":"/billing/subscription","body":{}},"requestId":"22f36cb0-999f-4a77-86ef-47c553074907","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859158,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"22f36cb0-999f-4a77-86ef-47c553074907","method":"GET","url":"/billing/subscription","body":{}},"requestId":"22f36cb0-999f-4a77-86ef-47c553074907","requestId":"733e3f8e-12a7-4742-adf9-300b64414a9c","res":{"statusCode":429},"responseTime":0,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859158,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":0,"requestId":"733e3f8e-12a7-4742-adf9-300b64414a9c","route":"/billing/subscription"}
{"level":30,"time":1766893859159,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"010d1a2f-7399-497a-857a-cac05b2c27d8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"010d1a2f-7399-497a-857a-cac05b2c27d8","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859160,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"010d1a2f-7399-497a-857a-cac05b2c27d8","method":"GET","url":"/billing/subscription","body":{}},"requestId":"010d1a2f-7399-497a-857a-cac05b2c27d8","requestId":"cb7619de-6d0c-4740-839f-dfa00e612718","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859160,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"cb7619de-6d0c-4740-839f-dfa00e612718","route":"/billing/subscription"}
{"level":30,"time":1766893859160,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"a468e258-983f-47f6-9ea7-dd56ca8b4f67","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a468e258-983f-47f6-9ea7-dd56ca8b4f67","msg":"REQ GET /billing/subscription"}
{"level":40,"time":1766893859161,"pid":15937,"hostname":"codespaces-242710","req":{"requestId":"a468e258-983f-47f6-9ea7-dd56ca8b4f67","method":"GET","url":"/billing/subscription","body":{}},"requestId":"a468e258-983f-47f6-9ea7-dd56ca8b4f67","requestId":"5403d3a4-b91e-4624-aa97-2470a2dd4832","res":{"statusCode":429},"responseTime":1,"msg":"GET /billing/subscription -> 429"}
{"level":"info","time":1766893859162,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/billing/subscription","statusCode":429,"durationMs":1,"requestId":"5403d3a4-b91e-4624-aa97-2470a2dd4832","route":"/billing/subscription"}
{"level":"info","time":1766893860549,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":115,"requestId":"369fef1f-3beb-4295-a70f-417e9a64304f","route":"/auth/login"}
{"level":"info","time":1766893860558,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/reports/x-report","statusCode":404,"durationMs":4,"requestId":"b14e376c-225e-4463-a6d1-8d38b5de73e4"}
{"level":"info","time":1766893860562,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/reports/owner-overview?startDate=2025-01-01&endDate=2025-01-31","statusCode":404,"durationMs":1,"requestId":"41457a61-2280-42cb-a534-999bbf1eb4b5"}
{"level":"info","time":1766893862606,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/health","statusCode":404,"durationMs":6,"requestId":"e13190b0-a183-4d22-8bf7-c52cdf921e34"}
{"level":"info","time":1766893862613,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/health","statusCode":404,"durationMs":4,"requestId":"80b1bd45-1abe-4186-8551-5135a08bd20c"}
{"level":"info","time":1766893862624,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":6,"requestId":"d72ac5df-d6d2-459d-a770-afd4efde54ce","route":"/auth/login"}
{"level":"info","time":1766893862626,"service":"chefcloud-api","env":"test","type":"http_request","method":"GET","url":"/health","statusCode":404,"durationMs":0,"requestId":"7ef8bdee-5b71-437a-b322-434602a51fe3"}
{"level":"info","time":1766893864016,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":200,"durationMs":119,"requestId":"eff3cfa3-7173-4596-8112-62a3f21456ef","route":"/auth/login"}
{"level":"info","time":1766893864127,"service":"chefcloud-api","env":"test","type":"http_request","method":"POST","url":"/auth/login","statusCode":401,"durationMs":107,"requestId":"d92637c2-0dd5-497b-b21f-db1b5df0867b","route":"/auth/login"}
{"numFailedTestSuites":37,"numFailedTests":233,"numPassedTestSuites":20,"numPassedTests":188,"numPendingTestSuites":0,"numPendingTests":1,"numRuntimeErrorTestSuites":12,"numTodoTests":0,"numTotalTestSuites":57,"numTotalTests":422,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1766893808160,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","POST /franchise/budgets"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) POST /franchise/budgets should upsert a budget for a branch","invocations":1,"location":{"column":5,"line":140},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should upsert a budget for a branch"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","POST /franchise/budgets"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) POST /franchise/budgets should update existing budget on re-upsert","invocations":1,"location":{"column":5,"line":160},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update existing budget on re-upsert"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/budgets"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/budgets should fetch budgets for a period","invocations":1,"location":{"column":5,"line":192},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fetch budgets for a period"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/budgets"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/budgets should reject invalid period format","invocations":1,"location":{"column":5,"line":204},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject invalid period format"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/rankings"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/rankings should return ranked branches with deterministic ordering","invocations":1,"location":{"column":5,"line":215},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return ranked branches with deterministic ordering"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/procurement/suggest"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/procurement/suggest should return items below safety stock","invocations":1,"location":{"column":5,"line":243},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return items below safety stock"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-s3: Central Procurement","POST /franchise/procurement/generate-drafts"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.supplier.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n  291 \n  292 beforeAll(async () => {\n  293   // Create supplier with packSize and minOrderQty\nâ†’ 294   const supplier = await prisma.client.supplier.create({\n          data: {\n            name: \"Test Supplier\",\n            email: \"test-supplier@example.com\",\n            contactPerson: \"John Doe\",\n            phone: \"+256700000000\",\n            leadTimeDays: 3,\n            packSize: 10,\n            minOrderQty: 50,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:24)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-s3: Central Procurement POST /franchise/procurement/generate-drafts should generate draft POs with packSize rounding","invocations":1,"location":{"column":7,"line":349},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate draft POs with packSize rounding"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-s3: Central Procurement","POST /franchise/procurement/generate-drafts"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.supplier.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n  291 \n  292 beforeAll(async () => {\n  293   // Create supplier with packSize and minOrderQty\nâ†’ 294   const supplier = await prisma.client.supplier.create({\n          data: {\n            name: \"Test Supplier\",\n            email: \"test-supplier@example.com\",\n            contactPerson: \"John Doe\",\n            phone: \"+256700000000\",\n            leadTimeDays: 3,\n            packSize: 10,\n            minOrderQty: 50,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:24)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-s3: Central Procurement POST /franchise/procurement/generate-drafts should generate drafts for specific branches only","invocations":1,"location":{"column":7,"line":368},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate drafts for specific branches only"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-s3: Central Procurement","GET /franchise/procurement/drafts"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.supplier.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n  291 \n  292 beforeAll(async () => {\n  293   // Create supplier with packSize and minOrderQty\nâ†’ 294   const supplier = await prisma.client.supplier.create({\n          data: {\n            name: \"Test Supplier\",\n            email: \"test-supplier@example.com\",\n            contactPerson: \"John Doe\",\n            phone: \"+256700000000\",\n            leadTimeDays: 3,\n            packSize: 10,\n            minOrderQty: 50,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:24)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-s3: Central Procurement GET /franchise/procurement/drafts should list all draft POs with supplier and branch names","invocations":1,"location":{"column":7,"line":383},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list all draft POs with supplier and branch names"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-s3: Central Procurement","POST /franchise/procurement/approve"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.supplier.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n  291 \n  292 beforeAll(async () => {\n  293   // Create supplier with packSize and minOrderQty\nâ†’ 294   const supplier = await prisma.client.supplier.create({\n          data: {\n            name: \"Test Supplier\",\n            email: \"test-supplier@example.com\",\n            contactPerson: \"John Doe\",\n            phone: \"+256700000000\",\n            leadTimeDays: 3,\n            packSize: 10,\n            minOrderQty: 50,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:24)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-s3: Central Procurement POST /franchise/procurement/approve should approve draft POs and update status to PLACED","invocations":1,"location":{"column":7,"line":403},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should approve draft POs and update status to PLACED"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-s3: Central Procurement","POST /franchise/procurement/approve"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.supplier.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n  291 \n  292 beforeAll(async () => {\n  293   // Create supplier with packSize and minOrderQty\nâ†’ 294   const supplier = await prisma.client.supplier.create({\n          data: {\n            name: \"Test Supplier\",\n            email: \"test-supplier@example.com\",\n            contactPerson: \"John Doe\",\n            phone: \"+256700000000\",\n            leadTimeDays: 3,\n            packSize: 10,\n            minOrderQty: 50,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:24)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-s3: Central Procurement POST /franchise/procurement/approve should reject non-owner approval attempts","invocations":1,"location":{"column":7,"line":430},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject non-owner approval attempts"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/overview"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/overview should return per-branch KPIs and totals for date range","invocations":1,"location":{"column":5,"line":461},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return per-branch KPIs and totals for date range"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/overview"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/overview should filter by branchIds when provided","invocations":1,"location":{"column":5,"line":501},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by branchIds when provided"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/overview"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/overview should default to today when dates omitted","invocations":1,"location":{"column":5,"line":517},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should default to today when dates omitted"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/overview"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/overview should reject non-manager/owner users","invocations":1,"location":{"column":5,"line":529},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject non-manager/owner users"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/rankings"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/rankings should return branches ranked by NET_SALES","invocations":1,"location":{"column":5,"line":556},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return branches ranked by NET_SALES"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/rankings"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/rankings should return branches ranked by MARGIN_PERCENT","invocations":1,"location":{"column":5,"line":594},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return branches ranked by MARGIN_PERCENT"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/rankings"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/rankings should apply limit parameter","invocations":1,"location":{"column":5,"line":610},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should apply limit parameter"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/rankings"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/rankings should reject unsupported metrics","invocations":1,"location":{"column":5,"line":624},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject unsupported metrics"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/rankings"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/rankings should reject requests without metric parameter","invocations":1,"location":{"column":5,"line":638},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject requests without metric parameter"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets (NEW)"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n  649 describe('GET /franchise/budgets (NEW)', () => {\n  650   beforeAll(async () => {\n  651     // Seed new FranchiseBudget records (year/month format)\nâ†’ 652     await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 2000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 1500000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 2,\n                category: \"NET_SALES\",\n                amountCents: 2500000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets (NEW) should return all budgets without filters","invocations":1,"location":{"column":7,"line":689},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return all budgets without filters"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets (NEW)"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n  649 describe('GET /franchise/budgets (NEW)', () => {\n  650   beforeAll(async () => {\n  651     // Seed new FranchiseBudget records (year/month format)\nâ†’ 652     await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 2000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 1500000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 2,\n                category: \"NET_SALES\",\n                amountCents: 2500000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets (NEW) should filter by year and month","invocations":1,"location":{"column":7,"line":711},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by year and month"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets (NEW)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n  649 describe('GET /franchise/budgets (NEW)', () => {\n  650   beforeAll(async () => {\n  651     // Seed new FranchiseBudget records (year/month format)\nâ†’ 652     await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 2000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 1500000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 2,\n                category: \"NET_SALES\",\n                amountCents: 2500000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets (NEW) should filter by branchIds","invocations":1,"location":{"column":7,"line":726},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by branchIds"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets (NEW)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n  649 describe('GET /franchise/budgets (NEW)', () => {\n  650   beforeAll(async () => {\n  651     // Seed new FranchiseBudget records (year/month format)\nâ†’ 652     await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 2000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 1500000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 2,\n                category: \"NET_SALES\",\n                amountCents: 2500000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets (NEW) should allow L4 (Manager) to read budgets","invocations":1,"location":{"column":7,"line":740},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow L4 (Manager) to read budgets"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","PUT /franchise/budgets (bulk upsert)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance PUT /franchise/budgets (bulk upsert) should create new budgets","invocations":1,"location":{"column":7,"line":769},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create new budgets"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","PUT /franchise/budgets (bulk upsert)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance PUT /franchise/budgets (bulk upsert) should update existing budgets (idempotent)","invocations":1,"location":{"column":7,"line":805},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update existing budgets (idempotent)"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","PUT /franchise/budgets (bulk upsert)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance PUT /franchise/budgets (bulk upsert) should reject L4 (Manager) from upserting budgets","invocations":1,"location":{"column":7,"line":855},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject L4 (Manager) from upserting budgets"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","PUT /franchise/budgets (bulk upsert)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance PUT /franchise/budgets (bulk upsert) should validate year range (2000-9999)","invocations":1,"location":{"column":7,"line":891},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should validate year range (2000-9999)"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","PUT /franchise/budgets (bulk upsert)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance PUT /franchise/budgets (bulk upsert) should validate month range (1-12)","invocations":1,"location":{"column":7,"line":913},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should validate month range (1-12)"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets/variance"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n  940   where: { orgId, year: 2025, month: 1 },\n  941 });\n  942 \nâ†’ 943 await prisma.client.franchiseBudget.createMany({\n        data: [\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 5000000,\n            currencyCode: \"UGX\"\n          },\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 3000000,\n            currencyCode: \"UGX\"\n          }\n        ]\n      })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets/variance should calculate variance for all branches","invocations":1,"location":{"column":7,"line":1010},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate variance for all branches"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets/variance"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n  940   where: { orgId, year: 2025, month: 1 },\n  941 });\n  942 \nâ†’ 943 await prisma.client.franchiseBudget.createMany({\n        data: [\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 5000000,\n            currencyCode: \"UGX\"\n          },\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 3000000,\n            currencyCode: \"UGX\"\n          }\n        ]\n      })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets/variance should filter variance by branchIds","invocations":1,"location":{"column":7,"line":1045},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter variance by branchIds"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets/variance"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n  940   where: { orgId, year: 2025, month: 1 },\n  941 });\n  942 \nâ†’ 943 await prisma.client.franchiseBudget.createMany({\n        data: [\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 5000000,\n            currencyCode: \"UGX\"\n          },\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 3000000,\n            currencyCode: \"UGX\"\n          }\n        ]\n      })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets/variance should return empty array when no budgets exist","invocations":1,"location":{"column":7,"line":1057},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array when no budgets exist"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets/variance"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n  940   where: { orgId, year: 2025, month: 1 },\n  941 });\n  942 \nâ†’ 943 await prisma.client.franchiseBudget.createMany({\n        data: [\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 5000000,\n            currencyCode: \"UGX\"\n          },\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 3000000,\n            currencyCode: \"UGX\"\n          }\n        ]\n      })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets/variance should require year parameter","invocations":1,"location":{"column":7,"line":1070},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require year parameter"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets/variance"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n  940   where: { orgId, year: 2025, month: 1 },\n  941 });\n  942 \nâ†’ 943 await prisma.client.franchiseBudget.createMany({\n        data: [\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 5000000,\n            currencyCode: \"UGX\"\n          },\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 3000000,\n            currencyCode: \"UGX\"\n          }\n        ]\n      })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets/variance should require month parameter","invocations":1,"location":{"column":7,"line":1081},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require month parameter"}],"coverage":{},"endTime":1766893869981,"message":"  â— E22-s2: Franchise APIs (e2e) â€º POST /franchise/budgets â€º should upsert a budget for a branch\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º POST /franchise/budgets â€º should update existing budget on re-upsert\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/budgets â€º should fetch budgets for a period\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/budgets â€º should reject invalid period format\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/rankings â€º should return ranked branches with deterministic ordering\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/procurement/suggest â€º should return items below safety stock\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-s3: Central Procurement â€º POST /franchise/procurement/generate-drafts â€º should generate draft POs with packSize rounding\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-s3: Central Procurement â€º POST /franchise/procurement/generate-drafts â€º should generate draft POs with packSize rounding\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.supplier.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n      291 \n      292 beforeAll(async () => {\n      293   // Create supplier with packSize and minOrderQty\n    â†’ 294   const supplier = await prisma.client.supplier.create({\n              data: {\n                name: \"Test Supplier\",\n                email: \"test-supplier@example.com\",\n                contactPerson: \"John Doe\",\n                phone: \"+256700000000\",\n                leadTimeDays: 3,\n                packSize: 10,\n                minOrderQty: 50,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-s3: Central Procurement â€º POST /franchise/procurement/generate-drafts â€º should generate drafts for specific branches only\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-s3: Central Procurement â€º POST /franchise/procurement/generate-drafts â€º should generate drafts for specific branches only\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.supplier.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n      291 \n      292 beforeAll(async () => {\n      293   // Create supplier with packSize and minOrderQty\n    â†’ 294   const supplier = await prisma.client.supplier.create({\n              data: {\n                name: \"Test Supplier\",\n                email: \"test-supplier@example.com\",\n                contactPerson: \"John Doe\",\n                phone: \"+256700000000\",\n                leadTimeDays: 3,\n                packSize: 10,\n                minOrderQty: 50,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-s3: Central Procurement â€º GET /franchise/procurement/drafts â€º should list all draft POs with supplier and branch names\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-s3: Central Procurement â€º GET /franchise/procurement/drafts â€º should list all draft POs with supplier and branch names\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.supplier.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n      291 \n      292 beforeAll(async () => {\n      293   // Create supplier with packSize and minOrderQty\n    â†’ 294   const supplier = await prisma.client.supplier.create({\n              data: {\n                name: \"Test Supplier\",\n                email: \"test-supplier@example.com\",\n                contactPerson: \"John Doe\",\n                phone: \"+256700000000\",\n                leadTimeDays: 3,\n                packSize: 10,\n                minOrderQty: 50,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-s3: Central Procurement â€º POST /franchise/procurement/approve â€º should approve draft POs and update status to PLACED\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-s3: Central Procurement â€º POST /franchise/procurement/approve â€º should approve draft POs and update status to PLACED\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.supplier.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n      291 \n      292 beforeAll(async () => {\n      293   // Create supplier with packSize and minOrderQty\n    â†’ 294   const supplier = await prisma.client.supplier.create({\n              data: {\n                name: \"Test Supplier\",\n                email: \"test-supplier@example.com\",\n                contactPerson: \"John Doe\",\n                phone: \"+256700000000\",\n                leadTimeDays: 3,\n                packSize: 10,\n                minOrderQty: 50,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-s3: Central Procurement â€º POST /franchise/procurement/approve â€º should reject non-owner approval attempts\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-s3: Central Procurement â€º POST /franchise/procurement/approve â€º should reject non-owner approval attempts\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.supplier.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n      291 \n      292 beforeAll(async () => {\n      293   // Create supplier with packSize and minOrderQty\n    â†’ 294   const supplier = await prisma.client.supplier.create({\n              data: {\n                name: \"Test Supplier\",\n                email: \"test-supplier@example.com\",\n                contactPerson: \"John Doe\",\n                phone: \"+256700000000\",\n                leadTimeDays: 3,\n                packSize: 10,\n                minOrderQty: 50,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/analytics/overview â€º should return per-branch KPIs and totals for date range\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/analytics/overview â€º should filter by branchIds when provided\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/analytics/overview â€º should default to today when dates omitted\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/analytics/overview â€º should reject non-manager/owner users\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/analytics/rankings â€º should return branches ranked by NET_SALES\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/analytics/rankings â€º should return branches ranked by MARGIN_PERCENT\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/analytics/rankings â€º should apply limit parameter\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/analytics/rankings â€º should reject unsupported metrics\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º GET /franchise/analytics/rankings â€º should reject requests without metric parameter\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets (NEW) â€º should return all budgets without filters\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets (NEW) â€º should return all budgets without filters\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n      649 describe('GET /franchise/budgets (NEW)', () => {\n      650   beforeAll(async () => {\n      651     // Seed new FranchiseBudget records (year/month format)\n    â†’ 652     await prisma.client.franchiseBudget.createMany({\n                data: [\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 2000000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 1500000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 2,\n                    category: \"NET_SALES\",\n                    amountCents: 2500000,\n                    currencyCode: \"UGX\"\n                  }\n                ]\n              })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets (NEW) â€º should filter by year and month\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets (NEW) â€º should filter by year and month\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n      649 describe('GET /franchise/budgets (NEW)', () => {\n      650   beforeAll(async () => {\n      651     // Seed new FranchiseBudget records (year/month format)\n    â†’ 652     await prisma.client.franchiseBudget.createMany({\n                data: [\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 2000000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 1500000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 2,\n                    category: \"NET_SALES\",\n                    amountCents: 2500000,\n                    currencyCode: \"UGX\"\n                  }\n                ]\n              })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets (NEW) â€º should filter by branchIds\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets (NEW) â€º should filter by branchIds\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n      649 describe('GET /franchise/budgets (NEW)', () => {\n      650   beforeAll(async () => {\n      651     // Seed new FranchiseBudget records (year/month format)\n    â†’ 652     await prisma.client.franchiseBudget.createMany({\n                data: [\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 2000000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 1500000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 2,\n                    category: \"NET_SALES\",\n                    amountCents: 2500000,\n                    currencyCode: \"UGX\"\n                  }\n                ]\n              })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets (NEW) â€º should allow L4 (Manager) to read budgets\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets (NEW) â€º should allow L4 (Manager) to read budgets\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n      649 describe('GET /franchise/budgets (NEW)', () => {\n      650   beforeAll(async () => {\n      651     // Seed new FranchiseBudget records (year/month format)\n    â†’ 652     await prisma.client.franchiseBudget.createMany({\n                data: [\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 2000000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 1500000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 2,\n                    category: \"NET_SALES\",\n                    amountCents: 2500000,\n                    currencyCode: \"UGX\"\n                  }\n                ]\n              })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º PUT /franchise/budgets (bulk upsert) â€º should create new budgets\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º PUT /franchise/budgets (bulk upsert) â€º should update existing budgets (idempotent)\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º PUT /franchise/budgets (bulk upsert) â€º should reject L4 (Manager) from upserting budgets\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º PUT /franchise/budgets (bulk upsert) â€º should validate year range (2000-9999)\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º PUT /franchise/budgets (bulk upsert) â€º should validate month range (1-12)\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets/variance â€º should calculate variance for all branches\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets/variance â€º should calculate variance for all branches\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n      940   where: { orgId, year: 2025, month: 1 },\n      941 });\n      942 \n    â†’ 943 await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 5000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 3000000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets/variance â€º should filter variance by branchIds\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets/variance â€º should filter variance by branchIds\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n      940   where: { orgId, year: 2025, month: 1 },\n      941 });\n      942 \n    â†’ 943 await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 5000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 3000000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets/variance â€º should return empty array when no budgets exist\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets/variance â€º should return empty array when no budgets exist\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n      940   where: { orgId, year: 2025, month: 1 },\n      941 });\n      942 \n    â†’ 943 await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 5000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 3000000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets/variance â€º should require year parameter\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets/variance â€º should require year parameter\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n      940   where: { orgId, year: 2025, month: 1 },\n      941 });\n      942 \n    â†’ 943 await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 5000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 3000000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets/variance â€º should require month parameter\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  â— E22-s2: Franchise APIs (e2e) â€º E22-S3: Franchise Budgets & Variance â€º GET /franchise/budgets/variance â€º should require month parameter\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n      940   where: { orgId, year: 2025, month: 1 },\n      941 });\n      942 \n    â†’ 943 await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 5000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 3000000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)\n\n\n  â— Test suite failed to run\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.inventoryItem.delete()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:344:47\n\n      341 await prisma.client.purchaseOrder.deleteMany({ where: { orgId } });\n      342 await prisma.client.procurementJob.deleteMany({ where: { orgId } });\n      343 await prisma.client.stockBatch.deleteMany({ where: { itemId } });\n    â†’ 344 await prisma.client.inventoryItem.delete({\n            where: {\n              id: undefined,\n          ?   orgId_sku?: InventoryItemOrgIdSkuCompoundUniqueInput,\n          ?   AND?: InventoryItemWhereInput | InventoryItemWhereInput[],\n          ?   OR?: InventoryItemWhereInput[],\n          ?   NOT?: InventoryItemWhereInput | InventoryItemWhereInput[],\n          ?   orgId?: StringFilter | String,\n          ?   sku?: StringNullableFilter | String | Null,\n          ?   name?: StringFilter | String,\n          ?   unit?: StringFilter | String,\n          ?   category?: StringNullableFilter | String | Null,\n          ?   reorderLevel?: DecimalFilter | Decimal,\n          ?   reorderQty?: DecimalFilter | Decimal,\n          ?   isActive?: BoolFilter | Boolean,\n          ?   metadata?: JsonNullableFilter,\n          ?   createdAt?: DateTimeFilter | DateTime,\n          ?   updatedAt?: DateTimeFilter | DateTime,\n          ?   stockBatches?: StockBatchListRelationFilter,\n          ?   recipeIngredients?: RecipeIngredientListRelationFilter,\n          ?   wastageRecords?: WastageListRelationFilter,\n          ?   adjustments?: AdjustmentListRelationFilter,\n          ?   poItems?: PurchaseOrderItemListRelationFilter,\n          ?   receiptLines?: GoodsReceiptLineListRelationFilter,\n          ?   spoutCalibrations?: SpoutCalibrationListRelationFilter,\n          ?   forecastProfiles?: ForecastProfileListRelationFilter,\n          ?   forecastPoints?: ForecastPointListRelationFilter,\n          ?   stockMovements?: StockMovementListRelationFilter,\n          ?   lowStockConfigs?: LowStockConfigListRelationFilter\n            }\n          })\n\n    Argument `where` of type InventoryItemWhereUniqueInput needs at least one of `id` or `orgId_sku` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:344:7)\n\n  â— Test suite failed to run\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.order.deleteMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:996:35\n\n      993 \n      994 afterAll(async () => {\n      995   // Cleanup variance test data\n    â†’ 996   await prisma.client.order.deleteMany({\n              where: {\n                branchId: {\n                  in: [\n                    undefined,\n                    ~~~~~~~~~\n                    undefined\n                  ]\n                },\n                createdAt: {\n                  gte: new Date(\"2025-01-01T00:00:00.000Z\"),\n                  lt: new Date(\"2025-02-01T00:00:00.000Z\")\n                }\n              }\n            })\n\n    Invalid value for argument `in[0]`: Can not use `undefined` value within array. Use `null` or filter out `undefined` values.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                          ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at e.throwValidationError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:10206)\n      at od (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:9323)\n      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8075)\n      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)\n      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)\n      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)\n      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)\n      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)\n      at mr (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:6037)\n      at vn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:5902)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10186\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at t._executeRequest (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10165)\n      at Na (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:9955)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9639)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9933\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9913\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at t._request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9836)\n      at s (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5636)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5864\n      at i (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1016)\n      at PrismaPromise.then (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1091)\n\n  â— Test suite failed to run\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.order.deleteMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:129:31\n\n      126 \n      127 afterAll(async () => {\n      128   // Cleanup\n    â†’ 129   await prisma.client.order.deleteMany({\n              where: {\n                branchId: {\n                  in: [\n                    undefined,\n                    ~~~~~~~~~\n                    undefined\n                  ]\n                }\n              }\n            })\n\n    Invalid value for argument `in[0]`: Can not use `undefined` value within array. Use `null` or filter out `undefined` values.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                          ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at e.throwValidationError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:10206)\n      at od (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:9323)\n      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8075)\n      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)\n      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)\n      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)\n      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)\n      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)\n      at mr (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:6037)\n      at vn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:5902)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10186\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at t._executeRequest (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10165)\n      at Na (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:9955)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9639)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9933\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9913\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at t._request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9836)\n      at s (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5636)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5864\n      at i (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1016)\n      at PrismaPromise.then (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1091)\n","name":"/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts","startTime":1766893869981,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates POST /shift-templates - creates a lunch shift template","invocations":1,"location":{"column":5,"line":101},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-templates - creates a lunch shift template"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates POST /shift-templates - creates a dinner shift template","invocations":1,"location":{"column":5,"line":122},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-templates - creates a dinner shift template"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates POST /shift-templates - rejects invalid time format","invocations":1,"location":{"column":5,"line":141},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-templates - rejects invalid time format"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates POST /shift-templates - rejects end time before start time","invocations":1,"location":{"column":5,"line":153},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-templates - rejects end time before start time"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates GET /shift-templates - lists all templates","invocations":1,"location":{"column":5,"line":167},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-templates - lists all templates"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates GET /shift-templates/:id - gets template by ID","invocations":1,"location":{"column":5,"line":178},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-templates/:id - gets template by ID"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates PATCH /shift-templates/:id - updates template","invocations":1,"location":{"column":5,"line":187},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"PATCH /shift-templates/:id - updates template"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates DELETE /shift-templates/:id - soft deletes template","invocations":1,"location":{"column":5,"line":197},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"DELETE /shift-templates/:id - soft deletes template"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Schedules"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.shiftTemplate.update()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n  215 describe('Shift Schedules', () => {\n  216   beforeAll(async () => {\n  217     // Reactivate template for schedule tests\nâ†’ 218     await prisma.shiftTemplate.update({\n            where: {\n              id: undefined,\n          ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   OR?: ShiftTemplateWhereInput[],\n          ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   orgId?: StringFilter | String,\n          ?   name?: StringFilter | String,\n          ?   startTime?: StringFilter | String,\n          ?   endTime?: StringFilter | String,\n          ?   description?: StringNullableFilter | String | Null,\n          ?   isActive?: BoolFilter | Boolean,\n          ?   createdAt?: DateTimeFilter | DateTime,\n          ?   updatedAt?: DateTimeFilter | DateTime,\n          ?   org?: OrgRelationFilter | OrgWhereInput,\n          ?   schedules?: ShiftScheduleListRelationFilter\n            },\n            data: {\n              isActive: true\n            }\n          })\n\nArgument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:7)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Schedules POST /shift-schedules - creates a schedule from template","invocations":1,"location":{"column":5,"line":224},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-schedules - creates a schedule from template"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Schedules"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.shiftTemplate.update()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n  215 describe('Shift Schedules', () => {\n  216   beforeAll(async () => {\n  217     // Reactivate template for schedule tests\nâ†’ 218     await prisma.shiftTemplate.update({\n            where: {\n              id: undefined,\n          ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   OR?: ShiftTemplateWhereInput[],\n          ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   orgId?: StringFilter | String,\n          ?   name?: StringFilter | String,\n          ?   startTime?: StringFilter | String,\n          ?   endTime?: StringFilter | String,\n          ?   description?: StringNullableFilter | String | Null,\n          ?   isActive?: BoolFilter | Boolean,\n          ?   createdAt?: DateTimeFilter | DateTime,\n          ?   updatedAt?: DateTimeFilter | DateTime,\n          ?   org?: OrgRelationFilter | OrgWhereInput,\n          ?   schedules?: ShiftScheduleListRelationFilter\n            },\n            data: {\n              isActive: true\n            }\n          })\n\nArgument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:7)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Schedules POST /shift-schedules - rejects overlapping schedule","invocations":1,"location":{"column":5,"line":250},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-schedules - rejects overlapping schedule"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Schedules"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.shiftTemplate.update()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n  215 describe('Shift Schedules', () => {\n  216   beforeAll(async () => {\n  217     // Reactivate template for schedule tests\nâ†’ 218     await prisma.shiftTemplate.update({\n            where: {\n              id: undefined,\n          ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   OR?: ShiftTemplateWhereInput[],\n          ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   orgId?: StringFilter | String,\n          ?   name?: StringFilter | String,\n          ?   startTime?: StringFilter | String,\n          ?   endTime?: StringFilter | String,\n          ?   description?: StringNullableFilter | String | Null,\n          ?   isActive?: BoolFilter | Boolean,\n          ?   createdAt?: DateTimeFilter | DateTime,\n          ?   updatedAt?: DateTimeFilter | DateTime,\n          ?   org?: OrgRelationFilter | OrgWhereInput,\n          ?   schedules?: ShiftScheduleListRelationFilter\n            },\n            data: {\n              isActive: true\n            }\n          })\n\nArgument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:7)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Schedules GET /shift-schedules/by-branch/:branchId - lists schedules","invocations":1,"location":{"column":5,"line":271},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-schedules/by-branch/:branchId - lists schedules"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Schedules"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.shiftTemplate.update()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n  215 describe('Shift Schedules', () => {\n  216   beforeAll(async () => {\n  217     // Reactivate template for schedule tests\nâ†’ 218     await prisma.shiftTemplate.update({\n            where: {\n              id: undefined,\n          ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   OR?: ShiftTemplateWhereInput[],\n          ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   orgId?: StringFilter | String,\n          ?   name?: StringFilter | String,\n          ?   startTime?: StringFilter | String,\n          ?   endTime?: StringFilter | String,\n          ?   description?: StringNullableFilter | String | Null,\n          ?   isActive?: BoolFilter | Boolean,\n          ?   createdAt?: DateTimeFilter | DateTime,\n          ?   updatedAt?: DateTimeFilter | DateTime,\n          ?   org?: OrgRelationFilter | OrgWhereInput,\n          ?   schedules?: ShiftScheduleListRelationFilter\n            },\n            data: {\n              isActive: true\n            }\n          })\n\nArgument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:7)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Schedules GET /shift-schedules/:id - gets schedule details","invocations":1,"location":{"column":5,"line":281},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-schedules/:id - gets schedule details"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Assignments"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Assignments POST /shift-assignments - assigns staff to schedule","invocations":1,"location":{"column":5,"line":294},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-assignments - assigns staff to schedule"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Assignments"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Assignments POST /shift-assignments - assigns manager on duty","invocations":1,"location":{"column":5,"line":318},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-assignments - assigns manager on duty"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Assignments"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Assignments POST /shift-assignments - rejects duplicate assignment","invocations":1,"location":{"column":5,"line":333},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-assignments - rejects duplicate assignment"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Assignments"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Assignments GET /shift-assignments/by-schedule/:scheduleId - lists assignments","invocations":1,"location":{"column":5,"line":347},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-assignments/by-schedule/:scheduleId - lists assignments"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Assignments"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Assignments GET /shift-assignments/by-user/:userId - lists user assignments","invocations":1,"location":{"column":5,"line":359},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-assignments/by-user/:userId - lists user assignments"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Current Shift API"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Current Shift API GET /shift-schedules/current/:branchId - returns empty when no active shift","invocations":1,"location":{"column":5,"line":379},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-schedules/current/:branchId - returns empty when no active shift"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Current Shift API"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Current Shift API GET /shift-schedules/current/:branchId - returns current shift with staff","invocations":1,"location":{"column":5,"line":390},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-schedules/current/:branchId - returns current shift with staff"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Manager Override for Stock Count"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.client.shift.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47\n\n  431 \n  432 beforeAll(async () => {\n  433   // Open a shift\nâ†’ 434   const shift = await prisma.client.shift.create({\n          data: {\n            branchId: undefined,\n            openedById: undefined,\n            openingFloat: 100,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:21)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Manager Override for Stock Count PATCH /shifts/:id/close - blocks close when stock count out of tolerance","invocations":1,"location":{"column":5,"line":491},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"PATCH /shifts/:id/close - blocks close when stock count out of tolerance"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Manager Override for Stock Count"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.client.shift.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47\n\n  431 \n  432 beforeAll(async () => {\n  433   // Open a shift\nâ†’ 434   const shift = await prisma.client.shift.create({\n          data: {\n            branchId: undefined,\n            openedById: undefined,\n            openingFloat: 100,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:21)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Manager Override for Stock Count PATCH /shifts/:id/close - rejects override from L3 staff","invocations":1,"location":{"column":5,"line":502},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"PATCH /shifts/:id/close - rejects override from L3 staff"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Manager Override for Stock Count"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\nâ†’ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.client.shift.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47\n\n  431 \n  432 beforeAll(async () => {\n  433   // Open a shift\nâ†’ 434   const shift = await prisma.client.shift.create({\n          data: {\n            branchId: undefined,\n            openedById: undefined,\n            openingFloat: 100,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:21)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Manager Override for Stock Count PATCH /shifts/:id/close - allows manager override","invocations":1,"location":{"column":5,"line":517},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"PATCH /shifts/:id/close - allows manager override"}],"coverage":{},"endTime":1766893869981,"message":"  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Templates â€º POST /shift-templates - creates a lunch shift template\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Templates â€º POST /shift-templates - creates a dinner shift template\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Templates â€º POST /shift-templates - rejects invalid time format\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Templates â€º POST /shift-templates - rejects end time before start time\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Templates â€º GET /shift-templates - lists all templates\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Templates â€º GET /shift-templates/:id - gets template by ID\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Templates â€º PATCH /shift-templates/:id - updates template\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Templates â€º DELETE /shift-templates/:id - soft deletes template\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Schedules â€º POST /shift-schedules - creates a schedule from template\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Schedules â€º POST /shift-schedules - creates a schedule from template\n\n    PrismaClientValidationError: \n    Invalid `prisma.shiftTemplate.update()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n      215 describe('Shift Schedules', () => {\n      216   beforeAll(async () => {\n      217     // Reactivate template for schedule tests\n    â†’ 218     await prisma.shiftTemplate.update({\n                where: {\n                  id: undefined,\n              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   OR?: ShiftTemplateWhereInput[],\n              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   orgId?: StringFilter | String,\n              ?   name?: StringFilter | String,\n              ?   startTime?: StringFilter | String,\n              ?   endTime?: StringFilter | String,\n              ?   description?: StringNullableFilter | String | Null,\n              ?   isActive?: BoolFilter | Boolean,\n              ?   createdAt?: DateTimeFilter | DateTime,\n              ?   updatedAt?: DateTimeFilter | DateTime,\n              ?   org?: OrgRelationFilter | OrgWhereInput,\n              ?   schedules?: ShiftScheduleListRelationFilter\n                },\n                data: {\n                  isActive: true\n                }\n              })\n\n    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Schedules â€º POST /shift-schedules - rejects overlapping schedule\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Schedules â€º POST /shift-schedules - rejects overlapping schedule\n\n    PrismaClientValidationError: \n    Invalid `prisma.shiftTemplate.update()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n      215 describe('Shift Schedules', () => {\n      216   beforeAll(async () => {\n      217     // Reactivate template for schedule tests\n    â†’ 218     await prisma.shiftTemplate.update({\n                where: {\n                  id: undefined,\n              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   OR?: ShiftTemplateWhereInput[],\n              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   orgId?: StringFilter | String,\n              ?   name?: StringFilter | String,\n              ?   startTime?: StringFilter | String,\n              ?   endTime?: StringFilter | String,\n              ?   description?: StringNullableFilter | String | Null,\n              ?   isActive?: BoolFilter | Boolean,\n              ?   createdAt?: DateTimeFilter | DateTime,\n              ?   updatedAt?: DateTimeFilter | DateTime,\n              ?   org?: OrgRelationFilter | OrgWhereInput,\n              ?   schedules?: ShiftScheduleListRelationFilter\n                },\n                data: {\n                  isActive: true\n                }\n              })\n\n    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Schedules â€º GET /shift-schedules/by-branch/:branchId - lists schedules\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Schedules â€º GET /shift-schedules/by-branch/:branchId - lists schedules\n\n    PrismaClientValidationError: \n    Invalid `prisma.shiftTemplate.update()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n      215 describe('Shift Schedules', () => {\n      216   beforeAll(async () => {\n      217     // Reactivate template for schedule tests\n    â†’ 218     await prisma.shiftTemplate.update({\n                where: {\n                  id: undefined,\n              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   OR?: ShiftTemplateWhereInput[],\n              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   orgId?: StringFilter | String,\n              ?   name?: StringFilter | String,\n              ?   startTime?: StringFilter | String,\n              ?   endTime?: StringFilter | String,\n              ?   description?: StringNullableFilter | String | Null,\n              ?   isActive?: BoolFilter | Boolean,\n              ?   createdAt?: DateTimeFilter | DateTime,\n              ?   updatedAt?: DateTimeFilter | DateTime,\n              ?   org?: OrgRelationFilter | OrgWhereInput,\n              ?   schedules?: ShiftScheduleListRelationFilter\n                },\n                data: {\n                  isActive: true\n                }\n              })\n\n    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Schedules â€º GET /shift-schedules/:id - gets schedule details\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Schedules â€º GET /shift-schedules/:id - gets schedule details\n\n    PrismaClientValidationError: \n    Invalid `prisma.shiftTemplate.update()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n      215 describe('Shift Schedules', () => {\n      216   beforeAll(async () => {\n      217     // Reactivate template for schedule tests\n    â†’ 218     await prisma.shiftTemplate.update({\n                where: {\n                  id: undefined,\n              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   OR?: ShiftTemplateWhereInput[],\n              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   orgId?: StringFilter | String,\n              ?   name?: StringFilter | String,\n              ?   startTime?: StringFilter | String,\n              ?   endTime?: StringFilter | String,\n              ?   description?: StringNullableFilter | String | Null,\n              ?   isActive?: BoolFilter | Boolean,\n              ?   createdAt?: DateTimeFilter | DateTime,\n              ?   updatedAt?: DateTimeFilter | DateTime,\n              ?   org?: OrgRelationFilter | OrgWhereInput,\n              ?   schedules?: ShiftScheduleListRelationFilter\n                },\n                data: {\n                  isActive: true\n                }\n              })\n\n    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Assignments â€º POST /shift-assignments - assigns staff to schedule\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Assignments â€º POST /shift-assignments - assigns manager on duty\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Assignments â€º POST /shift-assignments - rejects duplicate assignment\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Assignments â€º GET /shift-assignments/by-schedule/:scheduleId - lists assignments\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Shift Assignments â€º GET /shift-assignments/by-user/:userId - lists user assignments\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Current Shift API â€º GET /shift-schedules/current/:branchId - returns empty when no active shift\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Current Shift API â€º GET /shift-schedules/current/:branchId - returns current shift with staff\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Manager Override for Stock Count â€º PATCH /shifts/:id/close - blocks close when stock count out of tolerance\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Manager Override for Stock Count â€º PATCH /shifts/:id/close - blocks close when stock count out of tolerance\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.shift.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47\n\n      431 \n      432 beforeAll(async () => {\n      433   // Open a shift\n    â†’ 434   const shift = await prisma.client.shift.create({\n              data: {\n                branchId: undefined,\n                openedById: undefined,\n                openingFloat: 100,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Manager Override for Stock Count â€º PATCH /shifts/:id/close - rejects override from L3 staff\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Manager Override for Stock Count â€º PATCH /shifts/:id/close - rejects override from L3 staff\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.shift.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47\n\n      431 \n      432 beforeAll(async () => {\n      433   // Open a shift\n    â†’ 434   const shift = await prisma.client.shift.create({\n              data: {\n                branchId: undefined,\n                openedById: undefined,\n                openingFloat: 100,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Manager Override for Stock Count â€º PATCH /shifts/:id/close - allows manager override\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    â†’ 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  â— M2 - Shifts, Scheduling & Stock-Count Gate (E2E) â€º Manager Override for Stock Count â€º PATCH /shifts/:id/close - allows manager override\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.shift.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47\n\n      431 \n      432 beforeAll(async () => {\n      433   // Open a shift\n    â†’ 434   const shift = await prisma.client.shift.create({\n              data: {\n                branchId: undefined,\n                openedById: undefined,\n                openingFloat: 100,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)\n\n\n  â— Test suite failed to run\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.delete()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:96:35\n\n      93 \n      94 afterAll(async () => {\n      95   // Cleanup\n    â†’ 96   await prisma.client.org.delete({\n             where: {\n               id: undefined,\n           ?   slug?: String,\n           ?   AND?: OrgWhereInput | OrgWhereInput[],\n           ?   OR?: OrgWhereInput[],\n           ?   NOT?: OrgWhereInput | OrgWhereInput[],\n           ?   name?: StringFilter | String,\n           ?   createdAt?: DateTimeFilter | DateTime,\n           ?   updatedAt?: DateTimeFilter | DateTime,\n           ?   branches?: BranchListRelationFilter,\n           ?   users?: UserListRelationFilter,\n           ?   settings?: OrgSettingsNullableRelationFilter | OrgSettingsWhereInput | Null,\n           ?   devices?: DeviceListRelationFilter,\n           ?   floorPlans?: FloorPlanListRelationFilter,\n           ?   taxCategories?: TaxCategoryListRelationFilter,\n           ?   modifierGroups?: ModifierGroupListRelationFilter,\n           ?   anomalyEvents?: AnomalyEventListRelationFilter,\n           ?   alertChannels?: AlertChannelListRelationFilter,\n           ?   scheduledAlerts?: ScheduledAlertListRelationFilter,\n           ?   reservations?: ReservationListRelationFilter,\n           ?   supportSessions?: SupportSessionListRelationFilter,\n           ?   spoutDevices?: SpoutDeviceListRelationFilter,\n           ?   spoutEvents?: SpoutEventListRelationFilter,\n           ?   ownerDigests?: OwnerDigestListRelationFilter,\n           ?   apiKeys?: ApiKeyListRelationFilter,\n           ?   subscription?: OrgSubscriptionNullableRelationFilter | OrgSubscriptionWhereInput | Null,\n           ?   branchBudgets?: BranchBudgetListRelationFilter,\n           ?   forecastProfiles?: ForecastProfileListRelationFilter,\n           ?   forecastPoints?: ForecastPointListRelationFilter,\n           ?   franchiseRanks?: FranchiseRankListRelationFilter,\n           ?   franchiseBudgets?: FranchiseBudgetListRelationFilter,\n           ?   badgeAssets?: BadgeAssetListRelationFilter,\n           ?   kdsSlaConfigs?: KdsSlaConfigListRelationFilter,\n           ?   shiftTemplates?: ShiftTemplateListRelationFilter,\n           ?   reportSubscriptions?: ReportSubscriptionListRelationFilter,\n           ?   serviceProviders?: ServiceProviderListRelationFilter,\n           ?   serviceReminders?: ServicePayableReminderListRelationFilter,\n           ?   opsBudgets?: OpsBudgetListRelationFilter,\n           ?   costInsights?: CostInsightListRelationFilter,\n           ?   sessions?: SessionListRelationFilter,\n           ?   documents?: DocumentListRelationFilter,\n           ?   staffAwards?: StaffAwardListRelationFilter,\n           ?   Feedback?: FeedbackListRelationFilter,\n           ?   promotionSuggestions?: PromotionSuggestionListRelationFilter\n             }\n           })\n\n    Argument `where` of type OrgWhereUniqueInput needs at least one of `id` or `slug` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:96:5)\n","name":"/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts","startTime":1766893869981,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1766893869981,"message":"  â— Test suite failed to run\n\n    Cannot find module '../../src/dev-portal/ports/devportal.port' from 'e2e/devportal.prod.slice.e2e-spec.ts'\n\n      15 | import { SuperDevGuard } from '../../src/dev-portal.disabled/guards/super-dev.guard'; // Fixed: was dev-portal (now disabled)\n      16 | import { signBody } from '../payments/webhook.hmac';\n    > 17 | import { DevPortalKeyRepo } from '../../src/dev-portal/ports/devportal.port';\n         | ^\n      18 | import { TestBypassAuthGuard } from '../devportal/auth-override.guard';\n      19 | import { cleanup } from '../helpers/cleanup';\n      20 |\n\n      at Resolver._throwModNotFoundError (../../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.<anonymous> (e2e/devportal.prod.slice.e2e-spec.ts:17:1)\n","name":"/workspaces/chefcloud/services/api/test/e2e/devportal.prod.slice.e2e-spec.ts","startTime":1766893869981,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\nâ†’ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should authenticate via badge swipe and include badgeId in token","invocations":1,"location":{"column":5,"line":143},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should authenticate via badge swipe and include badgeId in token"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\nâ†’ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should access protected endpoint with valid token","invocations":1,"location":{"column":5,"line":162},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should access protected endpoint with valid token"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\nâ†’ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should reject login with REVOKED badge","invocations":1,"location":{"column":5,"line":183},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject login with REVOKED badge"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\nâ†’ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should invalidate existing token when badge is revoked (< 2s)","invocations":1,"location":{"column":5,"line":207},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should invalidate existing token when badge is revoked (< 2s)"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\nâ†’ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should allow new login after badge revocation with updated version","invocations":1,"location":{"column":5,"line":268},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow new login after badge revocation with updated version"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\nâ†’ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should invalidate sessions when badge is reported LOST","invocations":1,"location":{"column":5,"line":327},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should invalidate sessions when badge is reported LOST"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\nâ†’ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should NOT reinstate old tokens when badge is RETURNED","invocations":1,"location":{"column":5,"line":362},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should NOT reinstate old tokens when badge is RETURNED"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Session Version Validation"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\nâ†’ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Session Version Validation should reject token with mismatched session version","invocations":1,"location":{"column":5,"line":421},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject token with mismatched session version"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Performance & Timing"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\nâ†’ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Performance & Timing should invalidate session within 2 seconds (E25 requirement)","invocations":1,"location":{"column":5,"line":461},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should invalidate session within 2 seconds (E25 requirement)"}],"coverage":{},"endTime":1766893869981,"message":"  â— Badge Revocation & Session Invalidation (E25) - E2E â€º Badge Revocation Flow â€º should authenticate via badge swipe and include badgeId in token\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    â†’ 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  â— Badge Revocation & Session Invalidation (E25) - E2E â€º Badge Revocation Flow â€º should access protected endpoint with valid token\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    â†’ 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  â— Badge Revocation & Session Invalidation (E25) - E2E â€º Badge Revocation Flow â€º should reject login with REVOKED badge\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    â†’ 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  â— Badge Revocation & Session Invalidation (E25) - E2E â€º Badge Revocation Flow â€º should invalidate existing token when badge is revoked (< 2s)\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    â†’ 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  â— Badge Revocation & Session Invalidation (E25) - E2E â€º Badge Revocation Flow â€º should allow new login after badge revocation with updated version\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    â†’ 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  â— Badge Revocation & Session Invalidation (E25) - E2E â€º Badge Revocation Flow â€º should invalidate sessions when badge is reported LOST\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    â†’ 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  â— Badge Revocation & Session Invalidation (E25) - E2E â€º Badge Revocation Flow â€º should NOT reinstate old tokens when badge is RETURNED\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    â†’ 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  â— Badge Revocation & Session Invalidation (E25) - E2E â€º Session Version Validation â€º should reject token with mismatched session version\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    â†’ 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  â— Badge Revocation & Session Invalidation (E25) - E2E â€º Performance & Timing â€º should invalidate session within 2 seconds (E25 requirement)\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    â†’ 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n\n  â— Test suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      124 |     // Delete in dependency order\n      125 |     await prisma.client.employeeProfile.deleteMany({\n    > 126 |       where: { userId: testUser.id },\n          |                                 ^\n      127 |     });\n      128 |     await prisma.client.badgeAsset.deleteMany({\n      129 |       where: { orgId: testOrg.id },\n\n      at cleanupTestData (e2e/badge-revocation.e2e-spec.ts:126:33)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:43:11)\n","name":"/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts","startTime":1766893869981,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","1. Service Providers Management"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 1. Service Providers Management should create a service provider","invocations":1,"location":{"column":5,"line":109},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a service provider"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","1. Service Providers Management"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 1. Service Providers Management should create a monthly contract","invocations":1,"location":{"column":5,"line":133},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a monthly contract"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","2. Payment Reminders"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 2. Payment Reminders should generate reminders for active contracts","invocations":1,"location":{"column":5,"line":161},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate reminders for active contracts"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","2. Payment Reminders"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 2. Payment Reminders should list reminders for a branch","invocations":1,"location":{"column":5,"line":180},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list reminders for a branch"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","2. Payment Reminders"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 2. Payment Reminders should get reminder summary","invocations":1,"location":{"column":5,"line":196},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get reminder summary"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","2. Payment Reminders"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 2. Payment Reminders should mark reminder as paid","invocations":1,"location":{"column":5,"line":209},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should mark reminder as paid"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","3. Ops Budget Management"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 3. Ops Budget Management should set a budget for a category","invocations":1,"location":{"column":5,"line":226},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should set a budget for a category"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","3. Ops Budget Management"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 3. Ops Budget Management should compute budget actuals","invocations":1,"location":{"column":5,"line":242},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should compute budget actuals"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","3. Ops Budget Management"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 3. Ops Budget Management should get budget summary","invocations":1,"location":{"column":5,"line":261},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get budget summary"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","3. Ops Budget Management"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 3. Ops Budget Management should get franchise budget summary","invocations":1,"location":{"column":5,"line":275},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get franchise budget summary"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","4. Cost-Cutting Insights"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 4. Cost-Cutting Insights should generate cost insights for a branch","invocations":1,"location":{"column":5,"line":290},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate cost insights for a branch"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","4. Cost-Cutting Insights"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 4. Cost-Cutting Insights should generate franchise-wide insights","invocations":1,"location":{"column":5,"line":303},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate franchise-wide insights"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","5. Integration with Owner Digests"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 5. Integration with Owner Digests should include M7 data in franchise digest","invocations":1,"location":{"column":5,"line":318},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include M7 data in franchise digest"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","6. Validation & Error Handling"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 6. Validation & Error Handling should validate dueDay for monthly contracts","invocations":1,"location":{"column":5,"line":350},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should validate dueDay for monthly contracts"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","6. Validation & Error Handling"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 6. Validation & Error Handling should prevent deleting provider with active contracts","invocations":1,"location":{"column":5,"line":368},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should prevent deleting provider with active contracts"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","6. Validation & Error Handling"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\nâ†’ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 6. Validation & Error Handling should require budget parameters","invocations":1,"location":{"column":5,"line":377},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require budget parameters"}],"coverage":{},"endTime":1766893869981,"message":"  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 1. Service Providers Management â€º should create a service provider\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 1. Service Providers Management â€º should create a monthly contract\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 2. Payment Reminders â€º should generate reminders for active contracts\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 2. Payment Reminders â€º should list reminders for a branch\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 2. Payment Reminders â€º should get reminder summary\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 2. Payment Reminders â€º should mark reminder as paid\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 3. Ops Budget Management â€º should set a budget for a category\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 3. Ops Budget Management â€º should compute budget actuals\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 3. Ops Budget Management â€º should get budget summary\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 3. Ops Budget Management â€º should get franchise budget summary\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 4. Cost-Cutting Insights â€º should generate cost insights for a branch\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 4. Cost-Cutting Insights â€º should generate franchise-wide insights\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 5. Integration with Owner Digests â€º should include M7 data in franchise digest\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 6. Validation & Error Handling â€º should validate dueDay for monthly contracts\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 6. Validation & Error Handling â€º should prevent deleting provider with active contracts\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  â— M7: Service Providers, Budgets & Cost Insights (e2e) â€º 6. Validation & Error Handling â€º should require budget parameters\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    â†’ 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n\n  â— Test suite failed to run\n\n    TypeError: prisma.$disconnect is not a function\n\n      46 |     // Cleanup\n      47 |     await cleanupTestData();\n    > 48 |     await prisma.$disconnect();\n         |                  ^\n      49 |     await app.close();\n      50 |   });\n      51 |\n\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:48:18)\n","name":"/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts","startTime":1766893869981,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["M1 KDS Enterprise (e2e)","KDS Queue with Enhanced DTOs"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) KDS Queue with Enhanced DTOs should return tickets with waiterName, slaState, and proper ordering","invocations":1,"location":{"column":5,"line":89},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return tickets with waiterName, slaState, and proper ordering"},{"ancestorTitles":["M1 KDS Enterprise (e2e)","KDS Queue with Enhanced DTOs"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) KDS Queue with Enhanced DTOs should filter tickets by station correctly","invocations":1,"location":{"column":5,"line":170},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter tickets by station correctly"},{"ancestorTitles":["M1 KDS Enterprise (e2e)","KDS Queue with Enhanced DTOs"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) KDS Queue with Enhanced DTOs should support \"since\" parameter for incremental sync","invocations":1,"location":{"column":5,"line":220},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should support \"since\" parameter for incremental sync"},{"ancestorTitles":["M1 KDS Enterprise (e2e)","SLA Configuration"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) SLA Configuration should get default SLA config for a station","invocations":1,"location":{"column":5,"line":261},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get default SLA config for a station"},{"ancestorTitles":["M1 KDS Enterprise (e2e)","SLA Configuration"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) SLA Configuration should update SLA config (Manager/Owner only)","invocations":1,"location":{"column":5,"line":273},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update SLA config (Manager/Owner only)"},{"ancestorTitles":["M1 KDS Enterprise (e2e)","SLA Configuration"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) SLA Configuration should reject SLA config update from waiter (L1)","invocations":1,"location":{"column":5,"line":296},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject SLA config update from waiter (L1)"},{"ancestorTitles":["M1 KDS Enterprise (e2e)","KDS Resilience"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) KDS Resilience should handle marking ticket ready and checking all-ready state","invocations":1,"location":{"column":5,"line":309},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle marking ticket ready and checking all-ready state"}],"endTime":1766893822841,"message":"  â— M1 KDS Enterprise (e2e) â€º KDS Queue with Enhanced DTOs â€º should return tickets with waiterName, slaState, and proper ordering\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n\n  â— M1 KDS Enterprise (e2e) â€º KDS Queue with Enhanced DTOs â€º should filter tickets by station correctly\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n\n  â— M1 KDS Enterprise (e2e) â€º KDS Queue with Enhanced DTOs â€º should support \"since\" parameter for incremental sync\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n\n  â— M1 KDS Enterprise (e2e) â€º SLA Configuration â€º should get default SLA config for a station\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n\n  â— M1 KDS Enterprise (e2e) â€º SLA Configuration â€º should update SLA config (Manager/Owner only)\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n\n  â— M1 KDS Enterprise (e2e) â€º SLA Configuration â€º should reject SLA config update from waiter (L1)\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n\n  â— M1 KDS Enterprise (e2e) â€º KDS Resilience â€º should handle marking ticket ready and checking all-ready state\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n","name":"/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts","startTime":1766893820782,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E27 - Costing & Profit Engine (e2e)","Costing calculation on order close"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n  55 \n  56 async function setupTestData() {\n  57   // Create org\nâ†’ 58   const org = await prisma.client.org.create({\n         data: {\n           name: \"E27 Test Org\",\n           subdomain: \"e27-test\",\n           isSandbox: true,\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:36:5)"],"fullName":"E27 - Costing & Profit Engine (e2e) Costing calculation on order close should calculate cost and margin when closing an order","invocations":1,"location":{"column":5,"line":240},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate cost and margin when closing an order"},{"ancestorTitles":["E27 - Costing & Profit Engine (e2e)","Analytics RBAC - Cost data visibility"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n  55 \n  56 async function setupTestData() {\n  57   // Create org\nâ†’ 58   const org = await prisma.client.org.create({\n         data: {\n           name: \"E27 Test Org\",\n           subdomain: \"e27-test\",\n           isSandbox: true,\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:36:5)"],"fullName":"E27 - Costing & Profit Engine (e2e) Analytics RBAC - Cost data visibility should include cost data for MANAGER (L4) role","invocations":1,"location":{"column":5,"line":310},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include cost data for MANAGER (L4) role"},{"ancestorTitles":["E27 - Costing & Profit Engine (e2e)","Analytics RBAC - Cost data visibility"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n  55 \n  56 async function setupTestData() {\n  57   // Create org\nâ†’ 58   const org = await prisma.client.org.create({\n         data: {\n           name: \"E27 Test Org\",\n           subdomain: \"e27-test\",\n           isSandbox: true,\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:36:5)"],"fullName":"E27 - Costing & Profit Engine (e2e) Analytics RBAC - Cost data visibility should exclude cost data for CHEF (L3) when showCostToChef=false","invocations":1,"location":{"column":5,"line":330},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should exclude cost data for CHEF (L3) when showCostToChef=false"},{"ancestorTitles":["E27 - Costing & Profit Engine (e2e)","Analytics RBAC - Cost data visibility"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n  55 \n  56 async function setupTestData() {\n  57   // Create org\nâ†’ 58   const org = await prisma.client.org.create({\n         data: {\n           name: \"E27 Test Org\",\n           subdomain: \"e27-test\",\n           isSandbox: true,\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:36:5)"],"fullName":"E27 - Costing & Profit Engine (e2e) Analytics RBAC - Cost data visibility should include cost data for CHEF (L3) when showCostToChef=true","invocations":1,"location":{"column":5,"line":347},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include cost data for CHEF (L3) when showCostToChef=true"}],"coverage":{},"endTime":1766893869981,"message":"  â— E27 - Costing & Profit Engine (e2e) â€º Costing calculation on order close â€º should calculate cost and margin when closing an order\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n      55 \n      56 async function setupTestData() {\n      57   // Create org\n    â†’ 58   const org = await prisma.client.org.create({\n             data: {\n               name: \"E27 Test Org\",\n               subdomain: \"e27-test\",\n               isSandbox: true,\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e27-costing.e2e-spec.ts:58:17)\n      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)\n\n  â— E27 - Costing & Profit Engine (e2e) â€º Analytics RBAC - Cost data visibility â€º should include cost data for MANAGER (L4) role\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n      55 \n      56 async function setupTestData() {\n      57   // Create org\n    â†’ 58   const org = await prisma.client.org.create({\n             data: {\n               name: \"E27 Test Org\",\n               subdomain: \"e27-test\",\n               isSandbox: true,\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e27-costing.e2e-spec.ts:58:17)\n      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)\n\n  â— E27 - Costing & Profit Engine (e2e) â€º Analytics RBAC - Cost data visibility â€º should exclude cost data for CHEF (L3) when showCostToChef=false\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n      55 \n      56 async function setupTestData() {\n      57   // Create org\n    â†’ 58   const org = await prisma.client.org.create({\n             data: {\n               name: \"E27 Test Org\",\n               subdomain: \"e27-test\",\n               isSandbox: true,\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e27-costing.e2e-spec.ts:58:17)\n      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)\n\n  â— E27 - Costing & Profit Engine (e2e) â€º Analytics RBAC - Cost data visibility â€º should include cost data for CHEF (L3) when showCostToChef=true\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n      55 \n      56 async function setupTestData() {\n      57   // Create org\n    â†’ 58   const org = await prisma.client.org.create({\n             data: {\n               name: \"E27 Test Org\",\n               subdomain: \"e27-test\",\n               isSandbox: true,\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e27-costing.e2e-spec.ts:58:17)\n      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)\n\n\n  â— Test suite failed to run\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.payment.deleteMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:42:33\n\n      39 afterAll(async () => {\n      40   // Cleanup\n      41   await prisma.client.orderItem.deleteMany({ where: { order: { branchId } } });\n    â†’ 42   await prisma.client.payment.deleteMany(\n    Foreign key constraint violated: `refunds_paymentId_fkey (index)`\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e27-costing.e2e-spec.ts:42:5)\n","name":"/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts","startTime":1766893869981,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Webhook Security E2E (E24)","Authentication"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:72:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Authentication should reject webhook without signature header","invocations":1,"location":{"column":5,"line":71},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook without signature header"},{"ancestorTitles":["Webhook Security E2E (E24)","Authentication"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:84:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Authentication should reject webhook without timestamp header","invocations":1,"location":{"column":5,"line":83},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook without timestamp header"},{"ancestorTitles":["Webhook Security E2E (E24)","Authentication"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:95:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Authentication should reject webhook without request ID header","invocations":1,"location":{"column":5,"line":94},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook without request ID header"},{"ancestorTitles":["Webhook Security E2E (E24)","Authentication"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:107:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Authentication should reject webhook with invalid signature","invocations":1,"location":{"column":5,"line":105},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook with invalid signature"},{"ancestorTitles":["Webhook Security E2E (E24)","Authentication"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:117:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Authentication should accept webhook with valid signature","invocations":1,"location":{"column":5,"line":115},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should accept webhook with valid signature"},{"ancestorTitles":["Webhook Security E2E (E24)","Timestamp validation"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:132:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Timestamp validation should reject webhook with stale timestamp (>5 minutes old)","invocations":1,"location":{"column":5,"line":126},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook with stale timestamp (>5 minutes old)"},{"ancestorTitles":["Webhook Security E2E (E24)","Timestamp validation"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:148:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Timestamp validation should reject webhook with future timestamp (>5 minutes ahead)","invocations":1,"location":{"column":5,"line":142},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook with future timestamp (>5 minutes ahead)"},{"ancestorTitles":["Webhook Security E2E (E24)","Timestamp validation"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:162:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Timestamp validation should accept webhook with timestamp at edge of window (4 minutes old)","invocations":1,"location":{"column":5,"line":156},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should accept webhook with timestamp at edge of window (4 minutes old)"},{"ancestorTitles":["Webhook Security E2E (E24)","Timestamp validation"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:171:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Timestamp validation should reject webhook with invalid timestamp format","invocations":1,"location":{"column":5,"line":170},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook with invalid timestamp format"},{"ancestorTitles":["Webhook Security E2E (E24)","Replay protection"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:190:31)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Replay protection should reject duplicate request ID (replay attack)","invocations":1,"location":{"column":5,"line":185},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject duplicate request ID (replay attack)"},{"ancestorTitles":["Webhook Security E2E (E24)","Replay protection"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:206:31)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Replay protection should allow same payload with different request IDs","invocations":1,"location":{"column":5,"line":203},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow same payload with different request IDs"},{"ancestorTitles":["Webhook Security E2E (E24)","Body integrity"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:223:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Body integrity should reject webhook with tampered body","invocations":1,"location":{"column":5,"line":215},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook with tampered body"},{"ancestorTitles":["Webhook Security E2E (E24)","Body integrity"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:237:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Body integrity should handle empty body correctly","invocations":1,"location":{"column":5,"line":235},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle empty body correctly"},{"ancestorTitles":["Webhook Security E2E (E24)","Body integrity"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:257:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Body integrity should handle complex nested JSON","invocations":1,"location":{"column":5,"line":242},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle complex nested JSON"},{"ancestorTitles":["Webhook Security E2E (E24)","Multiple webhook endpoints"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:265:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Multiple webhook endpoints should protect MTN webhook endpoint","invocations":1,"location":{"column":5,"line":263},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should protect MTN webhook endpoint"},{"ancestorTitles":["Webhook Security E2E (E24)","Multiple webhook endpoints"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:276:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Multiple webhook endpoints should protect Airtel webhook endpoint","invocations":1,"location":{"column":5,"line":274},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should protect Airtel webhook endpoint"},{"ancestorTitles":["Webhook Security E2E (E24)","Response format"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:289:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Response format should return proper success response","invocations":1,"location":{"column":5,"line":287},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return proper success response"},{"ancestorTitles":["Webhook Security E2E (E24)","Response format"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:302:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Response format should return proper error response for auth failure","invocations":1,"location":{"column":5,"line":300},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return proper error response for auth failure"},{"ancestorTitles":["Webhook Security E2E (E24)","Performance and load"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at /workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:314:9\n    at Function.from (<anonymous>)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:313:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Performance and load should handle multiple concurrent valid webhooks","invocations":1,"location":{"column":5,"line":312},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle multiple concurrent valid webhooks"}],"endTime":1766893825254,"message":"  â— Webhook Security E2E (E24) â€º Authentication â€º should reject webhook without signature header\n\n    TypeError: request is not a function\n\n      70 |   describe('Authentication', () => {\n      71 |     it('should reject webhook without signature header', async () => {\n    > 72 |       const response = await request(app.getHttpServer())\n         |                              ^\n      73 |         .post('/webhooks/billing')\n      74 |         .set('Content-Type', 'application/json')\n      75 |         .set('X-Ts', Date.now().toString())\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:72:30)\n\n  â— Webhook Security E2E (E24) â€º Authentication â€º should reject webhook without timestamp header\n\n    TypeError: request is not a function\n\n      82 |\n      83 |     it('should reject webhook without timestamp header', async () => {\n    > 84 |       const response = await request(app.getHttpServer())\n         |                              ^\n      85 |         .post('/webhooks/billing')\n      86 |         .set('Content-Type', 'application/json')\n      87 |         .set('X-Sig', 'some-signature')\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:84:30)\n\n  â— Webhook Security E2E (E24) â€º Authentication â€º should reject webhook without request ID header\n\n    TypeError: request is not a function\n\n      93 |\n      94 |     it('should reject webhook without request ID header', async () => {\n    > 95 |       const response = await request(app.getHttpServer())\n         |                              ^\n      96 |         .post('/webhooks/billing')\n      97 |         .set('Content-Type', 'application/json')\n      98 |         .set('X-Sig', 'some-signature')\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:95:30)\n\n  â— Webhook Security E2E (E24) â€º Authentication â€º should reject webhook with invalid signature\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:107:30)\n\n  â— Webhook Security E2E (E24) â€º Authentication â€º should accept webhook with valid signature\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:117:30)\n\n  â— Webhook Security E2E (E24) â€º Timestamp validation â€º should reject webhook with stale timestamp (>5 minutes old)\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:132:30)\n\n  â— Webhook Security E2E (E24) â€º Timestamp validation â€º should reject webhook with future timestamp (>5 minutes ahead)\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:148:30)\n\n  â— Webhook Security E2E (E24) â€º Timestamp validation â€º should accept webhook with timestamp at edge of window (4 minutes old)\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:162:30)\n\n  â— Webhook Security E2E (E24) â€º Timestamp validation â€º should reject webhook with invalid timestamp format\n\n    TypeError: request is not a function\n\n      169 |\n      170 |     it('should reject webhook with invalid timestamp format', async () => {\n    > 171 |       const response = await request(app.getHttpServer())\n          |                              ^\n      172 |         .post('/webhooks/billing')\n      173 |         .set('Content-Type', 'application/json')\n      174 |         .set('X-Sig', 'some-signature')\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:171:30)\n\n  â— Webhook Security E2E (E24) â€º Replay protection â€º should reject duplicate request ID (replay attack)\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:190:31)\n\n  â— Webhook Security E2E (E24) â€º Replay protection â€º should allow same payload with different request IDs\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:206:31)\n\n  â— Webhook Security E2E (E24) â€º Body integrity â€º should reject webhook with tampered body\n\n    TypeError: request is not a function\n\n      221 |\n      222 |       // Send tampered payload with signature from original\n    > 223 |       const response = await request(app.getHttpServer())\n          |                              ^\n      224 |         .post('/webhooks/billing')\n      225 |         .set('Content-Type', 'application/json')\n      226 |         .set('X-Sig', signature)\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:223:30)\n\n  â— Webhook Security E2E (E24) â€º Body integrity â€º should handle empty body correctly\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:237:30)\n\n  â— Webhook Security E2E (E24) â€º Body integrity â€º should handle complex nested JSON\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:257:30)\n\n  â— Webhook Security E2E (E24) â€º Multiple webhook endpoints â€º should protect MTN webhook endpoint\n\n    TypeError: request is not a function\n\n      263 |     it('should protect MTN webhook endpoint', async () => {\n      264 |       const payload = { transactionId: 'mtn-123', status: 'completed' };\n    > 265 |       const response = await request(app.getHttpServer())\n          |                              ^\n      266 |         .post('/webhooks/mtn')\n      267 |         .set('Content-Type', 'application/json')\n      268 |         .send(payload);\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:265:30)\n\n  â— Webhook Security E2E (E24) â€º Multiple webhook endpoints â€º should protect Airtel webhook endpoint\n\n    TypeError: request is not a function\n\n      274 |     it('should protect Airtel webhook endpoint', async () => {\n      275 |       const payload = { transactionId: 'airtel-123', status: 'completed' };\n    > 276 |       const response = await request(app.getHttpServer())\n          |                              ^\n      277 |         .post('/webhooks/airtel')\n      278 |         .set('Content-Type', 'application/json')\n      279 |         .send(payload);\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:276:30)\n\n  â— Webhook Security E2E (E24) â€º Response format â€º should return proper success response\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:289:30)\n\n  â— Webhook Security E2E (E24) â€º Response format â€º should return proper error response for auth failure\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:302:30)\n\n  â— Webhook Security E2E (E24) â€º Performance and load â€º should handle multiple concurrent valid webhooks\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at webhook-security.e2e-spec.ts:314:9\n          at Function.from (<anonymous>)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:313:30)\n","name":"/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts","startTime":1766893824543,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E23 Roles & Platform Access (e2e)","GET /access/matrix"],"duration":42,"failureDetails":[{"matcherResult":{"message":"expect(received).toHaveProperty(path)\n\nExpected path: \"WAITER\"\nReceived path: []\n\nReceived value: {\"HEAD_BARISTA\": {\"desktop\": true, \"mobile\": false, \"web\": true}, \"TICKET_MASTER\": {\"desktop\": false, \"mobile\": true, \"web\": true}}","pass":false}}],"failureMessages":["Error: expect(received).toHaveProperty(path)\n\nExpected path: \"WAITER\"\nReceived path: []\n\nReceived value: {\"HEAD_BARISTA\": {\"desktop\": true, \"mobile\": false, \"web\": true}, \"TICKET_MASTER\": {\"desktop\": false, \"mobile\": true, \"web\": true}}\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e23-roles-access.e2e-spec.ts:84:44)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"E23 Roles & Platform Access (e2e) GET /access/matrix should allow L4 (manager) to get platform access matrix","invocations":1,"location":{"column":5,"line":76},"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"should allow L4 (manager) to get platform access matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","GET /access/matrix"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) GET /access/matrix should reject L3 (procurement) from accessing matrix","invocations":1,"location":{"column":5,"line":89},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject L3 (procurement) from accessing matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","GET /access/matrix"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) GET /access/matrix should reject L2 (ticket master) from accessing matrix","invocations":1,"location":{"column":5,"line":96},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject L2 (ticket master) from accessing matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","GET /access/matrix"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) GET /access/matrix should reject L1 (waiter) from accessing matrix","invocations":1,"location":{"column":5,"line":103},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject L1 (waiter) from accessing matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","GET /access/matrix"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) GET /access/matrix should reject unauthenticated requests","invocations":1,"location":{"column":5,"line":110},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject unauthenticated requests"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","PATCH /access/matrix"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) PATCH /access/matrix should allow L4 (manager) to update platform access matrix","invocations":1,"location":{"column":5,"line":116},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow L4 (manager) to update platform access matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","PATCH /access/matrix"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) PATCH /access/matrix should reject updates with invalid structure","invocations":1,"location":{"column":5,"line":131},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject updates with invalid structure"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","PATCH /access/matrix"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) PATCH /access/matrix should reject L3 (procurement) from updating matrix","invocations":1,"location":{"column":5,"line":143},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject L3 (procurement) from updating matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","PATCH /access/matrix"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) PATCH /access/matrix should reject L2 (ticket master) from updating matrix","invocations":1,"location":{"column":5,"line":155},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject L2 (ticket master) from updating matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","PATCH /access/matrix"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) PATCH /access/matrix should reject unauthenticated requests","invocations":1,"location":{"column":5,"line":167},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject unauthenticated requests"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","New role authentication"],"duration":161,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) New role authentication should authenticate procurement user (L3)","invocations":1,"location":{"column":5,"line":180},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should authenticate procurement user (L3)"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","New role authentication"],"duration":111,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) New role authentication should authenticate stock user (L3)","invocations":1,"location":{"column":5,"line":197},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should authenticate stock user (L3)"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","New role authentication"],"duration":136,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) New role authentication should authenticate event manager user (L3)","invocations":1,"location":{"column":5,"line":214},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should authenticate event manager user (L3)"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","New role authentication"],"duration":108,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) New role authentication should authenticate supervisor user (L2)","invocations":1,"location":{"column":5,"line":231},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should authenticate supervisor user (L2)"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","New role authentication"],"duration":108,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) New role authentication should authenticate chef user (L2)","invocations":1,"location":{"column":5,"line":248},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should authenticate chef user (L2)"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","New role authentication"],"duration":110,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) New role authentication should authenticate bartender user (L1)","invocations":1,"location":{"column":5,"line":265},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should authenticate bartender user (L1)"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","Platform access matrix persistence"],"duration":19,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) Platform access matrix persistence should persist and retrieve updated platform access","invocations":1,"location":{"column":5,"line":284},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should persist and retrieve updated platform access"}],"endTime":1766893827341,"message":"  â— E23 Roles & Platform Access (e2e) â€º GET /access/matrix â€º should allow L4 (manager) to get platform access matrix\n\n    expect(received).toHaveProperty(path)\n\n    Expected path: \"WAITER\"\n    Received path: []\n\n    Received value: {\"HEAD_BARISTA\": {\"desktop\": true, \"mobile\": false, \"web\": true}, \"TICKET_MASTER\": {\"desktop\": false, \"mobile\": true, \"web\": true}}\n\n      82 |       expect(response.body).toHaveProperty('platformAccess');\n      83 |       expect(response.body).toHaveProperty('defaults');\n    > 84 |       expect(response.body.platformAccess).toHaveProperty('WAITER');\n         |                                            ^\n      85 |       expect(response.body.platformAccess).toHaveProperty('PROCUREMENT');\n      86 |       expect(response.body.platformAccess).toHaveProperty('TICKET_MASTER');\n      87 |     });\n\n      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:84:44)\n","name":"/workspaces/chefcloud/services/api/test/e23-roles-access.e2e-spec.ts","startTime":1766893825258,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Plan-Aware Rate Limiting E2E","POST /billing/plan/change"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\nâ†’ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp6yr41001y58q49m8nqh68\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E POST /billing/plan/change should enforce free tier rate limit (10/min)","invocations":1,"location":{"column":5,"line":252},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce free tier rate limit (10/min)"},{"ancestorTitles":["Plan-Aware Rate Limiting E2E","POST /billing/plan/change"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\nâ†’ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp6yr41001y58q49m8nqh68\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E POST /billing/plan/change should allow pro tier higher limits (60/min)","invocations":1,"location":{"column":5,"line":282},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow pro tier higher limits (60/min)"},{"ancestorTitles":["Plan-Aware Rate Limiting E2E","POST /billing/plan/change"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\nâ†’ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp6yr41001y58q49m8nqh68\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E POST /billing/plan/change should allow enterprise tier highest limits (240/min)","invocations":1,"location":{"column":5,"line":302},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow enterprise tier highest limits (240/min)"},{"ancestorTitles":["Plan-Aware Rate Limiting E2E","POST /billing/cancel"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\nâ†’ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp6yr41001y58q49m8nqh68\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E POST /billing/cancel should apply rate limiting to cancel endpoint","invocations":1,"location":{"column":5,"line":324},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should apply rate limiting to cancel endpoint"},{"ancestorTitles":["Plan-Aware Rate Limiting E2E","Rate limit headers"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\nâ†’ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp6yr41001y58q49m8nqh68\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E Rate limit headers should include Retry-After header in 429 responses","invocations":1,"location":{"column":5,"line":347},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include Retry-After header in 429 responses"},{"ancestorTitles":["Plan-Aware Rate Limiting E2E","Authentication requirement"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\nâ†’ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp6yr41001y58q49m8nqh68\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E Authentication requirement should reject requests without authentication","invocations":1,"location":{"column":5,"line":369},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject requests without authentication"},{"ancestorTitles":["Plan-Aware Rate Limiting E2E","Metrics"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\nâ†’ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp6yr41001y58q49m8nqh68\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E Metrics should emit rate limit hit metrics","invocations":1,"location":{"column":5,"line":379},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should emit rate limit hit metrics"}],"endTime":1766893828491,"message":"  â— Plan-Aware Rate Limiting E2E â€º POST /billing/plan/change â€º should enforce free tier rate limit (10/min)\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    â†’ 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp6yr41001y58q49m8nqh68\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n\n  â— Plan-Aware Rate Limiting E2E â€º POST /billing/plan/change â€º should allow pro tier higher limits (60/min)\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    â†’ 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp6yr41001y58q49m8nqh68\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n\n  â— Plan-Aware Rate Limiting E2E â€º POST /billing/plan/change â€º should allow enterprise tier highest limits (240/min)\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    â†’ 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp6yr41001y58q49m8nqh68\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n\n  â— Plan-Aware Rate Limiting E2E â€º POST /billing/cancel â€º should apply rate limiting to cancel endpoint\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    â†’ 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp6yr41001y58q49m8nqh68\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n\n  â— Plan-Aware Rate Limiting E2E â€º Rate limit headers â€º should include Retry-After header in 429 responses\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    â†’ 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp6yr41001y58q49m8nqh68\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n\n  â— Plan-Aware Rate Limiting E2E â€º Authentication requirement â€º should reject requests without authentication\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    â†’ 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp6yr41001y58q49m8nqh68\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n\n  â— Plan-Aware Rate Limiting E2E â€º Metrics â€º should emit rate limit hit metrics\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    â†’ 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp6yr41001y58q49m8nqh68\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n","name":"/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts","startTime":1766893827345,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","POST /auth/login"],"duration":22,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic POST /auth/login returns 200 with access_token on valid credentials","invocations":1,"location":{"column":5,"line":81},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 200 with access_token on valid credentials"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","POST /auth/login"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic POST /auth/login returns 401 on invalid credentials","invocations":1,"location":{"column":5,"line":95},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 401 on invalid credentials"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","POST /auth/login"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic POST /auth/login returns 400 on invalid email format","invocations":1,"location":{"column":5,"line":104},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 400 on invalid email format"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","POST /auth/login"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic POST /auth/login returns 400 on missing password","invocations":1,"location":{"column":5,"line":113},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 400 on missing password"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","POST /auth/pin-login"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic POST /auth/pin-login returns 200 with access_token on valid PIN","invocations":1,"location":{"column":5,"line":124},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 200 with access_token on valid PIN"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","POST /auth/pin-login"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic POST /auth/pin-login returns 401 on invalid PIN","invocations":1,"location":{"column":5,"line":138},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 401 on invalid PIN"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","POST /auth/msr-swipe"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic POST /auth/msr-swipe returns 200 with access_token on valid badge","invocations":1,"location":{"column":5,"line":153},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 200 with access_token on valid badge"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","POST /auth/msr-swipe"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic POST /auth/msr-swipe returns 404 on unknown badge","invocations":1,"location":{"column":5,"line":163},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 404 on unknown badge"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","POST /auth/enroll-badge"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic POST /auth/enroll-badge returns 200 on successful badge enrollment (L4+ role)","invocations":1,"location":{"column":5,"line":174},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 200 on successful badge enrollment (L4+ role)"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","GET /me"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic GET /me returns 401 without authorization header","invocations":1,"location":{"column":5,"line":189},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 401 without authorization header"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","Rate limiting"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic Rate limiting handles burst requests to /auth/login without crashing","invocations":1,"location":{"column":5,"line":206},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles burst requests to /auth/login without crashing"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","Login methods"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic Login methods supports email/password login","invocations":1,"location":{"column":5,"line":240},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"supports email/password login"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","Login methods"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic Login methods supports PIN login","invocations":1,"location":{"column":5,"line":249},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"supports PIN login"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","Login methods"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic Login methods supports badge swipe login","invocations":1,"location":{"column":5,"line":262},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"supports badge swipe login"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","Login methods"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic Login methods returns consistent user structure across all auth methods","invocations":1,"location":{"column":5,"line":271},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"returns consistent user structure across all auth methods"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","Endpoint availability"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic Endpoint availability POST /auth/login is available","invocations":1,"location":{"column":5,"line":288},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"POST /auth/login is available"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","Endpoint availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic Endpoint availability POST /auth/pin-login is available","invocations":1,"location":{"column":5,"line":295},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /auth/pin-login is available"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","Endpoint availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic Endpoint availability POST /auth/msr-swipe is available","invocations":1,"location":{"column":5,"line":308},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /auth/msr-swipe is available"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","Endpoint availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic Endpoint availability POST /auth/enroll-badge is available","invocations":1,"location":{"column":5,"line":317},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /auth/enroll-badge is available"},{"ancestorTitles":["Auth (Slice E2E) â€” Deterministic","Endpoint availability"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) â€” Deterministic Endpoint availability GET /me is available (requires auth)","invocations":1,"location":{"column":5,"line":327},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /me is available (requires auth)"}],"endTime":1766893828957,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/auth.slice.e2e-spec.ts","startTime":1766893828496,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["SSE /stream/kpis Security (E26)","Authentication"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Authentication should return 401 when no token provided","invocations":1,"location":{"column":5,"line":79},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 when no token provided"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Authentication"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Authentication should return 401 with invalid token","invocations":1,"location":{"column":5,"line":85},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 with invalid token"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Authorization"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Authorization should return 403 for L1 (Waiter) role","invocations":1,"location":{"column":5,"line":94},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 for L1 (Waiter) role"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Authorization"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Authorization should allow L4 (Manager) role","invocations":1,"location":{"column":5,"line":101},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow L4 (Manager) role"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Authorization"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Authorization should allow L5 (Owner) role","invocations":1,"location":{"column":5,"line":123},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow L5 (Owner) role"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","SSE Headers"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) SSE Headers should set correct SSE headers","invocations":1,"location":{"column":5,"line":147},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should set correct SSE headers"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Event Emission"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Event Emission should emit at least one KPIs event with valid token","invocations":1,"location":{"column":5,"line":166},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should emit at least one KPIs event with valid token"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Org-Scope Isolation"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Org-Scope Isolation should only stream data for authenticated user's org","invocations":1,"location":{"column":5,"line":198},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should only stream data for authenticated user's org"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Rate Limiting"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Rate Limiting should return 429 after exceeding rate limit","invocations":1,"location":{"column":5,"line":221},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 429 after exceeding rate limit"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Rate Limiting"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Rate Limiting should block concurrent connections beyond limit","invocations":1,"location":{"column":5,"line":269},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should block concurrent connections beyond limit"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Connection Cleanup"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Connection Cleanup should clean up resources on disconnect","invocations":1,"location":{"column":5,"line":317},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should clean up resources on disconnect"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","CORS"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) CORS should respect CORS allowlist","invocations":1,"location":{"column":5,"line":338},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should respect CORS allowlist"}],"coverage":{},"endTime":1766893869981,"message":"  â— SSE /stream/kpis Security (E26) â€º Authentication â€º should return 401 when no token provided\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  â— SSE /stream/kpis Security (E26) â€º Authentication â€º should return 401 with invalid token\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  â— SSE /stream/kpis Security (E26) â€º Authorization â€º should return 403 for L1 (Waiter) role\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  â— SSE /stream/kpis Security (E26) â€º Authorization â€º should allow L4 (Manager) role\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  â— SSE /stream/kpis Security (E26) â€º Authorization â€º should allow L5 (Owner) role\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  â— SSE /stream/kpis Security (E26) â€º SSE Headers â€º should set correct SSE headers\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  â— SSE /stream/kpis Security (E26) â€º Event Emission â€º should emit at least one KPIs event with valid token\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  â— SSE /stream/kpis Security (E26) â€º Org-Scope Isolation â€º should only stream data for authenticated user's org\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  â— SSE /stream/kpis Security (E26) â€º Rate Limiting â€º should return 429 after exceeding rate limit\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  â— SSE /stream/kpis Security (E26) â€º Rate Limiting â€º should block concurrent connections beyond limit\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  â— SSE /stream/kpis Security (E26) â€º Connection Cleanup â€º should clean up resources on disconnect\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  â— SSE /stream/kpis Security (E26) â€º CORS â€º should respect CORS allowlist\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n\n  â— Test suite failed to run\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.user.deleteMany()` invocation in\n    /workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:72:23\n\n      69 \n      70 afterAll(async () => {\n      71   // Cleanup\n    â†’ 72   await prisma.user.deleteMany(\n    Foreign key constraint violated: `orders_userId_fkey (index)`\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (sse-security.e2e-spec.ts:72:5)\n","name":"/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts","startTime":1766893869981,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should create a happy hour promotion (20% off drinks 17:00-19:00)","invocations":1,"location":{"column":5,"line":103},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a happy hour promotion (20% off drinks 17:00-19:00)"},{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should list promotions (including inactive)","invocations":1,"location":{"column":5,"line":144},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list promotions (including inactive)"},{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should approve the promotion","invocations":1,"location":{"column":5,"line":158},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should approve the promotion"},{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should apply discount when placing order during happy hour (18:00 on Monday)","invocations":1,"location":{"column":5,"line":169},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should apply discount when placing order during happy hour (18:00 on Monday)"},{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should NOT apply discount outside happy hour (20:00)","invocations":1,"location":{"column":5,"line":228},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should NOT apply discount outside happy hour (20:00)"},{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should toggle promotion inactive","invocations":1,"location":{"column":5,"line":273},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should toggle promotion inactive"},{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should NOT apply discount when promotion is inactive","invocations":1,"location":{"column":5,"line":283},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should NOT apply discount when promotion is inactive"}],"coverage":{},"endTime":1766893869981,"message":"  â— E37 - Promotions & Pricing Engine (e2e) â€º Happy Hour Promotion Flow â€º should create a happy hour promotion (20% off drinks 17:00-19:00)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n  â— E37 - Promotions & Pricing Engine (e2e) â€º Happy Hour Promotion Flow â€º should list promotions (including inactive)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n  â— E37 - Promotions & Pricing Engine (e2e) â€º Happy Hour Promotion Flow â€º should approve the promotion\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n  â— E37 - Promotions & Pricing Engine (e2e) â€º Happy Hour Promotion Flow â€º should apply discount when placing order during happy hour (18:00 on Monday)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n  â— E37 - Promotions & Pricing Engine (e2e) â€º Happy Hour Promotion Flow â€º should NOT apply discount outside happy hour (20:00)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n  â— E37 - Promotions & Pricing Engine (e2e) â€º Happy Hour Promotion Flow â€º should toggle promotion inactive\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n  â— E37 - Promotions & Pricing Engine (e2e) â€º Happy Hour Promotion Flow â€º should NOT apply discount when promotion is inactive\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n\n  â— Test suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'promotionEffect')\n\n      88 |   afterAll(async () => {\n      89 |     // Clean up test data\n    > 90 |     await prisma.promotionEffect.deleteMany({ where: { promotion: { orgId } } });\n         |                  ^\n      91 |     await prisma.promotion.deleteMany({ where: { orgId } });\n      92 |     await prisma.orderItem.deleteMany({ where: { order: { branchId } } });\n      93 |     await prisma.order.deleteMany({ where: { branchId } });\n\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:90:18)\n","name":"/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts","startTime":1766893869981,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":203},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 403 if user is not L5 (owner)","invocations":1,"location":{"column":5,"line":211},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 if user is not L5 (owner)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 200 and log plan change for L5 owner","invocations":1,"location":{"column":5,"line":220},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 and log plan change for L5 owner"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 404 for non-existent plan code","invocations":1,"location":{"column":5,"line":231},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 for non-existent plan code"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 429 after exceeding plan-aware rate limit (burst)","invocations":1,"location":{"column":5,"line":240},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 429 after exceeding plan-aware rate limit (burst)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":261},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should return 403 if user is not L5 (owner)","invocations":1,"location":{"column":5,"line":269},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 if user is not L5 (owner)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should return 200 and log cancellation for L5 owner","invocations":1,"location":{"column":5,"line":277},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 and log cancellation for L5 owner"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should be idempotent (canceling twice returns 200)","invocations":1,"location":{"column":5,"line":287},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should be idempotent (canceling twice returns 200)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","GET /billing/subscription"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) GET /billing/subscription should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":305},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","GET /billing/subscription"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) GET /billing/subscription should return 200 with subscription details for authenticated user","invocations":1,"location":{"column":5,"line":313},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 with subscription details for authenticated user"}],"endTime":1766893833112,"message":"  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/plan/change â€º should return 401 if no authorization token is provided\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/plan/change â€º should return 403 if user is not L5 (owner)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/plan/change â€º should return 200 and log plan change for L5 owner\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/plan/change â€º should return 404 for non-existent plan code\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/plan/change â€º should return 429 after exceeding plan-aware rate limit (burst)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/cancel â€º should return 401 if no authorization token is provided\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/cancel â€º should return 403 if user is not L5 (owner)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/cancel â€º should return 200 and log cancellation for L5 owner\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/cancel â€º should be idempotent (canceling twice returns 200)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º GET /billing/subscription â€º should return 401 if no authorization token is provided\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º GET /billing/subscription â€º should return 200 with subscription details for authenticated user\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n","name":"/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts","startTime":1766893832389,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E22.D - Franchise Cache Invalidation (e2e)","Budget Update Invalidation"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)"],"fullName":"E22.D - Franchise Cache Invalidation (e2e) Budget Update Invalidation should invalidate budgets cache after budget update","invocations":1,"location":{"column":5,"line":121},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should invalidate budgets cache after budget update"},{"ancestorTitles":["E22.D - Franchise Cache Invalidation (e2e)","Budget Update Invalidation"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)"],"fullName":"E22.D - Franchise Cache Invalidation (e2e) Budget Update Invalidation should not affect other cache prefixes when updating budgets","invocations":1,"location":{"column":5,"line":168},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not affect other cache prefixes when updating budgets"},{"ancestorTitles":["E22.D - Franchise Cache Invalidation (e2e)","Cache Miss After Invalidation"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)"],"fullName":"E22.D - Franchise Cache Invalidation (e2e) Cache Miss After Invalidation should return fresh data after cache invalidation","invocations":1,"location":{"column":5,"line":219},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return fresh data after cache invalidation"},{"ancestorTitles":["E22.D - Franchise Cache Invalidation (e2e)","Multiple Invalidations"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)"],"fullName":"E22.D - Franchise Cache Invalidation (e2e) Multiple Invalidations should handle multiple rapid invalidations without errors","invocations":1,"location":{"column":5,"line":257},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle multiple rapid invalidations without errors"}],"endTime":1766893833794,"message":"  â— E22.D - Franchise Cache Invalidation (e2e) â€º Budget Update Invalidation â€º should invalidate budgets cache after budget update\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      57 |   async function setupTestData() {\n      58 |     // Create test organization\n    > 59 |     const org = await prisma.organization.create({\n         |                                           ^\n      60 |       data: {\n      61 |         name: 'E22D Test Org',\n      62 |         slug: `e22d-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)\n\n  â— E22.D - Franchise Cache Invalidation (e2e) â€º Budget Update Invalidation â€º should not affect other cache prefixes when updating budgets\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      57 |   async function setupTestData() {\n      58 |     // Create test organization\n    > 59 |     const org = await prisma.organization.create({\n         |                                           ^\n      60 |       data: {\n      61 |         name: 'E22D Test Org',\n      62 |         slug: `e22d-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)\n\n  â— E22.D - Franchise Cache Invalidation (e2e) â€º Cache Miss After Invalidation â€º should return fresh data after cache invalidation\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      57 |   async function setupTestData() {\n      58 |     // Create test organization\n    > 59 |     const org = await prisma.organization.create({\n         |                                           ^\n      60 |       data: {\n      61 |         name: 'E22D Test Org',\n      62 |         slug: `e22d-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)\n\n  â— E22.D - Franchise Cache Invalidation (e2e) â€º Multiple Invalidations â€º should handle multiple rapid invalidations without errors\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      57 |   async function setupTestData() {\n      58 |     // Create test organization\n    > 59 |     const org = await prisma.organization.create({\n         |                                           ^\n      60 |       data: {\n      61 |         name: 'E22D Test Org',\n      62 |         slug: `e22d-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)\n","name":"/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts","startTime":1766893833118,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr/assign"],"duration":13,"failureDetails":[{}],"failureMessages":["Error: expected 201 \"Created\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:130:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"MSR Card Management (e2e) POST /auth/msr/assign should assign MSR card to employee","invocations":1,"location":{"column":5,"line":120},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should assign MSR card to employee"},{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr/assign"],"duration":7,"failureDetails":[{}],"failureMessages":["Error: expected 409 \"Conflict\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:150:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"MSR Card Management (e2e) POST /auth/msr/assign should reject duplicate card assignment to same employee","invocations":1,"location":{"column":5,"line":140},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject duplicate card assignment to same employee"},{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr/assign"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"MSR Card Management (e2e) POST /auth/msr/assign should reject unauthorized access (no token)","invocations":1,"location":{"column":5,"line":153},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject unauthorized access (no token)"},{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr-swipe"],"duration":4,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.msrCard.findUnique()` invocation in\n/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:169:48\n\n  166 describe('POST /auth/msr-swipe', () => {\n  167   it('should authenticate with valid MSR card', async () => {\n  168     // Get the card we assigned\nâ†’ 169     const card = await prisma.client.msrCard.findUnique({\n            where: {\n              id: undefined,\n          ?   employeeId?: String,\n          ?   cardToken?: String,\n          ?   AND?: MsrCardWhereInput | MsrCardWhereInput[],\n          ?   OR?: MsrCardWhereInput[],\n          ?   NOT?: MsrCardWhereInput | MsrCardWhereInput[],\n          ?   orgId?: StringFilter | String,\n          ?   status?: EnumMsrCardStatusFilter | MsrCardStatus,\n          ?   assignedAt?: DateTimeFilter | DateTime,\n          ?   assignedById?: StringFilter | String,\n          ?   revokedAt?: DateTimeNullableFilter | DateTime | Null,\n          ?   revokedById?: StringNullableFilter | String | Null,\n          ?   revokedReason?: StringNullableFilter | String | Null,\n          ?   metadata?: JsonNullableFilter,\n          ?   createdAt?: DateTimeFilter | DateTime,\n          ?   updatedAt?: DateTimeFilter | DateTime,\n          ?   employee?: EmployeeRelationFilter | EmployeeWhereInput,\n          ?   assignedBy?: UserRelationFilter | UserWhereInput,\n          ?   revokedBy?: UserNullableRelationFilter | UserWhereInput | Null\n            },\n            include: {\n              employee: true\n            }\n          })\n\nArgument `where` of type MsrCardWhereUniqueInput needs at least one of `id`, `employeeId` or `cardToken` arguments. Available options are marked with ?.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:169:20)"],"fullName":"MSR Card Management (e2e) POST /auth/msr-swipe should authenticate with valid MSR card","invocations":1,"location":{"column":5,"line":167},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should authenticate with valid MSR card"},{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr-swipe"],"duration":5,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 400 \"Bad Request\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:258:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"MSR Card Management (e2e) POST /auth/msr-swipe should reject invalid badge ID","invocations":1,"location":{"column":5,"line":251},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject invalid badge ID"},{"ancestorTitles":["MSR Card Management (e2e)","GET /auth/msr/cards"],"duration":10,"failureDetails":[{"matcherResult":{"actual":false,"expected":true,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:269:44)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"MSR Card Management (e2e) GET /auth/msr/cards should list MSR cards for organization","invocations":1,"location":{"column":5,"line":263},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list MSR cards for organization"},{"ancestorTitles":["MSR Card Management (e2e)","GET /auth/msr/cards"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"MSR Card Management (e2e) GET /auth/msr/cards should reject unauthorized access","invocations":1,"location":{"column":5,"line":277},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject unauthorized access"},{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr/revoke"],"duration":25,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:293:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"MSR Card Management (e2e) POST /auth/msr/revoke should revoke MSR card","invocations":1,"location":{"column":5,"line":285},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should revoke MSR card"},{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr/revoke"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"MSR Card Management (e2e) POST /auth/msr/revoke should reject unauthorized access","invocations":1,"location":{"column":5,"line":306},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject unauthorized access"}],"endTime":1766893834563,"message":"  â— MSR Card Management (e2e) â€º POST /auth/msr/assign â€º should assign MSR card to employee\n\n    expected 201 \"Created\", got 500 \"Internal Server Error\"\n\n      128 |           badgeId: trackData,\n      129 |         })\n    > 130 |         .expect(201);\n          |          ^\n      131 |\n      132 |       expect(response.body).toHaveProperty('id');\n      133 |       expect(response.body).toHaveProperty('cardToken');\n\n      at Object.<anonymous> (msr-card.e2e-spec.ts:130:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— MSR Card Management (e2e) â€º POST /auth/msr/assign â€º should reject duplicate card assignment to same employee\n\n    expected 409 \"Conflict\", got 500 \"Internal Server Error\"\n\n      148 |           badgeId: trackData,\n      149 |         })\n    > 150 |         .expect(409); // Conflict - employee already has card\n          |          ^\n      151 |     });\n      152 |\n      153 |     it('should reject unauthorized access (no token)', async () => {\n\n      at Object.<anonymous> (msr-card.e2e-spec.ts:150:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— MSR Card Management (e2e) â€º POST /auth/msr-swipe â€º should authenticate with valid MSR card\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.msrCard.findUnique()` invocation in\n    /workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:169:48\n\n      166 describe('POST /auth/msr-swipe', () => {\n      167   it('should authenticate with valid MSR card', async () => {\n      168     // Get the card we assigned\n    â†’ 169     const card = await prisma.client.msrCard.findUnique({\n                where: {\n                  id: undefined,\n              ?   employeeId?: String,\n              ?   cardToken?: String,\n              ?   AND?: MsrCardWhereInput | MsrCardWhereInput[],\n              ?   OR?: MsrCardWhereInput[],\n              ?   NOT?: MsrCardWhereInput | MsrCardWhereInput[],\n              ?   orgId?: StringFilter | String,\n              ?   status?: EnumMsrCardStatusFilter | MsrCardStatus,\n              ?   assignedAt?: DateTimeFilter | DateTime,\n              ?   assignedById?: StringFilter | String,\n              ?   revokedAt?: DateTimeNullableFilter | DateTime | Null,\n              ?   revokedById?: StringNullableFilter | String | Null,\n              ?   revokedReason?: StringNullableFilter | String | Null,\n              ?   metadata?: JsonNullableFilter,\n              ?   createdAt?: DateTimeFilter | DateTime,\n              ?   updatedAt?: DateTimeFilter | DateTime,\n              ?   employee?: EmployeeRelationFilter | EmployeeWhereInput,\n              ?   assignedBy?: UserRelationFilter | UserWhereInput,\n              ?   revokedBy?: UserNullableRelationFilter | UserWhereInput | Null\n                },\n                include: {\n                  employee: true\n                }\n              })\n\n    Argument `where` of type MsrCardWhereUniqueInput needs at least one of `id`, `employeeId` or `cardToken` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (msr-card.e2e-spec.ts:169:20)\n\n  â— MSR Card Management (e2e) â€º POST /auth/msr-swipe â€º should reject invalid badge ID\n\n    expected 404 \"Not Found\", got 400 \"Bad Request\"\n\n      256 |           branchId,\n      257 |         })\n    > 258 |         .expect(404); // Card not found\n          |          ^\n      259 |     });\n      260 |   });\n      261 |\n\n      at Object.<anonymous> (msr-card.e2e-spec.ts:258:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— MSR Card Management (e2e) â€º GET /auth/msr/cards â€º should list MSR cards for organization\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      267 |         .expect(200);\n      268 |\n    > 269 |       expect(Array.isArray(response.body)).toBe(true);\n          |                                            ^\n      270 |       expect(response.body.length).toBeGreaterThanOrEqual(1);\n      271 |\n      272 |       const assignedCard = response.body.find((c: any) => c.id === cardId);\n\n      at Object.<anonymous> (msr-card.e2e-spec.ts:269:44)\n\n  â— MSR Card Management (e2e) â€º POST /auth/msr/revoke â€º should revoke MSR card\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\n      291 |           reason: 'E2E test cleanup',\n      292 |         })\n    > 293 |         .expect(200);\n          |          ^\n      294 |\n      295 |       expect(response.body.status).toBe('REVOKED');\n      296 |       expect(response.body.revokedReason).toBe('E2E test cleanup');\n\n      at Object.<anonymous> (msr-card.e2e-spec.ts:293:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts","startTime":1766893833797,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Payments (Slice E2E)"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) GET /payments -> 401 without token","invocations":1,"location":{"column":3,"line":136},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"GET /payments -> 401 without token"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) GET /payments -> 200 with token (lists payments)","invocations":1,"location":{"column":3,"line":140},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /payments -> 200 with token (lists payments)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) GET /payments/pay_001 -> 200","invocations":1,"location":{"column":3,"line":149},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /payments/pay_001 -> 200"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) GET /payments/pay_missing -> 404/400 (invalid id)","invocations":1,"location":{"column":3,"line":157},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /payments/pay_missing -> 404/400 (invalid id)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments -> 201 (create payment)","invocations":1,"location":{"column":3,"line":164},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /payments -> 201 (create payment)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments -> 400/422 (invalid payload)","invocations":1,"location":{"column":3,"line":173},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /payments -> 400/422 (invalid payload)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments/pay_001/capture -> 200","invocations":1,"location":{"column":3,"line":178},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /payments/pay_001/capture -> 200"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments/pay_001/refund -> 201","invocations":1,"location":{"column":3,"line":186},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /payments/pay_001/refund -> 201"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments/intents -> 201 (create intent)","invocations":1,"location":{"column":3,"line":198},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /payments/intents -> 201 (create intent)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments/intents/pi_001/cancel -> 200","invocations":1,"location":{"column":3,"line":207},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /payments/intents/pi_001/cancel -> 200"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments-test-webhook/gateway -> 200 (valid HMAC)","invocations":1,"location":{"column":3,"line":214},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /payments-test-webhook/gateway -> 200 (valid HMAC)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments-test-webhook/gateway -> 200 { ok:false } (bad HMAC)","invocations":1,"location":{"column":3,"line":229},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /payments-test-webhook/gateway -> 200 { ok:false } (bad HMAC)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments-test-webhook/gateway -> 200 { ok:false } (missing signature)","invocations":1,"location":{"column":3,"line":241},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /payments-test-webhook/gateway -> 200 { ok:false } (missing signature)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) Rate limiting produces >= one 429 on /payments","invocations":1,"location":{"column":3,"line":254},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 on /payments"}],"endTime":1766893835003,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/payments.slice.e2e-spec.ts","startTime":1766893834566,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Orders (Slice E2E)"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders -> 401 without token","invocations":1,"location":{"column":3,"line":133},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"POST /pos/orders -> 401 without token"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders -> 201 with token (creates open order)","invocations":1,"location":{"column":3,"line":137},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders -> 201 with token (creates open order)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/send-to-kitchen -> 401 without token","invocations":1,"location":{"column":3,"line":144},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/send-to-kitchen -> 401 without token"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/modify -> 401 without token","invocations":1,"location":{"column":3,"line":148},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/modify -> 401 without token"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/send-to-kitchen -> 200/201 (sends to kitchen)","invocations":1,"location":{"column":3,"line":154},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/send-to-kitchen -> 200/201 (sends to kitchen)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/modify -> 200 (modifies order)","invocations":1,"location":{"column":3,"line":162},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/modify -> 200 (modifies order)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/void -> 200 (voids order)","invocations":1,"location":{"column":3,"line":172},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/void -> 200 (voids order)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/close -> 200 (closes order)","invocations":1,"location":{"column":3,"line":182},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/close -> 200 (closes order)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/discount -> 200 (applies discount)","invocations":1,"location":{"column":3,"line":192},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/discount -> 200 (applies discount)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/post-close-void -> 200 (voids closed order)","invocations":1,"location":{"column":3,"line":202},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/post-close-void -> 200 (voids closed order)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders -> 400/422 (bad payload)","invocations":1,"location":{"column":3,"line":214},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders -> 400/422 (bad payload)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/invalid-id/send-to-kitchen -> 404/400 (invalid order id)","invocations":1,"location":{"column":3,"line":223},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/invalid-id/send-to-kitchen -> 404/400 (invalid order id)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/ord_001/modify -> 400/422 (bad modify payload)","invocations":1,"location":{"column":3,"line":231},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/ord_001/modify -> 400/422 (bad modify payload)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) Rate limiting produces >= one 429 on /pos/orders","invocations":1,"location":{"column":3,"line":242},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 on /pos/orders"}],"endTime":1766893835645,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/orders.slice.e2e-spec.ts","startTime":1766893835007,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["E22.C - Franchise Budgets Caching (e2e)"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:42:11)"],"fullName":"E22.C - Franchise Budgets Caching (e2e) should return cached=false on first call (cache miss)","invocations":1,"location":{"column":3,"line":120},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return cached=false on first call (cache miss)"},{"ancestorTitles":["E22.C - Franchise Budgets Caching (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:42:11)"],"fullName":"E22.C - Franchise Budgets Caching (e2e) should return cached=true on second call within TTL (cache hit)","invocations":1,"location":{"column":3,"line":133},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return cached=true on second call within TTL (cache hit)"},{"ancestorTitles":["E22.C - Franchise Budgets Caching (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:42:11)"],"fullName":"E22.C - Franchise Budgets Caching (e2e) should maintain data structure consistency between cached and non-cached responses","invocations":1,"location":{"column":3,"line":154},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should maintain data structure consistency between cached and non-cached responses"},{"ancestorTitles":["E22.C - Franchise Budgets Caching (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:42:11)"],"fullName":"E22.C - Franchise Budgets Caching (e2e) should use different cache keys for different periods","invocations":1,"location":{"column":3,"line":186},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use different cache keys for different periods"},{"ancestorTitles":["E22.C - Franchise Budgets Caching (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:42:11)"],"fullName":"E22.C - Franchise Budgets Caching (e2e) should return error for invalid period format","invocations":1,"location":{"column":3,"line":227},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return error for invalid period format"},{"ancestorTitles":["E22.C - Franchise Budgets Caching (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:42:11)"],"fullName":"E22.C - Franchise Budgets Caching (e2e) cache hit should be significantly faster than cache miss","invocations":1,"location":{"column":3,"line":237},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"cache hit should be significantly faster than cache miss"}],"endTime":1766893836413,"message":"  â— E22.C - Franchise Budgets Caching (e2e) â€º should return cached=false on first call (cache miss)\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      60 |   async function setupTestData() {\n      61 |     // Create test organization\n    > 62 |     const org = await prisma.organization.create({\n         |                                           ^\n      63 |       data: {\n      64 |         name: 'E22C Test Org',\n      65 |         slug: `e22c-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)\n\n  â— E22.C - Franchise Budgets Caching (e2e) â€º should return cached=true on second call within TTL (cache hit)\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      60 |   async function setupTestData() {\n      61 |     // Create test organization\n    > 62 |     const org = await prisma.organization.create({\n         |                                           ^\n      63 |       data: {\n      64 |         name: 'E22C Test Org',\n      65 |         slug: `e22c-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)\n\n  â— E22.C - Franchise Budgets Caching (e2e) â€º should maintain data structure consistency between cached and non-cached responses\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      60 |   async function setupTestData() {\n      61 |     // Create test organization\n    > 62 |     const org = await prisma.organization.create({\n         |                                           ^\n      63 |       data: {\n      64 |         name: 'E22C Test Org',\n      65 |         slug: `e22c-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)\n\n  â— E22.C - Franchise Budgets Caching (e2e) â€º should use different cache keys for different periods\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      60 |   async function setupTestData() {\n      61 |     // Create test organization\n    > 62 |     const org = await prisma.organization.create({\n         |                                           ^\n      63 |       data: {\n      64 |         name: 'E22C Test Org',\n      65 |         slug: `e22c-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)\n\n  â— E22.C - Franchise Budgets Caching (e2e) â€º should return error for invalid period format\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      60 |   async function setupTestData() {\n      61 |     // Create test organization\n    > 62 |     const org = await prisma.organization.create({\n         |                                           ^\n      63 |       data: {\n      64 |         name: 'E22C Test Org',\n      65 |         slug: `e22c-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)\n\n  â— E22.C - Franchise Budgets Caching (e2e) â€º cache hit should be significantly faster than cache miss\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      60 |   async function setupTestData() {\n      61 |     // Create test organization\n    > 62 |     const org = await prisma.organization.create({\n         |                                           ^\n      63 |       data: {\n      64 |         name: 'E22C Test Org',\n      65 |         slug: `e22c-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)\n","name":"/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts","startTime":1766893835650,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E22.B - Franchise Rankings Caching (e2e)","GET /franchise/rankings"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:40:11)"],"fullName":"E22.B - Franchise Rankings Caching (e2e) GET /franchise/rankings should return cached=false on first call (cache miss)","invocations":1,"location":{"column":5,"line":127},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return cached=false on first call (cache miss)"},{"ancestorTitles":["E22.B - Franchise Rankings Caching (e2e)","GET /franchise/rankings"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:40:11)"],"fullName":"E22.B - Franchise Rankings Caching (e2e) GET /franchise/rankings should return cached=true on second call within TTL (cache hit)","invocations":1,"location":{"column":5,"line":141},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return cached=true on second call within TTL (cache hit)"},{"ancestorTitles":["E22.B - Franchise Rankings Caching (e2e)","GET /franchise/rankings"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:40:11)"],"fullName":"E22.B - Franchise Rankings Caching (e2e) GET /franchise/rankings should return same data structure on cache hit and miss","invocations":1,"location":{"column":5,"line":164},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return same data structure on cache hit and miss"},{"ancestorTitles":["E22.B - Franchise Rankings Caching (e2e)","GET /franchise/rankings"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:40:11)"],"fullName":"E22.B - Franchise Rankings Caching (e2e) GET /franchise/rankings should cache separately for different periods","invocations":1,"location":{"column":5,"line":187},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should cache separately for different periods"},{"ancestorTitles":["E22.B - Franchise Rankings Caching (e2e)","GET /franchise/rankings"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:40:11)"],"fullName":"E22.B - Franchise Rankings Caching (e2e) GET /franchise/rankings should return error for invalid period format","invocations":1,"location":{"column":5,"line":214},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return error for invalid period format"},{"ancestorTitles":["E22.B - Franchise Rankings Caching (e2e)","GET /franchise/rankings"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:40:11)"],"fullName":"E22.B - Franchise Rankings Caching (e2e) GET /franchise/rankings should measure response time difference between miss and hit","invocations":1,"location":{"column":5,"line":224},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should measure response time difference between miss and hit"}],"endTime":1766893837196,"message":"  â— E22.B - Franchise Rankings Caching (e2e) â€º GET /franchise/rankings â€º should return cached=false on first call (cache miss)\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      58 |   async function setupTestData() {\n      59 |     // Create test organization\n    > 60 |     const org = await prisma.organization.create({\n         |                                           ^\n      61 |       data: {\n      62 |         name: 'E22B Test Org',\n      63 |         slug: `e22b-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)\n\n  â— E22.B - Franchise Rankings Caching (e2e) â€º GET /franchise/rankings â€º should return cached=true on second call within TTL (cache hit)\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      58 |   async function setupTestData() {\n      59 |     // Create test organization\n    > 60 |     const org = await prisma.organization.create({\n         |                                           ^\n      61 |       data: {\n      62 |         name: 'E22B Test Org',\n      63 |         slug: `e22b-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)\n\n  â— E22.B - Franchise Rankings Caching (e2e) â€º GET /franchise/rankings â€º should return same data structure on cache hit and miss\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      58 |   async function setupTestData() {\n      59 |     // Create test organization\n    > 60 |     const org = await prisma.organization.create({\n         |                                           ^\n      61 |       data: {\n      62 |         name: 'E22B Test Org',\n      63 |         slug: `e22b-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)\n\n  â— E22.B - Franchise Rankings Caching (e2e) â€º GET /franchise/rankings â€º should cache separately for different periods\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      58 |   async function setupTestData() {\n      59 |     // Create test organization\n    > 60 |     const org = await prisma.organization.create({\n         |                                           ^\n      61 |       data: {\n      62 |         name: 'E22B Test Org',\n      63 |         slug: `e22b-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)\n\n  â— E22.B - Franchise Rankings Caching (e2e) â€º GET /franchise/rankings â€º should return error for invalid period format\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      58 |   async function setupTestData() {\n      59 |     // Create test organization\n    > 60 |     const org = await prisma.organization.create({\n         |                                           ^\n      61 |       data: {\n      62 |         name: 'E22B Test Org',\n      63 |         slug: `e22b-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)\n\n  â— E22.B - Franchise Rankings Caching (e2e) â€º GET /franchise/rankings â€º should measure response time difference between miss and hit\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      58 |   async function setupTestData() {\n      59 |     // Create test organization\n    > 60 |     const org = await prisma.organization.create({\n         |                                           ^\n      61 |       data: {\n      62 |         name: 'E22B Test Org',\n      63 |         slug: `e22b-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)\n","name":"/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts","startTime":1766893836421,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth (e2e)","POST /auth/login"],"duration":143,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/login should login with valid credentials","invocations":1,"location":{"column":5,"line":36},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should login with valid credentials"},{"ancestorTitles":["Auth (e2e)","POST /auth/login"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/login should reject invalid email","invocations":1,"location":{"column":5,"line":55},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject invalid email"},{"ancestorTitles":["Auth (e2e)","POST /auth/login"],"duration":110,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/login should reject invalid password","invocations":1,"location":{"column":5,"line":65},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject invalid password"},{"ancestorTitles":["Auth (e2e)","POST /auth/login"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/login should reject missing fields","invocations":1,"location":{"column":5,"line":75},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject missing fields"},{"ancestorTitles":["Auth (e2e)","POST /auth/pin-login"],"duration":9,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 401 \"Unauthorized\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/auth.e2e-spec.ts:94:10)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Auth (e2e) POST /auth/pin-login should login with valid employee code and PIN","invocations":1,"location":{"column":5,"line":86},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should login with valid employee code and PIN"},{"ancestorTitles":["Auth (e2e)","POST /auth/pin-login"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/pin-login should reject invalid employee code","invocations":1,"location":{"column":5,"line":104},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject invalid employee code"},{"ancestorTitles":["Auth (e2e)","POST /auth/pin-login"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/pin-login should reject invalid PIN","invocations":1,"location":{"column":5,"line":115},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject invalid PIN"},{"ancestorTitles":["Auth (e2e)","POST /auth/pin-login"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/pin-login should reject wrong branch","invocations":1,"location":{"column":5,"line":126},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject wrong branch"},{"ancestorTitles":["Auth (e2e)","POST /auth/msr-swipe"],"duration":5,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 400 \"Bad Request\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/auth.e2e-spec.ts:145:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Auth (e2e) POST /auth/msr-swipe should login with valid badge ID","invocations":1,"location":{"column":5,"line":139},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should login with valid badge ID"},{"ancestorTitles":["Auth (e2e)","POST /auth/msr-swipe"],"duration":4,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 400 \"Bad Request\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/auth.e2e-spec.ts:161:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Auth (e2e) POST /auth/msr-swipe should reject unknown badge ID","invocations":1,"location":{"column":5,"line":155},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject unknown badge ID"},{"ancestorTitles":["Auth (e2e)","POST /auth/msr-swipe"],"duration":4,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 400 \"Bad Request\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/auth.e2e-spec.ts:171:10)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Auth (e2e) POST /auth/msr-swipe should login with branch verification","invocations":1,"location":{"column":5,"line":164},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should login with branch verification"},{"ancestorTitles":["Auth (e2e)","GET /me"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) GET /me should return user profile with valid token","invocations":1,"location":{"column":5,"line":189},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should return user profile with valid token"},{"ancestorTitles":["Auth (e2e)","GET /me"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) GET /me should reject request without token","invocations":1,"location":{"column":5,"line":206},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject request without token"},{"ancestorTitles":["Auth (e2e)","GET /me"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) GET /me should reject request with invalid token","invocations":1,"location":{"column":5,"line":210},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject request with invalid token"},{"ancestorTitles":["Auth (e2e)","POST /devices/register"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /devices/register should allow L4 manager to register a device","invocations":1,"location":{"column":5,"line":230},"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should allow L4 manager to register a device"},{"ancestorTitles":["Auth (e2e)","POST /devices/register"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /devices/register should reject device registration without auth","invocations":1,"location":{"column":5,"line":246},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject device registration without auth"}],"endTime":1766893838161,"message":"  â— Auth (e2e) â€º POST /auth/pin-login â€º should login with valid employee code and PIN\n\n    expected 200 \"OK\", got 401 \"Unauthorized\"\n\n      92 |           branchId: await getMainBranchId(),\n      93 |         })\n    > 94 |         .expect(200);\n         |          ^\n      95 |\n      96 |       expect(response.body).toHaveProperty('access_token');\n      97 |       expect(response.body.user).toMatchObject({\n\n      at Object.<anonymous> (auth.e2e-spec.ts:94:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— Auth (e2e) â€º POST /auth/msr-swipe â€º should login with valid badge ID\n\n    expected 200 \"OK\", got 400 \"Bad Request\"\n\n      143 |           badgeId: 'CASHIER001',\n      144 |         })\n    > 145 |         .expect(200);\n          |          ^\n      146 |\n      147 |       expect(response.body).toHaveProperty('access_token');\n      148 |       expect(response.body.user).toMatchObject({\n\n      at Object.<anonymous> (auth.e2e-spec.ts:145:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— Auth (e2e) â€º POST /auth/msr-swipe â€º should reject unknown badge ID\n\n    expected 404 \"Not Found\", got 400 \"Bad Request\"\n\n      159 |           badgeId: 'UNKNOWN_BADGE',\n      160 |         })\n    > 161 |         .expect(404);\n          |          ^\n      162 |     });\n      163 |\n      164 |     it('should login with branch verification', async () => {\n\n      at Object.<anonymous> (auth.e2e-spec.ts:161:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— Auth (e2e) â€º POST /auth/msr-swipe â€º should login with branch verification\n\n    expected 200 \"OK\", got 400 \"Bad Request\"\n\n      169 |           branchId: await getMainBranchId(),\n      170 |         })\n    > 171 |         .expect(200);\n          |          ^\n      172 |\n      173 |       expect(response.body).toHaveProperty('access_token');\n      174 |     });\n\n      at Object.<anonymous> (auth.e2e-spec.ts:171:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/auth.e2e-spec.ts","startTime":1766893837200,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Multi-Tenant Isolation (E2E)","Cross-org menu item access"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n  61   },\n  62 });\n  63 \nâ†’ 64 sessionA = await prisma.session.create({\n       data: {\n         userId: \"cmjp6yzga003858q4opdoo073\",\n         token: \"token-a-1766893838846\",\n         expiresAt: new Date(\"2025-12-29T03:50:38.846Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:16)"],"fullName":"Multi-Tenant Isolation (E2E) Cross-org menu item access should deny user A access to org B menu items with wrong x-org-id","invocations":1,"location":{"column":5,"line":169},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should deny user A access to org B menu items with wrong x-org-id"},{"ancestorTitles":["Multi-Tenant Isolation (E2E)","Cross-org menu item access"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n  61   },\n  62 });\n  63 \nâ†’ 64 sessionA = await prisma.session.create({\n       data: {\n         userId: \"cmjp6yzga003858q4opdoo073\",\n         token: \"token-a-1766893838846\",\n         expiresAt: new Date(\"2025-12-29T03:50:38.846Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:16)"],"fullName":"Multi-Tenant Isolation (E2E) Cross-org menu item access should return 404 when user A requests org B resource with correct x-org-id","invocations":1,"location":{"column":5,"line":179},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 when user A requests org B resource with correct x-org-id"},{"ancestorTitles":["Multi-Tenant Isolation (E2E)","Cross-org menu item access"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n  61   },\n  62 });\n  63 \nâ†’ 64 sessionA = await prisma.session.create({\n       data: {\n         userId: \"cmjp6yzga003858q4opdoo073\",\n         token: \"token-a-1766893838846\",\n         expiresAt: new Date(\"2025-12-29T03:50:38.846Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:16)"],"fullName":"Multi-Tenant Isolation (E2E) Cross-org menu item access should allow user A to access org A menu items","invocations":1,"location":{"column":5,"line":192},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow user A to access org A menu items"},{"ancestorTitles":["Multi-Tenant Isolation (E2E)","Cross-org menu item access"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n  61   },\n  62 });\n  63 \nâ†’ 64 sessionA = await prisma.session.create({\n       data: {\n         userId: \"cmjp6yzga003858q4opdoo073\",\n         token: \"token-a-1766893838846\",\n         expiresAt: new Date(\"2025-12-29T03:50:38.846Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:16)"],"fullName":"Multi-Tenant Isolation (E2E) Cross-org menu item access should require x-org-id header","invocations":1,"location":{"column":5,"line":203},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require x-org-id header"},{"ancestorTitles":["Multi-Tenant Isolation (E2E)","Cross-org data isolation"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n  61   },\n  62 });\n  63 \nâ†’ 64 sessionA = await prisma.session.create({\n       data: {\n         userId: \"cmjp6yzga003858q4opdoo073\",\n         token: \"token-a-1766893838846\",\n         expiresAt: new Date(\"2025-12-29T03:50:38.846Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:16)"],"fullName":"Multi-Tenant Isolation (E2E) Cross-org data isolation should not leak org B data when user A lists menu items","invocations":1,"location":{"column":5,"line":214},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not leak org B data when user A lists menu items"},{"ancestorTitles":["Multi-Tenant Isolation (E2E)","Cross-org data isolation"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n  61   },\n  62 });\n  63 \nâ†’ 64 sessionA = await prisma.session.create({\n       data: {\n         userId: \"cmjp6yzga003858q4opdoo073\",\n         token: \"token-a-1766893838846\",\n         expiresAt: new Date(\"2025-12-29T03:50:38.846Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:16)"],"fullName":"Multi-Tenant Isolation (E2E) Cross-org data isolation should isolate org B user from org A data","invocations":1,"location":{"column":5,"line":232},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should isolate org B user from org A data"}],"coverage":{},"endTime":1766893869981,"message":"  â— Multi-Tenant Isolation (E2E) â€º Cross-org menu item access â€º should deny user A access to org B menu items with wrong x-org-id\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n      61   },\n      62 });\n      63 \n    â†’ 64 sessionA = await prisma.session.create({\n           data: {\n             userId: \"cmjp6yzga003858q4opdoo073\",\n             token: \"token-a-1766893838846\",\n             expiresAt: new Date(\"2025-12-29T03:50:38.846Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)\n\n  â— Multi-Tenant Isolation (E2E) â€º Cross-org menu item access â€º should return 404 when user A requests org B resource with correct x-org-id\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n      61   },\n      62 });\n      63 \n    â†’ 64 sessionA = await prisma.session.create({\n           data: {\n             userId: \"cmjp6yzga003858q4opdoo073\",\n             token: \"token-a-1766893838846\",\n             expiresAt: new Date(\"2025-12-29T03:50:38.846Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)\n\n  â— Multi-Tenant Isolation (E2E) â€º Cross-org menu item access â€º should allow user A to access org A menu items\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n      61   },\n      62 });\n      63 \n    â†’ 64 sessionA = await prisma.session.create({\n           data: {\n             userId: \"cmjp6yzga003858q4opdoo073\",\n             token: \"token-a-1766893838846\",\n             expiresAt: new Date(\"2025-12-29T03:50:38.846Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)\n\n  â— Multi-Tenant Isolation (E2E) â€º Cross-org menu item access â€º should require x-org-id header\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n      61   },\n      62 });\n      63 \n    â†’ 64 sessionA = await prisma.session.create({\n           data: {\n             userId: \"cmjp6yzga003858q4opdoo073\",\n             token: \"token-a-1766893838846\",\n             expiresAt: new Date(\"2025-12-29T03:50:38.846Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)\n\n  â— Multi-Tenant Isolation (E2E) â€º Cross-org data isolation â€º should not leak org B data when user A lists menu items\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n      61   },\n      62 });\n      63 \n    â†’ 64 sessionA = await prisma.session.create({\n           data: {\n             userId: \"cmjp6yzga003858q4opdoo073\",\n             token: \"token-a-1766893838846\",\n             expiresAt: new Date(\"2025-12-29T03:50:38.846Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)\n\n  â— Multi-Tenant Isolation (E2E) â€º Cross-org data isolation â€º should isolate org B user from org A data\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n      61   },\n      62 });\n      63 \n    â†’ 64 sessionA = await prisma.session.create({\n           data: {\n             userId: \"cmjp6yzga003858q4opdoo073\",\n             token: \"token-a-1766893838846\",\n             expiresAt: new Date(\"2025-12-29T03:50:38.846Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)\n\n\n  â— Test suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      152 |     // Cleanup in reverse order\n      153 |     await prisma.client.menuItem.deleteMany({ where: { branchId: branchA.id } });\n    > 154 |     await prisma.client.menuItem.deleteMany({ where: { branchId: branchB.id } });\n          |                                                                          ^\n      155 |     await prisma.category.deleteMany({ where: { branchId: branchA.id } });\n      156 |     await prisma.category.deleteMany({ where: { branchId: branchB.id } });\n      157 |     await prisma.session.deleteMany({ where: { userId: userA.id } });\n\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:154:74)\n","name":"/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts","startTime":1766893869981,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","GET /billing/subscription"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) GET /billing/subscription should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":114},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","GET /billing/subscription"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) GET /billing/subscription should return 200 and subscription details with valid L5 token","invocations":1,"location":{"column":5,"line":122},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 and subscription details with valid L5 token"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":136},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 403 if user is not L5 (manager attempting)","invocations":1,"location":{"column":5,"line":144},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 if user is not L5 (manager attempting)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 200 or 404 with valid L5 token","invocations":1,"location":{"column":5,"line":153},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 or 404 with valid L5 token"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 404 for unknown plan code","invocations":1,"location":{"column":5,"line":163},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 for unknown plan code"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should rate limit after burst requests (expect at least one 429)","invocations":1,"location":{"column":5,"line":172},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should rate limit after burst requests (expect at least one 429)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":190},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should return 403 if user is not L5 (manager attempting)","invocations":1,"location":{"column":5,"line":198},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 if user is not L5 (manager attempting)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should return 200 or 404 with valid L5 token","invocations":1,"location":{"column":5,"line":206},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 or 404 with valid L5 token"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should be idempotent (canceling twice should succeed)","invocations":1,"location":{"column":5,"line":215},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should be idempotent (canceling twice should succeed)"}],"endTime":1766893840008,"message":"  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º GET /billing/subscription â€º should return 401 if no authorization token is provided\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º GET /billing/subscription â€º should return 200 and subscription details with valid L5 token\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/plan/change â€º should return 401 if no authorization token is provided\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/plan/change â€º should return 403 if user is not L5 (manager attempting)\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/plan/change â€º should return 200 or 404 with valid L5 token\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/plan/change â€º should return 404 for unknown plan code\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/plan/change â€º should rate limit after burst requests (expect at least one 429)\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/cancel â€º should return 401 if no authorization token is provided\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/cancel â€º should return 403 if user is not L5 (manager attempting)\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/cancel â€º should return 200 or 404 with valid L5 token\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  â— Billing E2E (E24 - Auth, Authz, Rate Limiting) â€º POST /billing/cancel â€º should be idempotent (canceling twice should succeed)\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n","name":"/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts","startTime":1766893838891,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC"],"duration":22,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC GET /dev/keys without token -> 200 (test controller)","invocations":1,"location":{"column":3,"line":50},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"GET /dev/keys without token -> 200 (test controller)"},{"ancestorTitles":["Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC GET /dev/keys -> 200 with token","invocations":1,"location":{"column":3,"line":54},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"GET /dev/keys -> 200 with token"},{"ancestorTitles":["Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC POST /dev/keys -> 201 (create)","invocations":1,"location":{"column":3,"line":63},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"POST /dev/keys -> 201 (create)"},{"ancestorTitles":["Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC POST /dev/keys -> 400 (invalid payload)","invocations":1,"location":{"column":3,"line":74},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /dev/keys -> 400 (invalid payload)"},{"ancestorTitles":["Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC POST /dev/keys/key_1/revoke -> 200","invocations":1,"location":{"column":3,"line":83},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /dev/keys/key_1/revoke -> 200"},{"ancestorTitles":["Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC Plan-aware limit hits 429 for free but not for pro (same burst)","invocations":1,"location":{"column":3,"line":93},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Plan-aware limit hits 429 for free but not for pro (same burst)"},{"ancestorTitles":["Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC POST /dev-webhook/events -> 200 { ok:true } (valid HMAC)","invocations":1,"location":{"column":3,"line":131},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"POST /dev-webhook/events -> 200 { ok:true } (valid HMAC)"},{"ancestorTitles":["Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC POST /dev-webhook/events -> 200 { ok:false } (bad HMAC)","invocations":1,"location":{"column":3,"line":147},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /dev-webhook/events -> 200 { ok:false } (bad HMAC)"},{"ancestorTitles":["Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC POST /dev-webhook/events -> 200 { ok:false } (missing signature)","invocations":1,"location":{"column":3,"line":159},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /dev-webhook/events -> 200 { ok:false } (missing signature)"},{"ancestorTitles":["Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC GET /dev/keys returns multiple keys with plan info","invocations":1,"location":{"column":3,"line":172},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"GET /dev/keys returns multiple keys with plan info"},{"ancestorTitles":["Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) â€” Plan-aware limits + HMAC POST /dev/keys with pro plan -> 201","invocations":1,"location":{"column":3,"line":184},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /dev/keys with pro plan -> 201"}],"endTime":1766893840519,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/devportal.slice.e2e-spec.ts","startTime":1766893840013,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Reservations (Slice E2E)"],"duration":25,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations -> 401 without token","invocations":1,"location":{"column":3,"line":46},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"GET /reservations -> 401 without token"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations -> 200 with token","invocations":1,"location":{"column":3,"line":50},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /reservations -> 200 with token"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) POST /reservations -> 201 (create booking)","invocations":1,"location":{"column":3,"line":64},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /reservations -> 201 (create booking)"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) POST /reservations -> 400/422 (invalid payload)","invocations":1,"location":{"column":3,"line":84},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /reservations -> 400/422 (invalid payload)"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) POST /reservations/:id/confirm -> 200","invocations":1,"location":{"column":3,"line":95},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /reservations/:id/confirm -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) POST /reservations/:id/cancel -> 200","invocations":1,"location":{"column":3,"line":103},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /reservations/:id/cancel -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) POST /reservations/:id/seat -> 200","invocations":1,"location":{"column":3,"line":111},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /reservations/:id/seat -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations?status=CONFIRMED -> 200","invocations":1,"location":{"column":3,"line":121},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /reservations?status=CONFIRMED -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations?from=2025-11-13&to=2025-11-14 -> 200","invocations":1,"location":{"column":3,"line":132},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /reservations?from=2025-11-13&to=2025-11-14 -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations/summary?from=2025-11-01&to=2025-11-30 -> 200","invocations":1,"location":{"column":3,"line":142},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /reservations/summary?from=2025-11-01&to=2025-11-30 -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations-test/availability?date=2025-11-13&party=2 -> 200","invocations":1,"location":{"column":3,"line":152},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"GET /reservations-test/availability?date=2025-11-13&party=2 -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations-test/availability?date=2025-11-13&party=6 -> 200 (fewer slots)","invocations":1,"location":{"column":3,"line":161},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"GET /reservations-test/availability?date=2025-11-13&party=6 -> 200 (fewer slots)"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) Rate limiting produces >= one 429 on /reservations","invocations":1,"location":{"column":3,"line":173},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 on /reservations"}],"endTime":1766893840940,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/reservations.slice.e2e-spec.ts","startTime":1766893840522,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["API Key Security (E2E)","POST /ops/apikeys"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\nâ†’ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp6z1nr003f58q45n8squod\",\n         token: \"test-token-1766893841705\",\n         expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) POST /ops/apikeys should create API key as L5 user","invocations":1,"location":{"column":5,"line":95},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create API key as L5 user"},{"ancestorTitles":["API Key Security (E2E)","POST /ops/apikeys"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\nâ†’ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp6z1nr003f58q45n8squod\",\n         token: \"test-token-1766893841705\",\n         expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) POST /ops/apikeys should list API keys (masked)","invocations":1,"location":{"column":5,"line":116},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list API keys (masked)"},{"ancestorTitles":["API Key Security (E2E)","POST /hardware/spout/ingest with API key"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\nâ†’ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp6z1nr003f58q45n8squod\",\n         token: \"test-token-1766893841705\",\n         expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) POST /hardware/spout/ingest with API key should accept request with valid API key","invocations":1,"location":{"column":5,"line":133},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should accept request with valid API key"},{"ancestorTitles":["API Key Security (E2E)","POST /hardware/spout/ingest with API key"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\nâ†’ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp6z1nr003f58q45n8squod\",\n         token: \"test-token-1766893841705\",\n         expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) POST /hardware/spout/ingest with API key should reject request with missing API key","invocations":1,"location":{"column":5,"line":148},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject request with missing API key"},{"ancestorTitles":["API Key Security (E2E)","POST /hardware/spout/ingest with API key"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\nâ†’ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp6z1nr003f58q45n8squod\",\n         token: \"test-token-1766893841705\",\n         expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) POST /hardware/spout/ingest with API key should reject request with invalid API key","invocations":1,"location":{"column":5,"line":159},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject request with invalid API key"},{"ancestorTitles":["API Key Security (E2E)","Rate limiting"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\nâ†’ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp6z1nr003f58q45n8squod\",\n         token: \"test-token-1766893841705\",\n         expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) Rate limiting should enforce rate limit on public endpoints","invocations":1,"location":{"column":5,"line":173},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce rate limit on public endpoints"},{"ancestorTitles":["API Key Security (E2E)","DELETE /ops/apikeys/:id"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\nâ†’ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp6z1nr003f58q45n8squod\",\n         token: \"test-token-1766893841705\",\n         expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) DELETE /ops/apikeys/:id should delete API key","invocations":1,"location":{"column":5,"line":195},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should delete API key"}],"endTime":1766893841934,"message":"  â— API Key Security (E2E) â€º POST /ops/apikeys â€º should create API key as L5 user\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    â†’ 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp6z1nr003f58q45n8squod\",\n             token: \"test-token-1766893841705\",\n             expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n\n  â— API Key Security (E2E) â€º POST /ops/apikeys â€º should list API keys (masked)\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    â†’ 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp6z1nr003f58q45n8squod\",\n             token: \"test-token-1766893841705\",\n             expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n\n  â— API Key Security (E2E) â€º POST /hardware/spout/ingest with API key â€º should accept request with valid API key\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    â†’ 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp6z1nr003f58q45n8squod\",\n             token: \"test-token-1766893841705\",\n             expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n\n  â— API Key Security (E2E) â€º POST /hardware/spout/ingest with API key â€º should reject request with missing API key\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    â†’ 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp6z1nr003f58q45n8squod\",\n             token: \"test-token-1766893841705\",\n             expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n\n  â— API Key Security (E2E) â€º POST /hardware/spout/ingest with API key â€º should reject request with invalid API key\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    â†’ 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp6z1nr003f58q45n8squod\",\n             token: \"test-token-1766893841705\",\n             expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n\n  â— API Key Security (E2E) â€º Rate limiting â€º should enforce rate limit on public endpoints\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    â†’ 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp6z1nr003f58q45n8squod\",\n             token: \"test-token-1766893841705\",\n             expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n\n  â— API Key Security (E2E) â€º DELETE /ops/apikeys/:id â€º should delete API key\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    â†’ 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp6z1nr003f58q45n8squod\",\n             token: \"test-token-1766893841705\",\n             expiresAt: new Date(\"2025-12-29T03:50:41.705Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n","name":"/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts","startTime":1766893840944,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Dev Portal - POST /dev/orgs"],"duration":21,"failureDetails":[{}],"failureMessages":["Error: expected 201 \"Created\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:34:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Dev Portal - POST /dev/orgs should create org with ACTIVE subscription (dev admin)","invocations":1,"location":{"column":5,"line":25},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create org with ACTIVE subscription (dev admin)"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Dev Portal - POST /dev/orgs"],"duration":6,"failureDetails":[{}],"failureMessages":["Error: expected 401 \"Unauthorized\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:52:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Dev Portal - POST /dev/orgs should reject without dev admin header","invocations":1,"location":{"column":5,"line":44},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject without dev admin header"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Dev Portal - GET /dev/subscriptions"],"duration":2,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:61:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Dev Portal - GET /dev/subscriptions should list all subscriptions (dev admin)","invocations":1,"location":{"column":5,"line":57},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list all subscriptions (dev admin)"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Dev Portal - POST /dev/plans"],"duration":3,"failureDetails":[{}],"failureMessages":["Error: expected 201 \"Created\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:83:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Dev Portal - POST /dev/plans should upsert plan (super dev)","invocations":1,"location":{"column":5,"line":72},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should upsert plan (super dev)"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Dev Portal - POST /dev/plans"],"duration":38,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:111:10)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Dev Portal - POST /dev/plans should reject non-super dev from creating plans","invocations":1,"location":{"column":5,"line":89},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject non-super dev from creating plans"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Billing - GET /billing/subscription"],"duration":131,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:131:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Billing - GET /billing/subscription should return subscription for org owner","invocations":1,"location":{"column":5,"line":116},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return subscription for org owner"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Billing - GET /billing/subscription"],"duration":118,"failureDetails":[],"failureMessages":[],"fullName":"E24 Subscriptions & Dev Portal (e2e) Billing - GET /billing/subscription should reject non-owner from viewing subscription","invocations":1,"location":{"column":5,"line":139},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject non-owner from viewing subscription"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Billing - POST /billing/plan/change"],"duration":129,"failureDetails":[{}],"failureMessages":["Error: expected 201 \"Created\", got 403 \"Forbidden\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:174:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Billing - POST /billing/plan/change should allow owner to request plan change","invocations":1,"location":{"column":5,"line":159},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow owner to request plan change"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Billing - POST /billing/cancel"],"duration":126,"failureDetails":[{}],"failureMessages":["Error: expected 201 \"Created\", got 403 \"Forbidden\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:196:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Billing - POST /billing/cancel should allow owner to request cancellation","invocations":1,"location":{"column":5,"line":182},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow owner to request cancellation"}],"endTime":1766893843171,"message":"  â— E24 Subscriptions & Dev Portal (e2e) â€º Dev Portal - POST /dev/orgs â€º should create org with ACTIVE subscription (dev admin)\n\n    expected 201 \"Created\", got 404 \"Not Found\"\n\n      32 |           planCode: 'BASIC',\n      33 |         })\n    > 34 |         .expect(201);\n         |          ^\n      35 |\n      36 |       expect(response.body).toHaveProperty('org');\n      37 |       expect(response.body).toHaveProperty('owner');\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:34:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— E24 Subscriptions & Dev Portal (e2e) â€º Dev Portal - POST /dev/orgs â€º should reject without dev admin header\n\n    expected 401 \"Unauthorized\", got 404 \"Not Found\"\n\n      50 |           planCode: 'PRO',\n      51 |         })\n    > 52 |         .expect(401);\n         |          ^\n      53 |     });\n      54 |   });\n      55 |\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:52:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— E24 Subscriptions & Dev Portal (e2e) â€º Dev Portal - GET /dev/subscriptions â€º should list all subscriptions (dev admin)\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      59 |         .get('/dev/subscriptions')\n      60 |         .set('X-Dev-Admin', 'dev1@chefcloud.local')\n    > 61 |         .expect(200);\n         |          ^\n      62 |\n      63 |       expect(Array.isArray(response.body)).toBe(true);\n      64 |       expect(response.body.length).toBeGreaterThan(0);\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:61:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— E24 Subscriptions & Dev Portal (e2e) â€º Dev Portal - POST /dev/plans â€º should upsert plan (super dev)\n\n    expected 201 \"Created\", got 404 \"Not Found\"\n\n      81 |           isActive: true,\n      82 |         })\n    > 83 |         .expect(201);\n         |          ^\n      84 |\n      85 |       expect(response.body.code).toBe('TEST_PLAN');\n      86 |       expect(response.body.name).toBe('Test Plan');\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:83:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— E24 Subscriptions & Dev Portal (e2e) â€º Dev Portal - POST /dev/plans â€º should reject non-super dev from creating plans\n\n    expected 403 \"Forbidden\", got 404 \"Not Found\"\n\n      109 |           features: {},\n      110 |         })\n    > 111 |         .expect(403);\n          |          ^\n      112 |     });\n      113 |   });\n      114 |\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:111:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— E24 Subscriptions & Dev Portal (e2e) â€º Billing - GET /billing/subscription â€º should return subscription for org owner\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      129 |         .get('/billing/subscription')\n      130 |         .set('Authorization', `Bearer ${token}`)\n    > 131 |         .expect(200);\n          |          ^\n      132 |\n      133 |       expect(response.body).toHaveProperty('plan');\n      134 |       expect(response.body).toHaveProperty('status');\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:131:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— E24 Subscriptions & Dev Portal (e2e) â€º Billing - POST /billing/plan/change â€º should allow owner to request plan change\n\n    expected 201 \"Created\", got 403 \"Forbidden\"\n\n      172 |         .set('Authorization', `Bearer ${token}`)\n      173 |         .send({ planCode: 'ENTERPRISE' })\n    > 174 |         .expect(201);\n          |          ^\n      175 |\n      176 |       expect(response.body).toHaveProperty('message');\n      177 |       expect(response.body).toHaveProperty('effectiveDate');\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:174:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— E24 Subscriptions & Dev Portal (e2e) â€º Billing - POST /billing/cancel â€º should allow owner to request cancellation\n\n    expected 201 \"Created\", got 403 \"Forbidden\"\n\n      194 |         .post('/billing/cancel')\n      195 |         .set('Authorization', `Bearer ${token}`)\n    > 196 |         .expect(201);\n          |          ^\n      197 |\n      198 |       expect(response.body).toHaveProperty('message');\n      199 |       expect(response.body).toHaveProperty('effectiveDate');\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:196:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts","startTime":1766893841938,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Authentication & Authorization"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Authentication & Authorization GET /inventory/items should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":51},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /inventory/items should return 401 if no authorization token is provided"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Authentication & Authorization"],"duration":24,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Authentication & Authorization POST /inventory/items should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":58},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/items should return 401 if no authorization token is provided"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Authentication & Authorization"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Authentication & Authorization POST /inventory/adjustments should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":66},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/adjustments should return 401 if no authorization token is provided"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Authentication & Authorization"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Authentication & Authorization POST /inventory/wastage should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":74},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/wastage should return 401 if no authorization token is provided"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Rate Limiting"],"duration":28,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Rate Limiting Rate limiting produces >= one 429 deterministically","invocations":1,"location":{"column":5,"line":84},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 deterministically"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Basic Functionality (without auth)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Basic Functionality (without auth) should bootstrap successfully without metatype errors","invocations":1,"location":{"column":5,"line":119},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should bootstrap successfully without metatype errors"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Basic Functionality (without auth)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Basic Functionality (without auth) GET /inventory/items should exist (not 404)","invocations":1,"location":{"column":5,"line":123},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /inventory/items should exist (not 404)"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Basic Functionality (without auth)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Basic Functionality (without auth) POST /inventory/items should validate request body","invocations":1,"location":{"column":5,"line":130},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/items should validate request body"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Basic Functionality (without auth)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Basic Functionality (without auth) POST /inventory/adjustments should validate request body","invocations":1,"location":{"column":5,"line":139},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/adjustments should validate request body"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Endpoint Availability"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Endpoint Availability GET /inventory/items endpoint exists","invocations":1,"location":{"column":5,"line":150},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /inventory/items endpoint exists"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Endpoint Availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Endpoint Availability POST /inventory/items endpoint exists","invocations":1,"location":{"column":5,"line":157},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/items endpoint exists"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Endpoint Availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Endpoint Availability GET /inventory/levels endpoint exists","invocations":1,"location":{"column":5,"line":165},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /inventory/levels endpoint exists"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Endpoint Availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Endpoint Availability POST /inventory/adjustments endpoint exists","invocations":1,"location":{"column":5,"line":172},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/adjustments endpoint exists"},{"ancestorTitles":["Inventory (Slice E2E) â€” Deterministic","Endpoint Availability"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) â€” Deterministic Endpoint Availability POST /inventory/wastage endpoint exists","invocations":1,"location":{"column":5,"line":180},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/wastage endpoint exists"}],"endTime":1766893843576,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/inventory.slice.e2e-spec.ts","startTime":1766893843174,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","GET /stream/kpis (SSE)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) GET /stream/kpis (SSE) should require authentication","invocations":1,"location":{"column":5,"line":82},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require authentication"},{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","GET /stream/kpis (SSE)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) GET /stream/kpis (SSE) should reject non-L4+ users","invocations":1,"location":{"column":5,"line":88},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject non-L4+ users"},{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","GET /stream/kpis (SSE)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) GET /stream/kpis (SSE) should require scope query param","invocations":1,"location":{"column":5,"line":110},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require scope query param"},{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","GET /stream/kpis (SSE)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) GET /stream/kpis (SSE) should require branchId for branch scope","invocations":1,"location":{"column":5,"line":119},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require branchId for branch scope"},{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","GET /stream/kpis (SSE)"],"duration":null,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) GET /stream/kpis (SSE) should stream org-wide KPIs for L4+ user","invocations":1,"location":{"column":8,"line":131},"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should stream org-wide KPIs for L4+ user"},{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","KPI Computation"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) KPI Computation should compute salesToday from completed orders","invocations":1,"location":{"column":5,"line":148},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should compute salesToday from completed orders"},{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","KPI Computation"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\nâ†’ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) KPI Computation should count open orders correctly","invocations":1,"location":{"column":5,"line":166},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should count open orders correctly"}],"coverage":{},"endTime":1766893869981,"message":"  â— E26-s1: Live KPI Streaming (SSE) â€º GET /stream/kpis (SSE) â€º should require authentication\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n  â— E26-s1: Live KPI Streaming (SSE) â€º GET /stream/kpis (SSE) â€º should reject non-L4+ users\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n  â— E26-s1: Live KPI Streaming (SSE) â€º GET /stream/kpis (SSE) â€º should require scope query param\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n  â— E26-s1: Live KPI Streaming (SSE) â€º GET /stream/kpis (SSE) â€º should require branchId for branch scope\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n  â— E26-s1: Live KPI Streaming (SSE) â€º GET /stream/kpis (SSE) â€º should stream org-wide KPIs for L4+ user\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n  â— E26-s1: Live KPI Streaming (SSE) â€º KPI Computation â€º should compute salesToday from completed orders\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n  â— E26-s1: Live KPI Streaming (SSE) â€º KPI Computation â€º should count open orders correctly\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    â†’ 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n\n  â— Test suite failed to run\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.user.deleteMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:75:30\n\n      72 \n      73 afterAll(async () => {\n      74   // Cleanup\n    â†’ 75   await prisma.client.user.deleteMany(\n    Foreign key constraint violated: `orders_userId_fkey (index)`\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:75:5)\n","name":"/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts","startTime":1766893869981,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Purchasing (Slice E2E) â€” Deterministic","Authentication & Authorization"],"duration":243,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) â€” Deterministic Authentication & Authorization POST /purchasing/po should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":51},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po should return 401 if no authorization token is provided"},{"ancestorTitles":["Purchasing (Slice E2E) â€” Deterministic","Authentication & Authorization"],"duration":52,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) â€” Deterministic Authentication & Authorization POST /purchasing/po/:id/place should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":59},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po/:id/place should return 401 if no authorization token is provided"},{"ancestorTitles":["Purchasing (Slice E2E) â€” Deterministic","Authentication & Authorization"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) â€” Deterministic Authentication & Authorization POST /purchasing/po/:id/receive should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":66},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po/:id/receive should return 401 if no authorization token is provided"},{"ancestorTitles":["Purchasing (Slice E2E) â€” Deterministic","Rate Limiting"],"duration":42,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) â€” Deterministic Rate Limiting Rate limiting produces >= one 429 deterministically","invocations":1,"location":{"column":5,"line":76},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 deterministically"},{"ancestorTitles":["Purchasing (Slice E2E) â€” Deterministic","Basic Functionality (without auth)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) â€” Deterministic Basic Functionality (without auth) should bootstrap successfully without metatype errors","invocations":1,"location":{"column":5,"line":112},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should bootstrap successfully without metatype errors"},{"ancestorTitles":["Purchasing (Slice E2E) â€” Deterministic","Basic Functionality (without auth)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) â€” Deterministic Basic Functionality (without auth) POST /purchasing/po should validate request body","invocations":1,"location":{"column":5,"line":116},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po should validate request body"},{"ancestorTitles":["Purchasing (Slice E2E) â€” Deterministic","Basic Functionality (without auth)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) â€” Deterministic Basic Functionality (without auth) POST /purchasing/po/:id/place should handle invalid ID gracefully","invocations":1,"location":{"column":5,"line":125},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po/:id/place should handle invalid ID gracefully"},{"ancestorTitles":["Purchasing (Slice E2E) â€” Deterministic","Endpoint Availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) â€” Deterministic Endpoint Availability POST /purchasing/po endpoint exists","invocations":1,"location":{"column":5,"line":135},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po endpoint exists"},{"ancestorTitles":["Purchasing (Slice E2E) â€” Deterministic","Endpoint Availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) â€” Deterministic Endpoint Availability POST /purchasing/po/:id/place endpoint exists","invocations":1,"location":{"column":5,"line":143},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po/:id/place endpoint exists"},{"ancestorTitles":["Purchasing (Slice E2E) â€” Deterministic","Endpoint Availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) â€” Deterministic Endpoint Availability POST /purchasing/po/:id/receive endpoint exists","invocations":1,"location":{"column":5,"line":150},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po/:id/receive endpoint exists"}],"endTime":1766893845430,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/purchasing.slice.e2e-spec.ts","startTime":1766893844570,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["A3 POS Core (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/a3-pos.e2e-spec.ts:44:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"A3 POS Core (e2e) should create order with burger+fries -> send-to-kitchen -> kds queue shows ticket -> mark ready -> close order","invocations":1,"location":{"column":3,"line":61},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create order with burger+fries -> send-to-kitchen -> kds queue shows ticket -> mark ready -> close order"},{"ancestorTitles":["A3 POS Core (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/a3-pos.e2e-spec.ts:44:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"A3 POS Core (e2e) should create order with burger only -> send-to-kitchen -> order has NO_DRINKS anomaly flag","invocations":1,"location":{"column":3,"line":128},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create order with burger only -> send-to-kitchen -> order has NO_DRINKS anomaly flag"}],"endTime":1766893846360,"message":"  â— A3 POS Core (e2e) â€º should create order with burger+fries -> send-to-kitchen -> kds queue shows ticket -> mark ready -> close order\n\n    TypeError: menuResponse.body.find is not a function\n\n      42 |       .set('Authorization', `Bearer ${authToken}`);\n      43 |\n    > 44 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      45 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      46 |     burgerId = burger.id;\n      47 |     friesId = fries.id;\n\n      at Object.<anonymous> (a3-pos.e2e-spec.ts:44:38)\n\n  â— A3 POS Core (e2e) â€º should create order with burger only -> send-to-kitchen -> order has NO_DRINKS anomaly flag\n\n    TypeError: menuResponse.body.find is not a function\n\n      42 |       .set('Authorization', `Bearer ${authToken}`);\n      43 |\n    > 44 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      45 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      46 |     burgerId = burger.id;\n      47 |     friesId = fries.id;\n\n      at Object.<anonymous> (a3-pos.e2e-spec.ts:44:38)\n","name":"/workspaces/chefcloud/services/api/test/a3-pos.e2e-spec.ts","startTime":1766893845435,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Transfer Invalidation (Slice E2E) â€” E22.D"],"duration":0,"failureDetails":[{"type":"TransferEventsTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"c55b65b852980efb02bfe"},"moduleRef":{"id":"8c3afcd8e7931271b3c55"}}],"failureMessages":["Error: Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\nPotential solutions:\n- Is TransferEventsTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 6)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)"],"fullName":"Transfer Invalidation (Slice E2E) â€” E22.D POST /transfer-test/event -> 401 without token","invocations":1,"location":{"column":3,"line":41},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /transfer-test/event -> 401 without token"},{"ancestorTitles":["Transfer Invalidation (Slice E2E) â€” E22.D"],"duration":0,"failureDetails":[{"type":"TransferEventsTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"c55b65b852980efb02bfe"},"moduleRef":{"id":"8c3afcd8e7931271b3c55"}}],"failureMessages":["Error: Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\nPotential solutions:\n- Is TransferEventsTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 6)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)"],"fullName":"Transfer Invalidation (Slice E2E) â€” E22.D POST /transfer-test/event -> 200 {ok:false} on invalid payload","invocations":1,"location":{"column":3,"line":49},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /transfer-test/event -> 200 {ok:false} on invalid payload"},{"ancestorTitles":["Transfer Invalidation (Slice E2E) â€” E22.D"],"duration":0,"failureDetails":[{"type":"TransferEventsTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"c55b65b852980efb02bfe"},"moduleRef":{"id":"8c3afcd8e7931271b3c55"}}],"failureMessages":["Error: Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\nPotential solutions:\n- Is TransferEventsTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 6)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)"],"fullName":"Transfer Invalidation (Slice E2E) â€” E22.D HIT â†’ transfer.changed â†’ MISS (forecast cache proves invalidation)","invocations":1,"location":{"column":3,"line":59},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"HIT â†’ transfer.changed â†’ MISS (forecast cache proves invalidation)"},{"ancestorTitles":["Transfer Invalidation (Slice E2E) â€” E22.D"],"duration":0,"failureDetails":[{"type":"TransferEventsTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"c55b65b852980efb02bfe"},"moduleRef":{"id":"8c3afcd8e7931271b3c55"}}],"failureMessages":["Error: Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\nPotential solutions:\n- Is TransferEventsTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 6)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)"],"fullName":"Transfer Invalidation (Slice E2E) â€” E22.D Idempotency: repeating same event still returns ok:true","invocations":1,"location":{"column":3,"line":83},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Idempotency: repeating same event still returns ok:true"},{"ancestorTitles":["Transfer Invalidation (Slice E2E) â€” E22.D"],"duration":0,"failureDetails":[{"type":"TransferEventsTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"c55b65b852980efb02bfe"},"moduleRef":{"id":"8c3afcd8e7931271b3c55"}}],"failureMessages":["Error: Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\nPotential solutions:\n- Is TransferEventsTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 6)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)"],"fullName":"Transfer Invalidation (Slice E2E) â€” E22.D Deterministic rate limit: >= one 429 on /forecast-test/sales","invocations":1,"location":{"column":3,"line":91},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Deterministic rate limit: >= one 429 on /forecast-test/sales"}],"endTime":1766893846668,"message":"  â— Transfer Invalidation (Slice E2E) â€” E22.D â€º POST /transfer-test/event -> 401 without token\n\n    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\n    Potential solutions:\n    - Is TransferEventsTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     const modRef = await createE2ETestingModule({\n         |                    ^\n      23 |       imports: [\n      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,\n      25 |         // test-only modules\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 6)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)\n\n  â— Transfer Invalidation (Slice E2E) â€” E22.D â€º POST /transfer-test/event -> 200 {ok:false} on invalid payload\n\n    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\n    Potential solutions:\n    - Is TransferEventsTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     const modRef = await createE2ETestingModule({\n         |                    ^\n      23 |       imports: [\n      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,\n      25 |         // test-only modules\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 6)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)\n\n  â— Transfer Invalidation (Slice E2E) â€” E22.D â€º HIT â†’ transfer.changed â†’ MISS (forecast cache proves invalidation)\n\n    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\n    Potential solutions:\n    - Is TransferEventsTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     const modRef = await createE2ETestingModule({\n         |                    ^\n      23 |       imports: [\n      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,\n      25 |         // test-only modules\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 6)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)\n\n  â— Transfer Invalidation (Slice E2E) â€” E22.D â€º Idempotency: repeating same event still returns ok:true\n\n    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\n    Potential solutions:\n    - Is TransferEventsTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     const modRef = await createE2ETestingModule({\n         |                    ^\n      23 |       imports: [\n      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,\n      25 |         // test-only modules\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 6)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)\n\n  â— Transfer Invalidation (Slice E2E) â€” E22.D â€º Deterministic rate limit: >= one 429 on /forecast-test/sales\n\n    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\n    Potential solutions:\n    - Is TransferEventsTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     const modRef = await createE2ETestingModule({\n         |                    ^\n      23 |       imports: [\n      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,\n      25 |         // test-only modules\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 6)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)\n","name":"/workspaces/chefcloud/services/api/test/e2e/transfer.invalidation.slice.e2e-spec.ts","startTime":1766893846364,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["SSE Black-Box Smoke (Slice E2E)"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"SSE Black-Box Smoke (Slice E2E) GET /sse-test/stream -> 401 without token","invocations":1,"location":{"column":3,"line":37},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /sse-test/stream -> 401 without token"},{"ancestorTitles":["SSE Black-Box Smoke (Slice E2E)"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"SSE Black-Box Smoke (Slice E2E) Sends first SSE event quickly and has correct headers","invocations":1,"location":{"column":3,"line":42},"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"Sends first SSE event quickly and has correct headers"},{"ancestorTitles":["SSE Black-Box Smoke (Slice E2E)"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"SSE Black-Box Smoke (Slice E2E) Event payload contains deterministic requestId from header","invocations":1,"location":{"column":3,"line":81},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Event payload contains deterministic requestId from header"},{"ancestorTitles":["SSE Black-Box Smoke (Slice E2E)"],"duration":40,"failureDetails":[],"failureMessages":[],"fullName":"SSE Black-Box Smoke (Slice E2E) Deterministic rate limit: >= one 429 on SSE connect burst","invocations":1,"location":{"column":3,"line":106},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Deterministic rate limit: >= one 429 on SSE connect burst"}],"endTime":1766893847020,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/sse.smoke.e2e-spec.ts","startTime":1766893846673,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["KDS (Slice E2E)"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) GET /kds-test/tickets without token -> 200 (test controller)","invocations":1,"location":{"column":3,"line":46},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"GET /kds-test/tickets without token -> 200 (test controller)"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) GET /kds-test/tickets -> 200 with token","invocations":1,"location":{"column":3,"line":50},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"GET /kds-test/tickets -> 200 with token"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) GET /kds-test/tickets/tkt-001 -> 200","invocations":1,"location":{"column":3,"line":56},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /kds-test/tickets/tkt-001 -> 200"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) GET /kds-test/tickets/tkt-missing -> 404","invocations":1,"location":{"column":3,"line":61},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /kds-test/tickets/tkt-missing -> 404"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) POST /kds-test/tickets/tkt-001/ack -> 200 (ACK)","invocations":1,"location":{"column":3,"line":68},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /kds-test/tickets/tkt-001/ack -> 200 (ACK)"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) POST /kds-test/tickets/tkt-001/bump -> 200 (BUMPED)","invocations":1,"location":{"column":3,"line":73},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /kds-test/tickets/tkt-001/bump -> 200 (BUMPED)"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) POST /kds-test/tickets/tkt-001/expo -> 200 (EXPO)","invocations":1,"location":{"column":3,"line":78},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /kds-test/tickets/tkt-001/expo -> 200 (EXPO)"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) POST /kds-test/screens/scr-001/heartbeat -> 200","invocations":1,"location":{"column":3,"line":85},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /kds-test/screens/scr-001/heartbeat -> 200"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) Rate limiting produces >= one 429 on /kds-test/tickets","invocations":1,"location":{"column":3,"line":97},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 on /kds-test/tickets"}],"endTime":1766893847373,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/kds.slice.e2e-spec.ts","startTime":1766893847024,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Webhook Replay Protection (Slice E2E)"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Replay Protection (Slice E2E) accepts a valid (HMAC + fresh timestamp + new nonce)","invocations":1,"location":{"column":3,"line":32},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"accepts a valid (HMAC + fresh timestamp + new nonce)"},{"ancestorTitles":["Webhook Replay Protection (Slice E2E)"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Replay Protection (Slice E2E) rejects replay of the same nonce","invocations":1,"location":{"column":3,"line":50},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects replay of the same nonce"},{"ancestorTitles":["Webhook Replay Protection (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Replay Protection (Slice E2E) rejects stale timestamp","invocations":1,"location":{"column":3,"line":79},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects stale timestamp"},{"ancestorTitles":["Webhook Replay Protection (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Replay Protection (Slice E2E) rejects bad signature","invocations":1,"location":{"column":3,"line":98},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects bad signature"}],"endTime":1766893847617,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/webhook.replay.slice.e2e-spec.ts","startTime":1766893847376,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Forecast Caching (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Forecast Caching (Slice E2E) GET /forecast-test/sales -> 401 without token","invocations":1,"location":{"column":3,"line":36},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /forecast-test/sales -> 401 without token"},{"ancestorTitles":["Forecast Caching (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Forecast Caching (Slice E2E) GET /forecast-test/sales -> 400 for bad period","invocations":1,"location":{"column":3,"line":41},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /forecast-test/sales -> 400 for bad period"},{"ancestorTitles":["Forecast Caching (Slice E2E)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Forecast Caching (Slice E2E) MISS then HIT for same period","invocations":1,"location":{"column":3,"line":46},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"MISS then HIT for same period"},{"ancestorTitles":["Forecast Caching (Slice E2E)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Forecast Caching (Slice E2E) Invalidate then MISS with a new version","invocations":1,"location":{"column":3,"line":56},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"Invalidate then MISS with a new version"},{"ancestorTitles":["Forecast Caching (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Forecast Caching (Slice E2E) Separate period keys are independent (MISS on first read)","invocations":1,"location":{"column":3,"line":69},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"Separate period keys are independent (MISS on first read)"},{"ancestorTitles":["Forecast Caching (Slice E2E)"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Forecast Caching (Slice E2E) Deterministic rate limit: >= one 429 on sales","invocations":1,"location":{"column":3,"line":75},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Deterministic rate limit: >= one 429 on sales"}],"endTime":1766893847842,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/forecast.slice.e2e-spec.ts","startTime":1766893847621,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Inventory E2E"],"duration":10,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/inventory.e2e-spec.ts:59:8)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Inventory E2E should receive PO â†’ on-hand increases","invocations":1,"location":{"column":3,"line":54},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should receive PO â†’ on-hand increases"}],"endTime":1766893849196,"message":"  â— Inventory E2E â€º should receive PO â†’ on-hand increases\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      57 |       .get(`/inventory/items/${beefId}`)\n      58 |       .set('Authorization', `Bearer ${authToken}`)\n    > 59 |       .expect(200);\n         |        ^\n      60 |\n      61 |     const initialOnHand = initialResponse.body.onHand || 0;\n      62 |\n\n      at Object.<anonymous> (e2e/inventory.e2e-spec.ts:59:8)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/e2e/inventory.e2e-spec.ts","startTime":1766893847845,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["POS E2E"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'upsert')\n    at createFloor (/workspaces/chefcloud/services/api/test/e2e/factory.ts:238:44)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/pos.e2e-spec.ts:36:36)"],"fullName":"POS E2E should create order â†’ send-to-kitchen â†’ close","invocations":1,"location":{"column":3,"line":55},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create order â†’ send-to-kitchen â†’ close"}],"endTime":1766893850500,"message":"  â— POS E2E â€º should create order â†’ send-to-kitchen â†’ close\n\n    TypeError: Cannot read properties of undefined (reading 'upsert')\n\n      236 |  */\n      237 | export async function createFloor(prisma: PrismaClient, orgId: string, branchId: string) {\n    > 238 |   const floorPlan = await prisma.floorPlan.upsert({\n          |                                            ^\n      239 |     where: { id: `floor-e2e-${orgId}` },\n      240 |     update: {},\n      241 |     create: {\n\n      at createFloor (e2e/factory.ts:238:44)\n      at Object.<anonymous> (e2e/pos.e2e-spec.ts:36:36)\n","name":"/workspaces/chefcloud/services/api/test/e2e/pos.e2e-spec.ts","startTime":1766893849201,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Workforce E2E"],"duration":12,"failureDetails":[{}],"failureMessages":["Error: expected 201 \"Created\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/workforce.e2e-spec.ts:60:8)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Workforce E2E should clock in â†’ clock out","invocations":1,"location":{"column":3,"line":55},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should clock in â†’ clock out"}],"endTime":1766893852704,"message":"  â— Workforce E2E â€º should clock in â†’ clock out\n\n    expected 201 \"Created\", got 404 \"Not Found\"\n\n      58 |       .post('/workforce/attendance/clock-in')\n      59 |       .set('Authorization', `Bearer ${waiterToken}`)\n    > 60 |       .expect(201);\n         |        ^\n      61 |\n      62 |     const _attendanceId = clockInResponse.body.id;\n      63 |     expect(clockInResponse.body.clockIn).toBeDefined();\n\n      at Object.<anonymous> (e2e/workforce.e2e-spec.ts:60:8)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/e2e/workforce.e2e-spec.ts","startTime":1766893850508,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Bookings E2E"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'upsert')\n    at createEvent (/workspaces/chefcloud/services/api/test/e2e/factory.ts:329:36)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/bookings.e2e-spec.ts:33:36)"],"fullName":"Bookings E2E should create booking â†’ HOLD â†’ pay â†’ confirm","invocations":1,"location":{"column":3,"line":50},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create booking â†’ HOLD â†’ pay â†’ confirm"}],"endTime":1766893853952,"message":"  â— Bookings E2E â€º should create booking â†’ HOLD â†’ pay â†’ confirm\n\n    TypeError: Cannot read properties of undefined (reading 'upsert')\n\n      327 |  */\n      328 | export async function createEvent(prisma: PrismaClient, orgId: string, branchId: string) {\n    > 329 |   const event = await prisma.event.upsert({\n          |                                    ^\n      330 |     where: { id: `event-${orgId}` },\n      331 |     update: {},\n      332 |     create: {\n\n      at createEvent (e2e/factory.ts:329:36)\n      at Object.<anonymous> (e2e/bookings.e2e-spec.ts:33:36)\n","name":"/workspaces/chefcloud/services/api/test/e2e/bookings.e2e-spec.ts","startTime":1766893852708,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Accounting E2E"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'upsert')\n    at createChartOfAccounts (/workspaces/chefcloud/services/api/test/e2e/factory.ts:364:42)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/accounting.e2e-spec.ts:33:32)"],"fullName":"Accounting E2E should create period â†’ lock â†’ posting blocked","invocations":1,"location":{"column":3,"line":50},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create period â†’ lock â†’ posting blocked"}],"endTime":1766893855190,"message":"  â— Accounting E2E â€º should create period â†’ lock â†’ posting blocked\n\n    TypeError: Cannot read properties of undefined (reading 'upsert')\n\n      362 |   const created = [];\n      363 |   for (const acc of accounts) {\n    > 364 |     const account = await prisma.account.upsert({\n          |                                          ^\n      365 |       where: { orgId_code: { orgId, code: acc.code } },\n      366 |       update: {},\n      367 |       create: {\n\n      at createChartOfAccounts (e2e/factory.ts:364:42)\n      at Object.<anonymous> (e2e/accounting.e2e-spec.ts:33:32)\n","name":"/workspaces/chefcloud/services/api/test/e2e/accounting.e2e-spec.ts","startTime":1766893853955,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Docs (env-gated)"],"duration":38,"failureDetails":[],"failureMessages":[],"fullName":"Docs (env-gated) returns 404 when DOCS_ENABLED!=1","invocations":1,"location":{"column":3,"line":27},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 404 when DOCS_ENABLED!=1"},{"ancestorTitles":["Docs (env-gated)"],"duration":59,"failureDetails":[],"failureMessages":[],"fullName":"Docs (env-gated) serves OpenAPI JSON when DOCS_ENABLED=1","invocations":1,"location":{"column":3,"line":47},"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"serves OpenAPI JSON when DOCS_ENABLED=1"}],"endTime":1766893855483,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/docs.e2e-spec.ts","startTime":1766893855199,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["DI graph smoke test","Common services"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DI graph smoke test Common services should resolve CacheInvalidationService","invocations":1,"location":{"column":5,"line":32},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should resolve CacheInvalidationService"},{"ancestorTitles":["DI graph smoke test","Common services"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DI graph smoke test Common services should resolve CacheService","invocations":1,"location":{"column":5,"line":37},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should resolve CacheService"},{"ancestorTitles":["DI graph smoke test","Common services"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"DI graph smoke test Common services should resolve RedisService","invocations":1,"location":{"column":5,"line":42},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should resolve RedisService"},{"ancestorTitles":["DI graph smoke test","Observability services"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"DI graph smoke test Observability services should resolve MetricsService","invocations":1,"location":{"column":5,"line":49},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should resolve MetricsService"},{"ancestorTitles":["DI graph smoke test","Observability services"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DI graph smoke test Observability services should resolve ReadinessService","invocations":1,"location":{"column":5,"line":54},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should resolve ReadinessService"},{"ancestorTitles":["DI graph smoke test"],"duration":164,"failureDetails":[],"failureMessages":[],"fullName":"DI graph smoke test should boot app in reasonable time","invocations":1,"location":{"column":3,"line":60},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should boot app in reasonable time"}],"coverage":{},"endTime":1766893869981,"message":"\n\n  â— Test suite failed to run\n\n    Unhandled error. (Error: Connection is closed.\n\n      at close (../../../node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:214:25)\n      at Socket.<anonymous> (../../../node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:181:20)\n      at TCP.<anonymous> (../node:net:343:12))\n      at ../../../node_modules/.pnpm/bullmq@5.61.2/node_modules/bullmq/src/classes/redis-connection.ts:133:41\n\n  â— Test suite failed to run\n\n    Unhandled error. (Error: Connection is closed.\n\n      at close (../../../node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:214:25)\n      at Socket.<anonymous> (../../../node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:181:20)\n      at TCP.<anonymous> (../node:net:343:12))\n      at ../../../node_modules/.pnpm/bullmq@5.61.2/node_modules/bullmq/src/classes/redis-connection.ts:133:41\n","name":"/workspaces/chefcloud/services/api/test/smoke/di.e2e-spec.ts","startTime":1766893869981,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Billing (Black-box E2E)"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Black-box E2E) GET /readiness -> 200 (server is ready)","invocations":1,"location":{"column":3,"line":27},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /readiness -> 200 (server is ready)"},{"ancestorTitles":["Billing (Black-box E2E)"],"duration":181,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Black-box E2E) Rate limiting observed (>= one 429)","invocations":1,"location":{"column":3,"line":34},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting observed (>= one 429)"}],"endTime":1766893859164,"message":"","name":"/workspaces/chefcloud/services/api/test/blackbox/billing.blackbox.e2e-spec.ts","startTime":1766893856279,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Reports E2E"],"duration":9,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/reports.e2e-spec.ts:50:8)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Reports E2E should fetch X report (shift summary)","invocations":1,"location":{"column":3,"line":46},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fetch X report (shift summary)"},{"ancestorTitles":["Reports E2E"],"duration":2,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/reports.e2e-spec.ts:64:8)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Reports E2E should fetch owner overview","invocations":1,"location":{"column":3,"line":56},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fetch owner overview"}],"endTime":1766893860602,"message":"  â— Reports E2E â€º should fetch X report (shift summary)\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      48 |       .get('/reports/x-report')\n      49 |       .set('Authorization', `Bearer ${authToken}`)\n    > 50 |       .expect(200);\n         |        ^\n      51 |\n      52 |     expect(response.body).toBeDefined();\n      53 |     expect(response.body.shift).toBeDefined();\n\n      at Object.<anonymous> (e2e/reports.e2e-spec.ts:50:8)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— Reports E2E â€º should fetch owner overview\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      62 |         endDate: '2025-01-31',\n      63 |       })\n    > 64 |       .expect(200);\n         |        ^\n      65 |\n      66 |     expect(response.body).toBeDefined();\n      67 |   });\n\n      at Object.<anonymous> (e2e/reports.e2e-spec.ts:64:8)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/e2e/reports.e2e-spec.ts","startTime":1766893859168,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1766893869981,"message":"  â— Test suite failed to run\n\n    AppModule.imports not accessible; in AppModule, add: public static __imports = [ ...imports ]\n\n      11 |\n      12 | if (!appModuleImports || !Array.isArray(appModuleImports)) {\n    > 13 |   throw new Error('AppModule.imports not accessible; in AppModule, add: public static __imports = [ ...imports ]');\n         |         ^\n      14 | }\n      15 |\n      16 | async function tryImports(imports: any[]) {\n\n      at Object.<anonymous> (e2e/app-bisect.e2e-spec.ts:13:9)\n","name":"/workspaces/chefcloud/services/api/test/e2e/app-bisect.e2e-spec.ts","startTime":1766893869981,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E23 Platform Access (e2e)","Public routes bypass"],"duration":17,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e23-platform-access.e2e-spec.ts:29:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E23 Platform Access (e2e) Public routes bypass should allow unauthenticated access to /health","invocations":1,"location":{"column":5,"line":25},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow unauthenticated access to /health"},{"ancestorTitles":["E23 Platform Access (e2e)","Public routes bypass"],"duration":5,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e23-platform-access.e2e-spec.ts:36:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E23 Platform Access (e2e) Public routes bypass should allow unauthenticated access to /health from any platform","invocations":1,"location":{"column":5,"line":32},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow unauthenticated access to /health from any platform"},{"ancestorTitles":["E23 Platform Access (e2e)","Public routes bypass"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"E23 Platform Access (e2e) Public routes bypass should allow unauthenticated POST to /auth/login","invocations":1,"location":{"column":5,"line":41},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should allow unauthenticated POST to /auth/login"},{"ancestorTitles":["E23 Platform Access (e2e)","Platform header handling"],"duration":2,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e23-platform-access.e2e-spec.ts:55:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E23 Platform Access (e2e) Platform header handling should work without X-Client-Platform header (defaults to web)","invocations":1,"location":{"column":5,"line":51},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should work without X-Client-Platform header (defaults to web)"}],"endTime":1766893862670,"message":"  â— E23 Platform Access (e2e) â€º Public routes bypass â€º should allow unauthenticated access to /health\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      27 |         .get('/health')\n      28 |         .set('X-Client-Platform', 'mobile')\n    > 29 |         .expect(200);\n         |          ^\n      30 |     });\n      31 |\n      32 |     it('should allow unauthenticated access to /health from any platform', async () => {\n\n      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:29:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— E23 Platform Access (e2e) â€º Public routes bypass â€º should allow unauthenticated access to /health from any platform\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      34 |         .get('/health')\n      35 |         .set('X-Client-Platform', 'desktop')\n    > 36 |         .expect(200);\n         |          ^\n      37 |\n      38 |       await request(app.getHttpServer()).get('/health').set('X-Client-Platform', 'web').expect(200);\n      39 |     });\n\n      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:36:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  â— E23 Platform Access (e2e) â€º Platform header handling â€º should work without X-Client-Platform header (defaults to web)\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      53 |         .get('/health')\n      54 |         // No X-Client-Platform header\n    > 55 |         .expect(200);\n         |          ^\n      56 |     });\n      57 |   });\n      58 | });\n\n      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:55:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/e23-platform-access.e2e-spec.ts","startTime":1766893861854,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth E2E"],"duration":127,"failureDetails":[],"failureMessages":[],"fullName":"Auth E2E should login with email/password and return access_token","invocations":1,"location":{"column":3,"line":41},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should login with email/password and return access_token"},{"ancestorTitles":["Auth E2E"],"duration":109,"failureDetails":[],"failureMessages":[],"fullName":"Auth E2E should reject invalid password","invocations":1,"location":{"column":3,"line":57},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject invalid password"}],"endTime":1766893864149,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/auth.e2e-spec.ts","startTime":1766893862672,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Minimal Harness (No AppModule)"],"duration":36,"failureDetails":[],"failureMessages":[],"fullName":"Minimal Harness (No AppModule) should boot trivial module without hang","invocations":1,"location":{"column":3,"line":30},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should boot trivial module without hang"}],"endTime":1766893864301,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/minimal-harness.e2e-spec.ts","startTime":1766893864156,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Minimal Boot Test"],"duration":162,"failureDetails":[],"failureMessages":[],"fullName":"Minimal Boot Test should boot AppModule without errors","invocations":1,"location":{"column":3,"line":15},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should boot AppModule without errors"}],"endTime":1766893864952,"message":"","name":"/workspaces/chefcloud/services/api/test/smoke/minimal-boot.e2e-spec.ts","startTime":1766893864312,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PosModule imports bisect"],"duration":13,"failureDetails":[{"type":"EfrisService","context":{"index":1,"dependencies":[null,null]},"metadata":{"id":"2fb9a2c7aeba60a82f4ae"},"moduleRef":{"id":"0ac74c487937bde067662"}}],"failureMessages":["Error: Nest can't resolve dependencies of the EfrisService (PrismaService, ?). Please make sure that the argument ConfigService at index [1] is available in the EfrisModule context.\n\nPotential solutions:\n- Is EfrisModule a valid NestJS module?\n- If ConfigService is a provider, is it part of the current EfrisModule?\n- If ConfigService is exported from a separate @Module, is that module imported within EfrisModule?\n  @Module({\n    imports: [ /* the Module containing ConfigService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadProvider (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13\n    at async Promise.all (index 3)\n    at TestingInstanceLoader.createInstancesOfProviders (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13\n    at async Promise.all (index 2)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/pos-imports-bisect.e2e-spec.ts:16:23)"],"fullName":"PosModule imports bisect should test all PosModule imports together","invocations":1,"location":{"column":3,"line":15},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should test all PosModule imports together"}],"endTime":1766893865228,"message":"  â— PosModule imports bisect â€º should test all PosModule imports together\n\n    Nest can't resolve dependencies of the EfrisService (PrismaService, ?). Please make sure that the argument ConfigService at index [1] is available in the EfrisModule context.\n\n    Potential solutions:\n    - Is EfrisModule a valid NestJS module?\n    - If ConfigService is a provider, is it part of the current EfrisModule?\n    - If ConfigService is exported from a separate @Module, is that module imported within EfrisModule?\n      @Module({\n        imports: [ /* the Module containing ConfigService */ ]\n      })\n\n      14 | describe('PosModule imports bisect', () => {\n      15 |   it('should test all PosModule imports together', async () => {\n    > 16 |     const moduleRef = await createE2ETestingModule({\n         |                       ^\n      17 |       imports: [\n      18 |         EfrisModule,\n      19 |         ConfigModule,\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13\n          at async Promise.all (index 2)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/pos-imports-bisect.e2e-spec.ts:16:23)\n","name":"/workspaces/chefcloud/services/api/test/e2e/pos-imports-bisect.e2e-spec.ts","startTime":1766893864959,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Metrics endpoint"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"Metrics endpoint /metrics returns text exposition","invocations":1,"location":{"column":3,"line":26},"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"/metrics returns text exposition"}],"endTime":1766893865417,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/metrics.e2e-spec.ts","startTime":1766893865231,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EventsModule isolation test"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"EventsModule isolation test should compile EventsModule","invocations":1,"location":{"column":3,"line":9},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should compile EventsModule"}],"endTime":1766893865518,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/events-isolation.e2e-spec.ts","startTime":1766893865420,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["InventoryModule + KpisModule test"],"duration":9,"failureDetails":[{"type":"InventoryService","context":{"index":1,"dependencies":[null,null,"KpisService"]},"metadata":{"id":"f6f6bbe10205151684ad1"},"moduleRef":{"id":"24843011a1015f8f6f6bb"}}],"failureMessages":["Error: Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.\n\nPotential solutions:\n- Is InventoryModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current InventoryModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadProvider (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13\n    at async Promise.all (index 3)\n    at TestingInstanceLoader.createInstancesOfProviders (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13\n    at async Promise.all (index 2)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/inventory-kpis.e2e-spec.ts:10:23)"],"fullName":"InventoryModule + KpisModule test should compile these modules together","invocations":1,"location":{"column":3,"line":9},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should compile these modules together"}],"endTime":1766893865732,"message":"  â— InventoryModule + KpisModule test â€º should compile these modules together\n\n    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.\n\n    Potential solutions:\n    - Is InventoryModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n       8 | describe('InventoryModule + KpisModule test', () => {\n       9 |   it('should compile these modules together', async () => {\n    > 10 |     const moduleRef = await createE2ETestingModule({\n         |                       ^\n      11 |       imports: [InventoryModule, KpisModule],\n      12 |     });\n      13 |     await moduleRef.init();\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13\n          at async Promise.all (index 2)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/inventory-kpis.e2e-spec.ts:10:23)\n","name":"/workspaces/chefcloud/services/api/test/e2e/inventory-kpis.e2e-spec.ts","startTime":1766893865540,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["PosModule isolation test"],"duration":43,"failureDetails":[{"type":"InventoryService","context":{"index":1,"dependencies":[null,null,"KpisService"]},"metadata":{"id":"e85324f644076fe7468df"},"moduleRef":{"id":"eeee2009307425802b15e"}}],"failureMessages":["Error: Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.\n\nPotential solutions:\n- Is InventoryModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current InventoryModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadProvider (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13\n    at async Promise.all (index 3)\n    at TestingInstanceLoader.createInstancesOfProviders (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13\n    at async Promise.all (index 5)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/pos-isolation.e2e-spec.ts:10:23)"],"fullName":"PosModule isolation test should compile PosModule to show exact failing provider","invocations":1,"location":{"column":3,"line":9},"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should compile PosModule to show exact failing provider"}],"endTime":1766893866318,"message":"  â— PosModule isolation test â€º should compile PosModule to show exact failing provider\n\n    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.\n\n    Potential solutions:\n    - Is InventoryModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n       8 | describe('PosModule isolation test', () => {\n       9 |   it('should compile PosModule to show exact failing provider', async () => {\n    > 10 |     const moduleRef = await createE2ETestingModule({\n         |                       ^\n      11 |       imports: [PosModule],\n      12 |     });\n      13 |     await moduleRef.init();\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13\n          at async Promise.all (index 5)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/pos-isolation.e2e-spec.ts:10:23)\n","name":"/workspaces/chefcloud/services/api/test/e2e/pos-isolation.e2e-spec.ts","startTime":1766893865735,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Billing (Slice E2E) â€” Deterministic","Authentication & Authorization"],"duration":24,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Slice E2E) â€” Deterministic Authentication & Authorization POST /billing/plan/change should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":53},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /billing/plan/change should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing (Slice E2E) â€” Deterministic","Authentication & Authorization"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Slice E2E) â€” Deterministic Authentication & Authorization POST /billing/cancel should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":61},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /billing/cancel should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing (Slice E2E) â€” Deterministic","Authentication & Authorization"],"duration":19,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Slice E2E) â€” Deterministic Authentication & Authorization GET /billing/subscription should return 401 if no authorization token is provided","invocations":1,"location":{"column":5,"line":68},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /billing/subscription should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing (Slice E2E) â€” Deterministic","Rate Limiting"],"duration":46,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Slice E2E) â€” Deterministic Rate Limiting Rate limiting produces >= one 429 deterministically","invocations":1,"location":{"column":5,"line":77},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 deterministically"},{"ancestorTitles":["Billing (Slice E2E) â€” Deterministic","Basic Functionality (without auth)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Slice E2E) â€” Deterministic Basic Functionality (without auth) should bootstrap successfully without metatype errors","invocations":1,"location":{"column":5,"line":113},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should bootstrap successfully without metatype errors"},{"ancestorTitles":["Billing (Slice E2E) â€” Deterministic","Basic Functionality (without auth)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Slice E2E) â€” Deterministic Basic Functionality (without auth) should have billing controller mounted at /billing","invocations":1,"location":{"column":5,"line":117},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have billing controller mounted at /billing"},{"ancestorTitles":["Billing (Slice E2E) â€” Deterministic","Basic Functionality (without auth)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Slice E2E) â€” Deterministic Basic Functionality (without auth) POST /billing/plan/change should validate request body","invocations":1,"location":{"column":5,"line":125},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /billing/plan/change should validate request body"},{"ancestorTitles":["Billing (Slice E2E) â€” Deterministic","Basic Functionality (without auth)"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Slice E2E) â€” Deterministic Basic Functionality (without auth) POST /billing/cancel should be idempotent","invocations":1,"location":{"column":5,"line":134},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /billing/cancel should be idempotent"},{"ancestorTitles":["Billing (Slice E2E) â€” Deterministic","Endpoint Availability"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Slice E2E) â€” Deterministic Endpoint Availability GET /billing/subscription endpoint exists","invocations":1,"location":{"column":5,"line":147},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /billing/subscription endpoint exists"},{"ancestorTitles":["Billing (Slice E2E) â€” Deterministic","Endpoint Availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Slice E2E) â€” Deterministic Endpoint Availability POST /billing/plan/change endpoint exists","invocations":1,"location":{"column":5,"line":154},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /billing/plan/change endpoint exists"},{"ancestorTitles":["Billing (Slice E2E) â€” Deterministic","Endpoint Availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Slice E2E) â€” Deterministic Endpoint Availability POST /billing/cancel endpoint exists","invocations":1,"location":{"column":5,"line":162},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /billing/cancel endpoint exists"}],"endTime":1766893867084,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts","startTime":1766893866413,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Franchise (Slice E2E)"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"Franchise (Slice E2E) GET /franchise/overview -> 401 without token","invocations":1,"location":{"column":3,"line":134},"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"GET /franchise/overview -> 401 without token"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Franchise (Slice E2E) GET /franchise/overview -> 200","invocations":1,"location":{"column":3,"line":139},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /franchise/overview -> 200"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Franchise (Slice E2E) GET /franchise/rankings -> 200","invocations":1,"location":{"column":3,"line":151},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /franchise/rankings -> 200"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Franchise (Slice E2E) GET /franchise/budgets -> 200","invocations":1,"location":{"column":3,"line":162},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /franchise/budgets -> 200"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Franchise (Slice E2E) Two reads of /franchise/overview return consistent payload shape","invocations":1,"location":{"column":3,"line":174},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Two reads of /franchise/overview return consistent payload shape"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Franchise (Slice E2E) POST /franchise-test/invalidate -> { ok:true }","invocations":1,"location":{"column":3,"line":194},"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /franchise-test/invalidate -> { ok:true }"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Franchise (Slice E2E) GET /franchise/overview after invalidation -> 200","invocations":1,"location":{"column":3,"line":207},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /franchise/overview after invalidation -> 200"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Franchise (Slice E2E) GET /franchise/forecast/items -> 200","invocations":1,"location":{"column":3,"line":219},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /franchise/forecast/items -> 200"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Franchise (Slice E2E) Rate limiting produces >= one 429 on /franchise/overview","invocations":1,"location":{"column":3,"line":228},"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 on /franchise/overview"}],"endTime":1766893867635,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/franchise.slice.e2e-spec.ts","startTime":1766893867094,"status":"passed","summary":""}],"wasInterrupted":false}
