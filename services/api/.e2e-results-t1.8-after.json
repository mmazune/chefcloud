{"numFailedTestSuites":39,"numFailedTests":254,"numPassedTestSuites":18,"numPassedTests":167,"numPendingTestSuites":0,"numPendingTests":1,"numRuntimeErrorTestSuites":11,"numTodoTests":0,"numTotalTestSuites":57,"numTotalTests":422,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1766887791287,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","POST /franchise/budgets"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) POST /franchise/budgets should upsert a budget for a branch","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should upsert a budget for a branch"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","POST /franchise/budgets"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) POST /franchise/budgets should update existing budget on re-upsert","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update existing budget on re-upsert"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/budgets"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/budgets should fetch budgets for a period","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fetch budgets for a period"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/budgets"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/budgets should reject invalid period format","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject invalid period format"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/rankings"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/rankings should return ranked branches with deterministic ordering","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return ranked branches with deterministic ordering"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/procurement/suggest"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/procurement/suggest should return items below safety stock","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return items below safety stock"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-s3: Central Procurement","POST /franchise/procurement/generate-drafts"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.supplier.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n  291 \n  292 beforeAll(async () => {\n  293   // Create supplier with packSize and minOrderQty\n→ 294   const supplier = await prisma.client.supplier.create({\n          data: {\n            name: \"Test Supplier\",\n            email: \"test-supplier@example.com\",\n            contactPerson: \"John Doe\",\n            phone: \"+256700000000\",\n            leadTimeDays: 3,\n            packSize: 10,\n            minOrderQty: 50,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:24)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-s3: Central Procurement POST /franchise/procurement/generate-drafts should generate draft POs with packSize rounding","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate draft POs with packSize rounding"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-s3: Central Procurement","POST /franchise/procurement/generate-drafts"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.supplier.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n  291 \n  292 beforeAll(async () => {\n  293   // Create supplier with packSize and minOrderQty\n→ 294   const supplier = await prisma.client.supplier.create({\n          data: {\n            name: \"Test Supplier\",\n            email: \"test-supplier@example.com\",\n            contactPerson: \"John Doe\",\n            phone: \"+256700000000\",\n            leadTimeDays: 3,\n            packSize: 10,\n            minOrderQty: 50,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:24)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-s3: Central Procurement POST /franchise/procurement/generate-drafts should generate drafts for specific branches only","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate drafts for specific branches only"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-s3: Central Procurement","GET /franchise/procurement/drafts"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.supplier.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n  291 \n  292 beforeAll(async () => {\n  293   // Create supplier with packSize and minOrderQty\n→ 294   const supplier = await prisma.client.supplier.create({\n          data: {\n            name: \"Test Supplier\",\n            email: \"test-supplier@example.com\",\n            contactPerson: \"John Doe\",\n            phone: \"+256700000000\",\n            leadTimeDays: 3,\n            packSize: 10,\n            minOrderQty: 50,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:24)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-s3: Central Procurement GET /franchise/procurement/drafts should list all draft POs with supplier and branch names","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list all draft POs with supplier and branch names"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-s3: Central Procurement","POST /franchise/procurement/approve"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.supplier.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n  291 \n  292 beforeAll(async () => {\n  293   // Create supplier with packSize and minOrderQty\n→ 294   const supplier = await prisma.client.supplier.create({\n          data: {\n            name: \"Test Supplier\",\n            email: \"test-supplier@example.com\",\n            contactPerson: \"John Doe\",\n            phone: \"+256700000000\",\n            leadTimeDays: 3,\n            packSize: 10,\n            minOrderQty: 50,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:24)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-s3: Central Procurement POST /franchise/procurement/approve should approve draft POs and update status to PLACED","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should approve draft POs and update status to PLACED"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-s3: Central Procurement","POST /franchise/procurement/approve"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.supplier.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n  291 \n  292 beforeAll(async () => {\n  293   // Create supplier with packSize and minOrderQty\n→ 294   const supplier = await prisma.client.supplier.create({\n          data: {\n            name: \"Test Supplier\",\n            email: \"test-supplier@example.com\",\n            contactPerson: \"John Doe\",\n            phone: \"+256700000000\",\n            leadTimeDays: 3,\n            packSize: 10,\n            minOrderQty: 50,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:24)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-s3: Central Procurement POST /franchise/procurement/approve should reject non-owner approval attempts","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject non-owner approval attempts"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/overview"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/overview should return per-branch KPIs and totals for date range","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return per-branch KPIs and totals for date range"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/overview"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/overview should filter by branchIds when provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by branchIds when provided"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/overview"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/overview should default to today when dates omitted","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should default to today when dates omitted"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/overview"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/overview should reject non-manager/owner users","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject non-manager/owner users"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/rankings"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/rankings should return branches ranked by NET_SALES","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return branches ranked by NET_SALES"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/rankings"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/rankings should return branches ranked by MARGIN_PERCENT","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return branches ranked by MARGIN_PERCENT"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/rankings"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/rankings should apply limit parameter","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should apply limit parameter"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/rankings"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/rankings should reject unsupported metrics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject unsupported metrics"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","GET /franchise/analytics/rankings"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) GET /franchise/analytics/rankings should reject requests without metric parameter","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject requests without metric parameter"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets (NEW)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n  649 describe('GET /franchise/budgets (NEW)', () => {\n  650   beforeAll(async () => {\n  651     // Seed new FranchiseBudget records (year/month format)\n→ 652     await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 2000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 1500000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 2,\n                category: \"NET_SALES\",\n                amountCents: 2500000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets (NEW) should return all budgets without filters","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return all budgets without filters"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets (NEW)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n  649 describe('GET /franchise/budgets (NEW)', () => {\n  650   beforeAll(async () => {\n  651     // Seed new FranchiseBudget records (year/month format)\n→ 652     await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 2000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 1500000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 2,\n                category: \"NET_SALES\",\n                amountCents: 2500000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets (NEW) should filter by year and month","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by year and month"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets (NEW)"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n  649 describe('GET /franchise/budgets (NEW)', () => {\n  650   beforeAll(async () => {\n  651     // Seed new FranchiseBudget records (year/month format)\n→ 652     await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 2000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 1500000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 2,\n                category: \"NET_SALES\",\n                amountCents: 2500000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets (NEW) should filter by branchIds","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by branchIds"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets (NEW)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n  649 describe('GET /franchise/budgets (NEW)', () => {\n  650   beforeAll(async () => {\n  651     // Seed new FranchiseBudget records (year/month format)\n→ 652     await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 2000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 1500000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 2,\n                category: \"NET_SALES\",\n                amountCents: 2500000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets (NEW) should allow L4 (Manager) to read budgets","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow L4 (Manager) to read budgets"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","PUT /franchise/budgets (bulk upsert)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance PUT /franchise/budgets (bulk upsert) should create new budgets","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create new budgets"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","PUT /franchise/budgets (bulk upsert)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance PUT /franchise/budgets (bulk upsert) should update existing budgets (idempotent)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update existing budgets (idempotent)"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","PUT /franchise/budgets (bulk upsert)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance PUT /franchise/budgets (bulk upsert) should reject L4 (Manager) from upserting budgets","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject L4 (Manager) from upserting budgets"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","PUT /franchise/budgets (bulk upsert)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance PUT /franchise/budgets (bulk upsert) should validate year range (2000-9999)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should validate year range (2000-9999)"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","PUT /franchise/budgets (bulk upsert)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance PUT /franchise/budgets (bulk upsert) should validate month range (1-12)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should validate month range (1-12)"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets/variance"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n  940   where: { orgId, year: 2025, month: 1 },\n  941 });\n  942 \n→ 943 await prisma.client.franchiseBudget.createMany({\n        data: [\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 5000000,\n            currencyCode: \"UGX\"\n          },\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 3000000,\n            currencyCode: \"UGX\"\n          }\n        ]\n      })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets/variance should calculate variance for all branches","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate variance for all branches"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets/variance"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n  940   where: { orgId, year: 2025, month: 1 },\n  941 });\n  942 \n→ 943 await prisma.client.franchiseBudget.createMany({\n        data: [\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 5000000,\n            currencyCode: \"UGX\"\n          },\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 3000000,\n            currencyCode: \"UGX\"\n          }\n        ]\n      })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets/variance should filter variance by branchIds","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter variance by branchIds"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets/variance"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n  940   where: { orgId, year: 2025, month: 1 },\n  941 });\n  942 \n→ 943 await prisma.client.franchiseBudget.createMany({\n        data: [\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 5000000,\n            currencyCode: \"UGX\"\n          },\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 3000000,\n            currencyCode: \"UGX\"\n          }\n        ]\n      })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets/variance should return empty array when no budgets exist","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array when no budgets exist"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets/variance"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n  940   where: { orgId, year: 2025, month: 1 },\n  941 });\n  942 \n→ 943 await prisma.client.franchiseBudget.createMany({\n        data: [\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 5000000,\n            currencyCode: \"UGX\"\n          },\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 3000000,\n            currencyCode: \"UGX\"\n          }\n        ]\n      })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets/variance should require year parameter","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require year parameter"},{"ancestorTitles":["E22-s2: Franchise APIs (e2e)","E22-S3: Franchise Budgets & Variance","GET /franchise/budgets/variance"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E22 Franchise Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:17)","PrismaClientValidationError: \nInvalid `prisma.client.franchiseBudget.createMany()` invocation in\n/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n  940   where: { orgId, year: 2025, month: 1 },\n  941 });\n  942 \n→ 943 await prisma.client.franchiseBudget.createMany({\n        data: [\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 5000000,\n            currencyCode: \"UGX\"\n          },\n          {\n            orgId: undefined,\n            branchId: undefined,\n            year: 2025,\n            month: 1,\n            category: \"NET_SALES\",\n            amountCents: 3000000,\n            currencyCode: \"UGX\"\n          }\n        ]\n      })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:9)"],"fullName":"E22-s2: Franchise APIs (e2e) E22-S3: Franchise Budgets & Variance GET /franchise/budgets/variance should require month parameter","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require month parameter"}],"coverage":{},"endTime":1766887842432,"message":"  ● E22-s2: Franchise APIs (e2e) › POST /franchise/budgets › should upsert a budget for a branch\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › POST /franchise/budgets › should update existing budget on re-upsert\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/budgets › should fetch budgets for a period\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/budgets › should reject invalid period format\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/rankings › should return ranked branches with deterministic ordering\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/procurement/suggest › should return items below safety stock\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate draft POs with packSize rounding\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate draft POs with packSize rounding\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.supplier.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n      291 \n      292 beforeAll(async () => {\n      293   // Create supplier with packSize and minOrderQty\n    → 294   const supplier = await prisma.client.supplier.create({\n              data: {\n                name: \"Test Supplier\",\n                email: \"test-supplier@example.com\",\n                contactPerson: \"John Doe\",\n                phone: \"+256700000000\",\n                leadTimeDays: 3,\n                packSize: 10,\n                minOrderQty: 50,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate drafts for specific branches only\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/generate-drafts › should generate drafts for specific branches only\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.supplier.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n      291 \n      292 beforeAll(async () => {\n      293   // Create supplier with packSize and minOrderQty\n    → 294   const supplier = await prisma.client.supplier.create({\n              data: {\n                name: \"Test Supplier\",\n                email: \"test-supplier@example.com\",\n                contactPerson: \"John Doe\",\n                phone: \"+256700000000\",\n                leadTimeDays: 3,\n                packSize: 10,\n                minOrderQty: 50,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › GET /franchise/procurement/drafts › should list all draft POs with supplier and branch names\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › GET /franchise/procurement/drafts › should list all draft POs with supplier and branch names\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.supplier.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n      291 \n      292 beforeAll(async () => {\n      293   // Create supplier with packSize and minOrderQty\n    → 294   const supplier = await prisma.client.supplier.create({\n              data: {\n                name: \"Test Supplier\",\n                email: \"test-supplier@example.com\",\n                contactPerson: \"John Doe\",\n                phone: \"+256700000000\",\n                leadTimeDays: 3,\n                packSize: 10,\n                minOrderQty: 50,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should approve draft POs and update status to PLACED\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should approve draft POs and update status to PLACED\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.supplier.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n      291 \n      292 beforeAll(async () => {\n      293   // Create supplier with packSize and minOrderQty\n    → 294   const supplier = await prisma.client.supplier.create({\n              data: {\n                name: \"Test Supplier\",\n                email: \"test-supplier@example.com\",\n                contactPerson: \"John Doe\",\n                phone: \"+256700000000\",\n                leadTimeDays: 3,\n                packSize: 10,\n                minOrderQty: 50,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should reject non-owner approval attempts\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-s3: Central Procurement › POST /franchise/procurement/approve › should reject non-owner approval attempts\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.supplier.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:294:53\n\n      291 \n      292 beforeAll(async () => {\n      293   // Create supplier with packSize and minOrderQty\n    → 294   const supplier = await prisma.client.supplier.create({\n              data: {\n                name: \"Test Supplier\",\n                email: \"test-supplier@example.com\",\n                contactPerson: \"John Doe\",\n                phone: \"+256700000000\",\n                leadTimeDays: 3,\n                packSize: 10,\n                minOrderQty: 50,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:294:24)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should return per-branch KPIs and totals for date range\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should filter by branchIds when provided\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should default to today when dates omitted\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/overview › should reject non-manager/owner users\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should return branches ranked by NET_SALES\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should return branches ranked by MARGIN_PERCENT\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should apply limit parameter\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should reject unsupported metrics\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › GET /franchise/analytics/rankings › should reject requests without metric parameter\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should return all budgets without filters\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should return all budgets without filters\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n      649 describe('GET /franchise/budgets (NEW)', () => {\n      650   beforeAll(async () => {\n      651     // Seed new FranchiseBudget records (year/month format)\n    → 652     await prisma.client.franchiseBudget.createMany({\n                data: [\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 2000000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 1500000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 2,\n                    category: \"NET_SALES\",\n                    amountCents: 2500000,\n                    currencyCode: \"UGX\"\n                  }\n                ]\n              })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by year and month\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by year and month\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n      649 describe('GET /franchise/budgets (NEW)', () => {\n      650   beforeAll(async () => {\n      651     // Seed new FranchiseBudget records (year/month format)\n    → 652     await prisma.client.franchiseBudget.createMany({\n                data: [\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 2000000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 1500000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 2,\n                    category: \"NET_SALES\",\n                    amountCents: 2500000,\n                    currencyCode: \"UGX\"\n                  }\n                ]\n              })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by branchIds\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should filter by branchIds\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n      649 describe('GET /franchise/budgets (NEW)', () => {\n      650   beforeAll(async () => {\n      651     // Seed new FranchiseBudget records (year/month format)\n    → 652     await prisma.client.franchiseBudget.createMany({\n                data: [\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 2000000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 1500000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 2,\n                    category: \"NET_SALES\",\n                    amountCents: 2500000,\n                    currencyCode: \"UGX\"\n                  }\n                ]\n              })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should allow L4 (Manager) to read budgets\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets (NEW) › should allow L4 (Manager) to read budgets\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:652:45\n\n      649 describe('GET /franchise/budgets (NEW)', () => {\n      650   beforeAll(async () => {\n      651     // Seed new FranchiseBudget records (year/month format)\n    → 652     await prisma.client.franchiseBudget.createMany({\n                data: [\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 2000000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 1,\n                    category: \"NET_SALES\",\n                    amountCents: 1500000,\n                    currencyCode: \"UGX\"\n                  },\n                  {\n                    orgId: undefined,\n                    branchId: undefined,\n                    year: 2025,\n                    month: 2,\n                    category: \"NET_SALES\",\n                    amountCents: 2500000,\n                    currencyCode: \"UGX\"\n                  }\n                ]\n              })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:652:9)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should create new budgets\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should update existing budgets (idempotent)\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should reject L4 (Manager) from upserting budgets\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should validate year range (2000-9999)\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › PUT /franchise/budgets (bulk upsert) › should validate month range (1-12)\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should calculate variance for all branches\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should calculate variance for all branches\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n      940   where: { orgId, year: 2025, month: 1 },\n      941 });\n      942 \n    → 943 await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 5000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 3000000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should filter variance by branchIds\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should filter variance by branchIds\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n      940   where: { orgId, year: 2025, month: 1 },\n      941 });\n      942 \n    → 943 await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 5000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 3000000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should return empty array when no budgets exist\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should return empty array when no budgets exist\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n      940   where: { orgId, year: 2025, month: 1 },\n      941 });\n      942 \n    → 943 await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 5000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 3000000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require year parameter\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require year parameter\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n      940   where: { orgId, year: 2025, month: 1 },\n      941 });\n      942 \n    → 943 await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 5000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 3000000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require month parameter\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E22 Franchise Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:27:17)\n\n  ● E22-s2: Franchise APIs (e2e) › E22-S3: Franchise Budgets & Variance › GET /franchise/budgets/variance › should require month parameter\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.franchiseBudget.createMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:943:45\n\n      940   where: { orgId, year: 2025, month: 1 },\n      941 });\n      942 \n    → 943 await prisma.client.franchiseBudget.createMany({\n            data: [\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 5000000,\n                currencyCode: \"UGX\"\n              },\n              {\n                orgId: undefined,\n                branchId: undefined,\n                year: 2025,\n                month: 1,\n                category: \"NET_SALES\",\n                amountCents: 3000000,\n                currencyCode: \"UGX\"\n              }\n            ]\n          })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:943:9)\n\n\n  ● Test suite failed to run\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.inventoryItem.delete()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:344:47\n\n      341 await prisma.client.purchaseOrder.deleteMany({ where: { orgId } });\n      342 await prisma.client.procurementJob.deleteMany({ where: { orgId } });\n      343 await prisma.client.stockBatch.deleteMany({ where: { itemId } });\n    → 344 await prisma.client.inventoryItem.delete({\n            where: {\n              id: undefined,\n          ?   orgId_sku?: InventoryItemOrgIdSkuCompoundUniqueInput,\n          ?   AND?: InventoryItemWhereInput | InventoryItemWhereInput[],\n          ?   OR?: InventoryItemWhereInput[],\n          ?   NOT?: InventoryItemWhereInput | InventoryItemWhereInput[],\n          ?   orgId?: StringFilter | String,\n          ?   sku?: StringNullableFilter | String | Null,\n          ?   name?: StringFilter | String,\n          ?   unit?: StringFilter | String,\n          ?   category?: StringNullableFilter | String | Null,\n          ?   reorderLevel?: DecimalFilter | Decimal,\n          ?   reorderQty?: DecimalFilter | Decimal,\n          ?   isActive?: BoolFilter | Boolean,\n          ?   metadata?: JsonNullableFilter,\n          ?   createdAt?: DateTimeFilter | DateTime,\n          ?   updatedAt?: DateTimeFilter | DateTime,\n          ?   stockBatches?: StockBatchListRelationFilter,\n          ?   recipeIngredients?: RecipeIngredientListRelationFilter,\n          ?   wastageRecords?: WastageListRelationFilter,\n          ?   adjustments?: AdjustmentListRelationFilter,\n          ?   poItems?: PurchaseOrderItemListRelationFilter,\n          ?   receiptLines?: GoodsReceiptLineListRelationFilter,\n          ?   spoutCalibrations?: SpoutCalibrationListRelationFilter,\n          ?   forecastProfiles?: ForecastProfileListRelationFilter,\n          ?   forecastPoints?: ForecastPointListRelationFilter,\n          ?   stockMovements?: StockMovementListRelationFilter,\n          ?   lowStockConfigs?: LowStockConfigListRelationFilter\n            }\n          })\n\n    Argument `where` of type InventoryItemWhereUniqueInput needs at least one of `id` or `orgId_sku` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e22-franchise.e2e-spec.ts:344:7)\n\n  ● Test suite failed to run\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.order.deleteMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:996:35\n\n      993 \n      994 afterAll(async () => {\n      995   // Cleanup variance test data\n    → 996   await prisma.client.order.deleteMany({\n              where: {\n                branchId: {\n                  in: [\n                    undefined,\n                    ~~~~~~~~~\n                    undefined\n                  ]\n                },\n                createdAt: {\n                  gte: new Date(\"2025-01-01T00:00:00.000Z\"),\n                  lt: new Date(\"2025-02-01T00:00:00.000Z\")\n                }\n              }\n            })\n\n    Invalid value for argument `in[0]`: Can not use `undefined` value within array. Use `null` or filter out `undefined` values.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                          ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at e.throwValidationError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:10206)\n      at od (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:9323)\n      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8075)\n      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)\n      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)\n      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)\n      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)\n      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)\n      at mr (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:6037)\n      at vn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:5902)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10186\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at t._executeRequest (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10165)\n      at Na (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:9955)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9639)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9933\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9913\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at t._request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9836)\n      at s (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5636)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5864\n      at i (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1016)\n      at PrismaPromise.then (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1091)\n\n  ● Test suite failed to run\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.order.deleteMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts:129:31\n\n      126 \n      127 afterAll(async () => {\n      128   // Cleanup\n    → 129   await prisma.client.order.deleteMany({\n              where: {\n                branchId: {\n                  in: [\n                    undefined,\n                    ~~~~~~~~~\n                    undefined\n                  ]\n                }\n              }\n            })\n\n    Invalid value for argument `in[0]`: Can not use `undefined` value within array. Use `null` or filter out `undefined` values.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                          ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at e.throwValidationError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:10206)\n      at od (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:9323)\n      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8075)\n      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)\n      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)\n      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)\n      at sa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8439)\n      at aa (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:8908)\n      at mr (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:6037)\n      at vn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:5902)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10186\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at t._executeRequest (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:10165)\n      at Na (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:9955)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9639)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9469\n      at ../src/common/slow-query.ts:19:26\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9452\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9421)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9933\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9913\n      at Object.runInChildSpan (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1509)\n      at t._request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9836)\n      at s (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5636)\n      at ../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:31:5864\n      at i (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1016)\n      at PrismaPromise.then (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:1091)\n","name":"/workspaces/chefcloud/services/api/test/e22-franchise.e2e-spec.ts","startTime":1766887842432,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates POST /shift-templates - creates a lunch shift template","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-templates - creates a lunch shift template"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates POST /shift-templates - creates a dinner shift template","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-templates - creates a dinner shift template"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates POST /shift-templates - rejects invalid time format","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-templates - rejects invalid time format"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates POST /shift-templates - rejects end time before start time","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-templates - rejects end time before start time"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates GET /shift-templates - lists all templates","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-templates - lists all templates"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates GET /shift-templates/:id - gets template by ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-templates/:id - gets template by ID"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates PATCH /shift-templates/:id - updates template","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"PATCH /shift-templates/:id - updates template"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Templates"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Templates DELETE /shift-templates/:id - soft deletes template","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"DELETE /shift-templates/:id - soft deletes template"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Schedules"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.shiftTemplate.update()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n  215 describe('Shift Schedules', () => {\n  216   beforeAll(async () => {\n  217     // Reactivate template for schedule tests\n→ 218     await prisma.shiftTemplate.update({\n            where: {\n              id: undefined,\n          ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   OR?: ShiftTemplateWhereInput[],\n          ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   orgId?: StringFilter | String,\n          ?   name?: StringFilter | String,\n          ?   startTime?: StringFilter | String,\n          ?   endTime?: StringFilter | String,\n          ?   description?: StringNullableFilter | String | Null,\n          ?   isActive?: BoolFilter | Boolean,\n          ?   createdAt?: DateTimeFilter | DateTime,\n          ?   updatedAt?: DateTimeFilter | DateTime,\n          ?   org?: OrgRelationFilter | OrgWhereInput,\n          ?   schedules?: ShiftScheduleListRelationFilter\n            },\n            data: {\n              isActive: true\n            }\n          })\n\nArgument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:7)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Schedules POST /shift-schedules - creates a schedule from template","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-schedules - creates a schedule from template"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Schedules"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.shiftTemplate.update()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n  215 describe('Shift Schedules', () => {\n  216   beforeAll(async () => {\n  217     // Reactivate template for schedule tests\n→ 218     await prisma.shiftTemplate.update({\n            where: {\n              id: undefined,\n          ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   OR?: ShiftTemplateWhereInput[],\n          ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   orgId?: StringFilter | String,\n          ?   name?: StringFilter | String,\n          ?   startTime?: StringFilter | String,\n          ?   endTime?: StringFilter | String,\n          ?   description?: StringNullableFilter | String | Null,\n          ?   isActive?: BoolFilter | Boolean,\n          ?   createdAt?: DateTimeFilter | DateTime,\n          ?   updatedAt?: DateTimeFilter | DateTime,\n          ?   org?: OrgRelationFilter | OrgWhereInput,\n          ?   schedules?: ShiftScheduleListRelationFilter\n            },\n            data: {\n              isActive: true\n            }\n          })\n\nArgument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:7)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Schedules POST /shift-schedules - rejects overlapping schedule","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-schedules - rejects overlapping schedule"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Schedules"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.shiftTemplate.update()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n  215 describe('Shift Schedules', () => {\n  216   beforeAll(async () => {\n  217     // Reactivate template for schedule tests\n→ 218     await prisma.shiftTemplate.update({\n            where: {\n              id: undefined,\n          ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   OR?: ShiftTemplateWhereInput[],\n          ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   orgId?: StringFilter | String,\n          ?   name?: StringFilter | String,\n          ?   startTime?: StringFilter | String,\n          ?   endTime?: StringFilter | String,\n          ?   description?: StringNullableFilter | String | Null,\n          ?   isActive?: BoolFilter | Boolean,\n          ?   createdAt?: DateTimeFilter | DateTime,\n          ?   updatedAt?: DateTimeFilter | DateTime,\n          ?   org?: OrgRelationFilter | OrgWhereInput,\n          ?   schedules?: ShiftScheduleListRelationFilter\n            },\n            data: {\n              isActive: true\n            }\n          })\n\nArgument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:7)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Schedules GET /shift-schedules/by-branch/:branchId - lists schedules","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-schedules/by-branch/:branchId - lists schedules"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Schedules"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.shiftTemplate.update()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n  215 describe('Shift Schedules', () => {\n  216   beforeAll(async () => {\n  217     // Reactivate template for schedule tests\n→ 218     await prisma.shiftTemplate.update({\n            where: {\n              id: undefined,\n          ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   OR?: ShiftTemplateWhereInput[],\n          ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n          ?   orgId?: StringFilter | String,\n          ?   name?: StringFilter | String,\n          ?   startTime?: StringFilter | String,\n          ?   endTime?: StringFilter | String,\n          ?   description?: StringNullableFilter | String | Null,\n          ?   isActive?: BoolFilter | Boolean,\n          ?   createdAt?: DateTimeFilter | DateTime,\n          ?   updatedAt?: DateTimeFilter | DateTime,\n          ?   org?: OrgRelationFilter | OrgWhereInput,\n          ?   schedules?: ShiftScheduleListRelationFilter\n            },\n            data: {\n              isActive: true\n            }\n          })\n\nArgument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:7)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Schedules GET /shift-schedules/:id - gets schedule details","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-schedules/:id - gets schedule details"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Assignments"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Assignments POST /shift-assignments - assigns staff to schedule","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-assignments - assigns staff to schedule"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Assignments"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Assignments POST /shift-assignments - assigns manager on duty","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-assignments - assigns manager on duty"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Assignments"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Assignments POST /shift-assignments - rejects duplicate assignment","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /shift-assignments - rejects duplicate assignment"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Assignments"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Assignments GET /shift-assignments/by-schedule/:scheduleId - lists assignments","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-assignments/by-schedule/:scheduleId - lists assignments"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Shift Assignments"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Shift Assignments GET /shift-assignments/by-user/:userId - lists user assignments","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-assignments/by-user/:userId - lists user assignments"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Current Shift API"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Current Shift API GET /shift-schedules/current/:branchId - returns empty when no active shift","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-schedules/current/:branchId - returns empty when no active shift"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Current Shift API"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Current Shift API GET /shift-schedules/current/:branchId - returns current shift with staff","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /shift-schedules/current/:branchId - returns current shift with staff"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Manager Override for Stock Count"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.client.shift.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47\n\n  431 \n  432 beforeAll(async () => {\n  433   // Open a shift\n→ 434   const shift = await prisma.client.shift.create({\n          data: {\n            branchId: undefined,\n            openedById: undefined,\n            openingFloat: 100,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:21)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Manager Override for Stock Count PATCH /shifts/:id/close - blocks close when stock count out of tolerance","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"PATCH /shifts/:id/close - blocks close when stock count out of tolerance"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Manager Override for Stock Count"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.client.shift.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47\n\n  431 \n  432 beforeAll(async () => {\n  433   // Open a shift\n→ 434   const shift = await prisma.client.shift.create({\n          data: {\n            branchId: undefined,\n            openedById: undefined,\n            openingFloat: 100,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:21)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Manager Override for Stock Count PATCH /shifts/:id/close - rejects override from L3 staff","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"PATCH /shifts/:id/close - rejects override from L3 staff"},{"ancestorTitles":["M2 - Shifts, Scheduling & Stock-Count Gate (E2E)","Manager Override for Stock Count"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"},{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n  33 prisma = app.get<PrismaService>(PrismaService);\n  34 \n  35 // Create test org, branch, and users\n→ 36 const org = await prisma.client.org.create({\n       data: {\n         name: \"M2 Test Org\",\n         currencyCode: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:17)","PrismaClientValidationError: \nInvalid `prisma.client.shift.create()` invocation in\n/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47\n\n  431 \n  432 beforeAll(async () => {\n  433   // Open a shift\n→ 434   const shift = await prisma.client.shift.create({\n          data: {\n            branchId: undefined,\n            openedById: undefined,\n            openingFloat: 100,\n        +   orgId: String\n          }\n        })\n\nArgument `orgId` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:21)"],"fullName":"M2 - Shifts, Scheduling & Stock-Count Gate (E2E) Manager Override for Stock Count PATCH /shifts/:id/close - allows manager override","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"PATCH /shifts/:id/close - allows manager override"}],"coverage":{},"endTime":1766887842432,"message":"  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - creates a lunch shift template\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - creates a dinner shift template\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - rejects invalid time format\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › POST /shift-templates - rejects end time before start time\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › GET /shift-templates - lists all templates\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › GET /shift-templates/:id - gets template by ID\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › PATCH /shift-templates/:id - updates template\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Templates › DELETE /shift-templates/:id - soft deletes template\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - creates a schedule from template\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - creates a schedule from template\n\n    PrismaClientValidationError: \n    Invalid `prisma.shiftTemplate.update()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n      215 describe('Shift Schedules', () => {\n      216   beforeAll(async () => {\n      217     // Reactivate template for schedule tests\n    → 218     await prisma.shiftTemplate.update({\n                where: {\n                  id: undefined,\n              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   OR?: ShiftTemplateWhereInput[],\n              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   orgId?: StringFilter | String,\n              ?   name?: StringFilter | String,\n              ?   startTime?: StringFilter | String,\n              ?   endTime?: StringFilter | String,\n              ?   description?: StringNullableFilter | String | Null,\n              ?   isActive?: BoolFilter | Boolean,\n              ?   createdAt?: DateTimeFilter | DateTime,\n              ?   updatedAt?: DateTimeFilter | DateTime,\n              ?   org?: OrgRelationFilter | OrgWhereInput,\n              ?   schedules?: ShiftScheduleListRelationFilter\n                },\n                data: {\n                  isActive: true\n                }\n              })\n\n    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - rejects overlapping schedule\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › POST /shift-schedules - rejects overlapping schedule\n\n    PrismaClientValidationError: \n    Invalid `prisma.shiftTemplate.update()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n      215 describe('Shift Schedules', () => {\n      216   beforeAll(async () => {\n      217     // Reactivate template for schedule tests\n    → 218     await prisma.shiftTemplate.update({\n                where: {\n                  id: undefined,\n              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   OR?: ShiftTemplateWhereInput[],\n              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   orgId?: StringFilter | String,\n              ?   name?: StringFilter | String,\n              ?   startTime?: StringFilter | String,\n              ?   endTime?: StringFilter | String,\n              ?   description?: StringNullableFilter | String | Null,\n              ?   isActive?: BoolFilter | Boolean,\n              ?   createdAt?: DateTimeFilter | DateTime,\n              ?   updatedAt?: DateTimeFilter | DateTime,\n              ?   org?: OrgRelationFilter | OrgWhereInput,\n              ?   schedules?: ShiftScheduleListRelationFilter\n                },\n                data: {\n                  isActive: true\n                }\n              })\n\n    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/by-branch/:branchId - lists schedules\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/by-branch/:branchId - lists schedules\n\n    PrismaClientValidationError: \n    Invalid `prisma.shiftTemplate.update()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n      215 describe('Shift Schedules', () => {\n      216   beforeAll(async () => {\n      217     // Reactivate template for schedule tests\n    → 218     await prisma.shiftTemplate.update({\n                where: {\n                  id: undefined,\n              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   OR?: ShiftTemplateWhereInput[],\n              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   orgId?: StringFilter | String,\n              ?   name?: StringFilter | String,\n              ?   startTime?: StringFilter | String,\n              ?   endTime?: StringFilter | String,\n              ?   description?: StringNullableFilter | String | Null,\n              ?   isActive?: BoolFilter | Boolean,\n              ?   createdAt?: DateTimeFilter | DateTime,\n              ?   updatedAt?: DateTimeFilter | DateTime,\n              ?   org?: OrgRelationFilter | OrgWhereInput,\n              ?   schedules?: ShiftScheduleListRelationFilter\n                },\n                data: {\n                  isActive: true\n                }\n              })\n\n    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/:id - gets schedule details\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Schedules › GET /shift-schedules/:id - gets schedule details\n\n    PrismaClientValidationError: \n    Invalid `prisma.shiftTemplate.update()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:218:34\n\n      215 describe('Shift Schedules', () => {\n      216   beforeAll(async () => {\n      217     // Reactivate template for schedule tests\n    → 218     await prisma.shiftTemplate.update({\n                where: {\n                  id: undefined,\n              ?   AND?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   OR?: ShiftTemplateWhereInput[],\n              ?   NOT?: ShiftTemplateWhereInput | ShiftTemplateWhereInput[],\n              ?   orgId?: StringFilter | String,\n              ?   name?: StringFilter | String,\n              ?   startTime?: StringFilter | String,\n              ?   endTime?: StringFilter | String,\n              ?   description?: StringNullableFilter | String | Null,\n              ?   isActive?: BoolFilter | Boolean,\n              ?   createdAt?: DateTimeFilter | DateTime,\n              ?   updatedAt?: DateTimeFilter | DateTime,\n              ?   org?: OrgRelationFilter | OrgWhereInput,\n              ?   schedules?: ShiftScheduleListRelationFilter\n                },\n                data: {\n                  isActive: true\n                }\n              })\n\n    Argument `where` of type ShiftTemplateWhereUniqueInput needs at least one of `id` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:218:7)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - assigns staff to schedule\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - assigns manager on duty\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › POST /shift-assignments - rejects duplicate assignment\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › GET /shift-assignments/by-schedule/:scheduleId - lists assignments\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Shift Assignments › GET /shift-assignments/by-user/:userId - lists user assignments\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Current Shift API › GET /shift-schedules/current/:branchId - returns empty when no active shift\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Current Shift API › GET /shift-schedules/current/:branchId - returns current shift with staff\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - blocks close when stock count out of tolerance\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - blocks close when stock count out of tolerance\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.shift.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47\n\n      431 \n      432 beforeAll(async () => {\n      433   // Open a shift\n    → 434   const shift = await prisma.client.shift.create({\n              data: {\n                branchId: undefined,\n                openedById: undefined,\n                openingFloat: 100,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - rejects override from L3 staff\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - rejects override from L3 staff\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.shift.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47\n\n      431 \n      432 beforeAll(async () => {\n      433   // Open a shift\n    → 434   const shift = await prisma.client.shift.create({\n              data: {\n                branchId: undefined,\n                openedById: undefined,\n                openingFloat: 100,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - allows manager override\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:36:41\n\n      33 prisma = app.get<PrismaService>(PrismaService);\n      34 \n      35 // Create test org, branch, and users\n    → 36 const org = await prisma.client.org.create({\n           data: {\n             name: \"M2 Test Org\",\n             currencyCode: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:36:17)\n\n  ● M2 - Shifts, Scheduling & Stock-Count Gate (E2E) › Manager Override for Stock Count › PATCH /shifts/:id/close - allows manager override\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.shift.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:434:47\n\n      431 \n      432 beforeAll(async () => {\n      433   // Open a shift\n    → 434   const shift = await prisma.client.shift.create({\n              data: {\n                branchId: undefined,\n                openedById: undefined,\n                openingFloat: 100,\n            +   orgId: String\n              }\n            })\n\n    Argument `orgId` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:434:21)\n\n\n  ● Test suite failed to run\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.delete()` invocation in\n    /workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts:96:35\n\n      93 \n      94 afterAll(async () => {\n      95   // Cleanup\n    → 96   await prisma.client.org.delete({\n             where: {\n               id: undefined,\n           ?   slug?: String,\n           ?   AND?: OrgWhereInput | OrgWhereInput[],\n           ?   OR?: OrgWhereInput[],\n           ?   NOT?: OrgWhereInput | OrgWhereInput[],\n           ?   name?: StringFilter | String,\n           ?   createdAt?: DateTimeFilter | DateTime,\n           ?   updatedAt?: DateTimeFilter | DateTime,\n           ?   branches?: BranchListRelationFilter,\n           ?   users?: UserListRelationFilter,\n           ?   settings?: OrgSettingsNullableRelationFilter | OrgSettingsWhereInput | Null,\n           ?   devices?: DeviceListRelationFilter,\n           ?   floorPlans?: FloorPlanListRelationFilter,\n           ?   taxCategories?: TaxCategoryListRelationFilter,\n           ?   modifierGroups?: ModifierGroupListRelationFilter,\n           ?   anomalyEvents?: AnomalyEventListRelationFilter,\n           ?   alertChannels?: AlertChannelListRelationFilter,\n           ?   scheduledAlerts?: ScheduledAlertListRelationFilter,\n           ?   reservations?: ReservationListRelationFilter,\n           ?   supportSessions?: SupportSessionListRelationFilter,\n           ?   spoutDevices?: SpoutDeviceListRelationFilter,\n           ?   spoutEvents?: SpoutEventListRelationFilter,\n           ?   ownerDigests?: OwnerDigestListRelationFilter,\n           ?   apiKeys?: ApiKeyListRelationFilter,\n           ?   subscription?: OrgSubscriptionNullableRelationFilter | OrgSubscriptionWhereInput | Null,\n           ?   branchBudgets?: BranchBudgetListRelationFilter,\n           ?   forecastProfiles?: ForecastProfileListRelationFilter,\n           ?   forecastPoints?: ForecastPointListRelationFilter,\n           ?   franchiseRanks?: FranchiseRankListRelationFilter,\n           ?   franchiseBudgets?: FranchiseBudgetListRelationFilter,\n           ?   badgeAssets?: BadgeAssetListRelationFilter,\n           ?   kdsSlaConfigs?: KdsSlaConfigListRelationFilter,\n           ?   shiftTemplates?: ShiftTemplateListRelationFilter,\n           ?   reportSubscriptions?: ReportSubscriptionListRelationFilter,\n           ?   serviceProviders?: ServiceProviderListRelationFilter,\n           ?   serviceReminders?: ServicePayableReminderListRelationFilter,\n           ?   opsBudgets?: OpsBudgetListRelationFilter,\n           ?   costInsights?: CostInsightListRelationFilter,\n           ?   sessions?: SessionListRelationFilter,\n           ?   documents?: DocumentListRelationFilter,\n           ?   staffAwards?: StaffAwardListRelationFilter,\n           ?   Feedback?: FeedbackListRelationFilter,\n           ?   promotionSuggestions?: PromotionSuggestionListRelationFilter\n             }\n           })\n\n    Argument `where` of type OrgWhereUniqueInput needs at least one of `id` or `slug` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (m2-shifts-scheduling.e2e-spec.ts:96:5)\n","name":"/workspaces/chefcloud/services/api/test/m2-shifts-scheduling.e2e-spec.ts","startTime":1766887842432,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E23 Platform Access (e2e)","Public routes bypass"],"duration":30,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e23-platform-access.e2e-spec.ts:29:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E23 Platform Access (e2e) Public routes bypass should allow unauthenticated access to /health","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow unauthenticated access to /health"},{"ancestorTitles":["E23 Platform Access (e2e)","Public routes bypass"],"duration":11,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e23-platform-access.e2e-spec.ts:36:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E23 Platform Access (e2e) Public routes bypass should allow unauthenticated access to /health from any platform","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow unauthenticated access to /health from any platform"},{"ancestorTitles":["E23 Platform Access (e2e)","Public routes bypass"],"duration":19,"failureDetails":[],"failureMessages":[],"fullName":"E23 Platform Access (e2e) Public routes bypass should allow unauthenticated POST to /auth/login","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should allow unauthenticated POST to /auth/login"},{"ancestorTitles":["E23 Platform Access (e2e)","Platform header handling"],"duration":3,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e23-platform-access.e2e-spec.ts:55:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E23 Platform Access (e2e) Platform header handling should work without X-Client-Platform header (defaults to web)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should work without X-Client-Platform header (defaults to web)"}],"endTime":1766887795351,"message":"  ● E23 Platform Access (e2e) › Public routes bypass › should allow unauthenticated access to /health\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      27 |         .get('/health')\n      28 |         .set('X-Client-Platform', 'mobile')\n    > 29 |         .expect(200);\n         |          ^\n      30 |     });\n      31 |\n      32 |     it('should allow unauthenticated access to /health from any platform', async () => {\n\n      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:29:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● E23 Platform Access (e2e) › Public routes bypass › should allow unauthenticated access to /health from any platform\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      34 |         .get('/health')\n      35 |         .set('X-Client-Platform', 'desktop')\n    > 36 |         .expect(200);\n         |          ^\n      37 |\n      38 |       await request(app.getHttpServer()).get('/health').set('X-Client-Platform', 'web').expect(200);\n      39 |     });\n\n      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:36:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● E23 Platform Access (e2e) › Platform header handling › should work without X-Client-Platform header (defaults to web)\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      53 |         .get('/health')\n      54 |         // No X-Client-Platform header\n    > 55 |         .expect(200);\n         |          ^\n      56 |     });\n      57 |   });\n      58 | });\n\n      at Object.<anonymous> (e23-platform-access.e2e-spec.ts:55:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/e23-platform-access.e2e-spec.ts","startTime":1766887794519,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["SSE /stream/kpis Security (E26)","Authentication"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Authentication should return 401 when no token provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 when no token provided"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Authentication"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Authentication should return 401 with invalid token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 with invalid token"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Authorization"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Authorization should return 403 for L1 (Waiter) role","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 for L1 (Waiter) role"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Authorization"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Authorization should allow L4 (Manager) role","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow L4 (Manager) role"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Authorization"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Authorization should allow L5 (Owner) role","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow L5 (Owner) role"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","SSE Headers"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) SSE Headers should set correct SSE headers","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should set correct SSE headers"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Event Emission"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Event Emission should emit at least one KPIs event with valid token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should emit at least one KPIs event with valid token"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Org-Scope Isolation"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Org-Scope Isolation should only stream data for authenticated user's org","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should only stream data for authenticated user's org"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Rate Limiting"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Rate Limiting should return 429 after exceeding rate limit","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 429 after exceeding rate limit"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Rate Limiting"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Rate Limiting should block concurrent connections beyond limit","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should block concurrent connections beyond limit"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","Connection Cleanup"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) Connection Cleanup should clean up resources on disconnect","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should clean up resources on disconnect"},{"ancestorTitles":["SSE /stream/kpis Security (E26)","CORS"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:39:17)"],"fullName":"SSE /stream/kpis Security (E26) CORS should respect CORS allowlist","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should respect CORS allowlist"}],"coverage":{},"endTime":1766887842432,"message":"  ● SSE /stream/kpis Security (E26) › Authentication › should return 401 when no token provided\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  ● SSE /stream/kpis Security (E26) › Authentication › should return 401 with invalid token\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  ● SSE /stream/kpis Security (E26) › Authorization › should return 403 for L1 (Waiter) role\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  ● SSE /stream/kpis Security (E26) › Authorization › should allow L4 (Manager) role\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  ● SSE /stream/kpis Security (E26) › Authorization › should allow L5 (Owner) role\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  ● SSE /stream/kpis Security (E26) › SSE Headers › should set correct SSE headers\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  ● SSE /stream/kpis Security (E26) › Event Emission › should emit at least one KPIs event with valid token\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  ● SSE /stream/kpis Security (E26) › Org-Scope Isolation › should only stream data for authenticated user's org\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  ● SSE /stream/kpis Security (E26) › Rate Limiting › should return 429 after exceeding rate limit\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  ● SSE /stream/kpis Security (E26) › Rate Limiting › should block concurrent connections beyond limit\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  ● SSE /stream/kpis Security (E26) › Connection Cleanup › should clean up resources on disconnect\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n  ● SSE /stream/kpis Security (E26) › CORS › should respect CORS allowlist\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      37 |     // Create test org with users\n      38 |     const { org, owner, manager, waiter } = await createOrgWithUsers(prisma, 'sse-test');\n    > 39 |     orgId = org.id;\n         |                 ^\n      40 |\n      41 |     // Generate tokens\n      42 |     ownerToken = jwtService.sign({\n\n      at Object.<anonymous> (sse-security.e2e-spec.ts:39:17)\n\n\n  ● Test suite failed to run\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.user.deleteMany()` invocation in\n    /workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts:72:23\n\n      69 \n      70 afterAll(async () => {\n      71   // Cleanup\n    → 72   await prisma.user.deleteMany(\n    Foreign key constraint violated: `orders_userId_fkey (index)`\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (sse-security.e2e-spec.ts:72:5)\n","name":"/workspaces/chefcloud/services/api/test/sse-security.e2e-spec.ts","startTime":1766887842432,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth (e2e)","POST /auth/login"],"duration":144,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/login should login with valid credentials","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should login with valid credentials"},{"ancestorTitles":["Auth (e2e)","POST /auth/login"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/login should reject invalid email","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject invalid email"},{"ancestorTitles":["Auth (e2e)","POST /auth/login"],"duration":100,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/login should reject invalid password","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject invalid password"},{"ancestorTitles":["Auth (e2e)","POST /auth/login"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/login should reject missing fields","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject missing fields"},{"ancestorTitles":["Auth (e2e)","POST /auth/pin-login"],"duration":12,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 401 \"Unauthorized\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/auth.e2e-spec.ts:94:10)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Auth (e2e) POST /auth/pin-login should login with valid employee code and PIN","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should login with valid employee code and PIN"},{"ancestorTitles":["Auth (e2e)","POST /auth/pin-login"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/pin-login should reject invalid employee code","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject invalid employee code"},{"ancestorTitles":["Auth (e2e)","POST /auth/pin-login"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/pin-login should reject invalid PIN","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject invalid PIN"},{"ancestorTitles":["Auth (e2e)","POST /auth/pin-login"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /auth/pin-login should reject wrong branch","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject wrong branch"},{"ancestorTitles":["Auth (e2e)","POST /auth/msr-swipe"],"duration":6,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 400 \"Bad Request\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/auth.e2e-spec.ts:145:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Auth (e2e) POST /auth/msr-swipe should login with valid badge ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should login with valid badge ID"},{"ancestorTitles":["Auth (e2e)","POST /auth/msr-swipe"],"duration":4,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 400 \"Bad Request\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/auth.e2e-spec.ts:161:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Auth (e2e) POST /auth/msr-swipe should reject unknown badge ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject unknown badge ID"},{"ancestorTitles":["Auth (e2e)","POST /auth/msr-swipe"],"duration":5,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 400 \"Bad Request\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/auth.e2e-spec.ts:171:10)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Auth (e2e) POST /auth/msr-swipe should login with branch verification","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should login with branch verification"},{"ancestorTitles":["Auth (e2e)","GET /me"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) GET /me should return user profile with valid token","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should return user profile with valid token"},{"ancestorTitles":["Auth (e2e)","GET /me"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) GET /me should reject request without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject request without token"},{"ancestorTitles":["Auth (e2e)","GET /me"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) GET /me should reject request with invalid token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject request with invalid token"},{"ancestorTitles":["Auth (e2e)","POST /devices/register"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /devices/register should allow L4 manager to register a device","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should allow L4 manager to register a device"},{"ancestorTitles":["Auth (e2e)","POST /devices/register"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"Auth (e2e) POST /devices/register should reject device registration without auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject device registration without auth"}],"endTime":1766887798106,"message":"  ● Auth (e2e) › POST /auth/pin-login › should login with valid employee code and PIN\n\n    expected 200 \"OK\", got 401 \"Unauthorized\"\n\n      92 |           branchId: await getMainBranchId(),\n      93 |         })\n    > 94 |         .expect(200);\n         |          ^\n      95 |\n      96 |       expect(response.body).toHaveProperty('access_token');\n      97 |       expect(response.body.user).toMatchObject({\n\n      at Object.<anonymous> (auth.e2e-spec.ts:94:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● Auth (e2e) › POST /auth/msr-swipe › should login with valid badge ID\n\n    expected 200 \"OK\", got 400 \"Bad Request\"\n\n      143 |           badgeId: 'CASHIER001',\n      144 |         })\n    > 145 |         .expect(200);\n          |          ^\n      146 |\n      147 |       expect(response.body).toHaveProperty('access_token');\n      148 |       expect(response.body.user).toMatchObject({\n\n      at Object.<anonymous> (auth.e2e-spec.ts:145:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● Auth (e2e) › POST /auth/msr-swipe › should reject unknown badge ID\n\n    expected 404 \"Not Found\", got 400 \"Bad Request\"\n\n      159 |           badgeId: 'UNKNOWN_BADGE',\n      160 |         })\n    > 161 |         .expect(404);\n          |          ^\n      162 |     });\n      163 |\n      164 |     it('should login with branch verification', async () => {\n\n      at Object.<anonymous> (auth.e2e-spec.ts:161:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● Auth (e2e) › POST /auth/msr-swipe › should login with branch verification\n\n    expected 200 \"OK\", got 400 \"Bad Request\"\n\n      169 |           branchId: await getMainBranchId(),\n      170 |         })\n    > 171 |         .expect(200);\n          |          ^\n      172 |\n      173 |       expect(response.body).toHaveProperty('access_token');\n      174 |     });\n\n      at Object.<anonymous> (auth.e2e-spec.ts:171:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/auth.e2e-spec.ts","startTime":1766887796963,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E23 Roles & Platform Access (e2e)","GET /access/matrix"],"duration":24,"failureDetails":[{"matcherResult":{"message":"expect(received).toHaveProperty(path)\n\nExpected path: \"WAITER\"\nReceived path: []\n\nReceived value: {\"HEAD_BARISTA\": {\"desktop\": true, \"mobile\": false, \"web\": true}, \"TICKET_MASTER\": {\"desktop\": false, \"mobile\": true, \"web\": true}}","pass":false}}],"failureMessages":["Error: expect(received).toHaveProperty(path)\n\nExpected path: \"WAITER\"\nReceived path: []\n\nReceived value: {\"HEAD_BARISTA\": {\"desktop\": true, \"mobile\": false, \"web\": true}, \"TICKET_MASTER\": {\"desktop\": false, \"mobile\": true, \"web\": true}}\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e23-roles-access.e2e-spec.ts:84:44)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"E23 Roles & Platform Access (e2e) GET /access/matrix should allow L4 (manager) to get platform access matrix","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"should allow L4 (manager) to get platform access matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","GET /access/matrix"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) GET /access/matrix should reject L3 (procurement) from accessing matrix","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject L3 (procurement) from accessing matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","GET /access/matrix"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) GET /access/matrix should reject L2 (ticket master) from accessing matrix","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject L2 (ticket master) from accessing matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","GET /access/matrix"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) GET /access/matrix should reject L1 (waiter) from accessing matrix","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject L1 (waiter) from accessing matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","GET /access/matrix"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) GET /access/matrix should reject unauthenticated requests","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject unauthenticated requests"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","PATCH /access/matrix"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) PATCH /access/matrix should allow L4 (manager) to update platform access matrix","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow L4 (manager) to update platform access matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","PATCH /access/matrix"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) PATCH /access/matrix should reject updates with invalid structure","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject updates with invalid structure"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","PATCH /access/matrix"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) PATCH /access/matrix should reject L3 (procurement) from updating matrix","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject L3 (procurement) from updating matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","PATCH /access/matrix"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) PATCH /access/matrix should reject L2 (ticket master) from updating matrix","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject L2 (ticket master) from updating matrix"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","PATCH /access/matrix"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) PATCH /access/matrix should reject unauthenticated requests","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject unauthenticated requests"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","New role authentication"],"duration":118,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) New role authentication should authenticate procurement user (L3)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should authenticate procurement user (L3)"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","New role authentication"],"duration":120,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) New role authentication should authenticate stock user (L3)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should authenticate stock user (L3)"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","New role authentication"],"duration":130,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) New role authentication should authenticate event manager user (L3)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should authenticate event manager user (L3)"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","New role authentication"],"duration":114,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) New role authentication should authenticate supervisor user (L2)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should authenticate supervisor user (L2)"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","New role authentication"],"duration":123,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) New role authentication should authenticate chef user (L2)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should authenticate chef user (L2)"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","New role authentication"],"duration":112,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) New role authentication should authenticate bartender user (L1)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should authenticate bartender user (L1)"},{"ancestorTitles":["E23 Roles & Platform Access (e2e)","Platform access matrix persistence"],"duration":19,"failureDetails":[],"failureMessages":[],"fullName":"E23 Roles & Platform Access (e2e) Platform access matrix persistence should persist and retrieve updated platform access","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should persist and retrieve updated platform access"}],"endTime":1766887800172,"message":"  ● E23 Roles & Platform Access (e2e) › GET /access/matrix › should allow L4 (manager) to get platform access matrix\n\n    expect(received).toHaveProperty(path)\n\n    Expected path: \"WAITER\"\n    Received path: []\n\n    Received value: {\"HEAD_BARISTA\": {\"desktop\": true, \"mobile\": false, \"web\": true}, \"TICKET_MASTER\": {\"desktop\": false, \"mobile\": true, \"web\": true}}\n\n      82 |       expect(response.body).toHaveProperty('platformAccess');\n      83 |       expect(response.body).toHaveProperty('defaults');\n    > 84 |       expect(response.body.platformAccess).toHaveProperty('WAITER');\n         |                                            ^\n      85 |       expect(response.body.platformAccess).toHaveProperty('PROCUREMENT');\n      86 |       expect(response.body.platformAccess).toHaveProperty('TICKET_MASTER');\n      87 |     });\n\n      at Object.<anonymous> (e23-roles-access.e2e-spec.ts:84:44)\n","name":"/workspaces/chefcloud/services/api/test/e23-roles-access.e2e-spec.ts","startTime":1766887798110,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["M1 KDS Enterprise (e2e)","KDS Queue with Enhanced DTOs"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) KDS Queue with Enhanced DTOs should return tickets with waiterName, slaState, and proper ordering","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return tickets with waiterName, slaState, and proper ordering"},{"ancestorTitles":["M1 KDS Enterprise (e2e)","KDS Queue with Enhanced DTOs"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) KDS Queue with Enhanced DTOs should filter tickets by station correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter tickets by station correctly"},{"ancestorTitles":["M1 KDS Enterprise (e2e)","KDS Queue with Enhanced DTOs"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) KDS Queue with Enhanced DTOs should support \"since\" parameter for incremental sync","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should support \"since\" parameter for incremental sync"},{"ancestorTitles":["M1 KDS Enterprise (e2e)","SLA Configuration"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) SLA Configuration should get default SLA config for a station","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get default SLA config for a station"},{"ancestorTitles":["M1 KDS Enterprise (e2e)","SLA Configuration"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) SLA Configuration should update SLA config (Manager/Owner only)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update SLA config (Manager/Owner only)"},{"ancestorTitles":["M1 KDS Enterprise (e2e)","SLA Configuration"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) SLA Configuration should reject SLA config update from waiter (L1)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject SLA config update from waiter (L1)"},{"ancestorTitles":["M1 KDS Enterprise (e2e)","KDS Resilience"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts:63:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"M1 KDS Enterprise (e2e) KDS Resilience should handle marking ticket ready and checking all-ready state","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle marking ticket ready and checking all-ready state"}],"endTime":1766887801162,"message":"  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should return tickets with waiterName, slaState, and proper ordering\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n\n  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should filter tickets by station correctly\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n\n  ● M1 KDS Enterprise (e2e) › KDS Queue with Enhanced DTOs › should support \"since\" parameter for incremental sync\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n\n  ● M1 KDS Enterprise (e2e) › SLA Configuration › should get default SLA config for a station\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n\n  ● M1 KDS Enterprise (e2e) › SLA Configuration › should update SLA config (Manager/Owner only)\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n\n  ● M1 KDS Enterprise (e2e) › SLA Configuration › should reject SLA config update from waiter (L1)\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n\n  ● M1 KDS Enterprise (e2e) › KDS Resilience › should handle marking ticket ready and checking all-ready state\n\n    TypeError: menuResponse.body.find is not a function\n\n      61 |       .set('Authorization', `Bearer ${waiterToken}`);\n      62 |\n    > 63 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      64 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      65 |     const beer = menuResponse.body.find((item: any) => item.name === 'Beer');\n      66 |     burgerId = burger?.id;\n\n      at Object.<anonymous> (m1-kds-enterprise.e2e-spec.ts:63:38)\n","name":"/workspaces/chefcloud/services/api/test/m1-kds-enterprise.e2e-spec.ts","startTime":1766887800176,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Inventory E2E"],"duration":13,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/inventory.e2e-spec.ts:59:8)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Inventory E2E should receive PO → on-hand increases","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should receive PO → on-hand increases"}],"endTime":1766887802673,"message":"  ● Inventory E2E › should receive PO → on-hand increases\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      57 |       .get(`/inventory/items/${beefId}`)\n      58 |       .set('Authorization', `Bearer ${authToken}`)\n    > 59 |       .expect(200);\n         |        ^\n      60 |\n      61 |     const initialOnHand = initialResponse.body.onHand || 0;\n      62 |\n\n      at Object.<anonymous> (e2e/inventory.e2e-spec.ts:59:8)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/e2e/inventory.e2e-spec.ts","startTime":1766887801170,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Workforce E2E"],"duration":11,"failureDetails":[{}],"failureMessages":["Error: expected 201 \"Created\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/workforce.e2e-spec.ts:60:8)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Workforce E2E should clock in → clock out","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should clock in → clock out"}],"endTime":1766887804182,"message":"  ● Workforce E2E › should clock in → clock out\n\n    expected 201 \"Created\", got 404 \"Not Found\"\n\n      58 |       .post('/workforce/attendance/clock-in')\n      59 |       .set('Authorization', `Bearer ${waiterToken}`)\n    > 60 |       .expect(201);\n         |        ^\n      61 |\n      62 |     const _attendanceId = clockInResponse.body.id;\n      63 |     expect(clockInResponse.body.clockIn).toBeDefined();\n\n      at Object.<anonymous> (e2e/workforce.e2e-spec.ts:60:8)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/e2e/workforce.e2e-spec.ts","startTime":1766887802682,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Reports E2E"],"duration":4,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/reports.e2e-spec.ts:50:8)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Reports E2E should fetch X report (shift summary)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fetch X report (shift summary)"},{"ancestorTitles":["Reports E2E"],"duration":3,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/reports.e2e-spec.ts:64:8)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"Reports E2E should fetch owner overview","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fetch owner overview"}],"endTime":1766887805467,"message":"  ● Reports E2E › should fetch X report (shift summary)\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      48 |       .get('/reports/x-report')\n      49 |       .set('Authorization', `Bearer ${authToken}`)\n    > 50 |       .expect(200);\n         |        ^\n      51 |\n      52 |     expect(response.body).toBeDefined();\n      53 |     expect(response.body.shift).toBeDefined();\n\n      at Object.<anonymous> (e2e/reports.e2e-spec.ts:50:8)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● Reports E2E › should fetch owner overview\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      62 |         endDate: '2025-01-31',\n      63 |       })\n    > 64 |       .expect(200);\n         |        ^\n      65 |\n      66 |     expect(response.body).toBeDefined();\n      67 |   });\n\n      at Object.<anonymous> (e2e/reports.e2e-spec.ts:64:8)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/e2e/reports.e2e-spec.ts","startTime":1766887804186,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E27 - Costing & Profit Engine (e2e)","Costing calculation on order close"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n  55 \n  56 async function setupTestData() {\n  57   // Create org\n→ 58   const org = await prisma.client.org.create({\n         data: {\n           name: \"E27 Test Org\",\n           subdomain: \"e27-test\",\n           isSandbox: true,\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:36:5)"],"fullName":"E27 - Costing & Profit Engine (e2e) Costing calculation on order close should calculate cost and margin when closing an order","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate cost and margin when closing an order"},{"ancestorTitles":["E27 - Costing & Profit Engine (e2e)","Analytics RBAC - Cost data visibility"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n  55 \n  56 async function setupTestData() {\n  57   // Create org\n→ 58   const org = await prisma.client.org.create({\n         data: {\n           name: \"E27 Test Org\",\n           subdomain: \"e27-test\",\n           isSandbox: true,\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:36:5)"],"fullName":"E27 - Costing & Profit Engine (e2e) Analytics RBAC - Cost data visibility should include cost data for MANAGER (L4) role","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include cost data for MANAGER (L4) role"},{"ancestorTitles":["E27 - Costing & Profit Engine (e2e)","Analytics RBAC - Cost data visibility"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n  55 \n  56 async function setupTestData() {\n  57   // Create org\n→ 58   const org = await prisma.client.org.create({\n         data: {\n           name: \"E27 Test Org\",\n           subdomain: \"e27-test\",\n           isSandbox: true,\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:36:5)"],"fullName":"E27 - Costing & Profit Engine (e2e) Analytics RBAC - Cost data visibility should exclude cost data for CHEF (L3) when showCostToChef=false","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should exclude cost data for CHEF (L3) when showCostToChef=false"},{"ancestorTitles":["E27 - Costing & Profit Engine (e2e)","Analytics RBAC - Cost data visibility"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n  55 \n  56 async function setupTestData() {\n  57   // Create org\n→ 58   const org = await prisma.client.org.create({\n         data: {\n           name: \"E27 Test Org\",\n           subdomain: \"e27-test\",\n           isSandbox: true,\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:36:5)"],"fullName":"E27 - Costing & Profit Engine (e2e) Analytics RBAC - Cost data visibility should include cost data for CHEF (L3) when showCostToChef=true","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include cost data for CHEF (L3) when showCostToChef=true"}],"coverage":{},"endTime":1766887842432,"message":"  ● E27 - Costing & Profit Engine (e2e) › Costing calculation on order close › should calculate cost and margin when closing an order\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n      55 \n      56 async function setupTestData() {\n      57   // Create org\n    → 58   const org = await prisma.client.org.create({\n             data: {\n               name: \"E27 Test Org\",\n               subdomain: \"e27-test\",\n               isSandbox: true,\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e27-costing.e2e-spec.ts:58:17)\n      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)\n\n  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should include cost data for MANAGER (L4) role\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n      55 \n      56 async function setupTestData() {\n      57   // Create org\n    → 58   const org = await prisma.client.org.create({\n             data: {\n               name: \"E27 Test Org\",\n               subdomain: \"e27-test\",\n               isSandbox: true,\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e27-costing.e2e-spec.ts:58:17)\n      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)\n\n  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should exclude cost data for CHEF (L3) when showCostToChef=false\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n      55 \n      56 async function setupTestData() {\n      57   // Create org\n    → 58   const org = await prisma.client.org.create({\n             data: {\n               name: \"E27 Test Org\",\n               subdomain: \"e27-test\",\n               isSandbox: true,\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e27-costing.e2e-spec.ts:58:17)\n      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)\n\n  ● E27 - Costing & Profit Engine (e2e) › Analytics RBAC - Cost data visibility › should include cost data for CHEF (L3) when showCostToChef=true\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:58:41\n\n      55 \n      56 async function setupTestData() {\n      57   // Create org\n    → 58   const org = await prisma.client.org.create({\n             data: {\n               name: \"E27 Test Org\",\n               subdomain: \"e27-test\",\n               isSandbox: true,\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e27-costing.e2e-spec.ts:58:17)\n      at Object.<anonymous> (e27-costing.e2e-spec.ts:36:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.payment.deleteMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts:42:33\n\n      39 afterAll(async () => {\n      40   // Cleanup\n      41   await prisma.client.orderItem.deleteMany({ where: { order: { branchId } } });\n    → 42   await prisma.client.payment.deleteMany(\n    Foreign key constraint violated: `refunds_paymentId_fkey (index)`\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e27-costing.e2e-spec.ts:42:5)\n","name":"/workspaces/chefcloud/services/api/test/e27-costing.e2e-spec.ts","startTime":1766887842432,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Dev Portal - POST /dev/orgs"],"duration":17,"failureDetails":[{}],"failureMessages":["Error: expected 201 \"Created\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:34:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Dev Portal - POST /dev/orgs should create org with ACTIVE subscription (dev admin)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create org with ACTIVE subscription (dev admin)"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Dev Portal - POST /dev/orgs"],"duration":3,"failureDetails":[{}],"failureMessages":["Error: expected 401 \"Unauthorized\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:52:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Dev Portal - POST /dev/orgs should reject without dev admin header","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject without dev admin header"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Dev Portal - GET /dev/subscriptions"],"duration":2,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:61:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Dev Portal - GET /dev/subscriptions should list all subscriptions (dev admin)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list all subscriptions (dev admin)"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Dev Portal - POST /dev/plans"],"duration":3,"failureDetails":[{}],"failureMessages":["Error: expected 201 \"Created\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:83:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Dev Portal - POST /dev/plans should upsert plan (super dev)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should upsert plan (super dev)"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Dev Portal - POST /dev/plans"],"duration":43,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:111:10)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Dev Portal - POST /dev/plans should reject non-super dev from creating plans","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject non-super dev from creating plans"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Billing - GET /billing/subscription"],"duration":148,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 404 \"Not Found\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:131:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Billing - GET /billing/subscription should return subscription for org owner","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return subscription for org owner"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Billing - GET /billing/subscription"],"duration":111,"failureDetails":[],"failureMessages":[],"fullName":"E24 Subscriptions & Dev Portal (e2e) Billing - GET /billing/subscription should reject non-owner from viewing subscription","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject non-owner from viewing subscription"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Billing - POST /billing/plan/change"],"duration":123,"failureDetails":[{}],"failureMessages":["Error: expected 201 \"Created\", got 403 \"Forbidden\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:174:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Billing - POST /billing/plan/change should allow owner to request plan change","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow owner to request plan change"},{"ancestorTitles":["E24 Subscriptions & Dev Portal (e2e)","Billing - POST /billing/cancel"],"duration":113,"failureDetails":[{}],"failureMessages":["Error: expected 201 \"Created\", got 403 \"Forbidden\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts:196:10)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:536:35)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"E24 Subscriptions & Dev Portal (e2e) Billing - POST /billing/cancel should allow owner to request cancellation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow owner to request cancellation"}],"endTime":1766887807462,"message":"  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/orgs › should create org with ACTIVE subscription (dev admin)\n\n    expected 201 \"Created\", got 404 \"Not Found\"\n\n      32 |           planCode: 'BASIC',\n      33 |         })\n    > 34 |         .expect(201);\n         |          ^\n      35 |\n      36 |       expect(response.body).toHaveProperty('org');\n      37 |       expect(response.body).toHaveProperty('owner');\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:34:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/orgs › should reject without dev admin header\n\n    expected 401 \"Unauthorized\", got 404 \"Not Found\"\n\n      50 |           planCode: 'PRO',\n      51 |         })\n    > 52 |         .expect(401);\n         |          ^\n      53 |     });\n      54 |   });\n      55 |\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:52:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - GET /dev/subscriptions › should list all subscriptions (dev admin)\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      59 |         .get('/dev/subscriptions')\n      60 |         .set('X-Dev-Admin', 'dev1@chefcloud.local')\n    > 61 |         .expect(200);\n         |          ^\n      62 |\n      63 |       expect(Array.isArray(response.body)).toBe(true);\n      64 |       expect(response.body.length).toBeGreaterThan(0);\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:61:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/plans › should upsert plan (super dev)\n\n    expected 201 \"Created\", got 404 \"Not Found\"\n\n      81 |           isActive: true,\n      82 |         })\n    > 83 |         .expect(201);\n         |          ^\n      84 |\n      85 |       expect(response.body.code).toBe('TEST_PLAN');\n      86 |       expect(response.body.name).toBe('Test Plan');\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:83:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● E24 Subscriptions & Dev Portal (e2e) › Dev Portal - POST /dev/plans › should reject non-super dev from creating plans\n\n    expected 403 \"Forbidden\", got 404 \"Not Found\"\n\n      109 |           features: {},\n      110 |         })\n    > 111 |         .expect(403);\n          |          ^\n      112 |     });\n      113 |   });\n      114 |\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:111:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● E24 Subscriptions & Dev Portal (e2e) › Billing - GET /billing/subscription › should return subscription for org owner\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      129 |         .get('/billing/subscription')\n      130 |         .set('Authorization', `Bearer ${token}`)\n    > 131 |         .expect(200);\n          |          ^\n      132 |\n      133 |       expect(response.body).toHaveProperty('plan');\n      134 |       expect(response.body).toHaveProperty('status');\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:131:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● E24 Subscriptions & Dev Portal (e2e) › Billing - POST /billing/plan/change › should allow owner to request plan change\n\n    expected 201 \"Created\", got 403 \"Forbidden\"\n\n      172 |         .set('Authorization', `Bearer ${token}`)\n      173 |         .send({ planCode: 'ENTERPRISE' })\n    > 174 |         .expect(201);\n          |          ^\n      175 |\n      176 |       expect(response.body).toHaveProperty('message');\n      177 |       expect(response.body).toHaveProperty('effectiveDate');\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:174:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● E24 Subscriptions & Dev Portal (e2e) › Billing - POST /billing/cancel › should allow owner to request cancellation\n\n    expected 201 \"Created\", got 403 \"Forbidden\"\n\n      194 |         .post('/billing/cancel')\n      195 |         .set('Authorization', `Bearer ${token}`)\n    > 196 |         .expect(201);\n          |          ^\n      197 |\n      198 |       expect(response.body).toHaveProperty('message');\n      199 |       expect(response.body).toHaveProperty('effectiveDate');\n\n      at Object.<anonymous> (e24-subscriptions.e2e-spec.ts:196:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/e24-subscriptions.e2e-spec.ts","startTime":1766887806194,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["POS E2E"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'upsert')\n    at createFloor (/workspaces/chefcloud/services/api/test/e2e/factory.ts:238:44)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/pos.e2e-spec.ts:36:36)"],"fullName":"POS E2E should create order → send-to-kitchen → close","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create order → send-to-kitchen → close"}],"endTime":1766887808988,"message":"  ● POS E2E › should create order → send-to-kitchen → close\n\n    TypeError: Cannot read properties of undefined (reading 'upsert')\n\n      236 |  */\n      237 | export async function createFloor(prisma: PrismaClient, orgId: string, branchId: string) {\n    > 238 |   const floorPlan = await prisma.floorPlan.upsert({\n          |                                            ^\n      239 |     where: { id: `floor-e2e-${orgId}` },\n      240 |     update: {},\n      241 |     create: {\n\n      at createFloor (e2e/factory.ts:238:44)\n      at Object.<anonymous> (e2e/pos.e2e-spec.ts:36:36)\n","name":"/workspaces/chefcloud/services/api/test/e2e/pos.e2e-spec.ts","startTime":1766887807466,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Bookings E2E"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'upsert')\n    at createEvent (/workspaces/chefcloud/services/api/test/e2e/factory.ts:329:36)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/bookings.e2e-spec.ts:33:36)"],"fullName":"Bookings E2E should create booking → HOLD → pay → confirm","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create booking → HOLD → pay → confirm"}],"endTime":1766887810169,"message":"  ● Bookings E2E › should create booking → HOLD → pay → confirm\n\n    TypeError: Cannot read properties of undefined (reading 'upsert')\n\n      327 |  */\n      328 | export async function createEvent(prisma: PrismaClient, orgId: string, branchId: string) {\n    > 329 |   const event = await prisma.event.upsert({\n          |                                    ^\n      330 |     where: { id: `event-${orgId}` },\n      331 |     update: {},\n      332 |     create: {\n\n      at createEvent (e2e/factory.ts:329:36)\n      at Object.<anonymous> (e2e/bookings.e2e-spec.ts:33:36)\n","name":"/workspaces/chefcloud/services/api/test/e2e/bookings.e2e-spec.ts","startTime":1766887808993,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Plan-Aware Rate Limiting E2E","POST /billing/plan/change"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\n→ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E POST /billing/plan/change should enforce free tier rate limit (10/min)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce free tier rate limit (10/min)"},{"ancestorTitles":["Plan-Aware Rate Limiting E2E","POST /billing/plan/change"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\n→ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E POST /billing/plan/change should allow pro tier higher limits (60/min)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow pro tier higher limits (60/min)"},{"ancestorTitles":["Plan-Aware Rate Limiting E2E","POST /billing/plan/change"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\n→ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E POST /billing/plan/change should allow enterprise tier highest limits (240/min)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow enterprise tier highest limits (240/min)"},{"ancestorTitles":["Plan-Aware Rate Limiting E2E","POST /billing/cancel"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\n→ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E POST /billing/cancel should apply rate limiting to cancel endpoint","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should apply rate limiting to cancel endpoint"},{"ancestorTitles":["Plan-Aware Rate Limiting E2E","Rate limit headers"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\n→ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E Rate limit headers should include Retry-After header in 429 responses","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include Retry-After header in 429 responses"},{"ancestorTitles":["Plan-Aware Rate Limiting E2E","Authentication requirement"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\n→ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E Authentication requirement should reject requests without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject requests without authentication"},{"ancestorTitles":["Plan-Aware Rate Limiting E2E","Metrics"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.user.upsert()` invocation in\n/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n  157 });\n  158 \n  159 // Create test users\n→ 160 const freeUser = await prisma.user.upsert({\n        where: {\n          email: \"rate-limit-free@test.local\"\n        },\n        update: {},\n        create: {\n          email: \"rate-limit-free@test.local\",\n          role: \"L5\",\n          orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n      +   firstName: String\n        }\n      })\n\nArgument `firstName` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:22)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:50:5)"],"fullName":"Plan-Aware Rate Limiting E2E Metrics should emit rate limit hit metrics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should emit rate limit hit metrics"}],"endTime":1766887810923,"message":"  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should enforce free tier rate limit (10/min)\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    → 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n\n  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should allow pro tier higher limits (60/min)\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    → 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n\n  ● Plan-Aware Rate Limiting E2E › POST /billing/plan/change › should allow enterprise tier highest limits (240/min)\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    → 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n\n  ● Plan-Aware Rate Limiting E2E › POST /billing/cancel › should apply rate limiting to cancel endpoint\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    → 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n\n  ● Plan-Aware Rate Limiting E2E › Rate limit headers › should include Retry-After header in 429 responses\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    → 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n\n  ● Plan-Aware Rate Limiting E2E › Authentication requirement › should reject requests without authentication\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    → 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n\n  ● Plan-Aware Rate Limiting E2E › Metrics › should emit rate limit hit metrics\n\n    PrismaClientValidationError: \n    Invalid `prisma.user.upsert()` invocation in\n    /workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts:160:40\n\n      157 });\n      158 \n      159 // Create test users\n    → 160 const freeUser = await prisma.user.upsert({\n            where: {\n              email: \"rate-limit-free@test.local\"\n            },\n            update: {},\n            create: {\n              email: \"rate-limit-free@test.local\",\n              role: \"L5\",\n              orgId: \"cmjp3ds73005cqdt8rhpaoy5o\",\n          +   firstName: String\n            }\n          })\n\n    Argument `firstName` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (plan-rate-limit.e2e-spec.ts:160:22)\n      at Object.<anonymous> (plan-rate-limit.e2e-spec.ts:50:5)\n","name":"/workspaces/chefcloud/services/api/test/plan-rate-limit.e2e-spec.ts","startTime":1766887810173,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Accounting E2E"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'upsert')\n    at createChartOfAccounts (/workspaces/chefcloud/services/api/test/e2e/factory.ts:364:42)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/accounting.e2e-spec.ts:33:32)"],"fullName":"Accounting E2E should create period → lock → posting blocked","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create period → lock → posting blocked"}],"endTime":1766887812231,"message":"  ● Accounting E2E › should create period → lock → posting blocked\n\n    TypeError: Cannot read properties of undefined (reading 'upsert')\n\n      362 |   const created = [];\n      363 |   for (const acc of accounts) {\n    > 364 |     const account = await prisma.account.upsert({\n          |                                          ^\n      365 |       where: { orgId_code: { orgId, code: acc.code } },\n      366 |       update: {},\n      367 |       create: {\n\n      at createChartOfAccounts (e2e/factory.ts:364:42)\n      at Object.<anonymous> (e2e/accounting.e2e-spec.ts:33:32)\n","name":"/workspaces/chefcloud/services/api/test/e2e/accounting.e2e-spec.ts","startTime":1766887810928,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","GET /stream/kpis (SSE)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) GET /stream/kpis (SSE) should require authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require authentication"},{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","GET /stream/kpis (SSE)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) GET /stream/kpis (SSE) should reject non-L4+ users","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject non-L4+ users"},{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","GET /stream/kpis (SSE)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) GET /stream/kpis (SSE) should require scope query param","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require scope query param"},{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","GET /stream/kpis (SSE)"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) GET /stream/kpis (SSE) should require branchId for branch scope","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require branchId for branch scope"},{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","GET /stream/kpis (SSE)"],"duration":null,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) GET /stream/kpis (SSE) should stream org-wide KPIs for L4+ user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"pending","title":"should stream org-wide KPIs for L4+ user"},{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","KPI Computation"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) KPI Computation should compute salesToday from completed orders","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should compute salesToday from completed orders"},{"ancestorTitles":["E26-s1: Live KPI Streaming (SSE)","KPI Computation"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n  24 prisma = app.get(PrismaService);\n  25 \n  26 // Create test org\n→ 27 const org = await prisma.client.org.create({\n       data: {\n         name: \"E26 Test Org\",\n         currency: \"UGX\",\n     +   slug: String\n       }\n     })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:17)"],"fullName":"E26-s1: Live KPI Streaming (SSE) KPI Computation should count open orders correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should count open orders correctly"}],"coverage":{},"endTime":1766887842432,"message":"  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require authentication\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should reject non-L4+ users\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require scope query param\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should require branchId for branch scope\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n  ● E26-s1: Live KPI Streaming (SSE) › GET /stream/kpis (SSE) › should stream org-wide KPIs for L4+ user\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n  ● E26-s1: Live KPI Streaming (SSE) › KPI Computation › should compute salesToday from completed orders\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n  ● E26-s1: Live KPI Streaming (SSE) › KPI Computation › should count open orders correctly\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:27:41\n\n      24 prisma = app.get(PrismaService);\n      25 \n      26 // Create test org\n    → 27 const org = await prisma.client.org.create({\n           data: {\n             name: \"E26 Test Org\",\n             currency: \"UGX\",\n         +   slug: String\n           }\n         })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:27:17)\n\n\n  ● Test suite failed to run\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.user.deleteMany()` invocation in\n    /workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts:75:30\n\n      72 \n      73 afterAll(async () => {\n      74   // Cleanup\n    → 75   await prisma.client.user.deleteMany(\n    Foreign key constraint violated: `orders_userId_fkey (index)`\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (e26-kpis.e2e-spec.ts:75:5)\n","name":"/workspaces/chefcloud/services/api/test/e26-kpis.e2e-spec.ts","startTime":1766887842432,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Multi-Tenant Isolation (E2E)","Cross-org menu item access"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n  61   },\n  62 });\n  63 \n→ 64 sessionA = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dusg0066qdt8fa2jd29h\",\n         token: \"token-a-1766887814179\",\n         expiresAt: new Date(\"2025-12-29T02:10:14.179Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:16)"],"fullName":"Multi-Tenant Isolation (E2E) Cross-org menu item access should deny user A access to org B menu items with wrong x-org-id","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should deny user A access to org B menu items with wrong x-org-id"},{"ancestorTitles":["Multi-Tenant Isolation (E2E)","Cross-org menu item access"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n  61   },\n  62 });\n  63 \n→ 64 sessionA = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dusg0066qdt8fa2jd29h\",\n         token: \"token-a-1766887814179\",\n         expiresAt: new Date(\"2025-12-29T02:10:14.179Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:16)"],"fullName":"Multi-Tenant Isolation (E2E) Cross-org menu item access should return 404 when user A requests org B resource with correct x-org-id","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 when user A requests org B resource with correct x-org-id"},{"ancestorTitles":["Multi-Tenant Isolation (E2E)","Cross-org menu item access"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n  61   },\n  62 });\n  63 \n→ 64 sessionA = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dusg0066qdt8fa2jd29h\",\n         token: \"token-a-1766887814179\",\n         expiresAt: new Date(\"2025-12-29T02:10:14.179Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:16)"],"fullName":"Multi-Tenant Isolation (E2E) Cross-org menu item access should allow user A to access org A menu items","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow user A to access org A menu items"},{"ancestorTitles":["Multi-Tenant Isolation (E2E)","Cross-org menu item access"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n  61   },\n  62 });\n  63 \n→ 64 sessionA = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dusg0066qdt8fa2jd29h\",\n         token: \"token-a-1766887814179\",\n         expiresAt: new Date(\"2025-12-29T02:10:14.179Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:16)"],"fullName":"Multi-Tenant Isolation (E2E) Cross-org menu item access should require x-org-id header","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require x-org-id header"},{"ancestorTitles":["Multi-Tenant Isolation (E2E)","Cross-org data isolation"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n  61   },\n  62 });\n  63 \n→ 64 sessionA = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dusg0066qdt8fa2jd29h\",\n         token: \"token-a-1766887814179\",\n         expiresAt: new Date(\"2025-12-29T02:10:14.179Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:16)"],"fullName":"Multi-Tenant Isolation (E2E) Cross-org data isolation should not leak org B data when user A lists menu items","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not leak org B data when user A lists menu items"},{"ancestorTitles":["Multi-Tenant Isolation (E2E)","Cross-org data isolation"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n  61   },\n  62 });\n  63 \n→ 64 sessionA = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dusg0066qdt8fa2jd29h\",\n         token: \"token-a-1766887814179\",\n         expiresAt: new Date(\"2025-12-29T02:10:14.179Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:16)"],"fullName":"Multi-Tenant Isolation (E2E) Cross-org data isolation should isolate org B user from org A data","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should isolate org B user from org A data"}],"coverage":{},"endTime":1766887842432,"message":"  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should deny user A access to org B menu items with wrong x-org-id\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n      61   },\n      62 });\n      63 \n    → 64 sessionA = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dusg0066qdt8fa2jd29h\",\n             token: \"token-a-1766887814179\",\n             expiresAt: new Date(\"2025-12-29T02:10:14.179Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)\n\n  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should return 404 when user A requests org B resource with correct x-org-id\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n      61   },\n      62 });\n      63 \n    → 64 sessionA = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dusg0066qdt8fa2jd29h\",\n             token: \"token-a-1766887814179\",\n             expiresAt: new Date(\"2025-12-29T02:10:14.179Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)\n\n  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should allow user A to access org A menu items\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n      61   },\n      62 });\n      63 \n    → 64 sessionA = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dusg0066qdt8fa2jd29h\",\n             token: \"token-a-1766887814179\",\n             expiresAt: new Date(\"2025-12-29T02:10:14.179Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)\n\n  ● Multi-Tenant Isolation (E2E) › Cross-org menu item access › should require x-org-id header\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n      61   },\n      62 });\n      63 \n    → 64 sessionA = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dusg0066qdt8fa2jd29h\",\n             token: \"token-a-1766887814179\",\n             expiresAt: new Date(\"2025-12-29T02:10:14.179Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)\n\n  ● Multi-Tenant Isolation (E2E) › Cross-org data isolation › should not leak org B data when user A lists menu items\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n      61   },\n      62 });\n      63 \n    → 64 sessionA = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dusg0066qdt8fa2jd29h\",\n             token: \"token-a-1766887814179\",\n             expiresAt: new Date(\"2025-12-29T02:10:14.179Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)\n\n  ● Multi-Tenant Isolation (E2E) › Cross-org data isolation › should isolate org B user from org A data\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts:64:37\n\n      61   },\n      62 });\n      63 \n    → 64 sessionA = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dusg0066qdt8fa2jd29h\",\n             token: \"token-a-1766887814179\",\n             expiresAt: new Date(\"2025-12-29T02:10:14.179Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:64:16)\n\n\n  ● Test suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      152 |     // Cleanup in reverse order\n      153 |     await prisma.client.menuItem.deleteMany({ where: { branchId: branchA.id } });\n    > 154 |     await prisma.client.menuItem.deleteMany({ where: { branchId: branchB.id } });\n          |                                                                          ^\n      155 |     await prisma.category.deleteMany({ where: { branchId: branchA.id } });\n      156 |     await prisma.category.deleteMany({ where: { branchId: branchB.id } });\n      157 |     await prisma.session.deleteMany({ where: { userId: userA.id } });\n\n      at Object.<anonymous> (b3-multi-tenant.e2e-spec.ts:154:74)\n","name":"/workspaces/chefcloud/services/api/test/b3-multi-tenant.e2e-spec.ts","startTime":1766887842432,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\n→ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should authenticate via badge swipe and include badgeId in token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should authenticate via badge swipe and include badgeId in token"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\n→ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should access protected endpoint with valid token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should access protected endpoint with valid token"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\n→ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should reject login with REVOKED badge","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject login with REVOKED badge"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\n→ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should invalidate existing token when badge is revoked (< 2s)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should invalidate existing token when badge is revoked (< 2s)"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\n→ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should allow new login after badge revocation with updated version","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow new login after badge revocation with updated version"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\n→ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should invalidate sessions when badge is reported LOST","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should invalidate sessions when badge is reported LOST"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Badge Revocation Flow"],"duration":1,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\n→ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Badge Revocation Flow should NOT reinstate old tokens when badge is RETURNED","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should NOT reinstate old tokens when badge is RETURNED"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Session Version Validation"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\n→ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Session Version Validation should reject token with mismatched session version","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject token with mismatched session version"},{"ancestorTitles":["Badge Revocation & Session Invalidation (E25) - E2E","Performance & Timing"],"duration":0,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"Org","target":["slug"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n  46 \n  47 async function setupTestData() {\n  48   // Create test organization\n→ 49   testOrg = await prisma.client.org.create(\nUnique constraint failed on the fields: (`slug`)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:15)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:39:5)"],"fullName":"Badge Revocation & Session Invalidation (E25) - E2E Performance & Timing should invalidate session within 2 seconds (E25 requirement)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should invalidate session within 2 seconds (E25 requirement)"}],"coverage":{},"endTime":1766887842432,"message":"  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should authenticate via badge swipe and include badgeId in token\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    → 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should access protected endpoint with valid token\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    → 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should reject login with REVOKED badge\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    → 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should invalidate existing token when badge is revoked (< 2s)\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    → 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should allow new login after badge revocation with updated version\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    → 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should invalidate sessions when badge is reported LOST\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    → 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  ● Badge Revocation & Session Invalidation (E25) - E2E › Badge Revocation Flow › should NOT reinstate old tokens when badge is RETURNED\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    → 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  ● Badge Revocation & Session Invalidation (E25) - E2E › Session Version Validation › should reject token with mismatched session version\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    → 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n  ● Badge Revocation & Session Invalidation (E25) - E2E › Performance & Timing › should invalidate session within 2 seconds (E25 requirement)\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts:49:39\n\n      46 \n      47 async function setupTestData() {\n      48   // Create test organization\n    → 49   testOrg = await prisma.client.org.create(\n    Unique constraint failed on the fields: (`slug`)\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (e2e/badge-revocation.e2e-spec.ts:49:15)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:39:5)\n\n\n  ● Test suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      124 |     // Delete in dependency order\n      125 |     await prisma.client.employeeProfile.deleteMany({\n    > 126 |       where: { userId: testUser.id },\n          |                                 ^\n      127 |     });\n      128 |     await prisma.client.badgeAsset.deleteMany({\n      129 |       where: { orgId: testOrg.id },\n\n      at cleanupTestData (e2e/badge-revocation.e2e-spec.ts:126:33)\n      at Object.<anonymous> (e2e/badge-revocation.e2e-spec.ts:43:11)\n","name":"/workspaces/chefcloud/services/api/test/e2e/badge-revocation.e2e-spec.ts","startTime":1766887842432,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","1. Service Providers Management"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 1. Service Providers Management should create a service provider","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a service provider"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","1. Service Providers Management"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 1. Service Providers Management should create a monthly contract","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a monthly contract"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","2. Payment Reminders"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 2. Payment Reminders should generate reminders for active contracts","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate reminders for active contracts"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","2. Payment Reminders"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 2. Payment Reminders should list reminders for a branch","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list reminders for a branch"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","2. Payment Reminders"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 2. Payment Reminders should get reminder summary","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get reminder summary"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","2. Payment Reminders"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 2. Payment Reminders should mark reminder as paid","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should mark reminder as paid"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","3. Ops Budget Management"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 3. Ops Budget Management should set a budget for a category","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should set a budget for a category"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","3. Ops Budget Management"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 3. Ops Budget Management should compute budget actuals","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should compute budget actuals"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","3. Ops Budget Management"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 3. Ops Budget Management should get budget summary","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get budget summary"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","3. Ops Budget Management"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 3. Ops Budget Management should get franchise budget summary","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get franchise budget summary"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","4. Cost-Cutting Insights"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 4. Cost-Cutting Insights should generate cost insights for a branch","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate cost insights for a branch"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","4. Cost-Cutting Insights"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 4. Cost-Cutting Insights should generate franchise-wide insights","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate franchise-wide insights"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","5. Integration with Owner Digests"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 5. Integration with Owner Digests should include M7 data in franchise digest","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include M7 data in franchise digest"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","6. Validation & Error Handling"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 6. Validation & Error Handling should validate dueDay for monthly contracts","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should validate dueDay for monthly contracts"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","6. Validation & Error Handling"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 6. Validation & Error Handling should prevent deleting provider with active contracts","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should prevent deleting provider with active contracts"},{"ancestorTitles":["M7: Service Providers, Budgets & Cost Insights (e2e)","6. Validation & Error Handling"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.org.create()` invocation in\n/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n  51 \n  52 async function setupTestData() {\n  53   // Create test org\n→ 54   const org = await prisma.client.org.create({\n         data: {\n           name: \"M7 Test Restaurant\",\n           email: \"m7test@example.com\",\n       +   slug: String\n         }\n       })\n\nArgument `slug` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at setupTestData (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:17)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:42:5)"],"fullName":"M7: Service Providers, Budgets & Cost Insights (e2e) 6. Validation & Error Handling should require budget parameters","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require budget parameters"}],"coverage":{},"endTime":1766887842432,"message":"  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 1. Service Providers Management › should create a service provider\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 1. Service Providers Management › should create a monthly contract\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should generate reminders for active contracts\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should list reminders for a branch\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should get reminder summary\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 2. Payment Reminders › should mark reminder as paid\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should set a budget for a category\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should compute budget actuals\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should get budget summary\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 3. Ops Budget Management › should get franchise budget summary\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 4. Cost-Cutting Insights › should generate cost insights for a branch\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 4. Cost-Cutting Insights › should generate franchise-wide insights\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 5. Integration with Owner Digests › should include M7 data in franchise digest\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should validate dueDay for monthly contracts\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should prevent deleting provider with active contracts\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n  ● M7: Service Providers, Budgets & Cost Insights (e2e) › 6. Validation & Error Handling › should require budget parameters\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.org.create()` invocation in\n    /workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts:54:41\n\n      51 \n      52 async function setupTestData() {\n      53   // Create test org\n    → 54   const org = await prisma.client.org.create({\n             data: {\n               name: \"M7 Test Restaurant\",\n               email: \"m7test@example.com\",\n           +   slug: String\n             }\n           })\n\n    Argument `slug` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at setupTestData (m7-service-providers.e2e-spec.ts:54:17)\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:42:5)\n\n\n  ● Test suite failed to run\n\n    TypeError: prisma.$disconnect is not a function\n\n      46 |     // Cleanup\n      47 |     await cleanupTestData();\n    > 48 |     await prisma.$disconnect();\n         |                  ^\n      49 |     await app.close();\n      50 |   });\n      51 |\n\n      at Object.<anonymous> (m7-service-providers.e2e-spec.ts:48:18)\n","name":"/workspaces/chefcloud/services/api/test/m7-service-providers.e2e-spec.ts","startTime":1766887842432,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E22.D - Franchise Cache Invalidation (e2e)","Budget Update Invalidation"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)"],"fullName":"E22.D - Franchise Cache Invalidation (e2e) Budget Update Invalidation should invalidate budgets cache after budget update","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should invalidate budgets cache after budget update"},{"ancestorTitles":["E22.D - Franchise Cache Invalidation (e2e)","Budget Update Invalidation"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)"],"fullName":"E22.D - Franchise Cache Invalidation (e2e) Budget Update Invalidation should not affect other cache prefixes when updating budgets","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not affect other cache prefixes when updating budgets"},{"ancestorTitles":["E22.D - Franchise Cache Invalidation (e2e)","Cache Miss After Invalidation"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)"],"fullName":"E22.D - Franchise Cache Invalidation (e2e) Cache Miss After Invalidation should return fresh data after cache invalidation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return fresh data after cache invalidation"},{"ancestorTitles":["E22.D - Franchise Cache Invalidation (e2e)","Multiple Invalidations"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)"],"fullName":"E22.D - Franchise Cache Invalidation (e2e) Multiple Invalidations should handle multiple rapid invalidations without errors","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle multiple rapid invalidations without errors"}],"endTime":1766887816494,"message":"  ● E22.D - Franchise Cache Invalidation (e2e) › Budget Update Invalidation › should invalidate budgets cache after budget update\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      57 |   async function setupTestData() {\n      58 |     // Create test organization\n    > 59 |     const org = await prisma.organization.create({\n         |                                           ^\n      60 |       data: {\n      61 |         name: 'E22D Test Org',\n      62 |         slug: `e22d-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)\n\n  ● E22.D - Franchise Cache Invalidation (e2e) › Budget Update Invalidation › should not affect other cache prefixes when updating budgets\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      57 |   async function setupTestData() {\n      58 |     // Create test organization\n    > 59 |     const org = await prisma.organization.create({\n         |                                           ^\n      60 |       data: {\n      61 |         name: 'E22D Test Org',\n      62 |         slug: `e22d-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)\n\n  ● E22.D - Franchise Cache Invalidation (e2e) › Cache Miss After Invalidation › should return fresh data after cache invalidation\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      57 |   async function setupTestData() {\n      58 |     // Create test organization\n    > 59 |     const org = await prisma.organization.create({\n         |                                           ^\n      60 |       data: {\n      61 |         name: 'E22D Test Org',\n      62 |         slug: `e22d-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)\n\n  ● E22.D - Franchise Cache Invalidation (e2e) › Multiple Invalidations › should handle multiple rapid invalidations without errors\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      57 |   async function setupTestData() {\n      58 |     // Create test organization\n    > 59 |     const org = await prisma.organization.create({\n         |                                           ^\n      60 |       data: {\n      61 |         name: 'E22D Test Org',\n      62 |         slug: `e22d-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-cache-invalidation.e2e-spec.ts:59:43)\n      at Object.<anonymous> (e2e/franchise-cache-invalidation.e2e-spec.ts:39:11)\n","name":"/workspaces/chefcloud/services/api/test/e2e/franchise-cache-invalidation.e2e-spec.ts","startTime":1766887815695,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["API Key Security (E2E)","POST /ops/apikeys"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\n→ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n         token: \"test-token-1766887817552\",\n         expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) POST /ops/apikeys should create API key as L5 user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create API key as L5 user"},{"ancestorTitles":["API Key Security (E2E)","POST /ops/apikeys"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\n→ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n         token: \"test-token-1766887817552\",\n         expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) POST /ops/apikeys should list API keys (masked)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list API keys (masked)"},{"ancestorTitles":["API Key Security (E2E)","POST /hardware/spout/ingest with API key"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\n→ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n         token: \"test-token-1766887817552\",\n         expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) POST /hardware/spout/ingest with API key should accept request with valid API key","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should accept request with valid API key"},{"ancestorTitles":["API Key Security (E2E)","POST /hardware/spout/ingest with API key"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\n→ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n         token: \"test-token-1766887817552\",\n         expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) POST /hardware/spout/ingest with API key should reject request with missing API key","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject request with missing API key"},{"ancestorTitles":["API Key Security (E2E)","POST /hardware/spout/ingest with API key"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\n→ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n         token: \"test-token-1766887817552\",\n         expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) POST /hardware/spout/ingest with API key should reject request with invalid API key","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject request with invalid API key"},{"ancestorTitles":["API Key Security (E2E)","Rate limiting"],"duration":0,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\n→ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n         token: \"test-token-1766887817552\",\n         expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) Rate limiting should enforce rate limit on public endpoints","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce rate limit on public endpoints"},{"ancestorTitles":["API Key Security (E2E)","DELETE /ops/apikeys/:id"],"duration":1,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.session.create()` invocation in\n/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n  55 });\n  56 \n  57 // Create session for auth\n→ 58 const session = await prisma.session.create({\n       data: {\n         userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n         token: \"test-token-1766887817552\",\n         expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n     +   user: {\n     +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n     +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n     +     connect: UserWhereUniqueInput\n     +   }\n       }\n     })\n\nArgument `user` is missing.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:21)"],"fullName":"API Key Security (E2E) DELETE /ops/apikeys/:id should delete API key","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should delete API key"}],"endTime":1766887817636,"message":"  ● API Key Security (E2E) › POST /ops/apikeys › should create API key as L5 user\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    → 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n             token: \"test-token-1766887817552\",\n             expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n\n  ● API Key Security (E2E) › POST /ops/apikeys › should list API keys (masked)\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    → 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n             token: \"test-token-1766887817552\",\n             expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n\n  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should accept request with valid API key\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    → 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n             token: \"test-token-1766887817552\",\n             expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n\n  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should reject request with missing API key\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    → 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n             token: \"test-token-1766887817552\",\n             expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n\n  ● API Key Security (E2E) › POST /hardware/spout/ingest with API key › should reject request with invalid API key\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    → 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n             token: \"test-token-1766887817552\",\n             expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n\n  ● API Key Security (E2E) › Rate limiting › should enforce rate limit on public endpoints\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    → 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n             token: \"test-token-1766887817552\",\n             expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n\n  ● API Key Security (E2E) › DELETE /ops/apikeys/:id › should delete API key\n\n    PrismaClientValidationError: \n    Invalid `prisma.session.create()` invocation in\n    /workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts:58:42\n\n      55 });\n      56 \n      57 // Create session for auth\n    → 58 const session = await prisma.session.create({\n           data: {\n             userId: \"cmjp3dxe6006gqdt8n787y0i0\",\n             token: \"test-token-1766887817552\",\n             expiresAt: new Date(\"2025-12-29T02:10:17.552Z\"),\n         +   user: {\n         +     create: UserCreateWithoutSessionsInput | UserUncheckedCreateWithoutSessionsInput,\n         +     connectOrCreate: UserCreateOrConnectWithoutSessionsInput,\n         +     connect: UserWhereUniqueInput\n         +   }\n           }\n         })\n\n    Argument `user` is missing.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (b2-apikey.e2e-spec.ts:58:21)\n","name":"/workspaces/chefcloud/services/api/test/b2-apikey.e2e-spec.ts","startTime":1766887816497,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["A3 POS Core (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/a3-pos.e2e-spec.ts:44:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"A3 POS Core (e2e) should create order with burger+fries -> send-to-kitchen -> kds queue shows ticket -> mark ready -> close order","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create order with burger+fries -> send-to-kitchen -> kds queue shows ticket -> mark ready -> close order"},{"ancestorTitles":["A3 POS Core (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: menuResponse.body.find is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/a3-pos.e2e-spec.ts:44:38)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"A3 POS Core (e2e) should create order with burger only -> send-to-kitchen -> order has NO_DRINKS anomaly flag","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create order with burger only -> send-to-kitchen -> order has NO_DRINKS anomaly flag"}],"endTime":1766887818482,"message":"  ● A3 POS Core (e2e) › should create order with burger+fries -> send-to-kitchen -> kds queue shows ticket -> mark ready -> close order\n\n    TypeError: menuResponse.body.find is not a function\n\n      42 |       .set('Authorization', `Bearer ${authToken}`);\n      43 |\n    > 44 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      45 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      46 |     burgerId = burger.id;\n      47 |     friesId = fries.id;\n\n      at Object.<anonymous> (a3-pos.e2e-spec.ts:44:38)\n\n  ● A3 POS Core (e2e) › should create order with burger only -> send-to-kitchen -> order has NO_DRINKS anomaly flag\n\n    TypeError: menuResponse.body.find is not a function\n\n      42 |       .set('Authorization', `Bearer ${authToken}`);\n      43 |\n    > 44 |     const burger = menuResponse.body.find((item: any) => item.name === 'Burger');\n         |                                      ^\n      45 |     const fries = menuResponse.body.find((item: any) => item.name === 'Fries');\n      46 |     burgerId = burger.id;\n      47 |     friesId = fries.id;\n\n      at Object.<anonymous> (a3-pos.e2e-spec.ts:44:38)\n","name":"/workspaces/chefcloud/services/api/test/a3-pos.e2e-spec.ts","startTime":1766887817641,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","GET /billing/subscription"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) GET /billing/subscription should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","GET /billing/subscription"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) GET /billing/subscription should return 200 and subscription details with valid L5 token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 and subscription details with valid L5 token"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 403 if user is not L5 (manager attempting)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 if user is not L5 (manager attempting)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 200 or 404 with valid L5 token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 or 404 with valid L5 token"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 404 for unknown plan code","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 for unknown plan code"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should rate limit after burst requests (expect at least one 429)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should rate limit after burst requests (expect at least one 429)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should return 403 if user is not L5 (manager attempting)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 if user is not L5 (manager attempting)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should return 200 or 404 with valid L5 token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 or 404 with valid L5 token"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'findFirst')\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts:40:47)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should be idempotent (canceling twice should succeed)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should be idempotent (canceling twice should succeed)"}],"endTime":1766887819171,"message":"  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 401 if no authorization token is provided\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 200 and subscription details with valid L5 token\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 401 if no authorization token is provided\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 403 if user is not L5 (manager attempting)\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 200 or 404 with valid L5 token\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 404 for unknown plan code\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should rate limit after burst requests (expect at least one 429)\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 401 if no authorization token is provided\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 403 if user is not L5 (manager attempting)\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 200 or 404 with valid L5 token\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should be idempotent (canceling twice should succeed)\n\n    TypeError: Cannot read properties of undefined (reading 'findFirst')\n\n      38 |\n      39 |     // Use existing demo data instead of creating new test data\n    > 40 |     const demoOrg = await prisma.organization.findFirst({\n         |                                               ^\n      41 |       where: { slug: 'demo' },\n      42 |       include: { branches: { where: { isHeadquarters: true } } },\n      43 |     });\n\n      at Object.<anonymous> (billing-simple.e2e-spec.ts:40:47)\n","name":"/workspaces/chefcloud/services/api/test/billing-simple.e2e-spec.ts","startTime":1766887818485,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 403 if user is not L5 (owner)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 if user is not L5 (owner)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 200 and log plan change for L5 owner","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 and log plan change for L5 owner"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 404 for non-existent plan code","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 for non-existent plan code"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/plan/change"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/plan/change should return 429 after exceeding plan-aware rate limit (burst)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 429 after exceeding plan-aware rate limit (burst)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should return 403 if user is not L5 (owner)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 if user is not L5 (owner)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should return 200 and log cancellation for L5 owner","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 and log cancellation for L5 owner"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","POST /billing/cancel"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) POST /billing/cancel should be idempotent (canceling twice returns 200)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should be idempotent (canceling twice returns 200)"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","GET /billing/subscription"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) GET /billing/subscription should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing E2E (E24 - Auth, Authz, Rate Limiting)","GET /billing/subscription"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at TestingModule.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at TestingModule.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts:166:28)"],"fullName":"Billing E2E (E24 - Auth, Authz, Rate Limiting) GET /billing/subscription should return 200 with subscription details for authenticated user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 with subscription details for authenticated user"}],"endTime":1766887819876,"message":"  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 401 if no authorization token is provided\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 403 if user is not L5 (owner)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 200 and log plan change for L5 owner\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 404 for non-existent plan code\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/plan/change › should return 429 after exceeding plan-aware rate limit (burst)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 401 if no authorization token is provided\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 403 if user is not L5 (owner)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should return 200 and log cancellation for L5 owner\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › POST /billing/cancel › should be idempotent (canceling twice returns 200)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 401 if no authorization token is provided\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n\n  ● Billing E2E (E24 - Auth, Authz, Rate Limiting) › GET /billing/subscription › should return 200 with subscription details for authenticated user\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      164 |     await app.init();\n      165 |\n    > 166 |     prisma = moduleFixture.get<PrismaService>(PrismaService);\n          |                            ^\n      167 |     jwtService = moduleFixture.get<JwtService>(JwtService);\n      168 |\n      169 |     await setupTestData();\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at TestingModule.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at TestingModule.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e2e/billing.e2e-spec.ts:166:28)\n","name":"/workspaces/chefcloud/services/api/test/e2e/billing.e2e-spec.ts","startTime":1766887819175,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Webhook Security E2E (E24)","Authentication"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:72:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Authentication should reject webhook without signature header","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook without signature header"},{"ancestorTitles":["Webhook Security E2E (E24)","Authentication"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:84:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Authentication should reject webhook without timestamp header","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook without timestamp header"},{"ancestorTitles":["Webhook Security E2E (E24)","Authentication"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:95:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Authentication should reject webhook without request ID header","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook without request ID header"},{"ancestorTitles":["Webhook Security E2E (E24)","Authentication"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:107:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Authentication should reject webhook with invalid signature","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook with invalid signature"},{"ancestorTitles":["Webhook Security E2E (E24)","Authentication"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:117:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Authentication should accept webhook with valid signature","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should accept webhook with valid signature"},{"ancestorTitles":["Webhook Security E2E (E24)","Timestamp validation"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:132:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Timestamp validation should reject webhook with stale timestamp (>5 minutes old)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook with stale timestamp (>5 minutes old)"},{"ancestorTitles":["Webhook Security E2E (E24)","Timestamp validation"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:148:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Timestamp validation should reject webhook with future timestamp (>5 minutes ahead)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook with future timestamp (>5 minutes ahead)"},{"ancestorTitles":["Webhook Security E2E (E24)","Timestamp validation"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:162:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Timestamp validation should accept webhook with timestamp at edge of window (4 minutes old)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should accept webhook with timestamp at edge of window (4 minutes old)"},{"ancestorTitles":["Webhook Security E2E (E24)","Timestamp validation"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:171:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Timestamp validation should reject webhook with invalid timestamp format","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook with invalid timestamp format"},{"ancestorTitles":["Webhook Security E2E (E24)","Replay protection"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:190:31)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Replay protection should reject duplicate request ID (replay attack)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject duplicate request ID (replay attack)"},{"ancestorTitles":["Webhook Security E2E (E24)","Replay protection"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:206:31)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Replay protection should allow same payload with different request IDs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow same payload with different request IDs"},{"ancestorTitles":["Webhook Security E2E (E24)","Body integrity"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:223:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Body integrity should reject webhook with tampered body","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject webhook with tampered body"},{"ancestorTitles":["Webhook Security E2E (E24)","Body integrity"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:237:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Body integrity should handle empty body correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle empty body correctly"},{"ancestorTitles":["Webhook Security E2E (E24)","Body integrity"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:257:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Body integrity should handle complex nested JSON","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle complex nested JSON"},{"ancestorTitles":["Webhook Security E2E (E24)","Multiple webhook endpoints"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:265:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Multiple webhook endpoints should protect MTN webhook endpoint","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should protect MTN webhook endpoint"},{"ancestorTitles":["Webhook Security E2E (E24)","Multiple webhook endpoints"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:276:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Multiple webhook endpoints should protect Airtel webhook endpoint","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should protect Airtel webhook endpoint"},{"ancestorTitles":["Webhook Security E2E (E24)","Response format"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:289:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Response format should return proper success response","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return proper success response"},{"ancestorTitles":["Webhook Security E2E (E24)","Response format"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:302:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Response format should return proper error response for auth failure","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return proper error response for auth failure"},{"ancestorTitles":["Webhook Security E2E (E24)","Performance and load"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: request is not a function\n    at sendWebhook (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:61:12)\n    at /workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:314:9\n    at Function.from (<anonymous>)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts:313:30)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Webhook Security E2E (E24) Performance and load should handle multiple concurrent valid webhooks","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle multiple concurrent valid webhooks"}],"endTime":1766887820600,"message":"  ● Webhook Security E2E (E24) › Authentication › should reject webhook without signature header\n\n    TypeError: request is not a function\n\n      70 |   describe('Authentication', () => {\n      71 |     it('should reject webhook without signature header', async () => {\n    > 72 |       const response = await request(app.getHttpServer())\n         |                              ^\n      73 |         .post('/webhooks/billing')\n      74 |         .set('Content-Type', 'application/json')\n      75 |         .set('X-Ts', Date.now().toString())\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:72:30)\n\n  ● Webhook Security E2E (E24) › Authentication › should reject webhook without timestamp header\n\n    TypeError: request is not a function\n\n      82 |\n      83 |     it('should reject webhook without timestamp header', async () => {\n    > 84 |       const response = await request(app.getHttpServer())\n         |                              ^\n      85 |         .post('/webhooks/billing')\n      86 |         .set('Content-Type', 'application/json')\n      87 |         .set('X-Sig', 'some-signature')\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:84:30)\n\n  ● Webhook Security E2E (E24) › Authentication › should reject webhook without request ID header\n\n    TypeError: request is not a function\n\n      93 |\n      94 |     it('should reject webhook without request ID header', async () => {\n    > 95 |       const response = await request(app.getHttpServer())\n         |                              ^\n      96 |         .post('/webhooks/billing')\n      97 |         .set('Content-Type', 'application/json')\n      98 |         .set('X-Sig', 'some-signature')\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:95:30)\n\n  ● Webhook Security E2E (E24) › Authentication › should reject webhook with invalid signature\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:107:30)\n\n  ● Webhook Security E2E (E24) › Authentication › should accept webhook with valid signature\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:117:30)\n\n  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with stale timestamp (>5 minutes old)\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:132:30)\n\n  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with future timestamp (>5 minutes ahead)\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:148:30)\n\n  ● Webhook Security E2E (E24) › Timestamp validation › should accept webhook with timestamp at edge of window (4 minutes old)\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:162:30)\n\n  ● Webhook Security E2E (E24) › Timestamp validation › should reject webhook with invalid timestamp format\n\n    TypeError: request is not a function\n\n      169 |\n      170 |     it('should reject webhook with invalid timestamp format', async () => {\n    > 171 |       const response = await request(app.getHttpServer())\n          |                              ^\n      172 |         .post('/webhooks/billing')\n      173 |         .set('Content-Type', 'application/json')\n      174 |         .set('X-Sig', 'some-signature')\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:171:30)\n\n  ● Webhook Security E2E (E24) › Replay protection › should reject duplicate request ID (replay attack)\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:190:31)\n\n  ● Webhook Security E2E (E24) › Replay protection › should allow same payload with different request IDs\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:206:31)\n\n  ● Webhook Security E2E (E24) › Body integrity › should reject webhook with tampered body\n\n    TypeError: request is not a function\n\n      221 |\n      222 |       // Send tampered payload with signature from original\n    > 223 |       const response = await request(app.getHttpServer())\n          |                              ^\n      224 |         .post('/webhooks/billing')\n      225 |         .set('Content-Type', 'application/json')\n      226 |         .set('X-Sig', signature)\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:223:30)\n\n  ● Webhook Security E2E (E24) › Body integrity › should handle empty body correctly\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:237:30)\n\n  ● Webhook Security E2E (E24) › Body integrity › should handle complex nested JSON\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:257:30)\n\n  ● Webhook Security E2E (E24) › Multiple webhook endpoints › should protect MTN webhook endpoint\n\n    TypeError: request is not a function\n\n      263 |     it('should protect MTN webhook endpoint', async () => {\n      264 |       const payload = { transactionId: 'mtn-123', status: 'completed' };\n    > 265 |       const response = await request(app.getHttpServer())\n          |                              ^\n      266 |         .post('/webhooks/mtn')\n      267 |         .set('Content-Type', 'application/json')\n      268 |         .send(payload);\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:265:30)\n\n  ● Webhook Security E2E (E24) › Multiple webhook endpoints › should protect Airtel webhook endpoint\n\n    TypeError: request is not a function\n\n      274 |     it('should protect Airtel webhook endpoint', async () => {\n      275 |       const payload = { transactionId: 'airtel-123', status: 'completed' };\n    > 276 |       const response = await request(app.getHttpServer())\n          |                              ^\n      277 |         .post('/webhooks/airtel')\n      278 |         .set('Content-Type', 'application/json')\n      279 |         .send(payload);\n\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:276:30)\n\n  ● Webhook Security E2E (E24) › Response format › should return proper success response\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:289:30)\n\n  ● Webhook Security E2E (E24) › Response format › should return proper error response for auth failure\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:302:30)\n\n  ● Webhook Security E2E (E24) › Performance and load › should handle multiple concurrent valid webhooks\n\n    TypeError: request is not a function\n\n      59 |     const requestId = headers.id || `test-${Date.now()}-${Math.random()}`;\n      60 |\n    > 61 |     return request(app.getHttpServer())\n         |            ^\n      62 |       .post('/webhooks/billing')\n      63 |       .set('Content-Type', 'application/json')\n      64 |       .set('X-Sig', signature)\n\n      at sendWebhook (webhook-security.e2e-spec.ts:61:12)\n      at webhook-security.e2e-spec.ts:314:9\n          at Function.from (<anonymous>)\n      at Object.<anonymous> (webhook-security.e2e-spec.ts:313:30)\n","name":"/workspaces/chefcloud/services/api/test/webhook-security.e2e-spec.ts","startTime":1766887819880,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr/assign"],"duration":12,"failureDetails":[{}],"failureMessages":["Error: expected 201 \"Created\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:130:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"MSR Card Management (e2e) POST /auth/msr/assign should assign MSR card to employee","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should assign MSR card to employee"},{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr/assign"],"duration":8,"failureDetails":[{}],"failureMessages":["Error: expected 409 \"Conflict\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:150:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"MSR Card Management (e2e) POST /auth/msr/assign should reject duplicate card assignment to same employee","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject duplicate card assignment to same employee"},{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr/assign"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"MSR Card Management (e2e) POST /auth/msr/assign should reject unauthorized access (no token)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject unauthorized access (no token)"},{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr-swipe"],"duration":6,"failureDetails":[{"name":"PrismaClientValidationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientValidationError: \nInvalid `prisma.client.msrCard.findUnique()` invocation in\n/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:169:48\n\n  166 describe('POST /auth/msr-swipe', () => {\n  167   it('should authenticate with valid MSR card', async () => {\n  168     // Get the card we assigned\n→ 169     const card = await prisma.client.msrCard.findUnique({\n            where: {\n              id: undefined,\n          ?   employeeId?: String,\n          ?   cardToken?: String,\n          ?   AND?: MsrCardWhereInput | MsrCardWhereInput[],\n          ?   OR?: MsrCardWhereInput[],\n          ?   NOT?: MsrCardWhereInput | MsrCardWhereInput[],\n          ?   orgId?: StringFilter | String,\n          ?   status?: EnumMsrCardStatusFilter | MsrCardStatus,\n          ?   assignedAt?: DateTimeFilter | DateTime,\n          ?   assignedById?: StringFilter | String,\n          ?   revokedAt?: DateTimeNullableFilter | DateTime | Null,\n          ?   revokedById?: StringNullableFilter | String | Null,\n          ?   revokedReason?: StringNullableFilter | String | Null,\n          ?   metadata?: JsonNullableFilter,\n          ?   createdAt?: DateTimeFilter | DateTime,\n          ?   updatedAt?: DateTimeFilter | DateTime,\n          ?   employee?: EmployeeRelationFilter | EmployeeWhereInput,\n          ?   assignedBy?: UserRelationFilter | UserWhereInput,\n          ?   revokedBy?: UserNullableRelationFilter | UserWhereInput | Null\n            },\n            include: {\n              employee: true\n            }\n          })\n\nArgument `where` of type MsrCardWhereUniqueInput needs at least one of `id`, `employeeId` or `cardToken` arguments. Available options are marked with ?.\n    at wn (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n    at $n.handleRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n    at $n.handleAndLogRequestError (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/workspaces/chefcloud/node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at /workspaces/chefcloud/services/api/src/common/slow-query.ts:19:20\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:169:20)"],"fullName":"MSR Card Management (e2e) POST /auth/msr-swipe should authenticate with valid MSR card","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should authenticate with valid MSR card"},{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr-swipe"],"duration":5,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 400 \"Bad Request\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:258:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"MSR Card Management (e2e) POST /auth/msr-swipe should reject invalid badge ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject invalid badge ID"},{"ancestorTitles":["MSR Card Management (e2e)","GET /auth/msr/cards"],"duration":10,"failureDetails":[{"matcherResult":{"actual":false,"expected":true,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:269:44)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"MSR Card Management (e2e) GET /auth/msr/cards should list MSR cards for organization","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list MSR cards for organization"},{"ancestorTitles":["MSR Card Management (e2e)","GET /auth/msr/cards"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"MSR Card Management (e2e) GET /auth/msr/cards should reject unauthorized access","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject unauthorized access"},{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr/revoke"],"duration":16,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:293:10)\n    at Promise.then.completed (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:121:9)\n    at run (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/workspaces/chefcloud/node_modules/.pnpm/jest-circus@29.7.0/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/workspaces/chefcloud/node_modules/.pnpm/jest-runner@29.7.0/node_modules/jest-runner/build/runTest.js:444:34)\n----\n    at Test._assertStatus (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n    at /workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n    at Test._assertFunction (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n    at Test.assert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n    at Server.localAssert (/workspaces/chefcloud/node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"MSR Card Management (e2e) POST /auth/msr/revoke should revoke MSR card","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should revoke MSR card"},{"ancestorTitles":["MSR Card Management (e2e)","POST /auth/msr/revoke"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MSR Card Management (e2e) POST /auth/msr/revoke should reject unauthorized access","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject unauthorized access"}],"endTime":1766887821234,"message":"  ● MSR Card Management (e2e) › POST /auth/msr/assign › should assign MSR card to employee\n\n    expected 201 \"Created\", got 500 \"Internal Server Error\"\n\n      128 |           badgeId: trackData,\n      129 |         })\n    > 130 |         .expect(201);\n          |          ^\n      131 |\n      132 |       expect(response.body).toHaveProperty('id');\n      133 |       expect(response.body).toHaveProperty('cardToken');\n\n      at Object.<anonymous> (msr-card.e2e-spec.ts:130:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● MSR Card Management (e2e) › POST /auth/msr/assign › should reject duplicate card assignment to same employee\n\n    expected 409 \"Conflict\", got 500 \"Internal Server Error\"\n\n      148 |           badgeId: trackData,\n      149 |         })\n    > 150 |         .expect(409); // Conflict - employee already has card\n          |          ^\n      151 |     });\n      152 |\n      153 |     it('should reject unauthorized access (no token)', async () => {\n\n      at Object.<anonymous> (msr-card.e2e-spec.ts:150:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● MSR Card Management (e2e) › POST /auth/msr-swipe › should authenticate with valid MSR card\n\n    PrismaClientValidationError: \n    Invalid `prisma.client.msrCard.findUnique()` invocation in\n    /workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts:169:48\n\n      166 describe('POST /auth/msr-swipe', () => {\n      167   it('should authenticate with valid MSR card', async () => {\n      168     // Get the card we assigned\n    → 169     const card = await prisma.client.msrCard.findUnique({\n                where: {\n                  id: undefined,\n              ?   employeeId?: String,\n              ?   cardToken?: String,\n              ?   AND?: MsrCardWhereInput | MsrCardWhereInput[],\n              ?   OR?: MsrCardWhereInput[],\n              ?   NOT?: MsrCardWhereInput | MsrCardWhereInput[],\n              ?   orgId?: StringFilter | String,\n              ?   status?: EnumMsrCardStatusFilter | MsrCardStatus,\n              ?   assignedAt?: DateTimeFilter | DateTime,\n              ?   assignedById?: StringFilter | String,\n              ?   revokedAt?: DateTimeNullableFilter | DateTime | Null,\n              ?   revokedById?: StringNullableFilter | String | Null,\n              ?   revokedReason?: StringNullableFilter | String | Null,\n              ?   metadata?: JsonNullableFilter,\n              ?   createdAt?: DateTimeFilter | DateTime,\n              ?   updatedAt?: DateTimeFilter | DateTime,\n              ?   employee?: EmployeeRelationFilter | EmployeeWhereInput,\n              ?   assignedBy?: UserRelationFilter | UserWhereInput,\n              ?   revokedBy?: UserNullableRelationFilter | UserWhereInput | Null\n                },\n                include: {\n                  employee: true\n                }\n              })\n\n    Argument `where` of type MsrCardWhereUniqueInput needs at least one of `id`, `employeeId` or `cardToken` arguments. Available options are marked with ?.\n\n      17 |   return async (params: any, next: any) => {\n      18 |     const start = Date.now();\n    > 19 |     const result = await next(params);\n         |                    ^\n      20 |     const duration = Date.now() - start;\n      21 |\n      22 |     // Sample slow queries to avoid log spam\n\n      at wn (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:29:1363)\n      at $n.handleRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6958)\n      at $n.handleAndLogRequestError (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (../../../node_modules/.pnpm/@prisma+client@5.22.0_prisma@5.22.0/node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at ../src/common/slow-query.ts:19:20\n      at Object.<anonymous> (msr-card.e2e-spec.ts:169:20)\n\n  ● MSR Card Management (e2e) › POST /auth/msr-swipe › should reject invalid badge ID\n\n    expected 404 \"Not Found\", got 400 \"Bad Request\"\n\n      256 |           branchId,\n      257 |         })\n    > 258 |         .expect(404); // Card not found\n          |          ^\n      259 |     });\n      260 |   });\n      261 |\n\n      at Object.<anonymous> (msr-card.e2e-spec.ts:258:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n\n  ● MSR Card Management (e2e) › GET /auth/msr/cards › should list MSR cards for organization\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      267 |         .expect(200);\n      268 |\n    > 269 |       expect(Array.isArray(response.body)).toBe(true);\n          |                                            ^\n      270 |       expect(response.body.length).toBeGreaterThanOrEqual(1);\n      271 |\n      272 |       const assignedCard = response.body.find((c: any) => c.id === cardId);\n\n      at Object.<anonymous> (msr-card.e2e-spec.ts:269:44)\n\n  ● MSR Card Management (e2e) › POST /auth/msr/revoke › should revoke MSR card\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\n      291 |           reason: 'E2E test cleanup',\n      292 |         })\n    > 293 |         .expect(200);\n          |          ^\n      294 |\n      295 |       expect(response.body.status).toBe('REVOKED');\n      296 |       expect(response.body.revokedReason).toBe('E2E test cleanup');\n\n      at Object.<anonymous> (msr-card.e2e-spec.ts:293:10)\n      ----\n      at Test._assertStatus (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:252:14)\n      at ../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:308:13\n      at Test._assertFunction (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:285:13)\n      at Test.assert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:164:23)\n      at Server.localAssert (../../../node_modules/.pnpm/supertest@6.3.4/node_modules/supertest/lib/test.js:120:14)\n","name":"/workspaces/chefcloud/services/api/test/msr-card.e2e-spec.ts","startTime":1766887820603,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E22.B - Franchise Rankings Caching (e2e)","GET /franchise/rankings"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:40:11)"],"fullName":"E22.B - Franchise Rankings Caching (e2e) GET /franchise/rankings should return cached=false on first call (cache miss)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return cached=false on first call (cache miss)"},{"ancestorTitles":["E22.B - Franchise Rankings Caching (e2e)","GET /franchise/rankings"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:40:11)"],"fullName":"E22.B - Franchise Rankings Caching (e2e) GET /franchise/rankings should return cached=true on second call within TTL (cache hit)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return cached=true on second call within TTL (cache hit)"},{"ancestorTitles":["E22.B - Franchise Rankings Caching (e2e)","GET /franchise/rankings"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:40:11)"],"fullName":"E22.B - Franchise Rankings Caching (e2e) GET /franchise/rankings should return same data structure on cache hit and miss","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return same data structure on cache hit and miss"},{"ancestorTitles":["E22.B - Franchise Rankings Caching (e2e)","GET /franchise/rankings"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:40:11)"],"fullName":"E22.B - Franchise Rankings Caching (e2e) GET /franchise/rankings should cache separately for different periods","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should cache separately for different periods"},{"ancestorTitles":["E22.B - Franchise Rankings Caching (e2e)","GET /franchise/rankings"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:40:11)"],"fullName":"E22.B - Franchise Rankings Caching (e2e) GET /franchise/rankings should return error for invalid period format","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return error for invalid period format"},{"ancestorTitles":["E22.B - Franchise Rankings Caching (e2e)","GET /franchise/rankings"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts:40:11)"],"fullName":"E22.B - Franchise Rankings Caching (e2e) GET /franchise/rankings should measure response time difference between miss and hit","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should measure response time difference between miss and hit"}],"endTime":1766887822459,"message":"  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return cached=false on first call (cache miss)\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      58 |   async function setupTestData() {\n      59 |     // Create test organization\n    > 60 |     const org = await prisma.organization.create({\n         |                                           ^\n      61 |       data: {\n      62 |         name: 'E22B Test Org',\n      63 |         slug: `e22b-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)\n\n  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return cached=true on second call within TTL (cache hit)\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      58 |   async function setupTestData() {\n      59 |     // Create test organization\n    > 60 |     const org = await prisma.organization.create({\n         |                                           ^\n      61 |       data: {\n      62 |         name: 'E22B Test Org',\n      63 |         slug: `e22b-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)\n\n  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return same data structure on cache hit and miss\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      58 |   async function setupTestData() {\n      59 |     // Create test organization\n    > 60 |     const org = await prisma.organization.create({\n         |                                           ^\n      61 |       data: {\n      62 |         name: 'E22B Test Org',\n      63 |         slug: `e22b-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)\n\n  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should cache separately for different periods\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      58 |   async function setupTestData() {\n      59 |     // Create test organization\n    > 60 |     const org = await prisma.organization.create({\n         |                                           ^\n      61 |       data: {\n      62 |         name: 'E22B Test Org',\n      63 |         slug: `e22b-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)\n\n  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should return error for invalid period format\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      58 |   async function setupTestData() {\n      59 |     // Create test organization\n    > 60 |     const org = await prisma.organization.create({\n         |                                           ^\n      61 |       data: {\n      62 |         name: 'E22B Test Org',\n      63 |         slug: `e22b-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)\n\n  ● E22.B - Franchise Rankings Caching (e2e) › GET /franchise/rankings › should measure response time difference between miss and hit\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      58 |   async function setupTestData() {\n      59 |     // Create test organization\n    > 60 |     const org = await prisma.organization.create({\n         |                                           ^\n      61 |       data: {\n      62 |         name: 'E22B Test Org',\n      63 |         slug: `e22b-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-rankings-cache.e2e-spec.ts:60:43)\n      at Object.<anonymous> (e2e/franchise-rankings-cache.e2e-spec.ts:40:11)\n","name":"/workspaces/chefcloud/services/api/test/e2e/franchise-rankings-cache.e2e-spec.ts","startTime":1766887821239,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E22.C - Franchise Budgets Caching (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:42:11)"],"fullName":"E22.C - Franchise Budgets Caching (e2e) should return cached=false on first call (cache miss)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return cached=false on first call (cache miss)"},{"ancestorTitles":["E22.C - Franchise Budgets Caching (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:42:11)"],"fullName":"E22.C - Franchise Budgets Caching (e2e) should return cached=true on second call within TTL (cache hit)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return cached=true on second call within TTL (cache hit)"},{"ancestorTitles":["E22.C - Franchise Budgets Caching (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:42:11)"],"fullName":"E22.C - Franchise Budgets Caching (e2e) should maintain data structure consistency between cached and non-cached responses","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should maintain data structure consistency between cached and non-cached responses"},{"ancestorTitles":["E22.C - Franchise Budgets Caching (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:42:11)"],"fullName":"E22.C - Franchise Budgets Caching (e2e) should use different cache keys for different periods","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use different cache keys for different periods"},{"ancestorTitles":["E22.C - Franchise Budgets Caching (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:42:11)"],"fullName":"E22.C - Franchise Budgets Caching (e2e) should return error for invalid period format","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return error for invalid period format"},{"ancestorTitles":["E22.C - Franchise Budgets Caching (e2e)"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at setupTestData (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts:42:11)"],"fullName":"E22.C - Franchise Budgets Caching (e2e) cache hit should be significantly faster than cache miss","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"cache hit should be significantly faster than cache miss"}],"endTime":1766887823123,"message":"  ● E22.C - Franchise Budgets Caching (e2e) › should return cached=false on first call (cache miss)\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      60 |   async function setupTestData() {\n      61 |     // Create test organization\n    > 62 |     const org = await prisma.organization.create({\n         |                                           ^\n      63 |       data: {\n      64 |         name: 'E22C Test Org',\n      65 |         slug: `e22c-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)\n\n  ● E22.C - Franchise Budgets Caching (e2e) › should return cached=true on second call within TTL (cache hit)\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      60 |   async function setupTestData() {\n      61 |     // Create test organization\n    > 62 |     const org = await prisma.organization.create({\n         |                                           ^\n      63 |       data: {\n      64 |         name: 'E22C Test Org',\n      65 |         slug: `e22c-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)\n\n  ● E22.C - Franchise Budgets Caching (e2e) › should maintain data structure consistency between cached and non-cached responses\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      60 |   async function setupTestData() {\n      61 |     // Create test organization\n    > 62 |     const org = await prisma.organization.create({\n         |                                           ^\n      63 |       data: {\n      64 |         name: 'E22C Test Org',\n      65 |         slug: `e22c-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)\n\n  ● E22.C - Franchise Budgets Caching (e2e) › should use different cache keys for different periods\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      60 |   async function setupTestData() {\n      61 |     // Create test organization\n    > 62 |     const org = await prisma.organization.create({\n         |                                           ^\n      63 |       data: {\n      64 |         name: 'E22C Test Org',\n      65 |         slug: `e22c-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)\n\n  ● E22.C - Franchise Budgets Caching (e2e) › should return error for invalid period format\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      60 |   async function setupTestData() {\n      61 |     // Create test organization\n    > 62 |     const org = await prisma.organization.create({\n         |                                           ^\n      63 |       data: {\n      64 |         name: 'E22C Test Org',\n      65 |         slug: `e22c-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)\n\n  ● E22.C - Franchise Budgets Caching (e2e) › cache hit should be significantly faster than cache miss\n\n    TypeError: Cannot read properties of undefined (reading 'create')\n\n      60 |   async function setupTestData() {\n      61 |     // Create test organization\n    > 62 |     const org = await prisma.organization.create({\n         |                                           ^\n      63 |       data: {\n      64 |         name: 'E22C Test Org',\n      65 |         slug: `e22c-test-${Date.now()}`,\n\n      at setupTestData (e2e/franchise-budgets-cache.e2e-spec.ts:62:43)\n      at Object.<anonymous> (e2e/franchise-budgets-cache.e2e-spec.ts:42:11)\n","name":"/workspaces/chefcloud/services/api/test/e2e/franchise-budgets-cache.e2e-spec.ts","startTime":1766887822462,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should create a happy hour promotion (20% off drinks 17:00-19:00)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a happy hour promotion (20% off drinks 17:00-19:00)"},{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should list promotions (including inactive)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list promotions (including inactive)"},{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should approve the promotion","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should approve the promotion"},{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should apply discount when placing order during happy hour (18:00 on Monday)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should apply discount when placing order during happy hour (18:00 on Monday)"},{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should NOT apply discount outside happy hour (20:00)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should NOT apply discount outside happy hour (20:00)"},{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should toggle promotion inactive","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should toggle promotion inactive"},{"ancestorTitles":["E37 - Promotions & Pricing Engine (e2e)","Happy Hour Promotion Flow"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: Nest could not find given element (this provider does not exist in the current context)\n    at InstanceLinksHost.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n    at Proxy.find (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n    at Proxy.get (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts:25:18)"],"fullName":"E37 - Promotions & Pricing Engine (e2e) Happy Hour Promotion Flow should NOT apply discount when promotion is inactive","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should NOT apply discount when promotion is inactive"}],"coverage":{},"endTime":1766887842432,"message":"  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should create a happy hour promotion (20% off drinks 17:00-19:00)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should list promotions (including inactive)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should approve the promotion\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should apply discount when placing order during happy hour (18:00 on Monday)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should NOT apply discount outside happy hour (20:00)\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should toggle promotion inactive\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n  ● E37 - Promotions & Pricing Engine (e2e) › Happy Hour Promotion Flow › should NOT apply discount when promotion is inactive\n\n    Nest could not find given element (this provider does not exist in the current context)\n\n      23 |\n      24 |     app = moduleFixture.createNestApplication();\n    > 25 |     prisma = app.get<PrismaService>(PrismaService);\n         |                  ^\n      26 |     await app.init();\n      27 |\n      28 |     // Create org, user, and branch for testing\n\n      at InstanceLinksHost.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-links-host.js:15:19)\n      at Proxy.find (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/abstract-instance-resolver.js:8:60)\n      at Proxy.get (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/nest-application-context.js:70:20)\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:25:18)\n\n\n  ● Test suite failed to run\n\n    TypeError: Cannot read properties of undefined (reading 'promotionEffect')\n\n      88 |   afterAll(async () => {\n      89 |     // Clean up test data\n    > 90 |     await prisma.promotionEffect.deleteMany({ where: { promotion: { orgId } } });\n         |                  ^\n      91 |     await prisma.promotion.deleteMany({ where: { orgId } });\n      92 |     await prisma.orderItem.deleteMany({ where: { order: { branchId } } });\n      93 |     await prisma.order.deleteMany({ where: { branchId } });\n\n      at Object.<anonymous> (e37-promotions.e2e-spec.ts:90:18)\n","name":"/workspaces/chefcloud/services/api/test/e37-promotions.e2e-spec.ts","startTime":1766887842432,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Authentication & Authorization"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Authentication & Authorization GET /inventory/items should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /inventory/items should return 401 if no authorization token is provided"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Authentication & Authorization"],"duration":27,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Authentication & Authorization POST /inventory/items should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/items should return 401 if no authorization token is provided"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Authentication & Authorization"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Authentication & Authorization POST /inventory/adjustments should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/adjustments should return 401 if no authorization token is provided"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Authentication & Authorization"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Authentication & Authorization POST /inventory/wastage should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/wastage should return 401 if no authorization token is provided"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Rate Limiting"],"duration":26,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Rate Limiting Rate limiting produces >= one 429 deterministically","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 deterministically"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Basic Functionality (without auth)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Basic Functionality (without auth) should bootstrap successfully without metatype errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should bootstrap successfully without metatype errors"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Basic Functionality (without auth)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Basic Functionality (without auth) GET /inventory/items should exist (not 404)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /inventory/items should exist (not 404)"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Basic Functionality (without auth)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Basic Functionality (without auth) POST /inventory/items should validate request body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/items should validate request body"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Basic Functionality (without auth)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Basic Functionality (without auth) POST /inventory/adjustments should validate request body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/adjustments should validate request body"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Endpoint Availability"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Endpoint Availability GET /inventory/items endpoint exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /inventory/items endpoint exists"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Endpoint Availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Endpoint Availability POST /inventory/items endpoint exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/items endpoint exists"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Endpoint Availability"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Endpoint Availability GET /inventory/levels endpoint exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /inventory/levels endpoint exists"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Endpoint Availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Endpoint Availability POST /inventory/adjustments endpoint exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/adjustments endpoint exists"},{"ancestorTitles":["Inventory (Slice E2E) — Deterministic","Endpoint Availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Inventory (Slice E2E) — Deterministic Endpoint Availability POST /inventory/wastage endpoint exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /inventory/wastage endpoint exists"}],"endTime":1766887824050,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/inventory.slice.e2e-spec.ts","startTime":1766887823657,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Dev-Portal (Slice E2E) — Plan-aware limits + HMAC"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) — Plan-aware limits + HMAC GET /dev/keys without token -> 200 (test controller)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"GET /dev/keys without token -> 200 (test controller)"},{"ancestorTitles":["Dev-Portal (Slice E2E) — Plan-aware limits + HMAC"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) — Plan-aware limits + HMAC GET /dev/keys -> 200 with token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"GET /dev/keys -> 200 with token"},{"ancestorTitles":["Dev-Portal (Slice E2E) — Plan-aware limits + HMAC"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) — Plan-aware limits + HMAC POST /dev/keys -> 201 (create)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"POST /dev/keys -> 201 (create)"},{"ancestorTitles":["Dev-Portal (Slice E2E) — Plan-aware limits + HMAC"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) — Plan-aware limits + HMAC POST /dev/keys -> 400 (invalid payload)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /dev/keys -> 400 (invalid payload)"},{"ancestorTitles":["Dev-Portal (Slice E2E) — Plan-aware limits + HMAC"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) — Plan-aware limits + HMAC POST /dev/keys/key_1/revoke -> 200","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /dev/keys/key_1/revoke -> 200"},{"ancestorTitles":["Dev-Portal (Slice E2E) — Plan-aware limits + HMAC"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) — Plan-aware limits + HMAC Plan-aware limit hits 429 for free but not for pro (same burst)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Plan-aware limit hits 429 for free but not for pro (same burst)"},{"ancestorTitles":["Dev-Portal (Slice E2E) — Plan-aware limits + HMAC"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) — Plan-aware limits + HMAC POST /dev-webhook/events -> 200 { ok:true } (valid HMAC)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"POST /dev-webhook/events -> 200 { ok:true } (valid HMAC)"},{"ancestorTitles":["Dev-Portal (Slice E2E) — Plan-aware limits + HMAC"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) — Plan-aware limits + HMAC POST /dev-webhook/events -> 200 { ok:false } (bad HMAC)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /dev-webhook/events -> 200 { ok:false } (bad HMAC)"},{"ancestorTitles":["Dev-Portal (Slice E2E) — Plan-aware limits + HMAC"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) — Plan-aware limits + HMAC POST /dev-webhook/events -> 200 { ok:false } (missing signature)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /dev-webhook/events -> 200 { ok:false } (missing signature)"},{"ancestorTitles":["Dev-Portal (Slice E2E) — Plan-aware limits + HMAC"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) — Plan-aware limits + HMAC GET /dev/keys returns multiple keys with plan info","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"GET /dev/keys returns multiple keys with plan info"},{"ancestorTitles":["Dev-Portal (Slice E2E) — Plan-aware limits + HMAC"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Dev-Portal (Slice E2E) — Plan-aware limits + HMAC POST /dev/keys with pro plan -> 201","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /dev/keys with pro plan -> 201"}],"endTime":1766887824353,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/devportal.slice.e2e-spec.ts","startTime":1766887824054,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Orders (Slice E2E)"],"duration":59,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders -> 401 without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"POST /pos/orders -> 401 without token"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":52,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders -> 201 with token (creates open order)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders -> 201 with token (creates open order)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/send-to-kitchen -> 401 without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/send-to-kitchen -> 401 without token"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/modify -> 401 without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/modify -> 401 without token"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/send-to-kitchen -> 200/201 (sends to kitchen)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/send-to-kitchen -> 200/201 (sends to kitchen)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/modify -> 200 (modifies order)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/modify -> 200 (modifies order)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/void -> 200 (voids order)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/void -> 200 (voids order)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/close -> 200 (closes order)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/close -> 200 (closes order)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/discount -> 200 (applies discount)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/discount -> 200 (applies discount)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/:id/post-close-void -> 200 (voids closed order)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/:id/post-close-void -> 200 (voids closed order)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders -> 400/422 (bad payload)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders -> 400/422 (bad payload)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/invalid-id/send-to-kitchen -> 404/400 (invalid order id)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/invalid-id/send-to-kitchen -> 404/400 (invalid order id)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) POST /pos/orders/ord_001/modify -> 400/422 (bad modify payload)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /pos/orders/ord_001/modify -> 400/422 (bad modify payload)"},{"ancestorTitles":["Orders (Slice E2E)"],"duration":35,"failureDetails":[],"failureMessages":[],"fullName":"Orders (Slice E2E) Rate limiting produces >= one 429 on /pos/orders","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 on /pos/orders"}],"endTime":1766887824859,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/orders.slice.e2e-spec.ts","startTime":1766887824355,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Reservations (Slice E2E)"],"duration":37,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations -> 401 without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"GET /reservations -> 401 without token"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations -> 200 with token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /reservations -> 200 with token"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":47,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) POST /reservations -> 201 (create booking)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /reservations -> 201 (create booking)"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) POST /reservations -> 400/422 (invalid payload)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /reservations -> 400/422 (invalid payload)"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) POST /reservations/:id/confirm -> 200","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /reservations/:id/confirm -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) POST /reservations/:id/cancel -> 200","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /reservations/:id/cancel -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) POST /reservations/:id/seat -> 200","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /reservations/:id/seat -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations?status=CONFIRMED -> 200","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /reservations?status=CONFIRMED -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations?from=2025-11-13&to=2025-11-14 -> 200","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /reservations?from=2025-11-13&to=2025-11-14 -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations/summary?from=2025-11-01&to=2025-11-30 -> 200","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /reservations/summary?from=2025-11-01&to=2025-11-30 -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations-test/availability?date=2025-11-13&party=2 -> 200","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"GET /reservations-test/availability?date=2025-11-13&party=2 -> 200"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) GET /reservations-test/availability?date=2025-11-13&party=6 -> 200 (fewer slots)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"GET /reservations-test/availability?date=2025-11-13&party=6 -> 200 (fewer slots)"},{"ancestorTitles":["Reservations (Slice E2E)"],"duration":49,"failureDetails":[],"failureMessages":[],"fullName":"Reservations (Slice E2E) Rate limiting produces >= one 429 on /reservations","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 on /reservations"}],"endTime":1766887826175,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/reservations.slice.e2e-spec.ts","startTime":1766887824871,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Billing (Slice E2E) — Deterministic","Authentication & Authorization"],"duration":0,"failureDetails":[{"type":"BillingController","context":{"index":1,"dependencies":[null,null,null]},"metadata":{"id":"653f1788f21b91b6c29e0"},"moduleRef":{"id":"372fffbeb94b15a5f6005"}}],"failureMessages":["Error: Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\nPotential solutions:\n- Is BillingModule a valid NestJS module?\n- If DemoProtectionService is a provider, is it part of the current BillingModule?\n- If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n  @Module({\n    imports: [ /* the Module containing DemoProtectionService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 11)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts:24:20)"],"fullName":"Billing (Slice E2E) — Deterministic Authentication & Authorization POST /billing/plan/change should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /billing/plan/change should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing (Slice E2E) — Deterministic","Authentication & Authorization"],"duration":1,"failureDetails":[{"type":"BillingController","context":{"index":1,"dependencies":[null,null,null]},"metadata":{"id":"653f1788f21b91b6c29e0"},"moduleRef":{"id":"372fffbeb94b15a5f6005"}}],"failureMessages":["Error: Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\nPotential solutions:\n- Is BillingModule a valid NestJS module?\n- If DemoProtectionService is a provider, is it part of the current BillingModule?\n- If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n  @Module({\n    imports: [ /* the Module containing DemoProtectionService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 11)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts:24:20)"],"fullName":"Billing (Slice E2E) — Deterministic Authentication & Authorization POST /billing/cancel should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /billing/cancel should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing (Slice E2E) — Deterministic","Authentication & Authorization"],"duration":0,"failureDetails":[{"type":"BillingController","context":{"index":1,"dependencies":[null,null,null]},"metadata":{"id":"653f1788f21b91b6c29e0"},"moduleRef":{"id":"372fffbeb94b15a5f6005"}}],"failureMessages":["Error: Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\nPotential solutions:\n- Is BillingModule a valid NestJS module?\n- If DemoProtectionService is a provider, is it part of the current BillingModule?\n- If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n  @Module({\n    imports: [ /* the Module containing DemoProtectionService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 11)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts:24:20)"],"fullName":"Billing (Slice E2E) — Deterministic Authentication & Authorization GET /billing/subscription should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /billing/subscription should return 401 if no authorization token is provided"},{"ancestorTitles":["Billing (Slice E2E) — Deterministic","Rate Limiting"],"duration":0,"failureDetails":[{"type":"BillingController","context":{"index":1,"dependencies":[null,null,null]},"metadata":{"id":"653f1788f21b91b6c29e0"},"moduleRef":{"id":"372fffbeb94b15a5f6005"}}],"failureMessages":["Error: Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\nPotential solutions:\n- Is BillingModule a valid NestJS module?\n- If DemoProtectionService is a provider, is it part of the current BillingModule?\n- If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n  @Module({\n    imports: [ /* the Module containing DemoProtectionService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 11)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts:24:20)"],"fullName":"Billing (Slice E2E) — Deterministic Rate Limiting Rate limiting produces >= one 429 deterministically","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Rate limiting produces >= one 429 deterministically"},{"ancestorTitles":["Billing (Slice E2E) — Deterministic","Basic Functionality (without auth)"],"duration":0,"failureDetails":[{"type":"BillingController","context":{"index":1,"dependencies":[null,null,null]},"metadata":{"id":"653f1788f21b91b6c29e0"},"moduleRef":{"id":"372fffbeb94b15a5f6005"}}],"failureMessages":["Error: Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\nPotential solutions:\n- Is BillingModule a valid NestJS module?\n- If DemoProtectionService is a provider, is it part of the current BillingModule?\n- If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n  @Module({\n    imports: [ /* the Module containing DemoProtectionService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 11)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts:24:20)"],"fullName":"Billing (Slice E2E) — Deterministic Basic Functionality (without auth) should bootstrap successfully without metatype errors","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should bootstrap successfully without metatype errors"},{"ancestorTitles":["Billing (Slice E2E) — Deterministic","Basic Functionality (without auth)"],"duration":0,"failureDetails":[{"type":"BillingController","context":{"index":1,"dependencies":[null,null,null]},"metadata":{"id":"653f1788f21b91b6c29e0"},"moduleRef":{"id":"372fffbeb94b15a5f6005"}}],"failureMessages":["Error: Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\nPotential solutions:\n- Is BillingModule a valid NestJS module?\n- If DemoProtectionService is a provider, is it part of the current BillingModule?\n- If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n  @Module({\n    imports: [ /* the Module containing DemoProtectionService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 11)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts:24:20)"],"fullName":"Billing (Slice E2E) — Deterministic Basic Functionality (without auth) should have billing controller mounted at /billing","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have billing controller mounted at /billing"},{"ancestorTitles":["Billing (Slice E2E) — Deterministic","Basic Functionality (without auth)"],"duration":0,"failureDetails":[{"type":"BillingController","context":{"index":1,"dependencies":[null,null,null]},"metadata":{"id":"653f1788f21b91b6c29e0"},"moduleRef":{"id":"372fffbeb94b15a5f6005"}}],"failureMessages":["Error: Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\nPotential solutions:\n- Is BillingModule a valid NestJS module?\n- If DemoProtectionService is a provider, is it part of the current BillingModule?\n- If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n  @Module({\n    imports: [ /* the Module containing DemoProtectionService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 11)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts:24:20)"],"fullName":"Billing (Slice E2E) — Deterministic Basic Functionality (without auth) POST /billing/plan/change should validate request body","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /billing/plan/change should validate request body"},{"ancestorTitles":["Billing (Slice E2E) — Deterministic","Basic Functionality (without auth)"],"duration":0,"failureDetails":[{"type":"BillingController","context":{"index":1,"dependencies":[null,null,null]},"metadata":{"id":"653f1788f21b91b6c29e0"},"moduleRef":{"id":"372fffbeb94b15a5f6005"}}],"failureMessages":["Error: Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\nPotential solutions:\n- Is BillingModule a valid NestJS module?\n- If DemoProtectionService is a provider, is it part of the current BillingModule?\n- If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n  @Module({\n    imports: [ /* the Module containing DemoProtectionService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 11)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts:24:20)"],"fullName":"Billing (Slice E2E) — Deterministic Basic Functionality (without auth) POST /billing/cancel should be idempotent","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /billing/cancel should be idempotent"},{"ancestorTitles":["Billing (Slice E2E) — Deterministic","Endpoint Availability"],"duration":0,"failureDetails":[{"type":"BillingController","context":{"index":1,"dependencies":[null,null,null]},"metadata":{"id":"653f1788f21b91b6c29e0"},"moduleRef":{"id":"372fffbeb94b15a5f6005"}}],"failureMessages":["Error: Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\nPotential solutions:\n- Is BillingModule a valid NestJS module?\n- If DemoProtectionService is a provider, is it part of the current BillingModule?\n- If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n  @Module({\n    imports: [ /* the Module containing DemoProtectionService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 11)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts:24:20)"],"fullName":"Billing (Slice E2E) — Deterministic Endpoint Availability GET /billing/subscription endpoint exists","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /billing/subscription endpoint exists"},{"ancestorTitles":["Billing (Slice E2E) — Deterministic","Endpoint Availability"],"duration":0,"failureDetails":[{"type":"BillingController","context":{"index":1,"dependencies":[null,null,null]},"metadata":{"id":"653f1788f21b91b6c29e0"},"moduleRef":{"id":"372fffbeb94b15a5f6005"}}],"failureMessages":["Error: Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\nPotential solutions:\n- Is BillingModule a valid NestJS module?\n- If DemoProtectionService is a provider, is it part of the current BillingModule?\n- If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n  @Module({\n    imports: [ /* the Module containing DemoProtectionService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 11)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts:24:20)"],"fullName":"Billing (Slice E2E) — Deterministic Endpoint Availability POST /billing/plan/change endpoint exists","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /billing/plan/change endpoint exists"},{"ancestorTitles":["Billing (Slice E2E) — Deterministic","Endpoint Availability"],"duration":0,"failureDetails":[{"type":"BillingController","context":{"index":1,"dependencies":[null,null,null]},"metadata":{"id":"653f1788f21b91b6c29e0"},"moduleRef":{"id":"372fffbeb94b15a5f6005"}}],"failureMessages":["Error: Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\nPotential solutions:\n- Is BillingModule a valid NestJS module?\n- If DemoProtectionService is a provider, is it part of the current BillingModule?\n- If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n  @Module({\n    imports: [ /* the Module containing DemoProtectionService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 11)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts:24:20)"],"fullName":"Billing (Slice E2E) — Deterministic Endpoint Availability POST /billing/cancel endpoint exists","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /billing/cancel endpoint exists"}],"endTime":1766887827092,"message":"  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › POST /billing/plan/change should return 401 if no authorization token is provided\n\n    Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\n    Potential solutions:\n    - Is BillingModule a valid NestJS module?\n    - If DemoProtectionService is a provider, is it part of the current BillingModule?\n    - If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n      @Module({\n        imports: [ /* the Module containing DemoProtectionService */ ]\n      })\n\n      22 |\n      23 |   beforeAll(async () => {\n    > 24 |     const modRef = await createE2ETestingModuleBuilder({\n         |                    ^\n      25 |       imports: [\n      26 |         ConfigModule.forRoot({ isGlobal: true }),\n      27 |         \n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 11)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)\n\n  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › POST /billing/cancel should return 401 if no authorization token is provided\n\n    Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\n    Potential solutions:\n    - Is BillingModule a valid NestJS module?\n    - If DemoProtectionService is a provider, is it part of the current BillingModule?\n    - If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n      @Module({\n        imports: [ /* the Module containing DemoProtectionService */ ]\n      })\n\n      22 |\n      23 |   beforeAll(async () => {\n    > 24 |     const modRef = await createE2ETestingModuleBuilder({\n         |                    ^\n      25 |       imports: [\n      26 |         ConfigModule.forRoot({ isGlobal: true }),\n      27 |         \n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 11)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)\n\n  ● Billing (Slice E2E) — Deterministic › Authentication & Authorization › GET /billing/subscription should return 401 if no authorization token is provided\n\n    Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\n    Potential solutions:\n    - Is BillingModule a valid NestJS module?\n    - If DemoProtectionService is a provider, is it part of the current BillingModule?\n    - If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n      @Module({\n        imports: [ /* the Module containing DemoProtectionService */ ]\n      })\n\n      22 |\n      23 |   beforeAll(async () => {\n    > 24 |     const modRef = await createE2ETestingModuleBuilder({\n         |                    ^\n      25 |       imports: [\n      26 |         ConfigModule.forRoot({ isGlobal: true }),\n      27 |         \n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 11)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)\n\n  ● Billing (Slice E2E) — Deterministic › Rate Limiting › Rate limiting produces >= one 429 deterministically\n\n    Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\n    Potential solutions:\n    - Is BillingModule a valid NestJS module?\n    - If DemoProtectionService is a provider, is it part of the current BillingModule?\n    - If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n      @Module({\n        imports: [ /* the Module containing DemoProtectionService */ ]\n      })\n\n      22 |\n      23 |   beforeAll(async () => {\n    > 24 |     const modRef = await createE2ETestingModuleBuilder({\n         |                    ^\n      25 |       imports: [\n      26 |         ConfigModule.forRoot({ isGlobal: true }),\n      27 |         \n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 11)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)\n\n  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › should bootstrap successfully without metatype errors\n\n    Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\n    Potential solutions:\n    - Is BillingModule a valid NestJS module?\n    - If DemoProtectionService is a provider, is it part of the current BillingModule?\n    - If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n      @Module({\n        imports: [ /* the Module containing DemoProtectionService */ ]\n      })\n\n      22 |\n      23 |   beforeAll(async () => {\n    > 24 |     const modRef = await createE2ETestingModuleBuilder({\n         |                    ^\n      25 |       imports: [\n      26 |         ConfigModule.forRoot({ isGlobal: true }),\n      27 |         \n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 11)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)\n\n  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › should have billing controller mounted at /billing\n\n    Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\n    Potential solutions:\n    - Is BillingModule a valid NestJS module?\n    - If DemoProtectionService is a provider, is it part of the current BillingModule?\n    - If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n      @Module({\n        imports: [ /* the Module containing DemoProtectionService */ ]\n      })\n\n      22 |\n      23 |   beforeAll(async () => {\n    > 24 |     const modRef = await createE2ETestingModuleBuilder({\n         |                    ^\n      25 |       imports: [\n      26 |         ConfigModule.forRoot({ isGlobal: true }),\n      27 |         \n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 11)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)\n\n  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /billing/plan/change should validate request body\n\n    Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\n    Potential solutions:\n    - Is BillingModule a valid NestJS module?\n    - If DemoProtectionService is a provider, is it part of the current BillingModule?\n    - If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n      @Module({\n        imports: [ /* the Module containing DemoProtectionService */ ]\n      })\n\n      22 |\n      23 |   beforeAll(async () => {\n    > 24 |     const modRef = await createE2ETestingModuleBuilder({\n         |                    ^\n      25 |       imports: [\n      26 |         ConfigModule.forRoot({ isGlobal: true }),\n      27 |         \n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 11)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)\n\n  ● Billing (Slice E2E) — Deterministic › Basic Functionality (without auth) › POST /billing/cancel should be idempotent\n\n    Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\n    Potential solutions:\n    - Is BillingModule a valid NestJS module?\n    - If DemoProtectionService is a provider, is it part of the current BillingModule?\n    - If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n      @Module({\n        imports: [ /* the Module containing DemoProtectionService */ ]\n      })\n\n      22 |\n      23 |   beforeAll(async () => {\n    > 24 |     const modRef = await createE2ETestingModuleBuilder({\n         |                    ^\n      25 |       imports: [\n      26 |         ConfigModule.forRoot({ isGlobal: true }),\n      27 |         \n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 11)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)\n\n  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › GET /billing/subscription endpoint exists\n\n    Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\n    Potential solutions:\n    - Is BillingModule a valid NestJS module?\n    - If DemoProtectionService is a provider, is it part of the current BillingModule?\n    - If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n      @Module({\n        imports: [ /* the Module containing DemoProtectionService */ ]\n      })\n\n      22 |\n      23 |   beforeAll(async () => {\n    > 24 |     const modRef = await createE2ETestingModuleBuilder({\n         |                    ^\n      25 |       imports: [\n      26 |         ConfigModule.forRoot({ isGlobal: true }),\n      27 |         \n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 11)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)\n\n  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › POST /billing/plan/change endpoint exists\n\n    Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\n    Potential solutions:\n    - Is BillingModule a valid NestJS module?\n    - If DemoProtectionService is a provider, is it part of the current BillingModule?\n    - If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n      @Module({\n        imports: [ /* the Module containing DemoProtectionService */ ]\n      })\n\n      22 |\n      23 |   beforeAll(async () => {\n    > 24 |     const modRef = await createE2ETestingModuleBuilder({\n         |                    ^\n      25 |       imports: [\n      26 |         ConfigModule.forRoot({ isGlobal: true }),\n      27 |         \n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 11)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)\n\n  ● Billing (Slice E2E) — Deterministic › Endpoint Availability › POST /billing/cancel endpoint exists\n\n    Nest can't resolve dependencies of the BillingController (BillingService, ?, PrismaService). Please make sure that the argument DemoProtectionService at index [1] is available in the BillingModule context.\n\n    Potential solutions:\n    - Is BillingModule a valid NestJS module?\n    - If DemoProtectionService is a provider, is it part of the current BillingModule?\n    - If DemoProtectionService is exported from a separate @Module, is that module imported within BillingModule?\n      @Module({\n        imports: [ /* the Module containing DemoProtectionService */ ]\n      })\n\n      22 |\n      23 |   beforeAll(async () => {\n    > 24 |     const modRef = await createE2ETestingModuleBuilder({\n         |                    ^\n      25 |       imports: [\n      26 |         ConfigModule.forRoot({ isGlobal: true }),\n      27 |         \n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 11)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/billing.slice.e2e-spec.ts:24:20)\n","name":"/workspaces/chefcloud/services/api/test/e2e/billing.slice.e2e-spec.ts","startTime":1766887826184,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["KDS (Slice E2E)"],"duration":56,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) GET /kds-test/tickets without token -> 200 (test controller)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"GET /kds-test/tickets without token -> 200 (test controller)"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":46,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) GET /kds-test/tickets -> 200 with token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"GET /kds-test/tickets -> 200 with token"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) GET /kds-test/tickets/tkt-001 -> 200","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /kds-test/tickets/tkt-001 -> 200"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) GET /kds-test/tickets/tkt-missing -> 404","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /kds-test/tickets/tkt-missing -> 404"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) POST /kds-test/tickets/tkt-001/ack -> 200 (ACK)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /kds-test/tickets/tkt-001/ack -> 200 (ACK)"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) POST /kds-test/tickets/tkt-001/bump -> 200 (BUMPED)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /kds-test/tickets/tkt-001/bump -> 200 (BUMPED)"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) POST /kds-test/tickets/tkt-001/expo -> 200 (EXPO)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /kds-test/tickets/tkt-001/expo -> 200 (EXPO)"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) POST /kds-test/screens/scr-001/heartbeat -> 200","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /kds-test/screens/scr-001/heartbeat -> 200"},{"ancestorTitles":["KDS (Slice E2E)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"KDS (Slice E2E) Rate limiting produces >= one 429 on /kds-test/tickets","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 on /kds-test/tickets"}],"endTime":1766887828652,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/kds.slice.e2e-spec.ts","startTime":1766887827218,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Transfer Invalidation (Slice E2E) — E22.D"],"duration":0,"failureDetails":[{"type":"TransferEventsTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"62ea403cc74a28c266f9a"},"moduleRef":{"id":"5a9218236a542a611b62e"}}],"failureMessages":["Error: Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\nPotential solutions:\n- Is TransferEventsTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 6)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)"],"fullName":"Transfer Invalidation (Slice E2E) — E22.D POST /transfer-test/event -> 401 without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /transfer-test/event -> 401 without token"},{"ancestorTitles":["Transfer Invalidation (Slice E2E) — E22.D"],"duration":0,"failureDetails":[{"type":"TransferEventsTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"62ea403cc74a28c266f9a"},"moduleRef":{"id":"5a9218236a542a611b62e"}}],"failureMessages":["Error: Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\nPotential solutions:\n- Is TransferEventsTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 6)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)"],"fullName":"Transfer Invalidation (Slice E2E) — E22.D POST /transfer-test/event -> 200 {ok:false} on invalid payload","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /transfer-test/event -> 200 {ok:false} on invalid payload"},{"ancestorTitles":["Transfer Invalidation (Slice E2E) — E22.D"],"duration":0,"failureDetails":[{"type":"TransferEventsTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"62ea403cc74a28c266f9a"},"moduleRef":{"id":"5a9218236a542a611b62e"}}],"failureMessages":["Error: Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\nPotential solutions:\n- Is TransferEventsTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 6)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)"],"fullName":"Transfer Invalidation (Slice E2E) — E22.D HIT → transfer.changed → MISS (forecast cache proves invalidation)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"HIT → transfer.changed → MISS (forecast cache proves invalidation)"},{"ancestorTitles":["Transfer Invalidation (Slice E2E) — E22.D"],"duration":0,"failureDetails":[{"type":"TransferEventsTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"62ea403cc74a28c266f9a"},"moduleRef":{"id":"5a9218236a542a611b62e"}}],"failureMessages":["Error: Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\nPotential solutions:\n- Is TransferEventsTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 6)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)"],"fullName":"Transfer Invalidation (Slice E2E) — E22.D Idempotency: repeating same event still returns ok:true","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Idempotency: repeating same event still returns ok:true"},{"ancestorTitles":["Transfer Invalidation (Slice E2E) — E22.D"],"duration":0,"failureDetails":[{"type":"TransferEventsTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"62ea403cc74a28c266f9a"},"moduleRef":{"id":"5a9218236a542a611b62e"}}],"failureMessages":["Error: Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\nPotential solutions:\n- Is TransferEventsTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 6)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)"],"fullName":"Transfer Invalidation (Slice E2E) — E22.D Deterministic rate limit: >= one 429 on /forecast-test/sales","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Deterministic rate limit: >= one 429 on /forecast-test/sales"}],"endTime":1766887828826,"message":"  ● Transfer Invalidation (Slice E2E) — E22.D › POST /transfer-test/event -> 401 without token\n\n    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\n    Potential solutions:\n    - Is TransferEventsTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     const modRef = await createE2ETestingModule({\n         |                    ^\n      23 |       imports: [\n      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,\n      25 |         // test-only modules\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 6)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)\n\n  ● Transfer Invalidation (Slice E2E) — E22.D › POST /transfer-test/event -> 200 {ok:false} on invalid payload\n\n    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\n    Potential solutions:\n    - Is TransferEventsTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     const modRef = await createE2ETestingModule({\n         |                    ^\n      23 |       imports: [\n      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,\n      25 |         // test-only modules\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 6)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)\n\n  ● Transfer Invalidation (Slice E2E) — E22.D › HIT → transfer.changed → MISS (forecast cache proves invalidation)\n\n    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\n    Potential solutions:\n    - Is TransferEventsTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     const modRef = await createE2ETestingModule({\n         |                    ^\n      23 |       imports: [\n      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,\n      25 |         // test-only modules\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 6)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)\n\n  ● Transfer Invalidation (Slice E2E) — E22.D › Idempotency: repeating same event still returns ok:true\n\n    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\n    Potential solutions:\n    - Is TransferEventsTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     const modRef = await createE2ETestingModule({\n         |                    ^\n      23 |       imports: [\n      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,\n      25 |         // test-only modules\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 6)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)\n\n  ● Transfer Invalidation (Slice E2E) — E22.D › Deterministic rate limit: >= one 429 on /forecast-test/sales\n\n    Nest can't resolve dependencies of the TransferEventsTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the TransferEventsTestModule context.\n\n    Potential solutions:\n    - Is TransferEventsTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current TransferEventsTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within TransferEventsTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     const modRef = await createE2ETestingModule({\n         |                    ^\n      23 |       imports: [\n      24 |         // minimal prod deps for parityObservabilityModule, AuthModule,\n      25 |         // test-only modules\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 6)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/transfer.invalidation.slice.e2e-spec.ts:22:20)\n","name":"/workspaces/chefcloud/services/api/test/e2e/transfer.invalidation.slice.e2e-spec.ts","startTime":1766887828655,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["PosModule isolation test"],"duration":14,"failureDetails":[{"type":"InventoryService","context":{"index":1,"dependencies":[null,null,"KpisService"]},"metadata":{"id":"f257b0a206c33921c1143"},"moduleRef":{"id":"fd503a18366929fce057a"}}],"failureMessages":["Error: Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.\n\nPotential solutions:\n- Is InventoryModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current InventoryModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadProvider (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13\n    at async Promise.all (index 3)\n    at TestingInstanceLoader.createInstancesOfProviders (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13\n    at async Promise.all (index 5)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/pos-isolation.e2e-spec.ts:10:23)"],"fullName":"PosModule isolation test should compile PosModule to show exact failing provider","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should compile PosModule to show exact failing provider"}],"endTime":1766887829094,"message":"  ● PosModule isolation test › should compile PosModule to show exact failing provider\n\n    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.\n\n    Potential solutions:\n    - Is InventoryModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n       8 | describe('PosModule isolation test', () => {\n       9 |   it('should compile PosModule to show exact failing provider', async () => {\n    > 10 |     const moduleRef = await createE2ETestingModule({\n         |                       ^\n      11 |       imports: [PosModule],\n      12 |     });\n      13 |     await moduleRef.init();\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13\n          at async Promise.all (index 5)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/pos-isolation.e2e-spec.ts:10:23)\n","name":"/workspaces/chefcloud/services/api/test/e2e/pos-isolation.e2e-spec.ts","startTime":1766887828834,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["PosModule imports bisect"],"duration":19,"failureDetails":[{"type":"EfrisService","context":{"index":1,"dependencies":[null,null]},"metadata":{"id":"a0177d423d15eefed0949"},"moduleRef":{"id":"af9a4aa2a74c1600b3926"}}],"failureMessages":["Error: Nest can't resolve dependencies of the EfrisService (PrismaService, ?). Please make sure that the argument ConfigService at index [1] is available in the EfrisModule context.\n\nPotential solutions:\n- Is EfrisModule a valid NestJS module?\n- If ConfigService is a provider, is it part of the current EfrisModule?\n- If ConfigService is exported from a separate @Module, is that module imported within EfrisModule?\n  @Module({\n    imports: [ /* the Module containing ConfigService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadProvider (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13\n    at async Promise.all (index 3)\n    at TestingInstanceLoader.createInstancesOfProviders (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13\n    at async Promise.all (index 2)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/pos-imports-bisect.e2e-spec.ts:16:23)"],"fullName":"PosModule imports bisect should test all PosModule imports together","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should test all PosModule imports together"}],"endTime":1766887829326,"message":"  ● PosModule imports bisect › should test all PosModule imports together\n\n    Nest can't resolve dependencies of the EfrisService (PrismaService, ?). Please make sure that the argument ConfigService at index [1] is available in the EfrisModule context.\n\n    Potential solutions:\n    - Is EfrisModule a valid NestJS module?\n    - If ConfigService is a provider, is it part of the current EfrisModule?\n    - If ConfigService is exported from a separate @Module, is that module imported within EfrisModule?\n      @Module({\n        imports: [ /* the Module containing ConfigService */ ]\n      })\n\n      14 | describe('PosModule imports bisect', () => {\n      15 |   it('should test all PosModule imports together', async () => {\n    > 16 |     const moduleRef = await createE2ETestingModule({\n         |                       ^\n      17 |       imports: [\n      18 |         EfrisModule,\n      19 |         ConfigModule,\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13\n          at async Promise.all (index 2)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/pos-imports-bisect.e2e-spec.ts:16:23)\n","name":"/workspaces/chefcloud/services/api/test/e2e/pos-imports-bisect.e2e-spec.ts","startTime":1766887829104,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Franchise (Slice E2E)"],"duration":0,"failureDetails":[{"type":"FranchiseInvalidationTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"d6bcf71ea095857f103e5"},"moduleRef":{"id":"b7b9a0186f9c99f2ad6bc"}}],"failureMessages":["Error: Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\nPotential solutions:\n- Is FranchiseInvalidationTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 5)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise.slice.e2e-spec.ts:112:23)"],"fullName":"Franchise (Slice E2E) GET /franchise/overview -> 401 without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /franchise/overview -> 401 without token"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":0,"failureDetails":[{"type":"FranchiseInvalidationTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"d6bcf71ea095857f103e5"},"moduleRef":{"id":"b7b9a0186f9c99f2ad6bc"}}],"failureMessages":["Error: Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\nPotential solutions:\n- Is FranchiseInvalidationTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 5)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise.slice.e2e-spec.ts:112:23)"],"fullName":"Franchise (Slice E2E) GET /franchise/overview -> 200","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /franchise/overview -> 200"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":0,"failureDetails":[{"type":"FranchiseInvalidationTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"d6bcf71ea095857f103e5"},"moduleRef":{"id":"b7b9a0186f9c99f2ad6bc"}}],"failureMessages":["Error: Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\nPotential solutions:\n- Is FranchiseInvalidationTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 5)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise.slice.e2e-spec.ts:112:23)"],"fullName":"Franchise (Slice E2E) GET /franchise/rankings -> 200","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /franchise/rankings -> 200"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":0,"failureDetails":[{"type":"FranchiseInvalidationTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"d6bcf71ea095857f103e5"},"moduleRef":{"id":"b7b9a0186f9c99f2ad6bc"}}],"failureMessages":["Error: Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\nPotential solutions:\n- Is FranchiseInvalidationTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 5)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise.slice.e2e-spec.ts:112:23)"],"fullName":"Franchise (Slice E2E) GET /franchise/budgets -> 200","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /franchise/budgets -> 200"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":0,"failureDetails":[{"type":"FranchiseInvalidationTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"d6bcf71ea095857f103e5"},"moduleRef":{"id":"b7b9a0186f9c99f2ad6bc"}}],"failureMessages":["Error: Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\nPotential solutions:\n- Is FranchiseInvalidationTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 5)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise.slice.e2e-spec.ts:112:23)"],"fullName":"Franchise (Slice E2E) Two reads of /franchise/overview return consistent payload shape","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Two reads of /franchise/overview return consistent payload shape"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":0,"failureDetails":[{"type":"FranchiseInvalidationTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"d6bcf71ea095857f103e5"},"moduleRef":{"id":"b7b9a0186f9c99f2ad6bc"}}],"failureMessages":["Error: Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\nPotential solutions:\n- Is FranchiseInvalidationTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 5)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise.slice.e2e-spec.ts:112:23)"],"fullName":"Franchise (Slice E2E) POST /franchise-test/invalidate -> { ok:true }","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"POST /franchise-test/invalidate -> { ok:true }"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":0,"failureDetails":[{"type":"FranchiseInvalidationTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"d6bcf71ea095857f103e5"},"moduleRef":{"id":"b7b9a0186f9c99f2ad6bc"}}],"failureMessages":["Error: Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\nPotential solutions:\n- Is FranchiseInvalidationTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 5)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise.slice.e2e-spec.ts:112:23)"],"fullName":"Franchise (Slice E2E) GET /franchise/overview after invalidation -> 200","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /franchise/overview after invalidation -> 200"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":0,"failureDetails":[{"type":"FranchiseInvalidationTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"d6bcf71ea095857f103e5"},"moduleRef":{"id":"b7b9a0186f9c99f2ad6bc"}}],"failureMessages":["Error: Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\nPotential solutions:\n- Is FranchiseInvalidationTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 5)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise.slice.e2e-spec.ts:112:23)"],"fullName":"Franchise (Slice E2E) GET /franchise/forecast/items -> 200","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"GET /franchise/forecast/items -> 200"},{"ancestorTitles":["Franchise (Slice E2E)"],"duration":0,"failureDetails":[{"type":"FranchiseInvalidationTestController","context":{"index":0,"dependencies":[null]},"metadata":{"id":"d6bcf71ea095857f103e5"},"moduleRef":{"id":"b7b9a0186f9c99f2ad6bc"}}],"failureMessages":["Error: Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\nPotential solutions:\n- Is FranchiseInvalidationTestModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadController (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n    at async Promise.all (index 0)\n    at TestingInstanceLoader.createInstancesOfControllers (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n    at async Promise.all (index 5)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/franchise.slice.e2e-spec.ts:112:23)"],"fullName":"Franchise (Slice E2E) Rate limiting produces >= one 429 on /franchise/overview","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Rate limiting produces >= one 429 on /franchise/overview"}],"endTime":1766887829517,"message":"  ● Franchise (Slice E2E) › GET /franchise/overview -> 401 without token\n\n    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\n    Potential solutions:\n    - Is FranchiseInvalidationTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      110 |\n      111 |   beforeAll(async () => {\n    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({\n          |                       ^\n      113 |       imports: [\n      114 |         ThrottlerTestModule,\n      115 |         PrismaTestModule,\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 5)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)\n\n  ● Franchise (Slice E2E) › GET /franchise/overview -> 200\n\n    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\n    Potential solutions:\n    - Is FranchiseInvalidationTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      110 |\n      111 |   beforeAll(async () => {\n    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({\n          |                       ^\n      113 |       imports: [\n      114 |         ThrottlerTestModule,\n      115 |         PrismaTestModule,\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 5)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)\n\n  ● Franchise (Slice E2E) › GET /franchise/rankings -> 200\n\n    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\n    Potential solutions:\n    - Is FranchiseInvalidationTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      110 |\n      111 |   beforeAll(async () => {\n    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({\n          |                       ^\n      113 |       imports: [\n      114 |         ThrottlerTestModule,\n      115 |         PrismaTestModule,\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 5)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)\n\n  ● Franchise (Slice E2E) › GET /franchise/budgets -> 200\n\n    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\n    Potential solutions:\n    - Is FranchiseInvalidationTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      110 |\n      111 |   beforeAll(async () => {\n    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({\n          |                       ^\n      113 |       imports: [\n      114 |         ThrottlerTestModule,\n      115 |         PrismaTestModule,\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 5)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)\n\n  ● Franchise (Slice E2E) › Two reads of /franchise/overview return consistent payload shape\n\n    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\n    Potential solutions:\n    - Is FranchiseInvalidationTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      110 |\n      111 |   beforeAll(async () => {\n    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({\n          |                       ^\n      113 |       imports: [\n      114 |         ThrottlerTestModule,\n      115 |         PrismaTestModule,\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 5)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)\n\n  ● Franchise (Slice E2E) › POST /franchise-test/invalidate -> { ok:true }\n\n    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\n    Potential solutions:\n    - Is FranchiseInvalidationTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      110 |\n      111 |   beforeAll(async () => {\n    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({\n          |                       ^\n      113 |       imports: [\n      114 |         ThrottlerTestModule,\n      115 |         PrismaTestModule,\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 5)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)\n\n  ● Franchise (Slice E2E) › GET /franchise/overview after invalidation -> 200\n\n    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\n    Potential solutions:\n    - Is FranchiseInvalidationTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      110 |\n      111 |   beforeAll(async () => {\n    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({\n          |                       ^\n      113 |       imports: [\n      114 |         ThrottlerTestModule,\n      115 |         PrismaTestModule,\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 5)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)\n\n  ● Franchise (Slice E2E) › GET /franchise/forecast/items -> 200\n\n    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\n    Potential solutions:\n    - Is FranchiseInvalidationTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      110 |\n      111 |   beforeAll(async () => {\n    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({\n          |                       ^\n      113 |       imports: [\n      114 |         ThrottlerTestModule,\n      115 |         PrismaTestModule,\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 5)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)\n\n  ● Franchise (Slice E2E) › Rate limiting produces >= one 429 on /franchise/overview\n\n    Nest can't resolve dependencies of the FranchiseInvalidationTestController (?). Please make sure that the argument CacheInvalidationService at index [0] is available in the FranchiseInvalidationTestModule context.\n\n    Potential solutions:\n    - Is FranchiseInvalidationTestModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current FranchiseInvalidationTestModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within FranchiseInvalidationTestModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n      110 |\n      111 |   beforeAll(async () => {\n    > 112 |     const moduleRef = await createE2ETestingModuleBuilder({\n          |                       ^\n      113 |       imports: [\n      114 |         ThrottlerTestModule,\n      115 |         PrismaTestModule,\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 0)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadController (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:88:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:68:13\n          at async Promise.all (index 0)\n      at TestingInstanceLoader.createInstancesOfControllers (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:67:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:42:13\n          at async Promise.all (index 5)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/franchise.slice.e2e-spec.ts:112:23)\n","name":"/workspaces/chefcloud/services/api/test/e2e/franchise.slice.e2e-spec.ts","startTime":1766887829329,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["InventoryModule + KpisModule test"],"duration":10,"failureDetails":[{"type":"InventoryService","context":{"index":1,"dependencies":[null,null,"KpisService"]},"metadata":{"id":"69163a1ae6416f3646a45"},"moduleRef":{"id":"e5730a4b98e577e69163a"}}],"failureMessages":["Error: Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.\n\nPotential solutions:\n- Is InventoryModule a valid NestJS module?\n- If CacheInvalidationService is a provider, is it part of the current InventoryModule?\n- If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?\n  @Module({\n    imports: [ /* the Module containing CacheInvalidationService */ ]\n  })\n\n    at TestingInjector.lookupComponentInParentModules (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n    at runNextTicks (node:internal/process/task_queues:60:5)\n    at processImmediate (node:internal/timers:454:9)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n    at TestingInjector.resolveComponentInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n    at resolveParam (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n    at async Promise.all (index 1)\n    at TestingInjector.resolveConstructorParams (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n    at TestingInjector.loadInstance (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n    at TestingInjector.loadProvider (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13\n    at async Promise.all (index 3)\n    at TestingInstanceLoader.createInstancesOfProviders (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)\n    at /workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13\n    at async Promise.all (index 2)\n    at TestingInstanceLoader.createInstances (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (/workspaces/chefcloud/node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n    at Object.<anonymous> (/workspaces/chefcloud/services/api/test/e2e/inventory-kpis.e2e-spec.ts:10:23)"],"fullName":"InventoryModule + KpisModule test should compile these modules together","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should compile these modules together"}],"endTime":1766887829712,"message":"  ● InventoryModule + KpisModule test › should compile these modules together\n\n    Nest can't resolve dependencies of the InventoryService (PrismaService, ?, KpisService). Please make sure that the argument CacheInvalidationService at index [1] is available in the InventoryModule context.\n\n    Potential solutions:\n    - Is InventoryModule a valid NestJS module?\n    - If CacheInvalidationService is a provider, is it part of the current InventoryModule?\n    - If CacheInvalidationService is exported from a separate @Module, is that module imported within InventoryModule?\n      @Module({\n        imports: [ /* the Module containing CacheInvalidationService */ ]\n      })\n\n       8 | describe('InventoryModule + KpisModule test', () => {\n       9 |   it('should compile these modules together', async () => {\n    > 10 |     const moduleRef = await createE2ETestingModule({\n         |                       ^\n      11 |       imports: [InventoryModule, KpisModule],\n      12 |     });\n      13 |     await moduleRef.init();\n\n      at TestingInjector.lookupComponentInParentModules (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:254:19)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:207:33)\n      at TestingInjector.resolveComponentInstance (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-injector.js:19:45)\n      at resolveParam (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:128:38)\n          at async Promise.all (index 1)\n      at TestingInjector.resolveConstructorParams (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:143:27)\n      at TestingInjector.loadInstance (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:70:13)\n      at TestingInjector.loadProvider (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/injector.js:97:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:56:13\n          at async Promise.all (index 3)\n      at TestingInstanceLoader.createInstancesOfProviders (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:55:9)\n      at ../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:40:13\n          at async Promise.all (index 2)\n      at TestingInstanceLoader.createInstances (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:39:9)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+core@10.3.0_@nestjs+common@10.3.0_@nestjs+platform-express@10.3.0_@nestjs+websockets@_ugkchwxeouhkyngielvgnjajde/node_modules/@nestjs/core/injector/instance-loader.js:22:13)\n      at TestingInstanceLoader.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-instance-loader.js:9:9)\n      at TestingModuleBuilder.createInstancesOfDependencies (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:118:9)\n      at TestingModuleBuilder.compile (../../../node_modules/.pnpm/@nestjs+testing@10.3.0_@nestjs+common@10.3.0_@nestjs+core@10.3.0_@nestjs+platform-express@10.3.0/node_modules/@nestjs/testing/testing-module.builder.js:74:9)\n      at Object.<anonymous> (e2e/inventory-kpis.e2e-spec.ts:10:23)\n","name":"/workspaces/chefcloud/services/api/test/e2e/inventory-kpis.e2e-spec.ts","startTime":1766887829521,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Billing (Black-box E2E)"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Black-box E2E) GET /readiness -> 200 (server is ready)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /readiness -> 200 (server is ready)"},{"ancestorTitles":["Billing (Black-box E2E)"],"duration":234,"failureDetails":[],"failureMessages":[],"fullName":"Billing (Black-box E2E) Rate limiting observed (>= one 429)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting observed (>= one 429)"}],"endTime":1766887831843,"message":"","name":"/workspaces/chefcloud/services/api/test/blackbox/billing.blackbox.e2e-spec.ts","startTime":1766887829715,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth E2E"],"duration":136,"failureDetails":[],"failureMessages":[],"fullName":"Auth E2E should login with email/password and return access_token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should login with email/password and return access_token"},{"ancestorTitles":["Auth E2E"],"duration":110,"failureDetails":[],"failureMessages":[],"fullName":"Auth E2E should reject invalid password","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should reject invalid password"}],"endTime":1766887833407,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/auth.e2e-spec.ts","startTime":1766887831848,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payments (Slice E2E)"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) GET /payments -> 401 without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"GET /payments -> 401 without token"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) GET /payments -> 200 with token (lists payments)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /payments -> 200 with token (lists payments)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) GET /payments/pay_001 -> 200","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /payments/pay_001 -> 200"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) GET /payments/pay_missing -> 404/400 (invalid id)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /payments/pay_missing -> 404/400 (invalid id)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments -> 201 (create payment)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /payments -> 201 (create payment)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments -> 400/422 (invalid payload)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /payments -> 400/422 (invalid payload)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments/pay_001/capture -> 200","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /payments/pay_001/capture -> 200"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments/pay_001/refund -> 201","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /payments/pay_001/refund -> 201"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments/intents -> 201 (create intent)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /payments/intents -> 201 (create intent)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments/intents/pi_001/cancel -> 200","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /payments/intents/pi_001/cancel -> 200"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments-test-webhook/gateway -> 200 (valid HMAC)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /payments-test-webhook/gateway -> 200 (valid HMAC)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments-test-webhook/gateway -> 200 { ok:false } (bad HMAC)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /payments-test-webhook/gateway -> 200 { ok:false } (bad HMAC)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) POST /payments-test-webhook/gateway -> 200 { ok:false } (missing signature)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"POST /payments-test-webhook/gateway -> 200 { ok:false } (missing signature)"},{"ancestorTitles":["Payments (Slice E2E)"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Payments (Slice E2E) Rate limiting produces >= one 429 on /payments","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 on /payments"}],"endTime":1766887833744,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/payments.slice.e2e-spec.ts","startTime":1766887833410,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["DI graph smoke test","Common services"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DI graph smoke test Common services should resolve CacheInvalidationService","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should resolve CacheInvalidationService"},{"ancestorTitles":["DI graph smoke test","Common services"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"DI graph smoke test Common services should resolve CacheService","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should resolve CacheService"},{"ancestorTitles":["DI graph smoke test","Common services"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"DI graph smoke test Common services should resolve RedisService","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should resolve RedisService"},{"ancestorTitles":["DI graph smoke test","Observability services"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"DI graph smoke test Observability services should resolve MetricsService","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should resolve MetricsService"},{"ancestorTitles":["DI graph smoke test","Observability services"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"DI graph smoke test Observability services should resolve ReadinessService","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should resolve ReadinessService"},{"ancestorTitles":["DI graph smoke test"],"duration":170,"failureDetails":[{"code":"ERR_UNHANDLED_ERROR","context":{}},{"code":"ERR_UNHANDLED_ERROR","context":{}}],"failureMessages":["Error: Unhandled error. (Error: Connection is closed.\n    at close (/workspaces/chefcloud/node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:214:25)\n    at Socket.<anonymous> (/workspaces/chefcloud/node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:181:20)\n    at Object.onceWrapper (node:events:639:26)\n    at Socket.emit (node:events:536:35)\n    at TCP.<anonymous> (node:net:343:12))\n    at RedisConnection.emit (node:events:513:17)\n    at /workspaces/chefcloud/node_modules/.pnpm/bullmq@5.61.2/node_modules/bullmq/src/classes/redis-connection.ts:133:41\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)","Error: Unhandled error. (Error: Connection is closed.\n    at close (/workspaces/chefcloud/node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:214:25)\n    at Socket.<anonymous> (/workspaces/chefcloud/node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:181:20)\n    at Object.onceWrapper (node:events:639:26)\n    at Socket.emit (node:events:536:35)\n    at TCP.<anonymous> (node:net:343:12))\n    at RedisConnection.emit (node:events:513:17)\n    at /workspaces/chefcloud/node_modules/.pnpm/bullmq@5.61.2/node_modules/bullmq/src/classes/redis-connection.ts:133:41\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"DI graph smoke test should boot app in reasonable time","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should boot app in reasonable time"}],"endTime":1766887834617,"message":"  ● DI graph smoke test › should boot app in reasonable time\n\n    Unhandled error. (Error: Connection is closed.\n\n      at close (../../../node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:214:25)\n      at Socket.<anonymous> (../../../node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:181:20)\n      at TCP.<anonymous> (../node:net:343:12))\n      at ../../../node_modules/.pnpm/bullmq@5.61.2/node_modules/bullmq/src/classes/redis-connection.ts:133:41\n\n  ● DI graph smoke test › should boot app in reasonable time\n\n    Unhandled error. (Error: Connection is closed.\n\n      at close (../../../node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:214:25)\n      at Socket.<anonymous> (../../../node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:181:20)\n      at TCP.<anonymous> (../node:net:343:12))\n      at ../../../node_modules/.pnpm/bullmq@5.61.2/node_modules/bullmq/src/classes/redis-connection.ts:133:41\n","name":"/workspaces/chefcloud/services/api/test/smoke/di.e2e-spec.ts","startTime":1766887833746,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Minimal Boot Test"],"duration":170,"failureDetails":[],"failureMessages":[],"fullName":"Minimal Boot Test should boot AppModule without errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should boot AppModule without errors"}],"endTime":1766887835895,"message":"","name":"/workspaces/chefcloud/services/api/test/smoke/minimal-boot.e2e-spec.ts","startTime":1766887834620,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth (Slice E2E) — Deterministic","POST /auth/login"],"duration":24,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic POST /auth/login returns 200 with access_token on valid credentials","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 200 with access_token on valid credentials"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","POST /auth/login"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic POST /auth/login returns 401 on invalid credentials","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 401 on invalid credentials"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","POST /auth/login"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic POST /auth/login returns 400 on invalid email format","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 400 on invalid email format"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","POST /auth/login"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic POST /auth/login returns 400 on missing password","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 400 on missing password"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","POST /auth/pin-login"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic POST /auth/pin-login returns 200 with access_token on valid PIN","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 200 with access_token on valid PIN"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","POST /auth/pin-login"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic POST /auth/pin-login returns 401 on invalid PIN","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 401 on invalid PIN"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","POST /auth/msr-swipe"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic POST /auth/msr-swipe returns 200 with access_token on valid badge","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 200 with access_token on valid badge"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","POST /auth/msr-swipe"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic POST /auth/msr-swipe returns 404 on unknown badge","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 404 on unknown badge"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","POST /auth/enroll-badge"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic POST /auth/enroll-badge returns 200 on successful badge enrollment (L4+ role)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 200 on successful badge enrollment (L4+ role)"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","GET /me"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic GET /me returns 401 without authorization header","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"returns 401 without authorization header"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","Rate limiting"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic Rate limiting handles burst requests to /auth/login without crashing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles burst requests to /auth/login without crashing"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","Login methods"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic Login methods supports email/password login","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"supports email/password login"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","Login methods"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic Login methods supports PIN login","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"supports PIN login"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","Login methods"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic Login methods supports badge swipe login","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"supports badge swipe login"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","Login methods"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic Login methods returns consistent user structure across all auth methods","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"returns consistent user structure across all auth methods"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","Endpoint availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic Endpoint availability POST /auth/login is available","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"POST /auth/login is available"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","Endpoint availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic Endpoint availability POST /auth/pin-login is available","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /auth/pin-login is available"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","Endpoint availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic Endpoint availability POST /auth/msr-swipe is available","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /auth/msr-swipe is available"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","Endpoint availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic Endpoint availability POST /auth/enroll-badge is available","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /auth/enroll-badge is available"},{"ancestorTitles":["Auth (Slice E2E) — Deterministic","Endpoint availability"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Auth (Slice E2E) — Deterministic Endpoint availability GET /me is available (requires auth)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /me is available (requires auth)"}],"endTime":1766887836252,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/auth.slice.e2e-spec.ts","startTime":1766887835902,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Purchasing (Slice E2E) — Deterministic","Authentication & Authorization"],"duration":24,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) — Deterministic Authentication & Authorization POST /purchasing/po should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po should return 401 if no authorization token is provided"},{"ancestorTitles":["Purchasing (Slice E2E) — Deterministic","Authentication & Authorization"],"duration":49,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) — Deterministic Authentication & Authorization POST /purchasing/po/:id/place should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po/:id/place should return 401 if no authorization token is provided"},{"ancestorTitles":["Purchasing (Slice E2E) — Deterministic","Authentication & Authorization"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) — Deterministic Authentication & Authorization POST /purchasing/po/:id/receive should return 401 if no authorization token is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po/:id/receive should return 401 if no authorization token is provided"},{"ancestorTitles":["Purchasing (Slice E2E) — Deterministic","Rate Limiting"],"duration":48,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) — Deterministic Rate Limiting Rate limiting produces >= one 429 deterministically","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Rate limiting produces >= one 429 deterministically"},{"ancestorTitles":["Purchasing (Slice E2E) — Deterministic","Basic Functionality (without auth)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) — Deterministic Basic Functionality (without auth) should bootstrap successfully without metatype errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should bootstrap successfully without metatype errors"},{"ancestorTitles":["Purchasing (Slice E2E) — Deterministic","Basic Functionality (without auth)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) — Deterministic Basic Functionality (without auth) POST /purchasing/po should validate request body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po should validate request body"},{"ancestorTitles":["Purchasing (Slice E2E) — Deterministic","Basic Functionality (without auth)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) — Deterministic Basic Functionality (without auth) POST /purchasing/po/:id/place should handle invalid ID gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po/:id/place should handle invalid ID gracefully"},{"ancestorTitles":["Purchasing (Slice E2E) — Deterministic","Endpoint Availability"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) — Deterministic Endpoint Availability POST /purchasing/po endpoint exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po endpoint exists"},{"ancestorTitles":["Purchasing (Slice E2E) — Deterministic","Endpoint Availability"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) — Deterministic Endpoint Availability POST /purchasing/po/:id/place endpoint exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po/:id/place endpoint exists"},{"ancestorTitles":["Purchasing (Slice E2E) — Deterministic","Endpoint Availability"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Purchasing (Slice E2E) — Deterministic Endpoint Availability POST /purchasing/po/:id/receive endpoint exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"POST /purchasing/po/:id/receive endpoint exists"}],"endTime":1766887836703,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/purchasing.slice.e2e-spec.ts","startTime":1766887836256,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Webhook Replay Protection (Slice E2E)"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Replay Protection (Slice E2E) accepts a valid (HMAC + fresh timestamp + new nonce)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"accepts a valid (HMAC + fresh timestamp + new nonce)"},{"ancestorTitles":["Webhook Replay Protection (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Replay Protection (Slice E2E) rejects replay of the same nonce","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects replay of the same nonce"},{"ancestorTitles":["Webhook Replay Protection (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Replay Protection (Slice E2E) rejects stale timestamp","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects stale timestamp"},{"ancestorTitles":["Webhook Replay Protection (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Webhook Replay Protection (Slice E2E) rejects bad signature","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"rejects bad signature"}],"endTime":1766887836931,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/webhook.replay.slice.e2e-spec.ts","startTime":1766887836717,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["SSE Black-Box Smoke (Slice E2E)"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"SSE Black-Box Smoke (Slice E2E) GET /sse-test/stream -> 401 without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /sse-test/stream -> 401 without token"},{"ancestorTitles":["SSE Black-Box Smoke (Slice E2E)"],"duration":22,"failureDetails":[],"failureMessages":[],"fullName":"SSE Black-Box Smoke (Slice E2E) Sends first SSE event quickly and has correct headers","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"Sends first SSE event quickly and has correct headers"},{"ancestorTitles":["SSE Black-Box Smoke (Slice E2E)"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"SSE Black-Box Smoke (Slice E2E) Event payload contains deterministic requestId from header","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Event payload contains deterministic requestId from header"},{"ancestorTitles":["SSE Black-Box Smoke (Slice E2E)"],"duration":41,"failureDetails":[],"failureMessages":[],"fullName":"SSE Black-Box Smoke (Slice E2E) Deterministic rate limit: >= one 429 on SSE connect burst","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Deterministic rate limit: >= one 429 on SSE connect burst"}],"endTime":1766887837161,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/sse.smoke.e2e-spec.ts","startTime":1766887836934,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Minimal Harness (No AppModule)"],"duration":47,"failureDetails":[],"failureMessages":[],"fullName":"Minimal Harness (No AppModule) should boot trivial module without hang","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should boot trivial module without hang"}],"endTime":1766887837291,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/minimal-harness.e2e-spec.ts","startTime":1766887837164,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Docs (env-gated)"],"duration":38,"failureDetails":[],"failureMessages":[],"fullName":"Docs (env-gated) returns 404 when DOCS_ENABLED!=1","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"returns 404 when DOCS_ENABLED!=1"},{"ancestorTitles":["Docs (env-gated)"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Docs (env-gated) serves OpenAPI JSON when DOCS_ENABLED=1","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"serves OpenAPI JSON when DOCS_ENABLED=1"}],"endTime":1766887837477,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/docs.e2e-spec.ts","startTime":1766887837297,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Forecast Caching (Slice E2E)"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Forecast Caching (Slice E2E) GET /forecast-test/sales -> 401 without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /forecast-test/sales -> 401 without token"},{"ancestorTitles":["Forecast Caching (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Forecast Caching (Slice E2E) GET /forecast-test/sales -> 400 for bad period","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"GET /forecast-test/sales -> 400 for bad period"},{"ancestorTitles":["Forecast Caching (Slice E2E)"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Forecast Caching (Slice E2E) MISS then HIT for same period","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"MISS then HIT for same period"},{"ancestorTitles":["Forecast Caching (Slice E2E)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Forecast Caching (Slice E2E) Invalidate then MISS with a new version","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"Invalidate then MISS with a new version"},{"ancestorTitles":["Forecast Caching (Slice E2E)"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Forecast Caching (Slice E2E) Separate period keys are independent (MISS on first read)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"Separate period keys are independent (MISS on first read)"},{"ancestorTitles":["Forecast Caching (Slice E2E)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Forecast Caching (Slice E2E) Deterministic rate limit: >= one 429 on sales","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Deterministic rate limit: >= one 429 on sales"}],"endTime":1766887837656,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/forecast.slice.e2e-spec.ts","startTime":1766887837480,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Metrics endpoint"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"Metrics endpoint /metrics returns text exposition","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"/metrics returns text exposition"}],"endTime":1766887837822,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/metrics.e2e-spec.ts","startTime":1766887837659,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EventsModule isolation test"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"EventsModule isolation test should compile EventsModule","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should compile EventsModule"}],"endTime":1766887837911,"message":"","name":"/workspaces/chefcloud/services/api/test/e2e/events-isolation.e2e-spec.ts","startTime":1766887837824,"status":"passed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1766887842432,"message":"  ● Test suite failed to run\n\n    AppModule.imports not accessible; in AppModule, add: public static __imports = [ ...imports ]\n\n      11 |\n      12 | if (!appModuleImports || !Array.isArray(appModuleImports)) {\n    > 13 |   throw new Error('AppModule.imports not accessible; in AppModule, add: public static __imports = [ ...imports ]');\n         |         ^\n      14 | }\n      15 |\n      16 | async function tryImports(imports: any[]) {\n\n      at Object.<anonymous> (e2e/app-bisect.e2e-spec.ts:13:9)\n","name":"/workspaces/chefcloud/services/api/test/e2e/app-bisect.e2e-spec.ts","startTime":1766887842432,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1766887842432,"message":"  ● Test suite failed to run\n\n    Cannot find module '../../src/dev-portal/ports/devportal.port' from 'e2e/devportal.prod.slice.e2e-spec.ts'\n\n      15 | import { SuperDevGuard } from '../../src/dev-portal.disabled/guards/super-dev.guard'; // Fixed: was dev-portal (now disabled)\n      16 | import { signBody } from '../payments/webhook.hmac';\n    > 17 | import { DevPortalKeyRepo } from '../../src/dev-portal/ports/devportal.port';\n         | ^\n      18 | import { TestBypassAuthGuard } from '../devportal/auth-override.guard';\n      19 | import { cleanup } from '../helpers/cleanup';\n      20 |\n\n      at Resolver._throwModNotFoundError (../../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.<anonymous> (e2e/devportal.prod.slice.e2e-spec.ts:17:1)\n","name":"/workspaces/chefcloud/services/api/test/e2e/devportal.prod.slice.e2e-spec.ts","startTime":1766887842432,"status":"failed","summary":""}],"wasInterrupted":false}
